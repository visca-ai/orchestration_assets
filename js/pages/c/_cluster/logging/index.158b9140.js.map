{"version":3,"sources":["webpack:///./shell/pages/c/_cluster/logging/index.vue","webpack:///shell/pages/c/_cluster/logging/index.vue","webpack:///./shell/pages/c/_cluster/logging/index.vue?789a","webpack:///./shell/pages/c/_cluster/logging/index.vue?d894","webpack:///./shell/utils/install-redirect.js","webpack:///./shell/components/ChartHeading.vue","webpack:///shell/components/ChartHeading.vue","webpack:///./shell/components/ChartHeading.vue?bc19","webpack:///./shell/components/ChartHeading.vue?751a"],"names":["render","_vm","this","_c","_self","staticClass","attrs","t","_v","hasClusterFlowAccess","_s","clusterFlowTableHeaders","clusterFlows","_e","class","namespaceFlowTableHeaders","flows","staticRenderFns","middleware","InstallRedirect","NAME","CHART_NAME","components","ChartHeading","SortableTable","fetch","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","getAllOrDefault","hash","wrap","_context","prev","next","type","hasAccess","$store","getters","dispatch","Promise","resolve","allHash","LOGGING","CLUSTER_FLOW","FLOW","clusterOutputs","CLUSTER_OUTPUT","outputs","OUTPUT","sent","stop","data","NAMESPACE","NAME_COL","CONFIGURED_PROVIDERS","computed","component","product","chartName","defaultResourceOrRoute","install","arguments","length","undefined","_middleware","_ref","_store$getters$curren","redirect","store","cluster","chart","_query","id","_typeof","abrupt","name","params","resource","force","query","_defineProperty","REPO_TYPE","repoType","REPO","repoName","CHART","VERSION","versions","version","concat","_x","apply","url","label","props","String","required"],"mappings":"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","file":"js/pages/c/_cluster/logging/index.158b9140.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"logging\"},[_c('ChartHeading',{attrs:{\"label\":_vm.t('logging.overview.poweredBy'),\"url\":\"https://github.com/banzaicloud/logging-operator\"}}),_vm._v(\" \"),_c('div',{staticClass:\"spacer\"}),_vm._v(\" \"),(_vm.hasClusterFlowAccess)?_c('div',[_c('h2',[_vm._v(_vm._s(_vm.t('logging.overview.clusterLevel')))]),_vm._v(\" \"),_c('SortableTable',{staticClass:\"sortable-table\",attrs:{\"headers\":_vm.clusterFlowTableHeaders,\"rows\":_vm.clusterFlows,\"row-actions\":false,\"search\":false,\"table-actions\":false,\"key-field\":\"id\"}})],1):_vm._e(),_vm._v(\" \"),_c('h2',{class:{ 'mt-20': _vm.hasClusterFlowAccess }},[_vm._v(\"\\n    \"+_vm._s(_vm.t('logging.overview.namespaceLevel'))+\"\\n  \")]),_vm._v(\" \"),_c('SortableTable',{staticClass:\"sortable-table\",attrs:{\"headers\":_vm.namespaceFlowTableHeaders,\"rows\":_vm.flows,\"row-actions\":false,\"search\":false,\"table-actions\":false,\"key-field\":\"id\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { NAME, CHART_NAME } from '@shell/config/product/logging';\nimport InstallRedirect from '@shell/utils/install-redirect';\nimport { LOGGING } from '@shell/config/types';\nimport SortableTable from '@shell/components/SortableTable';\nimport { allHash } from '@shell/utils/promise';\nimport {\n  CONFIGURED_PROVIDERS, CLUSTER_OUTPUT, OUTPUT, NAMESPACE, NAME as NAME_COL\n} from '@shell/config/table-headers';\nimport ChartHeading from '@shell/components/ChartHeading';\n\nexport default {\n  middleware: InstallRedirect(NAME, CHART_NAME),\n  components: { ChartHeading, SortableTable },\n  async fetch() {\n    const getAllOrDefault = (type) => {\n      const hasAccess = this.$store.getters[`cluster/schemaFor`](type);\n\n      return hasAccess ? this.$store.dispatch('cluster/findAll', { type }) : Promise.resolve([]);\n    };\n\n    const hash = await allHash({\n      clusterFlows:   getAllOrDefault(LOGGING.CLUSTER_FLOW),\n      flows:          getAllOrDefault(LOGGING.FLOW),\n      clusterOutputs: getAllOrDefault(LOGGING.CLUSTER_OUTPUT),\n      outputs:        getAllOrDefault(LOGGING.OUTPUT),\n    });\n\n    this.clusterFlows = hash.clusterFlows || [];\n    this.flows = hash.flows || [];\n  },\n\n  data() {\n    return {\n      clusterFlows:              [],\n      flows:                     [],\n      namespaceFlowTableHeaders: [\n        NAMESPACE,\n        NAME_COL,\n        OUTPUT,\n        CLUSTER_OUTPUT,\n        CONFIGURED_PROVIDERS\n      ],\n      clusterFlowTableHeaders: [\n        NAME_COL, CLUSTER_OUTPUT, CONFIGURED_PROVIDERS\n      ]\n    };\n  },\n\n  computed: {\n    hasClusterFlowAccess() {\n      return this.$store.getters[`cluster/schemaFor`](LOGGING.CLUSTER_FLOW);\n    }\n  },\n};\n</script>\n\n<template>\n  <div class=\"logging\">\n    <ChartHeading\n      :label=\"t('logging.overview.poweredBy')\"\n      url=\"https://github.com/banzaicloud/logging-operator\"\n    />\n    <div class=\"spacer\" />\n    <div v-if=\"hasClusterFlowAccess\">\n      <h2>{{ t('logging.overview.clusterLevel') }}</h2>\n      <SortableTable\n        class=\"sortable-table\"\n        :headers=\"clusterFlowTableHeaders\"\n        :rows=\"clusterFlows\"\n        :row-actions=\"false\"\n        :search=\"false\"\n        :table-actions=\"false\"\n        key-field=\"id\"\n      />\n    </div>\n    <h2 :class=\"{ 'mt-20': hasClusterFlowAccess }\">\n      {{ t('logging.overview.namespaceLevel') }}\n    </h2>\n    <SortableTable\n      class=\"sortable-table\"\n      :headers=\"namespaceFlowTableHeaders\"\n      :rows=\"flows\"\n      :row-actions=\"false\"\n      :search=\"false\"\n      :table-actions=\"false\"\n      key-field=\"id\"\n    />\n  </div>\n</template>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../../../../node_modules/babel-loader/lib/index.js??ref--16-1!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../../../../node_modules/babel-loader/lib/index.js??ref--16-1!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=68a3b04f&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { REPO_TYPE, REPO, CHART, VERSION } from '@shell/config/query-params';\n\nexport default function(product, chartName, defaultResourceOrRoute, install = true) {\n  return async function middleware({ redirect, store } ) {\n    const cluster = store.getters['currentCluster']?.id || 'local';\n\n    if ( store.getters['type-map/isProductActive'](product) ) {\n      // If the product is installed and there's a default resource, redirect there\n\n      if ( defaultResourceOrRoute ) {\n        if ( typeof defaultResourceOrRoute === 'object' ) {\n          return redirect(defaultResourceOrRoute);\n        }\n\n        return redirect({\n          name:   'c-cluster-product-resource',\n          params: {\n            cluster,\n            product,\n            resource: defaultResourceOrRoute\n          },\n        });\n      }\n\n      // Otherwise just let the middleware pass through\n    } else if (install) {\n      // The product is not installed, redirect to the details chart\n\n      await store.dispatch('catalog/load', { force: true });\n\n      const chart = store.getters['catalog/chart']({ chartName });\n\n      if ( chart ) {\n        return redirect({\n          name:   'c-cluster-apps-charts-chart',\n          params: { cluster },\n          query:  {\n            [REPO_TYPE]: chart.repoType,\n            [REPO]:      chart.repoName,\n            [CHART]:     chart.chartName,\n            [VERSION]:   chart.versions[0].version\n          },\n        });\n      } else {\n        // The chart's not available\n        store.dispatch('loadingError', `Chart not found for ${ product }`);\n      }\n    } else {\n      return redirect({\n        name:   'c-cluster-explorer',\n        params: { cluster },\n      });\n    }\n  };\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"chart-heading\"},[_c('h1',[_vm._v(_vm._s(_vm.t('chartHeading.overview')))]),_vm._v(\"\\n  \"+_vm._s(_vm.t('chartHeading.poweredBy'))+\" \"),_c('a',{attrs:{\"href\":_vm.url,\"rel\":\"nofollow noopener noreferrer\",\"target\":\"_blank\"}},[_vm._v(_vm._s(_vm.label))])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nexport default {\n  props: {\n    label: {\n      type:     String,\n      required: true\n    },\n    url: {\n      type:     String,\n      required: true\n    }\n  }\n};\n</script>\n\n<template>\n  <div class=\"chart-heading\">\n    <h1>{{ t('chartHeading.overview') }}</h1>\n    {{ t('chartHeading.poweredBy') }} <a\n      :href=\"url\"\n      rel=\"nofollow noopener noreferrer\"\n      target=\"_blank\"\n    >{{ label }}</a>\n  </div>\n</template>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../node_modules/babel-loader/lib/index.js??ref--16-1!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ChartHeading.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../node_modules/babel-loader/lib/index.js??ref--16-1!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ChartHeading.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ChartHeading.vue?vue&type=template&id=3fa1a3e2&\"\nimport script from \"./ChartHeading.vue?vue&type=script&lang=js&\"\nexport * from \"./ChartHeading.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}