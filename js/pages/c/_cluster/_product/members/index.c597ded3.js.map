{"version":3,"sources":["webpack:///./shell/components/ExplorerMembers.vue?2e1b","webpack:///./shell/components/ExplorerMembers.vue?2d18","webpack:///./shell/components/ExplorerMembers.vue?dd45","webpack:///./shell/pages/c/_cluster/_product/members/index.vue","webpack:///./shell/components/ExplorerMembers.vue","webpack:///shell/components/ExplorerMembers.vue","webpack:///./shell/components/ExplorerMembers.vue?27b2","webpack:///./shell/components/ExplorerMembers.vue?fe98","webpack:///shell/pages/c/_cluster/_product/members/index.vue","webpack:///./shell/pages/c/_cluster/_product/members/index.vue?fd65","webpack:///./shell/pages/c/_cluster/_product/members/index.vue?bb56"],"names":["content","__esModule","default","module","i","locals","exports","add","___CSS_LOADER_API_IMPORT___","push","render","_vm","this","_c","_self","_b","$attrs","staticRenderFns","staticClass","attrs","schema","resource","VIRTUAL_TYPES","CLUSTER_MEMBERS","createLocation","t","_v","isLocal","_e","canEditClusterMembers","_s","headers","filteredClusterRoleTemplateBindings","$fetchState","pending","currentCluster","loadingClusterBindings","canManageProjectMembers","loadingProjectBindings","rowsWithFakeProjects","projectRoleTemplateColumns","scopedSlots","_u","key","fn","group","directives","name","rawName","value","getProjectLabel","expression","canEditProjectMembers","on","$event","addProjectMember","_ref","row","_l","allRoles","role","j","ref","refInFor","concat","class","canViewInApi","viewRoleInAPI","nameDisplay","removeRole","projectsWithoutRoles","project","slotName","id","proxy","components","Banner","Masthead","ResourceTable","Tabbed","Tab","SortableTable","props","createLocationOverride","type","Object","params","MANAGEMENT","CLUSTER_ROLE_TEMPLATE_BINDING","fetch","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","clusterRoleTemplateBindingSchema","projectRoleTemplateBindingSchema","hydration","wrap","_context","prev","next","$store","getters","NORMAN","PROJECT_ROLE_TEMPLATE_BINDING","$set","Promise","all","dispatch","root","then","_ref2","_slicedToArray","normanBindings","bindings","PROJECT","projects","normanPrincipals","PRINCIPAL","mgmt","USER","mgmtRoleTemplates","ROLE_TEMPLATE","allHash","stop","data","STATE","ROLE","AGE","_objectSpread","cluster","normanClusterRTBSchema","normanProjectRTBSchema","normanClusterRoleTemplateBindings","projectRoleTemplateBindings","labeKey","formatter","labelKey","computed","mapGetters","clusterRoleTemplateBindings","map","b","clusterroletemplatebinding","_this2","filter","clusterName","filteredProjects","_this3","reduce","p","_p$spec","spec","filteredProjectRoleTemplateBindings","_this4","out","rb","projectId","replace","_this5","inUse","binding","thisProjectId","includes","keys","fakeRows","_project$spec","groupByLabel","isFake","mainRowKey","displayName","availableActions","userRoles","_toConsumableArray","rows","curr","userId","groupPrincipalId","roleTemplate","userOrGroup","userOrGroupKey","values","canManageMembers","canViewClusterPermissionsEditor","canViewProjectMembershipEditor","_this$normanProjectRT","collectionMethods","find","x","toLowerCase","_this$normanClusterRT","methods","getMgmtProjectId","getMgmtProject","_this$getMgmtProject","_this$getMgmtProject$","component","componentProps","saveInModal","modalSticky","getProjectRoleBinding","r","roleTemplateId","event","_this6","_callee2","_context2","promptRemove","viewInApi","ExplorerMembers"],"mappings":"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","file":"js/pages/c/_cluster/_product/members/index.c597ded3.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-3!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ExplorerMembers.vue?vue&type=style&index=0&id=2b9882d0&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"457690a7\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","export * from \"-!../../node_modules/vue-style-loader/index.js??ref--9-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-3!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ExplorerMembers.vue?vue&type=style&index=0&id=2b9882d0&prod&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".role[data-v-2b9882d0]{align-items:center;background-color:rgba(0,0,0,.05);border:1px solid var(--header-border);border-radius:5px;color:var(--tag-text);line-height:20px;padding:2px 5px;white-space:nowrap;display:inline-flex;margin-right:3px}.role-value.text-link-enabled[data-v-2b9882d0]{cursor:pointer}.role-value.text-link-enabled[data-v-2b9882d0]:hover{color:var(--primary)}.role-value+.icon-close[data-v-2b9882d0]{margin-left:3px;cursor:pointer}.role-value+.icon-close[data-v-2b9882d0]:hover{color:var(--primary)}.project-members[data-v-2b9882d0] .group-bar{display:flex;justify-content:space-between}.cluster-add[data-v-2b9882d0]{justify-content:flex-end}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('ExplorerMembers',_vm._b({},'ExplorerMembers',_vm.$attrs,false))\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"project-members\"},[_c('Masthead',{attrs:{\"schema\":_vm.schema,\"resource\":_vm.resource,\"favorite-resource\":_vm.VIRTUAL_TYPES.CLUSTER_MEMBERS,\"create-location\":_vm.createLocation,\"create-button-label\":_vm.t('members.createActionLabel'),\"is-creatable\":false,\"type-display\":_vm.t('members.clusterAndProject')}}),_vm._v(\" \"),(_vm.isLocal)?_c('Banner',{attrs:{\"color\":\"error\",\"label\":_vm.t('members.localClusterWarning')}}):_vm._e(),_vm._v(\" \"),_c('Tabbed',[_c('Tab',{attrs:{\"name\":\"cluster-membership\",\"label\":_vm.t('members.clusterMemebership')}},[(_vm.canEditClusterMembers)?_c('div',{staticClass:\"row mb-10 cluster-add\"},[_c('n-link',{staticClass:\"btn role-primary pull-right\",attrs:{\"to\":_vm.createLocation}},[_vm._v(\"\\n          \"+_vm._s(_vm.t('members.createActionLabel'))+\"\\n        \")])],1):_vm._e(),_vm._v(\" \"),_c('ResourceTable',{attrs:{\"schema\":_vm.schema,\"headers\":_vm.headers,\"rows\":_vm.filteredClusterRoleTemplateBindings,\"groupable\":true,\"show-grouping\":true,\"namespaced\":false,\"loading\":_vm.$fetchState.pending || !_vm.currentCluster || _vm.loadingClusterBindings,\"sub-search\":\"subSearch\",\"sub-fields\":['nameDisplay']}})],1),_vm._v(\" \"),(_vm.canManageProjectMembers)?_c('Tab',{attrs:{\"name\":\"project-membership\",\"label\":_vm.t('members.projectMembership')}},[_c('SortableTable',{attrs:{\"group-by\":\"projectId\",\"loading\":_vm.$fetchState.pending || !_vm.currentCluster || _vm.loadingProjectBindings,\"rows\":_vm.rowsWithFakeProjects,\"headers\":_vm.projectRoleTemplateColumns,\"table-actions\":false,\"row-actions\":false},scopedSlots:_vm._u([{key:\"group-by\",fn:function(group){return [_c('div',{staticClass:\"group-bar\"},[_c('div',{directives:[{name:\"trim-whitespace\",rawName:\"v-trim-whitespace\"}],staticClass:\"group-tab\"},[_c('div',{directives:[{name:\"clean-html\",rawName:\"v-clean-html\",value:(_vm.getProjectLabel(group)),expression:\"getProjectLabel(group)\"}],staticClass:\"project-name\"})]),_vm._v(\" \"),_c('div',{staticClass:\"right\"},[(_vm.canEditProjectMembers)?_c('button',{staticClass:\"create-namespace btn btn-sm role-secondary mr-10 right\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.addProjectMember(group)}}},[_vm._v(\"\\n                \"+_vm._s(_vm.t('members.createActionLabel'))+\"\\n              \")]):_vm._e()])])]}},{key:\"cell:role\",fn:function({row}){return _vm._l((row.allRoles),function(role,j){return _c('span',{key:j,ref:\"value\",refInFor:true,staticClass:\"role\",attrs:{\"data-testid\":`role-value-${j}`}},[_c('span',{staticClass:\"role-value\",class:{'text-link-enabled' : row.canViewInApi},on:{\"click\":function($event){return _vm.viewRoleInAPI(row, role)}}},[_vm._v(\"\\n              \"+_vm._s(role.nameDisplay)+\"\\n            \")]),_vm._v(\" \"),_c('i',{staticClass:\"icon icon-close\",attrs:{\"data-testid\":`role-values-close-${j}`},on:{\"click\":function($event){return _vm.removeRole(row, role, $event)}}})])})}},_vm._l((_vm.projectsWithoutRoles),function(project){return {key:_vm.slotName(project),fn:function(){return [_c('tr',{key:project.id,staticClass:\"main-row\"},[_c('td',{staticClass:\"empty text-center\",attrs:{\"colspan\":\"100%\"}},[_vm._v(\"\\n              \"+_vm._s(_vm.t('members.noRolesAssigned'))+\"\\n            \")])])]},proxy:true}})],null,true)})],1):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { MANAGEMENT, NORMAN, VIRTUAL_TYPES } from '@shell/config/types';\nimport ResourceTable from '@shell/components/ResourceTable';\nimport Masthead from '@shell/components/ResourceList/Masthead';\nimport { AGE, ROLE, STATE, PRINCIPAL } from '@shell/config/table-headers';\nimport { canViewClusterPermissionsEditor } from '@shell/components/form/Members/ClusterPermissionsEditor.vue';\nimport Banner from '@components/Banner/Banner.vue';\nimport Tabbed from '@shell/components/Tabbed/index.vue';\nimport Tab from '@shell/components/Tabbed/Tab.vue';\nimport SortableTable from '@shell/components/SortableTable';\nimport { mapGetters } from 'vuex';\nimport { canViewProjectMembershipEditor } from '@shell/components/form/Members/ProjectMembershipEditor.vue';\nimport { allHash } from '@shell/utils/promise';\n\n/**\n * Explorer members page.\n * Route: /c/local/explorer/members\n */\nexport default {\n  name: 'ExplorerMembers',\n\n  components: {\n    Banner,\n    Masthead,\n    ResourceTable,\n    Tabbed,\n    Tab,\n    SortableTable\n  },\n\n  props: {\n    // Cluster tole template binding create route - defaults to the explorer route\n    createLocationOverride: {\n      type:    Object,\n      default: () => {\n        return {\n          name:   'c-cluster-product-resource-create',\n          params: { resource: MANAGEMENT.CLUSTER_ROLE_TEMPLATE_BINDING }\n        };\n      }\n    }\n  },\n\n  async fetch() {\n    const clusterRoleTemplateBindingSchema = this.$store.getters[\n      `rancher/schemaFor`\n    ](NORMAN.CLUSTER_ROLE_TEMPLATE_BINDING);\n\n    const projectRoleTemplateBindingSchema = this.$store.getters['rancher/schemaFor'](NORMAN.PROJECT_ROLE_TEMPLATE_BINDING);\n\n    this.$set(this, 'normanClusterRTBSchema', clusterRoleTemplateBindingSchema);\n    this.$set(this, 'normanProjectRTBSchema', projectRoleTemplateBindingSchema);\n\n    if (clusterRoleTemplateBindingSchema) {\n      Promise.all([\n        this.$store.dispatch(`rancher/findAll`, { type: NORMAN.CLUSTER_ROLE_TEMPLATE_BINDING }, { root: true }),\n        this.$store.dispatch(`management/findAll`, { type: MANAGEMENT.CLUSTER_ROLE_TEMPLATE_BINDING })\n      ]).then(([normanBindings]) => {\n        this.$set(this, 'normanClusterRoleTemplateBindings', normanBindings);\n        this.loadingClusterBindings = false;\n      });\n    }\n\n    if (projectRoleTemplateBindingSchema) {\n      this.$store.dispatch('rancher/findAll', { type: NORMAN.PROJECT_ROLE_TEMPLATE_BINDING }, { root: true })\n        .then((bindings) => {\n          this.$set(this, 'projectRoleTemplateBindings', bindings);\n          this.loadingProjectBindings = false;\n        });\n    }\n\n    this.$store.dispatch('management/findAll', { type: MANAGEMENT.PROJECT })\n      .then((projects) => this.$set(this, 'projects', projects));\n\n    const hydration = {\n      normanPrincipals:  this.$store.dispatch('rancher/findAll', { type: NORMAN.PRINCIPAL }),\n      mgmt:              this.$store.dispatch(`management/findAll`, { type: MANAGEMENT.USER }),\n      mgmtRoleTemplates: this.$store.dispatch(`management/findAll`, { type: MANAGEMENT.ROLE_TEMPLATE }),\n    };\n\n    await allHash(hydration);\n  },\n\n  data() {\n    return {\n      schema: this.$store.getters[`management/schemaFor`](\n        MANAGEMENT.CLUSTER_ROLE_TEMPLATE_BINDING\n      ),\n      headers:        [STATE, PRINCIPAL, ROLE, AGE],\n      createLocation: {\n        ...this.createLocationOverride,\n        params: {\n          ...this.createLocationOverride.params,\n          cluster: this.$store.getters['currentCluster'].id\n        }\n      },\n      resource:                          MANAGEMENT.CLUSTER_ROLE_TEMPLATE_BINDING,\n      normanClusterRTBSchema:            null,\n      normanProjectRTBSchema:            null,\n      normanClusterRoleTemplateBindings: [],\n      projectRoleTemplateBindings:       [],\n      projects:                          [],\n      VIRTUAL_TYPES,\n      projectRoleTemplateColumns:        [\n        STATE,\n        {\n          name:      'member',\n          labeKey:   'generic.name',\n          value:     'principalId',\n          formatter: 'Principal'\n        },\n        {\n          name:     'role',\n          labelKey: 'tableHeaders.role',\n          value:    'roleTemplate.nameDisplay'\n        },\n      ],\n      loadingProjectBindings: true,\n      loadingClusterBindings: true\n    };\n  },\n\n  computed: {\n    ...mapGetters(['currentCluster']),\n    clusterRoleTemplateBindings() {\n      return this.normanClusterRoleTemplateBindings.map((b) => b.clusterroletemplatebinding) ;\n    },\n    filteredClusterRoleTemplateBindings() {\n      return this.clusterRoleTemplateBindings.filter(\n        (b) => b?.clusterName === this.$store.getters['currentCluster'].id\n      );\n    },\n    filteredProjects() {\n      return this.projects.reduce((all, p) => {\n        if (p?.spec?.clusterName === this.currentCluster.id) {\n          all[p.id] = p;\n        }\n\n        return all;\n      }, {});\n    },\n    filteredProjectRoleTemplateBindings() {\n      const out = this.projectRoleTemplateBindings.filter((rb) => {\n        const projectId = rb.projectId.replace(':', '/');\n\n        return !!this.filteredProjects[projectId];\n      });\n\n      return out;\n    },\n    projectsWithoutRoles() {\n      const inUse = this.filteredProjectRoleTemplateBindings.reduce((projects, binding) => {\n        const thisProjectId = (binding.projectId || '').replace(':', '/');\n\n        if (!projects.includes(thisProjectId)) {\n          projects.push(thisProjectId);\n        }\n\n        return projects;\n      }, []);\n\n      return Object.keys(this.filteredProjects).reduce((all, projectId) => {\n        const project = this.filteredProjects[projectId];\n\n        if ( !inUse.includes(projectId)) {\n          all.push(project);\n        }\n\n        return all;\n      }, []);\n    },\n\n    // We're using this because we need to show projects as groups even if the project doesn't have any role bindings\n    rowsWithFakeProjects() {\n      const fakeRows = this.projectsWithoutRoles.map((project) => {\n        return {\n          groupByLabel:     `${ ('resourceTable.groupLabel.notInAProject') }-${ project.id }`,\n          isFake:           true,\n          mainRowKey:       project.id,\n          nameDisplay:      project.spec?.displayName, // Enable filtering by the project name\n          project,\n          availableActions: [],\n          projectId:        project.id\n        };\n      });\n\n      // We need to group each of the TemplateRoleBindings by the user + project\n      const userRoles = [...fakeRows, ...this.filteredProjectRoleTemplateBindings].reduce((rows, curr) => {\n        const {\n          userId, groupPrincipalId, roleTemplate, projectId\n        } = curr;\n\n        const userOrGroup = userId || groupPrincipalId;\n\n        if (!userOrGroup) {\n          return rows;\n        }\n\n        const userOrGroupKey = userOrGroup + projectId;\n\n        if (!rows[userOrGroupKey] ) {\n          rows[userOrGroupKey] = curr;\n          rows[userOrGroupKey].allRoles = [];\n        }\n\n        if (roleTemplate) {\n          rows[userOrGroupKey].allRoles.push(curr.roleTemplate);\n        }\n\n        return rows;\n      }, {});\n\n      return Object.values(userRoles);\n    },\n    canManageMembers() {\n      return canViewClusterPermissionsEditor(this.$store);\n    },\n    canManageProjectMembers() {\n      return canViewProjectMembershipEditor(this.$store);\n    },\n    isLocal() {\n      return this.$store.getters['currentCluster'].isLocal;\n    },\n    canEditProjectMembers() {\n      return this.normanProjectRTBSchema?.collectionMethods.find((x) => x.toLowerCase() === 'post');\n    },\n    canEditClusterMembers() {\n      return this.normanClusterRTBSchema?.collectionMethods.find((x) => x.toLowerCase() === 'post');\n    },\n  },\n  methods: {\n    getMgmtProjectId(group) {\n      return group.group.key.replace(':', '/');\n    },\n    getMgmtProject(group) {\n      return this.$store.getters['management/byId'](MANAGEMENT.PROJECT, this.getMgmtProjectId(group));\n    },\n    getProjectLabel(group) {\n      return this.getMgmtProject(group)?.spec?.displayName;\n    },\n    addProjectMember(group) {\n      this.$store.dispatch('cluster/promptModal', {\n        component:      'AddProjectMemberDialog',\n        componentProps: {\n          projectId:   group.group.key.replace('/', ':'),\n          saveInModal: true\n        },\n        modalSticky: true\n      });\n    },\n\n    getProjectRoleBinding(row, role) {\n      // Each row is a combination of project, role and user/group\n      // So find the specfic roleBindingTemplate corresponding to the specific project, role + user/group\n      const userOrGroupKey = row.userId ? 'userId' : 'groupPrincipalId';\n\n      return this.projectRoleTemplateBindings.find((r) => {\n        return r.projectId === row.projectId && r.roleTemplateId === role.id && r[userOrGroupKey] === row[userOrGroupKey];\n      });\n    },\n\n    async removeRole(row, role, event) {\n      const resource = this.getProjectRoleBinding(row, role);\n\n      await resource.promptRemove();\n    },\n\n    viewRoleInAPI(row, role) {\n      const resource = this.getProjectRoleBinding(row, role);\n\n      if (resource?.canViewInApi) {\n        resource.viewInApi();\n      }\n    },\n    slotName(project) {\n      return `main-row:${ project.id }`;\n    },\n  }\n};\n</script>\n\n<template>\n  <div class=\"project-members\">\n    <Masthead\n      :schema=\"schema\"\n      :resource=\"resource\"\n      :favorite-resource=\"VIRTUAL_TYPES.CLUSTER_MEMBERS\"\n      :create-location=\"createLocation\"\n      :create-button-label=\"t('members.createActionLabel')\"\n      :is-creatable=\"false\"\n      :type-display=\"t('members.clusterAndProject')\"\n    />\n    <Banner\n      v-if=\"isLocal\"\n      color=\"error\"\n      :label=\"t('members.localClusterWarning')\"\n    />\n    <Tabbed>\n      <Tab\n        name=\"cluster-membership\"\n        :label=\"t('members.clusterMemebership')\"\n      >\n        <div\n          v-if=\"canEditClusterMembers\"\n          class=\"row mb-10 cluster-add\"\n        >\n          <n-link\n            :to=\"createLocation\"\n            class=\"btn role-primary pull-right\"\n          >\n            {{ t('members.createActionLabel') }}\n          </n-link>\n        </div>\n        <ResourceTable\n          :schema=\"schema\"\n          :headers=\"headers\"\n          :rows=\"filteredClusterRoleTemplateBindings\"\n          :groupable=\"true\"\n          :show-grouping=\"true\"\n          :namespaced=\"false\"\n          :loading=\"$fetchState.pending || !currentCluster || loadingClusterBindings\"\n          sub-search=\"subSearch\"\n          :sub-fields=\"['nameDisplay']\"\n        />\n      </Tab>\n      <Tab\n        v-if=\"canManageProjectMembers\"\n        name=\"project-membership\"\n        :label=\"t('members.projectMembership')\"\n      >\n        <SortableTable\n          group-by=\"projectId\"\n          :loading=\"$fetchState.pending || !currentCluster || loadingProjectBindings\"\n          :rows=\"rowsWithFakeProjects\"\n          :headers=\"projectRoleTemplateColumns\"\n          :table-actions=\"false\"\n          :row-actions=\"false\"\n        >\n          <template #group-by=\"group\">\n            <div class=\"group-bar\">\n              <div\n                v-trim-whitespace\n                class=\"group-tab\"\n              >\n                <div\n                  v-clean-html=\"getProjectLabel(group)\"\n                  class=\"project-name\"\n                />\n              </div>\n              <div class=\"right\">\n                <button\n                  v-if=\"canEditProjectMembers\"\n                  type=\"button\"\n                  class=\"create-namespace btn btn-sm role-secondary mr-10 right\"\n                  @click=\"addProjectMember(group)\"\n                >\n                  {{ t('members.createActionLabel') }}\n                </button>\n              </div>\n            </div>\n          </template>\n          <template\n            #cell:role=\"{row}\"\n          >\n            <span\n              v-for=\"(role, j) in row.allRoles\"\n              :key=\"j\"\n\n              ref=\"value\"\n              :data-testid=\"`role-value-${j}`\"\n              class=\"role\"\n            >\n              <span\n                class=\"role-value\"\n                :class=\"{'text-link-enabled' : row.canViewInApi}\"\n                @click=\"viewRoleInAPI(row, role)\"\n              >\n                {{ role.nameDisplay }}\n              </span>\n              <i\n                class=\"icon icon-close\"\n                :data-testid=\"`role-values-close-${j}`\"\n                @click=\"removeRole(row, role, $event)\"\n              />\n            </span>\n          </template>\n          <template\n            v-for=\"project in projectsWithoutRoles\"\n            v-slot:[slotName(project)]\n          >\n            <tr\n              :key=\"project.id\"\n              class=\"main-row\"\n            >\n              <td\n                class=\"empty text-center\"\n                colspan=\"100%\"\n              >\n                {{ t('members.noRolesAssigned') }}\n              </td>\n            </tr>\n          </template>\n        </SortableTable>\n      </Tab>\n    </Tabbed>\n  </div>\n</template>\n\n<style lang='scss' scoped>\n\n.role {\n  align-items: center;\n    background-color: rgba(0, 0, 0, 0.05);\n    border: 1px solid var(--header-border);\n    border-radius: 5px;\n    color: var(--tag-text);\n    line-height: 20px;\n    padding: 2px 5px;\n    white-space: nowrap;\n    display: inline-flex;\n    margin-right: 3px;\n}\n\n.role-value {\n  &.text-link-enabled {\n    cursor: pointer;\n    &:hover {\n      color: var(--primary);\n    }\n  }\n  + .icon-close {\n    margin-left: 3px;\n    cursor: pointer;\n    &:hover {\n      color: var(--primary);\n    }\n  }\n}\n\n.project-members {\n  & ::v-deep .group-bar{\n    display: flex;\n    justify-content: space-between;\n  }\n}\n.cluster-add {\n  justify-content: flex-end;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../node_modules/babel-loader/lib/index.js??ref--16-1!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ExplorerMembers.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../node_modules/babel-loader/lib/index.js??ref--16-1!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./ExplorerMembers.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ExplorerMembers.vue?vue&type=template&id=2b9882d0&scoped=true&\"\nimport script from \"./ExplorerMembers.vue?vue&type=script&lang=js&\"\nexport * from \"./ExplorerMembers.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ExplorerMembers.vue?vue&type=style&index=0&id=2b9882d0&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2b9882d0\",\n  null\n  \n)\n\nexport default component.exports","<script>\nimport ExplorerMembers from '@shell/components/ExplorerMembers';\nexport default { components: { ExplorerMembers } };\n</script>\n\n<template>\n  <ExplorerMembers v-bind=\"$attrs\" />\n</template>\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../../../../../node_modules/babel-loader/lib/index.js??ref--16-1!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../../../../../node_modules/babel-loader/lib/index.js??ref--16-1!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=5a45b633&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}