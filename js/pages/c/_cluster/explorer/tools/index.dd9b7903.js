(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/c/_cluster/explorer/tools/index"],{"08e0":function(t,e,a){var r=a("4bad");e=r(!1),e.push([t.i,'.grid[data-v-77e87a37]{display:flex;justify-content:flex-start;flex-wrap:wrap;margin:0 -10px}@media only screen and (min-width:480px){.grid .item[data-v-77e87a37]{width:100%}}@media only screen and (min-width:768px){.grid .item[data-v-77e87a37]{width:100%}}@media only screen and (min-width:992px){.grid .item[data-v-77e87a37]{width:calc(50% - 20px)}}@media only screen and (min-width:1281px){.grid .item[data-v-77e87a37]{width:calc(33.33333% - 20px)}}.grid .item[data-v-77e87a37]{display:grid;grid-template-areas:"logo name-version name-version" "description description description" "state state action";grid-template-columns:50px auto min-content;grid-template-rows:50px 55px 35px;row-gap:10px;-moz-column-gap:10px;column-gap:10px;margin:10px;padding:10px;position:relative;border:1px solid var(--border);border-radius:calc(var(--border-radius)*1.5)}.grid .item .logo[data-v-77e87a37]{grid-area:logo;text-align:center;width:50px;height:50px;border-radius:calc(var(--border-radius)*2);overflow:hidden;background-color:#fff}.grid .item .logo.legacy[data-v-77e87a37]{background-color:transparent}.grid .item .logo img[data-v-77e87a37]{width:46px;height:46px;-o-object-fit:contain;object-fit:contain;position:relative;top:2px}.grid .item .logo>i[data-v-77e87a37]{background-color:var(--box-bg);border-radius:50%;font-size:32px;line-height:50px;width:50px}.grid .item .name-version[data-v-77e87a37]{grid-area:name-version;padding:10px 0 0 0}.grid .item .name[data-v-77e87a37]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin:0}.grid .item .os-label[data-v-77e87a37]{position:absolute;top:10px;right:10px;padding:3px;font-size:12px;line-height:12px;background-color:var(--primary);color:var(--primary-text)}.grid .item .version[data-v-77e87a37]{color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:.9em;margin-top:4px}.grid .item .description[data-v-77e87a37]{grid-area:description}.grid .item .description-content[data-v-77e87a37]{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;line-clamp:3;overflow:hidden;text-overflow:ellipsis;color:var(--text-muted)}.grid .item .state[data-v-77e87a37]{grid-area:state}.grid .item .action[data-v-77e87a37]{grid-area:action;white-space:nowrap}.grid .item .action button[data-v-77e87a37]{height:30px}',""]),t.exports=e},4439:function(t,e,a){var r=a("08e0");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var n=a("499e").default;n("00de60ee",r,!0,{sourceMap:!1,shadowMode:!1})},aedb:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return t.$fetchState.pending?e("Loading"):t.options.length?e("div",[e("h1",{directives:[{name:"clean-html",rawName:"v-clean-html",value:t.t("catalog.tools.header"),expression:"t('catalog.tools.header')"}]}),t._v(" "),t.legacyEnabled?t._e():e("TypeDescription",{attrs:{resource:"chart"}}),t._v(" "),e("div",{staticClass:"grid"},t._l(t.options,(function(a){return e("div",{key:a.chart.id,staticClass:"item"},[e("div",{staticClass:"logo",class:{legacy:a.chart.legacy}},[a.chart.iconName?e("i",{staticClass:"icon",class:a.chart.iconName}):e("LazyImage",{attrs:{src:a.chart.icon}})],1),t._v(" "),e("div",{staticClass:"name-version"},[e("div",[e("h3",{staticClass:"name"},[t._v("\n            "+t._s(a.chart.chartNameDisplay)+"\n          ")]),t._v(" "),a.chart.deploysOnWindows?e("label",{staticClass:"os-label"},[t._v(t._s(t.t("catalog.charts.deploysOnWindows")))]):t._e()]),t._v(" "),e("div",{staticClass:"version"},[a.app&&a.app.upgradeAvailable?[t._v("\n            v"+t._s(a.app.currentVersion)+" "),e("b",[e("i",{staticClass:"icon icon-chevron-right"}),t._v(" v"+t._s(a.app.upgradeAvailable))])]:a.app?[t._v("\n            v"+t._s(a.app.currentVersion)+"\n          ")]:a.chart.versions.length?[t._v("\n            v"+t._s(a.chart.versions[0].version)+"\n          ")]:t._e()],2)]),t._v(" "),e("div",{staticClass:"description"},[e("div",{directives:[{name:"clean-html",rawName:"v-clean-html",value:a.chart.chartDescription,expression:"opt.chart.chartDescription"}],staticClass:"description-content"})]),t._v(" "),a.app&&!a.chart.legacy?e("div",{staticClass:"state"},[e("AppSummaryGraph",{attrs:{row:a.app,"label-key":"generic.resourceCount","link-to":a.app.detailLocation}})],1):t._e(),t._v(" "),e("div",{staticClass:"action"},[a.blocked?[e("button",{directives:[{name:"clean-html",rawName:"v-clean-html",value:t.t("catalog.tools.action.install"),expression:"t('catalog.tools.action.install')"}],staticClass:"btn btn-sm role-primary",attrs:{disabled:"true"}})]:a.app&&a.chart.legacy?[e("button",{directives:[{name:"clean-html",rawName:"v-clean-html",value:t.t("catalog.tools.action.manage"),expression:"t('catalog.tools.action.manage')"}],staticClass:"btn btn-sm role-secondary",on:{click:function(e){return t.openV1Tool(a.chart.legacyPage)}}})]:a.app&&a.upgradeAvailable&&!a.chart.legacy?[e("button",{staticClass:"btn btn-sm role-secondary",on:{click:function(e){return t.remove(a.app,e)}}},[e("i",{staticClass:"icon icon-delete icon-lg"})]),t._v(" "),e("button",{directives:[{name:"clean-html",rawName:"v-clean-html",value:t.t("catalog.tools.action.upgrade"),expression:"t('catalog.tools.action.upgrade')"}],staticClass:"btn btn-sm role-secondary",on:{click:function(e){return t.edit(a.app,a.app.upgradeAvailable)}}})]:a.app?[e("button",{staticClass:"btn btn-sm role-secondary",on:{click:function(e){return t.remove(a.app,e)}}},[e("i",{staticClass:"icon icon-delete icon-lg"})]),t._v(" "),e("button",{directives:[{name:"clean-html",rawName:"v-clean-html",value:t.t("catalog.tools.action.edit"),expression:"t('catalog.tools.action.edit')"}],staticClass:"btn btn-sm role-secondary",on:{click:function(e){return t.edit(a.app)}}})]:a.chart.legacy?[e("button",{directives:[{name:"clean-html",rawName:"v-clean-html",value:t.t("catalog.tools.action.install"),expression:"t('catalog.tools.action.install')"}],staticClass:"btn btn-sm role-primary",on:{click:function(e){return t.openV1Tool(a.chart.legacyPage)}}})]:[e("button",{directives:[{name:"clean-html",rawName:"v-clean-html",value:t.t("catalog.tools.action.install"),expression:"t('catalog.tools.action.install')"}],staticClass:"btn btn-sm role-primary",on:{click:function(e){return t.install(a.chart)}}})]],2)])})),0)],1):e("div",[e("IconMessage",{attrs:{icon:"icon-warning","message-key":"catalog.tools.noTools"}})],1)},n=[],i=(a("b64b"),a("a4d3"),a("e439"),a("dbb4"),a("fb6a"),a("b0c0"),a("a630"),a("3ca3"),a("e01a"),a("d28b"),a("e260"),a("ddb0"),a("ade3")),o=a("1da1"),c=a("a34a"),s=a.n(c),l=(a("96cf"),a("d3b7"),a("7db0"),a("ac1f"),a("5319"),a("4de4"),a("99af"),a("d81d"),a("159b"),a("2f62")),p=a("c778"),d=a("fa3b"),u=a("5ce5"),h=a("a788"),g=a("7388"),v=a("bc1c"),m=a("acf5"),f=a("b25d"),b=a("c2de"),y=a("1227"),w=a("2678"),x=a("35f4");function C(t,e){var a="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=A(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return o=t.done,t},e:function(t){c=!0,i=t},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}function A(t,e){if(t){if("string"===typeof t)return _(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_(t,e):void 0}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function k(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function O(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?k(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var j={components:{AppSummaryGraph:m["default"],LazyImage:v["a"],Loading:p["a"],IconMessage:w["a"],TypeDescription:x["a"]},fetch:function(){var t=this;return Object(o["a"])(s.a.mark((function e(){var a,r,n,i,o;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("catalog/load",{force:!0,reset:!0});case 2:return a=t.$route.query,e.next=5,t.$store.dispatch("management/findAll",{type:h["A"].PROJECT});case 5:return r=e.sent,t.showDeprecated=a[d["f"]]===d["N"],t.showHidden=a[d["p"]]===d["N"],e.next=10,t.$store.dispatch("cluster/findAll",{type:h["f"].APP});case 10:if(t.allInstalled=e.sent,!t.legacyEnabled){e.next=22;break}return e.next=14,t.$store.dispatch("management/findMatching",{type:h["A"].CATALOG_TEMPLATE,selector:"catalog.cattle.io/name=system-library"});case 14:if(n=e.sent,t.v1SystemCatalog=n?n.reduce((function(t,e){return t[e.spec.displayName]=e,t}),{}):{},i=r.find((function(t){var e;return"System"===(null===(e=t.spec)||void 0===e?void 0:e.displayName)})),!i){e.next=22;break}return o=i.id.replace("/",":"),t.systemProject=o,e.next=22,t.$store.dispatch("rancher/findAll",{type:h["G"].APP,opt:{url:"/v3/project/".concat(o,"/apps"),force:!0}});case 22:case"end":return e.stop()}}),e)})))()},data:function(){var t=this.$store.getters["features/get"](b["LEGACY"]);return{allInstalled:null,v1SystemCatalog:null,systemProject:null,legacyEnabled:t}},computed:O(O(O(O({},Object(l["b"])(["currentCluster"])),Object(l["b"])({allCharts:"catalog/charts",loadingErrors:"catalog/errors"})),Object(l["b"])({t:"i18n/t"})),{},{v1Apps:function(){return this.$store.getters["rancher/all"](h["G"].APP)},namespaces:function(){return this.$store.getters["activeNamespaceCache"]},rancherCatalog:function(){return this.$store.getters["catalog/repos"].find((function(t){return t.isRancher}))},installedApps:function(){return this.allInstalled},installedAppForChart:function(){var t,e={},a=C(this.installedApps);try{for(a.s();!(t=a.n()).done;){var r=t.value,n=r.matchingChart();n&&(e[n.id]=r)}}catch(i){a.e(i)}finally{a.f()}return e},options:function(){var t,e=this,a=this.currentCluster.status.provider||"other",r=this.allCharts||[],n=Object(u["filterAndArrangeCharts"])(r,{clusterProvider:a,showDeprecated:this.showDeprecated,showHidden:this.showHidden,showRepos:[null===(t=this.rancherCatalog)||void 0===t?void 0:t._key],showTypes:[g["e"]._CLUSTER_TOOL]});n=n.filter((function(t){return"Experimental"!==t.sideLabel})),this.legacyEnabled&&(n=n.concat(this.legacyCharts),n=Object(f["b"])(n,["certifiedSort","chartNameDisplay"]));var i=n.map((function(t){return{chart:t,app:e.installedAppForChart[t.id]}}));return this.legacyEnabled&&(i=this.checkLegacyApp(i,this.v1Apps,"v1-monitoring","rancher-monitoring","cluster-monitoring",!1),i=this.checkLegacyApp(i,this.v1Apps,"v1-istio","rancher-istio","cluster-istio",!0),i=this.checkLegacyApp(i,this.v1Apps,"v1-logging","rancher-logging","rancher-logging",!0)),i},legacyCharts:function(){return[this._legacyChart("monitoring"),this._legacyChart("logging"),this._legacyChart("istio")]}}),watch:{namespaces:function(){this.legacyEnabled&&this.systemProject&&this.$store.dispatch("rancher/findAll",{type:h["G"].APP,opt:{url:"/v3/project/".concat(this.systemProject,"/apps"),force:!0}})}},mounted:function(){window.c=this},methods:{_legacyChart:function(t){var e;return{certifiedSort:1,chartNameDisplay:this.t("v1ClusterTools.".concat(t,".label")),chartDescription:this.t("v1ClusterTools.".concat(t,".description")),id:"v1-".concat(t),chartName:"v1-".concat(t),key:"v1-".concat(t),versions:this.getLegacyVersions("rancher-".concat(t)),repoKey:null===(e=this.rancherCatalog)||void 0===e?void 0:e._key,legacy:!0,legacyPage:t,iconName:"icon-".concat(t)}},edit:function(t,e){t.goToUpgrade(e,!0)},remove:function(t,e){var a=Object(y["c"])(e);a?t.remove():t.promptRemove()},install:function(t){t.goToInstall(d["k"])},openV1Tool:function(t){var e=this.$store.getters["currentCluster"],a={name:"c-cluster-explorer-tools-pages-page",params:{cluster:e.id,product:"explorer",page:t}};this.$router.replace(a)},getLegacyVersions:function(t){var e,a,r=[],n=null===(e=this.v1SystemCatalog)||void 0===e?void 0:e[t];return null!==n&&void 0!==n&&null!==(a=n.spec)&&void 0!==a&&a.versions&&n.spec.versions.forEach((function(t){return r.push({version:t.version})})),r},checkLegacyApp:function(t,e,a,r,n,i){var o=t.find((function(t){return t.chart.chartName===a})),c=t.find((function(t){return t.chart.chartName===r}));if(o){var s,l=e.find((function(t){return t.id.indexOf(n)>0}));if(o.app=l,o.app){if(o.app.upgradeAvailable=void 0,null!==(s=o.chart.versions)&&void 0!==s&&s.length){var p,d=null===(p=o.chart.versions[0])||void 0===p?void 0:p.version;o.app.currentVersion!==d&&(o.app.upgradeAvailable=d)}}else i&&(t=t.filter((function(t){return t!==o})));c&&(o.app?(c.app=void 0,c.blocked=!0):c.app&&(o.blocked=!0))}return t}}},P=j,N=(a("f7a2"),a("0c7c")),T=Object(N["a"])(P,r,n,!1,null,"77e87a37",null);e["default"]=T.exports},f7a2:function(t,e,a){"use strict";a("4439")}}]);
//# sourceMappingURL=index.dd9b7903.js.map