(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/c/_cluster/explorer/index","pages/c/_cluster/explorer/ConfigBadge","pages/c/_cluster/explorer/EventsTable","pages/c/_cluster/explorer/explorer-utils"],{"018c":function(e,t,r){var s=r("4bad");t=s(!1),t.push([e.i,".hardware-resource-gauge[data-v-613bfb4e]{position:relative;display:flex;flex-direction:column}.hardware-resource-gauge .hw-gauge[data-v-613bfb4e]:not(:first-of-type){margin-top:20px}.hardware-resource-gauge .values[data-v-613bfb4e]{font-size:12px;padding-left:10px}",""]),e.exports=t},1358:function(e,t,r){var s=r("4bad");t=s(!1),t.push([e.i,".badge-install[data-v-d1666e22]:hover{cursor:pointer}.badge-install[data-v-d1666e22]{display:flex;margin-left:10px}.badge-install>I[data-v-d1666e22]{line-height:inherit;margin-right:4px}.badge-install[data-v-d1666e22]:focus{outline:0}",""]),e.exports=t},"1acf":function(e,t,r){"use strict";r.r(t),r.d(t,"RESOURCES",(function(){return Q}));r("a4d3"),r("e01a"),r("b0c0");var s=function(){var e=this,t=e._self._c;return t("section",{staticClass:"dashboard"},[t("header",[t("div",{staticClass:"title"},[t("h1",[t("t",{attrs:{k:"clusterIndexPage.header"}})],1),e._v(" "),t("div",[e.hasDescription?t("span",[e._v(e._s(e.currentCluster.spec.description))]):e._e()])])]),e._v(" "),e.displayPspDeprecationBanner&&!e.hidePspDeprecationBanner?t("Banner",{attrs:{closable:!0,color:"warning"},on:{close:function(t){e.hidePspDeprecationBanner=!0}}},[t("t",{attrs:{k:"landing.deprecatedPsp",raw:!0}})],1):e._e(),e._v(" "),t("div",{staticClass:"cluster-dashboard-glance"},[t("div",[t("label",[e._v(e._s(e.t("glance.provider"))+": ")]),e._v(" "),e.isHarvesterCluster?t("span",[t("a",{attrs:{role:"button"},on:{click:e.goToHarvesterCluster}},[e._v("\n          "+e._s(e.displayProvider)+"\n        ")])]):t("span",[e._v("\n        "+e._s(e.displayProvider)+"\n      ")])]),e._v(" "),t("div",[t("label",[e._v(e._s(e.t("glance.version"))+": ")]),e._v(" "),t("span",[e._v(e._s(e.currentCluster.kubernetesVersionBase))]),e._v(" "),e.currentCluster.kubernetesVersionExtension?t("span",{staticStyle:{"font-size":"0.75em"}},[e._v(e._s(e.currentCluster.kubernetesVersionExtension))]):e._e()]),e._v(" "),t("div",[t("label",[e._v(e._s(e.t("glance.created"))+": ")]),e._v(" "),t("span",[t("LiveDate",{attrs:{value:e.currentCluster.metadata.creationTimestamp,"add-suffix":!0,"show-tooltip":!0}})],1)]),e._v(" "),e.displayPspDeprecationBanner&&e.hidePspDeprecationBanner?t("p",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.t("landing.deprecatedPsp"),expression:"t('landing.deprecatedPsp')"}],staticClass:"alt-psp-deprecation-info"},[t("span",[e._v(e._s(e.t("landing.psps")))]),e._v(" "),t("i",{staticClass:"icon icon-warning"})]):e._e(),e._v(" "),t("div",{style:{flex:1}}),e._v(" "),e.monitoringStatus.v2||e.monitoringStatus.v1?e._e():t("div",[t("n-link",{staticClass:"monitoring-install",attrs:{to:{name:"c-cluster-explorer-tools"}}},[t("i",{staticClass:"icon icon-gear"}),e._v(" "),t("span",[e._v(e._s(e.t("glance.installMonitoring")))])])],1),e._v(" "),e.monitoringStatus.v1?t("div",[t("span",[e._v(e._s(e.t("glance.v1MonitoringInstalled")))])]):e._e(),e._v(" "),e.currentCluster.canUpdate?t("ConfigBadge",{attrs:{cluster:e.currentCluster}}):e._e()],1),e._v(" "),t("div",{staticClass:"resource-gauges"},[t("ResourceSummary",{attrs:{"spoofed-counts":e.totalCountGaugeInput}}),e._v(" "),e.canAccessNodes?t("ResourceSummary",{attrs:{resource:"node"}}):e._e(),e._v(" "),e.canAccessDeployments?t("ResourceSummary",{attrs:{resource:"apps.deployment"}}):e._e()],1),e._v(" "),e.extensionCards.length?t("div",{staticClass:"extension-card-container mt-20"},e._l(e.extensionCards,(function(r,s){return t("SimpleBox",{key:"extensionCards".concat(s),staticClass:"extension-card",style:r.style},[t("h3",[e._v("\n        "+e._s(r.label)+"\n      ")]),e._v(" "),t(r.component,{tag:"component",attrs:{resource:e.currentCluster}})],1)})),1):e._e(),e._v(" "),!e.hasV1Monitoring&&e.hasStats?t("h3",{staticClass:"mt-40"},[e._v("\n    "+e._s(e.t("clusterIndexPage.sections.capacity.label"))+"\n  ")]):e._e(),e._v(" "),!e.hasV1Monitoring&&e.hasStats?t("div",{staticClass:"hardware-resource-gauges"},[t("HardwareResourceGauge",{attrs:{name:e.t("clusterIndexPage.hardwareResourceGauge.pods"),used:e.podsUsed}}),e._v(" "),t("HardwareResourceGauge",{attrs:{name:e.t("clusterIndexPage.hardwareResourceGauge.cores"),reserved:e.cpuReserved,used:e.cpuUsed,units:e.cpuReserved.units}}),e._v(" "),t("HardwareResourceGauge",{attrs:{name:e.t("clusterIndexPage.hardwareResourceGauge.ram"),reserved:e.ramReserved,used:e.ramUsed,units:e.ramReserved.units}})],1):e._e(),e._v(" "),!e.hasV1Monitoring&&e.componentServices?t("div",e._l(e.componentServices,(function(r){return t("div",{key:r.name,staticClass:"k8s-component-status",class:{"k8s-component-status-healthy":r.healthy,"k8s-component-status-unhealthy":!r.healthy}},[r.healthy?t("i",{staticClass:"icon icon-checkmark"}):t("i",{staticClass:"icon icon-warning"}),e._v(" "),t("div",[e._v(e._s(e.t(r.labelKey)))])])})),0):e._e(),e._v(" "),e.hasV1Monitoring?t("div",{staticClass:"mt-20",attrs:{id:"ember-anchor"}},[t("EmberPage",{attrs:{inline:"ember-anchor",src:e.v1MonitoringURL}})],1):e._e(),e._v(" "),t("div",{staticClass:"mt-30"},[t("Tabbed",{on:{changed:e.tabChange}},[t("Tab",{attrs:{name:"cluster-events",label:e.t("clusterIndexPage.sections.events.label"),weight:2}},[t("span",{staticClass:"events-table-link"},[t("n-link",{attrs:{to:e.allEventsLink}},[t("span",[e._v(e._s(e.t("glance.eventsTable")))])])],1),e._v(" "),t("EventsTable")],1),e._v(" "),e.hasMonitoring?t("Tab",{attrs:{name:"cluster-alerts",label:e.t("clusterIndexPage.sections.alerts.label"),weight:1}},["cluster-alerts"===e.selectedTab?t("AlertTable"):e._e()],1):e._e()],1)],1),e._v(" "),e.hasMetricsTabs?t("Tabbed",{staticClass:"mt-30",attrs:{"default-tab":"cluster-metrics","use-hash":!1}},[e.showClusterMetrics?t("Tab",{attrs:{name:"cluster-metrics",label:e.t("clusterIndexPage.sections.clusterMetrics.label"),weight:2},scopedSlots:e._u([{key:"default",fn:function(r){return[r.active?t("DashboardMetrics",{attrs:{"detail-url":e.CLUSTER_METRICS_DETAIL_URL,"summary-url":e.CLUSTER_METRICS_SUMMARY_URL,"graph-height":"825px"}}):e._e()]}}],null,!1,1229087076)}):e._e(),e._v(" "),e.showK8sMetrics?t("Tab",{attrs:{name:"k8s-metrics",label:e.t("clusterIndexPage.sections.k8sMetrics.label"),weight:1},scopedSlots:e._u([{key:"default",fn:function(r){return[r.active?t("DashboardMetrics",{attrs:{"detail-url":e.K8S_METRICS_DETAIL_URL,"summary-url":e.K8S_METRICS_SUMMARY_URL,"graph-height":"550px"}}):e._e()]}}],null,!1,2044967979)}):e._e(),e._v(" "),e.showEtcdMetrics?t("Tab",{attrs:{name:"etcd-metrics",label:e.t("clusterIndexPage.sections.etcdMetrics.label"),weight:0},scopedSlots:e._u([{key:"default",fn:function(r){return[r.active?t("DashboardMetrics",{staticClass:"etcd-metrics",attrs:{"detail-url":e.ETCD_METRICS_DETAIL_URL,"summary-url":e.ETCD_METRICS_SUMMARY_URL,"graph-height":"550px"}},[t("EtcdInfoBanner")],1):e._e()]}}],null,!1,4260631169)}):e._e()],1):e._e()],1)},n=[],a=(r("e439"),r("dbb4"),r("1da1")),o=r("2909"),i=r("ade3"),c=r("a34a"),l=r.n(c),u=(r("96cf"),r("caad"),r("4de4"),r("d3b7"),r("b64b"),r("e260"),r("6062"),r("3ca3"),r("e3df"),r("015a"),r("85ca"),r("74d4"),r("dee5"),r("b628"),r("658e"),r("0b52"),r("9661"),r("0a8d"),r("e495"),r("72d0"),r("2705"),r("a9a1"),r("4a2e"),r("0466"),r("ddb0"),r("99af"),r("159b"),r("4fad"),r("7db0"),r("2ca0"),r("6372")),d=r("2f62"),p=r("a788"),v=r("fa98"),f=r("d458"),h=r("bec1"),b=r("04e8"),g=r("9149"),m=r("e528"),_=r("ec09"),y=r("a4d2"),C=r("f38f"),x=r("680c"),O=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("Banner",{staticClass:"banner",attrs:{color:"info"}},[t("div",{staticClass:"datum"},[t("label",[e._v(e._s(e.t("etcdInfoBanner.hasLeader")))]),e._v(" "+e._s(e.hasLeader)+"\n  ")]),e._v(" "),t("div",{staticClass:"datum"},[t("label",[e._v(e._s(e.t("etcdInfoBanner.leaderChanges")))]),e._v(" "+e._s(e.leaderChanges)+"\n  ")]),e._v(" "),t("div",{staticClass:"datum"},[t("label",[e._v(e._s(e.t("etcdInfoBanner.failedProposals")))]),e._v(" "+e._s(e.failedProposals)+"\n  ")])])},w=[],j=r("c778");function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P={components:{Banner:h["a"],Loading:j["a"]},fetch:function(){var e=this;return Object(a["a"])(l.a.mark((function t(){var r,s,n,a;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$store.getters["currentProduct"].inStore,t.next=3,e.$store.dispatch("".concat(r,"/find"),{type:p["f"].APP,id:"cattle-monitoring-system/rancher-monitoring"});case 3:return s=t.sent,n=null===s||void 0===s?void 0:s.currentVersion,t.next=7,Object(x["e"])(n,e.$store.dispatch,e.currentCluster.id);case 7:return a=t.sent,e.hasLeader=a?e.t("generic.yes"):e.t("generic.no"),t.next=11,Object(x["f"])(n,e.$store.dispatch,e.currentCluster.id);case 11:return e.leaderChanges=t.sent,t.next=14,Object(x["c"])(n,e.$store.dispatch,e.currentCluster.id);case 14:e.failedProposals=t.sent;case 15:case"end":return t.stop()}}),t)})))()},data:function(){return{hasLeader:this.t("generic.no"),leaderChanges:0,failedProposals:0}},computed:M({},Object(d["b"])(["currentCluster"]))},R=P,E=(r("91493"),r("0c7c")),k=Object(E["a"])(R,O,w,!1,null,"5e1a1097",null),T=k.exports,D=r("96c7"),I=r("d513"),L=r("c859"),A=function(){var e=this,t=e._self._c;return t("SimpleBox",{staticClass:"hardware-resource-gauge"},[t("div",{staticClass:"chart"},[t("h3",[e._v("\n      "+e._s(e.name)+"\n    ")]),e._v(" "),!e.reserved||void 0===e.reserved.total&&void 0===e.reserved.useful?e._e():t("div",{staticClass:"hw-gauge"},[t("ConsumptionGauge",{attrs:{capacity:e.reserved.total,used:e.reserved.useful,"color-stops":e.colorStops},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",[e._v("\n            "+e._s(e.t("clusterIndexPage.hardwareResourceGauge.reserved"))+"\n            "),t("span",{staticClass:"values text-muted"},[e.reserved.formattedUseful?t("span",[e._v("\n                "+e._s(e.reserved.formattedUseful)+"\n              ")]):t("span",[e._v("\n                "+e._s(e.maxDecimalPlaces(e.reserved.useful))+"\n              ")]),e._v("\n              /\n              "),e.reserved.formattedTotal?t("span",[e._v("\n                "+e._s(e.reserved.formattedTotal)+"\n              ")]):t("span",[e._v("\n                "+e._s(e.maxDecimalPlaces(e.reserved.total))+" "+e._s(e.reserved.units)+"\n              ")])])]),e._v(" "),t("span",[e._v("\n            "+e._s(e.percentage(e.reserved))+"\n          ")])]},proxy:!0}],null,!1,2282187084)})],1),e._v(" "),e.used&&void 0!==e.used.useful?t("div",{staticClass:"hw-gauge"},[t("ConsumptionGauge",{attrs:{capacity:e.used.total,used:e.used.useful,"color-stops":e.colorStops},scopedSlots:e._u([{key:"title",fn:function(){return[t("span",[e._v("\n            "+e._s(e.t("clusterIndexPage.hardwareResourceGauge.used"))+"\n            "),t("span",{staticClass:"values text-muted"},[e.used.formattedUseful?t("span",[e._v("\n                "+e._s(e.used.formattedUseful)+"\n              ")]):t("span",[e._v("\n                "+e._s(e.maxDecimalPlaces(e.used.useful))+"\n              ")]),e._v("\n              /\n              "),e.used.formattedTotal?t("span",[e._v("\n                "+e._s(e.used.formattedTotal)+"\n              ")]):t("span",[e._v("\n                "+e._s(e.maxDecimalPlaces(e.used.total))+" "+e._s(e.used.units)+"\n              ")])])]),e._v(" "),t("span",[e._v("\n            "+e._s(e.percentage(e.used))+"\n          ")])]},proxy:!0}],null,!1,2729230671)})],1):e._e()])])},U=[],B=(r("b680"),r("8e01")),$=r("8af7"),G={components:{ConsumptionGauge:B["a"],SimpleBox:$["a"]},props:{name:{type:String,required:!0},units:{type:String,default:""},used:{type:Object,default:null},reserved:{type:Object,default:null}},computed:{colorStops:function(){return{0:"--success",30:"--warning",70:"--error"}}},methods:{maxDecimalPlaces:function(e){return Math.round(100*e)/100},strokes:function(e,t){return{primaryStrokeColor:this.rgba(e,1),primaryStrokeGradientColor:this.rgba(t,1),secondaryStrokeColor:this.rgba(e,.1),secondaryStrokeGradientColor:this.rgba(t,.1)}},rgba:function(e,t){return"rgba(var(".concat(e,"), ").concat(t,")")},percentage:function(e){return 0===e.total?0:"".concat((e.useful/e.total*100).toFixed(2),"%")}}},N=G,H=(r("3f1a"),Object(E["a"])(N,A,U,!1,null,"613bfb4e",null)),K=H.exports,V=r("de78"),F=r("e034"),Y=r("9130"),q=r("650c"),W=r("2004"),J=r("55f9");function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Q=[p["D"],p["t"],p["M"],p["eb"].DEPLOYMENT,p["eb"].STATEFUL_SET,p["eb"].JOB,p["eb"].DAEMON_SET,p["T"]],Z="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/rancher-cluster-nodes-1/rancher-cluster-nodes?orgId=1",ee="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/rancher-cluster-1/rancher-cluster?orgId=1",te="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/rancher-k8s-components-nodes-1/rancher-kubernetes-components-nodes?orgId=1",re="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/rancher-k8s-components-1/rancher-kubernetes-components?orgId=1",se="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/rancher-etcd-nodes-1/rancher-etcd-nodes?orgId=1",ne="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/rancher-etcd-1/rancher-etcd?orgId=1",ae=["etcd","scheduler","controller-manager"],oe={name:"ClusterExplorerIndexPage",components:{EtcdInfoBanner:T,DashboardMetrics:u["a"],HardwareResourceGauge:K,ResourceSummary:L["a"],Tab:C["a"],Tabbed:y["a"],AlertTable:f["a"],Banner:h["a"],EmberPage:I["a"],ConfigBadge:F["default"],EventsTable:Y["default"],SimpleBox:$["a"]},mixins:[D["a"]],fetch:function(){Object(q["fetchClusterResources"])(this.$store,p["F"]),this.currentCluster&&(Object(v["e"])(Object(x["a"])(this.$store,this.currentCluster.id,[Z,ee]),this,"showClusterMetrics","Determine cluster metrics"),Object(v["e"])(Object(x["a"])(this.$store,this.currentCluster.id,[te,re]),this,"showK8sMetrics","Determine k8s metrics"),Object(v["e"])(Object(x["a"])(this.$store,this.currentCluster.id,[se,ne]),this,"showEtcdMetrics","Determine etcd metrics"),this.currentCluster.isLocal&&this.$store.getters["management/schemaFor"](p["A"].NODE)&&this.$store.dispatch("management/findAll",{type:p["A"].NODE}))},data:function(){var e=this.$store.getters["cluster/all"](p["i"]),t=[g["xb"],g["X"],g["sb"]];return{nodeHeaders:t,constraints:[],events:[],nodeMetrics:[],showClusterMetrics:!1,showK8sMetrics:!1,showEtcdMetrics:!1,CLUSTER_METRICS_DETAIL_URL:Z,CLUSTER_METRICS_SUMMARY_URL:ee,K8S_METRICS_DETAIL_URL:te,K8S_METRICS_SUMMARY_URL:re,ETCD_METRICS_DETAIL_URL:se,ETCD_METRICS_SUMMARY_URL:ne,clusterCounts:e,selectedTab:"cluster-events",extensionCards:Object(J["a"])(this,W["c"].CARD,W["b"].CLUSTER_DASHBOARD_CARD,this.$route)}},beforeDestroy:function(){this.$store.dispatch("cluster/forgetType",p["m"]),this.$store.dispatch("cluster/forgetType",p["F"]),this.$store.dispatch("cluster/forgetType",p["l"]),this.$store.dispatch("cluster/forgetType",p["B"].NODE),this.$store.dispatch("cluster/forgetType",p["A"].NODE)},computed:X(X(X({},Object(d["b"])(["currentCluster"])),Object(_["d"])()),{},{displayPspDeprecationBanner:function(){var e,t,r,s,n,a,o,i,c=this.currentCluster,l=null!==(e=c.status)&&void 0!==e&&null!==(t=e.version)&&void 0!==t&&t.major?parseInt(null===(r=c.status)||void 0===r||null===(s=r.version)||void 0===s?void 0:s.major):0,u=null!==(n=c.status)&&void 0!==n&&null!==(a=n.version)&&void 0!==a&&a.minor?parseInt(null===(o=c.status)||void 0===o||null===(i=o.version)||void 0===i?void 0:i.minor):0;if(1===l&&u>=21&&u<25){var d,v,f,h,b=null===(d=this.$store.getters["cluster/all"](p["i"]))||void 0===d||null===(v=d[0])||void 0===v?void 0:v.counts;return!(null===b||void 0===b||null===(f=b[p["K"]])||void 0===f||null===(h=f.summary)||void 0===h||!h.count)}return!1},nodes:function(){return this.$store.getters["cluster/all"](p["F"])},mgmtNodes:function(){return this.$store.getters["management/all"](p["A"].CLUSTER)},hidePspDeprecationBanner:Object(m["mapPref"])(m["PSP_DEPRECATION_BANNER"]),hasV1Monitoring:function(){return Object(_["a"])(this.$store.getters)},v1MonitoringURL:function(){return"/k/".concat(this.currentCluster.id,"/monitoring")},displayProvider:function(){var e,t,r="other",s=(null===(e=this.currentCluster)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.provider)||r;return"rke.windows"===s&&(s="rkeWindows"),this.$store.getters["i18n/exists"]("cluster.provider.".concat(s))||(s="other"),this.t("cluster.provider.".concat(s))},isHarvesterCluster:function(){var e;return null===(e=this.currentCluster)||void 0===e?void 0:e.isHarvester},isRKE:function(){return["rke","rke.windows","rke2","rke2.windows"].includes((this.currentCluster.status.provider||"").toLowerCase())},accessibleResources:function(){var e,t,r=this,s=Object.keys((null===(e=this.clusterCounts)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.counts)||{}).filter((function(e){return r.$store.getters["type-map/isIgnored"]({id:e})})),n=Object(o["a"])(new Set([].concat(Object(o["a"])(s),Q)));return n.filter((function(e){return r.$store.getters["cluster/schemaFor"](e)}))},componentServices:function(){var e=this,t=[];return ae.forEach((function(r){t.push({name:r,healthy:e.isComponentStatusHealthy(r),labelKey:"clusterIndexPage.sections.componentStatus.".concat(r)})})),t},totalCountGaugeInput:function(){var e=this,t={name:this.t("clusterIndexPage.resourceGauge.totalResources"),total:0,useful:0,warningCount:0,errorCount:0};return this.accessibleResources.forEach((function(r){var s=Object(L["b"])(e.$store,r);Object.entries(s).forEach((function(e){t[e[0]]+=e[1]}))})),t},hasStats:function(){var e,t,r,s;return(null===(e=this.currentCluster)||void 0===e||null===(t=e.status)||void 0===t?void 0:t.allocatable)&&(null===(r=this.currentCluster)||void 0===r||null===(s=r.status)||void 0===s?void 0:s.requested)},cpuReserved:function(){var e,t,r,s,n,a,o=Object(b["g"])(null===(e=this.currentCluster)||void 0===e||null===(t=e.status)||void 0===t||null===(r=t.allocatable)||void 0===r?void 0:r.cpu);return{total:o,useful:Object(b["g"])(null===(s=this.currentCluster)||void 0===s||null===(n=s.status)||void 0===n||null===(a=n.requested)||void 0===a?void 0:a.cpu),units:this.t("clusterIndexPage.hardwareResourceGauge.units.cores",{count:o})}},podsUsed:function(){var e,t,r,s,n,a;return{total:Object(b["g"])((null===(e=this.currentCluster)||void 0===e||null===(t=e.status)||void 0===t||null===(r=t.allocatable)||void 0===r?void 0:r.pods)||"0"),useful:Object(b["g"])((null===(s=this.currentCluster)||void 0===s||null===(n=s.status)||void 0===n||null===(a=n.requested)||void 0===a?void 0:a.pods)||"0")}},ramReserved:function(){var e,t,r,s,n,a;return Object(b["d"])(null===(e=this.currentCluster)||void 0===e||null===(t=e.status)||void 0===t||null===(r=t.allocatable)||void 0===r?void 0:r.memory,null===(s=this.currentCluster)||void 0===s||null===(n=s.status)||void 0===n||null===(a=n.requested)||void 0===a?void 0:a.memory)},metricAggregations:function(){var e=this,t=this.nodes;if(this.currentCluster.isLocal){var r=this.nodes.reduce((function(e,t){return e[t.id]=t,e}),{});t=this.mgmtNodes.filter((function(e){var t,s,n=(null===(t=e.metadata)||void 0===t||null===(s=t.labels)||void 0===s?void 0:s["management.cattle.io/nodename"])||e.id;return!!r[n]}))}var s=t.some((function(e){return e.hasARole&&!e.isWorker})),n=this.nodeMetrics.filter((function(t){var r=e.nodes.find((function(e){return e.id===t.id}));return r&&(!s||r.isWorker)})),a={cpu:0,memory:0};return Object(V["isEmpty"])(n)?null:n.reduce((function(e,t){return e.cpu+=Object(b["g"])(t.usage.cpu),e.memory+=Object(b["g"])(t.usage.memory),e}),a)},cpuUsed:function(){var e,t,r,s,n=Object(b["g"])(null===(e=this.currentCluster)||void 0===e||null===(t=e.status)||void 0===t||null===(r=t.capacity)||void 0===r?void 0:r.cpu);return{total:n,useful:null===(s=this.metricAggregations)||void 0===s?void 0:s.cpu,units:this.t("clusterIndexPage.hardwareResourceGauge.units.cores",{count:n})}},ramUsed:function(){var e,t,r,s;return Object(b["d"])(null===(e=this.currentCluster)||void 0===e||null===(t=e.status)||void 0===t||null===(r=t.capacity)||void 0===r?void 0:r.memory,null===(s=this.metricAggregations)||void 0===s?void 0:s.memory)},hasMonitoring:function(){var e,t,r,s,n;return!(null===(e=this.clusterCounts)||void 0===e||null===(t=e[0])||void 0===t||null===(r=t.counts)||void 0===r||null===(s=r[p["f"].APP])||void 0===s||null===(n=s.namespaces)||void 0===n||!n["cattle-monitoring-system"])},canAccessNodes:function(){var e,t,r;return!(null===(e=this.clusterCounts)||void 0===e||null===(t=e[0])||void 0===t||null===(r=t.counts)||void 0===r||!r[p["F"]])},canAccessDeployments:function(){var e,t,r;return!(null===(e=this.clusterCounts)||void 0===e||null===(t=e[0])||void 0===t||null===(r=t.counts)||void 0===r||!r[p["eb"].DEPLOYMENT])},hasMetricsTabs:function(){return this.showClusterMetrics||this.showK8sMetrics||this.showEtcdMetrics},hasBadge:function(){var e;return!(null===(e=this.currentCluster)||void 0===e||!e.badge)},hasDescription:function(){var e,t;return!(null===(e=this.currentCluster)||void 0===e||null===(t=e.spec)||void 0===t||!t.description)},allEventsLink:function(){return{name:"c-cluster-product-resource",params:{product:"explorer",resource:"event"}}}}),methods:{isComponentStatusHealthy:function(e){var t,r,s=((null===(t=this.currentCluster)||void 0===t||null===(r=t.status)||void 0===r?void 0:r.componentStatuses)||[]).filter((function(t){return t.name.startsWith(e)}));if(!s.length)return!0;var n=s.reduce((function(e,t){var r=t.conditions.find((function(e){return"True"!==e.status}));return r?e+1:e}),0);return 0===n},showActions:function(){this.$store.commit("action-menu/show",{resources:this.currentCluster,elem:this.$refs["cluster-actions"]})},loadMetrics:function(){var e=this;return Object(a["a"])(l.a.mark((function t(){return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(q["fetchClusterResources"])(e.$store,p["B"].NODE,{force:!0});case 2:e.nodeMetrics=t.sent;case 3:case"end":return t.stop()}}),t)})))()},tabChange:function(e){this.selectedTab=null===e||void 0===e?void 0:e.selectedName},goToHarvesterCluster:function(){var e=this;return Object(a["a"])(l.a.mark((function t(){var r,s;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("management/findAll",{type:p["e"].RANCHER_CLUSTER});case 3:return r=t.sent,s=r.find((function(t){return t.mgmt.id===e.currentCluster.id})),t.next=7,s.goToHarvesterCluster();case 7:t.next=11;break;case 9:t.prev=9,t.t0=t["catch"](0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}},ie=oe,ce=(r("87a5"),Object(E["a"])(ie,s,n,!1,null,"7b14bf32",null));t["default"]=ce.exports},23304:function(e,t,r){var s=r("4bad");t=s(!1),t.push([e.i,".banner[data-v-5e1a1097]{display:flex;justify-content:space-evenly;align-items:center}.banner .datum[data-v-5e1a1097]{text-align:center;margin-right:5px}.banner[data-v-5e1a1097] label{color:var(--info)}",""]),e.exports=t},"3f1a":function(e,t,r){"use strict";r("c650")},"4a8a":function(e,t,r){var s=r("fa71");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var n=r("499e").default;n("7e327574",s,!0,{sourceMap:!1,shadowMode:!1})},"55f98":function(e,t,r){var s=r("23304");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var n=r("499e").default;n("384494ab",s,!0,{sourceMap:!1,shadowMode:!1})},"650c":function(e,t,r){"use strict";r.r(t),r.d(t,"fetchClusterResources",(function(){return o}));var s=r("1da1"),n=r("a34a"),a=r.n(n);r("96cf");function o(e,t){return i.apply(this,arguments)}function i(){return i=Object(s["a"])(a.a.mark((function e(t,r){var s,n,o,i=arguments;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=i.length>2&&void 0!==i[2]?i[2]:{},n=t.getters["cluster/schemaFor"](r),!n){e.next=14;break}return e.prev=3,e.next=6,t.dispatch("cluster/findAll",{type:r,opt:s});case 6:return o=e.sent,e.abrupt("return",o);case 10:return e.prev=10,e.t0=e["catch"](3),console.error("Failed fetching cluster resource ".concat(r," with error:"),e.t0),e.abrupt("return",[]);case 14:return e.abrupt("return",[]);case 15:case"end":return e.stop()}}),e,null,[[3,10]])}))),i.apply(this,arguments)}},"87a5":function(e,t,r){"use strict";r("4a8a")},9130:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e._self._c;return t("SortableTable",{attrs:{loading:e.$fetchState.pending,rows:e.events,headers:e.eventHeaders,"key-field":"id",search:!1,"table-actions":!1,"row-actions":!1,paging:!0,"rows-per-page":10,"default-sort-by":"date"}})},n=[],a=(r("b64b"),r("a4d3"),r("4de4"),r("d3b7"),r("e439"),r("159b"),r("dbb4"),r("ade3")),o=r("1da1"),i=r("a34a"),c=r.n(i),l=(r("96cf"),r("40d2")),u=r("9149"),d=r("a788"),p=r("650c");function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h={components:{SortableTable:l["c"]},fetch:function(){var e=this;return Object(o["a"])(c.a.mark((function t(){return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(p["fetchClusterResources"])(e.$store,d["m"]);case 2:e.events=t.sent;case 3:case"end":return t.stop()}}),t)})))()},data:function(){var e=f(f(f({},u["nb"]),{canBeVariable:!0}),{},{width:130}),t=[e,u["bb"],u["V"],u["X"],{name:"date",label:"Date",labelKey:"clusterIndexPage.sections.events.date.label",value:"timestamp",sort:"timestamp:desc",formatter:"Date",width:220,defaultSort:!0}];return{events:[],eventHeaders:t}}},b=h,g=r("0c7c"),m=Object(g["a"])(b,s,n,!1,null,null,null);t["default"]=m.exports},91493:function(e,t,r){"use strict";r("55f98")},a133:function(e,t,r){"use strict";r("ad57")},ad57:function(e,t,r){var s=r("1358");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var n=r("499e").default;n("21254411",s,!0,{sourceMap:!1,shadowMode:!1})},c650:function(e,t,r){var s=r("018c");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var n=r("499e").default;n("78bb5917",s,!0,{sourceMap:!1,shadowMode:!1})},e034:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"config-badge"},[t("div",[t("a",{staticClass:"badge-install",on:{click:e.customBadgeDialog}},[t("i",{staticClass:"icon icon-cluster"}),e._v(" "),e.hasBadge?t("span",[e._v(e._s(e.t("clusterBadge.editLabel")))]):t("span",[e._v(e._s(e.t("clusterBadge.addLabel")))])])])])},n=[],a={props:{cluster:{type:Object,required:!0}},name:"ConfigBadge",computed:{hasBadge:function(){var e;return!(null===(e=this.cluster)||void 0===e||!e.badge)}},methods:{customBadgeDialog:function(){this.$store.dispatch("cluster/promptModal",{component:"AddCustomBadgeDialog"})}}},o=a,i=(r("a133"),r("0c7c")),c=Object(i["a"])(o,s,n,!1,null,"d1666e22",null);t["default"]=c.exports},fa71:function(e,t,r){var s=r("4bad");t=s(!1),t.push([e.i,".extension-card-container[data-v-7b14bf32]{display:grid;grid-template-columns:repeat(auto-fit,minmax(calc(33.33333% - 40px),1fr));grid-column-gap:15px;grid-row-gap:20px}@media only screen and (max-width:992px){.extension-card-container[data-v-7b14bf32]{grid-template-columns:1fr!important}}.cluster-dashboard-glance[data-v-7b14bf32]{border-top:1px solid var(--border);border-bottom:1px solid var(--border);padding:20px 0;display:flex}.cluster-dashboard-glance[data-v-7b14bf32]>:not(:nth-last-child(-n+2)){margin-right:40px}.cluster-dashboard-glance>:not(:nth-last-child(-n+2)) SPAN[data-v-7b14bf32]{font-weight:700}.title h1[data-v-7b14bf32]{margin:0}.actions-span[data-v-7b14bf32]{align-self:center}.events[data-v-7b14bf32]{margin-top:30px}.graph-options[data-v-7b14bf32]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.etcd-metrics[data-v-7b14bf32] .external-link{top:-107px}.cluster-tools-tip[data-v-7b14bf32]{margin-top:0}.alt-psp-deprecation-info[data-v-7b14bf32]{display:flex;align-items:center;color:var(--warning)}.alt-psp-deprecation-info span[data-v-7b14bf32]{margin-right:4px}.monitoring-install[data-v-7b14bf32]{display:flex;margin-left:10px}.monitoring-install>I[data-v-7b14bf32]{line-height:inherit;margin-right:4px}.monitoring-install[data-v-7b14bf32]:focus{outline:0}.events-table-link[data-v-7b14bf32]{display:flex;justify-content:flex-end;margin-bottom:20px}.k8s-component-status[data-v-7b14bf32]{align-items:center;display:inline-flex;border:1px solid;margin-top:20px}.k8s-component-status[data-v-7b14bf32]:not(:last-child){margin-right:20px}.k8s-component-status>div[data-v-7b14bf32]{padding:5px 20px}.k8s-component-status>I[data-v-7b14bf32]{text-align:center;padding:5px 10px;border-right:1px solid var(--border)}.k8s-component-status.k8s-component-status-unhealthy[data-v-7b14bf32]{border-color:var(--error-border)}.k8s-component-status.k8s-component-status-unhealthy>I[data-v-7b14bf32]{color:var(--error)}.k8s-component-status.k8s-component-status-healthy[data-v-7b14bf32]{border-color:var(--border)}.k8s-component-status.k8s-component-status-healthy>I[data-v-7b14bf32]{color:var(--success)}",""]),e.exports=t}}]);
//# sourceMappingURL=index.9d127530.js.map