{"version":3,"sources":["webpack:///./shell/utils/install-redirect.js","webpack:///./shell/pages/c/_cluster/istio/index.vue","webpack:///shell/pages/c/_cluster/istio/index.vue","webpack:///./shell/pages/c/_cluster/istio/index.vue?6f3f","webpack:///./shell/pages/c/_cluster/istio/index.vue?cf23"],"names":["product","chartName","defaultResourceOrRoute","install","arguments","length","undefined","_middleware","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref","_store$getters$curren","redirect","store","cluster","chart","_query","wrap","_context","prev","next","getters","id","_typeof","abrupt","name","params","resource","dispatch","force","query","_defineProperty","REPO_TYPE","repoType","REPO","repoName","CHART","VERSION","versions","version","concat","stop","middleware","_x","apply","render","_vm","this","_c","_self","_v","directives","rawName","value","t","expression","staticClass","class","kialiUrl","on","launchKiali","attrs","kialiLogo","ref","target","rel","$event","stopPropagation","link","monitoringUrl","_e","app","jaegerUrl","$refs","jaeger","click","jaegerLogo","staticRenderFns","components","InstallRedirect","NAME","CHART_NAME","fetch","_this","$store","type","SERVICE","kialiService","sent","t0","jaegerService","t1","data","computed","_objectSpread","mapGetters","theme","require","proxyUrl","$router","resolve","$route","href","methods","e","_e$srcElement","srcElement","tagName","kiali","component"],"mappings":"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","file":"js/pages/c/_cluster/istio/index.ec9f3fc4.js","sourcesContent":["import { REPO_TYPE, REPO, CHART, VERSION } from '@shell/config/query-params';\n\nexport default function(product, chartName, defaultResourceOrRoute, install = true) {\n  return async function middleware({ redirect, store } ) {\n    const cluster = store.getters['currentCluster']?.id || 'local';\n\n    if ( store.getters['type-map/isProductActive'](product) ) {\n      // If the product is installed and there's a default resource, redirect there\n\n      if ( defaultResourceOrRoute ) {\n        if ( typeof defaultResourceOrRoute === 'object' ) {\n          return redirect(defaultResourceOrRoute);\n        }\n\n        return redirect({\n          name:   'c-cluster-product-resource',\n          params: {\n            cluster,\n            product,\n            resource: defaultResourceOrRoute\n          },\n        });\n      }\n\n      // Otherwise just let the middleware pass through\n    } else if (install) {\n      // The product is not installed, redirect to the details chart\n\n      await store.dispatch('catalog/load', { force: true });\n\n      const chart = store.getters['catalog/chart']({ chartName });\n\n      if ( chart ) {\n        return redirect({\n          name:   'c-cluster-apps-charts-chart',\n          params: { cluster },\n          query:  {\n            [REPO_TYPE]: chart.repoType,\n            [REPO]:      chart.repoName,\n            [CHART]:     chart.chartName,\n            [VERSION]:   chart.versions[0].version\n          },\n        });\n      } else {\n        // The chart's not available\n        store.dispatch('loadingError', `Chart not found for ${ product }`);\n      }\n    } else {\n      return redirect({\n        name:   'c-cluster-explorer',\n        params: { cluster },\n      });\n    }\n  };\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('h1',[_vm._v(\"Overview\")]),_vm._v(\" \"),_c('h4',{directives:[{name:\"clean-html\",rawName:\"v-clean-html\",value:(_vm.t('istio.poweredBy', {}, true)),expression:\"t('istio.poweredBy', {}, true)\"}]}),_vm._v(\" \"),_c('div',{staticClass:\"links\"},[_c('div',{staticClass:\"box link-container\",class:{'disabled':!_vm.kialiUrl}},[_c('span',{staticClass:\"link-content pull-right\",on:{\"click\":_vm.launchKiali}},[_c('div',{staticClass:\"link-logo\"},[_c('img',{attrs:{\"src\":_vm.kialiLogo}})]),_vm._v(\" \"),_c('div',{staticClass:\"link-content\"},[_c('a',{ref:\"kiali\",attrs:{\"disabled\":!_vm.kialiUrl,\"href\":_vm.kialiUrl,\"target\":_vm.target,\"rel\":_vm.rel},on:{\"click\":function($event){$event.stopPropagation();}}},[_c('t',{attrs:{\"k\":\"istio.links.kiali.label\"}}),_vm._v(\" \"),_c('i',{staticClass:\"icon icon-external-link pull-right\"})],1),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',{staticClass:\"description\"},[_c('span',{directives:[{name:\"clean-html\",rawName:\"v-clean-html\",value:(_vm.t('istio.links.kiali.description', {link: _vm.monitoringUrl}, true)),expression:\"t('istio.links.kiali.description', {link: monitoringUrl}, true)\"}]})])])]),_vm._v(\" \"),(!_vm.kialiUrl)?_c('div',{staticClass:\"disabled-msg\"},[_c('span',{directives:[{name:\"clean-html\",rawName:\"v-clean-html\",value:(_vm.t('istio.links.disabled', {app: 'Kiali'})),expression:\"t('istio.links.disabled', {app: 'Kiali'})\"}]})]):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"box link-container\",class:{'disabled':!_vm.jaegerUrl}},[_c('span',{staticClass:\"link-content pull-right\",on:{\"click\":function($event){return _vm.$refs.jaeger.click()}}},[_c('div',{staticClass:\"link-logo\"},[_c('img',{attrs:{\"src\":_vm.jaegerLogo}})]),_vm._v(\" \"),_c('div',{staticClass:\"link-content\"},[_c('a',{ref:\"jaeger\",attrs:{\"disabled\":!_vm.jaegerUrl,\"href\":_vm.jaegerUrl,\"target\":_vm.target,\"rel\":_vm.rel},on:{\"click\":function($event){$event.stopPropagation();}}},[_c('t',{attrs:{\"k\":\"istio.links.jaeger.label\"}}),_vm._v(\" \"),_c('i',{staticClass:\"icon icon-external-link pull-right\"})],1),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',{staticClass:\"description\"},[_c('span',{directives:[{name:\"clean-html\",rawName:\"v-clean-html\",value:(_vm.t('istio.links.jaeger.description', true)),expression:\"t('istio.links.jaeger.description', true)\"}]})])])]),_vm._v(\" \"),(!_vm.jaegerUrl)?_c('div',{staticClass:\"disabled-msg\"},[_c('span',{directives:[{name:\"clean-html\",rawName:\"v-clean-html\",value:(_vm.t('istio.links.disabled', {app: 'Jaeger'})),expression:\"t('istio.links.disabled', {app: 'Jaeger'})\"}]})]):_vm._e()])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { mapGetters } from 'vuex';\nimport { NAME, CHART_NAME } from '@shell/config/product/istio';\nimport InstallRedirect from '@shell/utils/install-redirect';\nimport { SERVICE } from '@shell/config/types';\nexport default {\n  components: {},\n\n  middleware: InstallRedirect(NAME, CHART_NAME),\n\n  async fetch() {\n    try {\n      this.kialiService = await this.$store.dispatch('cluster/find', { type: SERVICE, id: 'istio-system/kiali' });\n    } catch {}\n    try {\n      this.jaegerService = await this.$store.dispatch('cluster/find', { type: SERVICE, id: 'istio-system/tracing' });\n    } catch {}\n  },\n\n  data() {\n    return { kialiService: null, jaegerService: null };\n  },\n\n  computed: {\n    ...mapGetters({ theme: 'prefs/theme', t: 'i18n/t' }),\n\n    kialiLogo() {\n      // @TODO move to theme css\n      return require(`~shell/assets/images/vendor/kiali.svg`);\n    },\n\n    kialiUrl() {\n      return this.kialiService ? this.kialiService.proxyUrl('http', '20001') : null;\n    },\n\n    jaegerLogo() {\n      return require(`~shell/assets/images/vendor/jaeger.svg`);\n    },\n\n    jaegerUrl() {\n      return this.jaegerService ? `${ this.jaegerService.proxyUrl('http', '16686') }/jaeger/search` : null;\n    },\n\n    monitoringUrl() {\n      return this.$router.resolve({\n        name:   'c-cluster-monitoring',\n        params: { cluster: this.$route.params.cluster }\n      }).href;\n    },\n\n    target() {\n      return '_blank';\n    },\n\n    rel() {\n      return 'noopener noreferrer nofollow';\n    },\n  },\n\n  methods: {\n    launchKiali(e) {\n      // rancher-monitoring link in Kiali description was clicked\n      if (e.srcElement?.tagName === 'A') {\n        return;\n      }\n      this.$refs.kiali.click();\n    },\n  },\n};\n</script>\n\n<template>\n  <div>\n    <h1>Overview</h1>\n    <h4 v-clean-html=\"t('istio.poweredBy', {}, true)\" />\n    <div class=\"links\">\n      <div\n        :class=\"{'disabled':!kialiUrl}\"\n        class=\"box link-container\"\n      >\n        <span\n          class=\"link-content pull-right\"\n          @click=\"launchKiali\"\n        >\n          <div class=\"link-logo\">\n            <img :src=\"kialiLogo\">\n          </div>\n          <div class=\"link-content\">\n            <a\n              ref=\"kiali\"\n              :disabled=\"!kialiUrl\"\n              :href=\"kialiUrl\"\n              :target=\"target\"\n              :rel=\"rel\"\n              @click.stop\n            >\n              <t k=\"istio.links.kiali.label\" />\n              <i class=\"icon icon-external-link pull-right\" />\n            </a>\n            <hr>\n            <div class=\"description\">\n              <span v-clean-html=\"t('istio.links.kiali.description', {link: monitoringUrl}, true)\" />\n            </div>\n          </div>\n        </span>\n        <div\n          v-if=\"!kialiUrl\"\n          class=\"disabled-msg\"\n        >\n          <span v-clean-html=\"t('istio.links.disabled', {app: 'Kiali'})\" />\n        </div>\n      </div>\n      <div\n        :class=\"{'disabled':!jaegerUrl}\"\n        class=\"box link-container\"\n      >\n        <span\n          class=\"link-content pull-right\"\n          @click=\"$refs.jaeger.click()\"\n        >\n          <div class=\"link-logo\">\n            <img :src=\"jaegerLogo\">\n          </div>\n          <div class=\"link-content\">\n            <a\n              ref=\"jaeger\"\n              :disabled=\"!jaegerUrl\"\n              :href=\"jaegerUrl\"\n              :target=\"target\"\n              :rel=\"rel\"\n              @click.stop\n            >\n              <t k=\"istio.links.jaeger.label\" />\n              <i class=\"icon icon-external-link pull-right\" />\n            </a>\n            <hr>\n            <div class=\"description\">\n              <span v-clean-html=\"t('istio.links.jaeger.description', true)\" />\n            </div>\n          </div>\n        </span>\n        <div\n          v-if=\"!jaegerUrl\"\n          class=\"disabled-msg\"\n        >\n          <span v-clean-html=\"t('istio.links.disabled', {app: 'Jaeger'})\" />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../../../../node_modules/babel-loader/lib/index.js??ref--16-1!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../../../../node_modules/babel-loader/lib/index.js??ref--16-1!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=12430bd1&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}