(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/c/_cluster/uiplugins/RemoveUIPlugins"],{"093f":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e._self._c;return t("Dialog",{attrs:{name:"confirm-uiplugins-remove",title:e.t("plugins.setup.remove.title"),mode:"disable","data-testid":"disable-ext-modal"},on:{okay:e.doRemove}},[[t("p",{staticClass:"mb-20"},[e._v("\n      "+e._s(e.t("plugins.setup.remove.prompt"))+"\n    ")]),e._v(" "),t("div",{staticClass:"mb-15"},[t("Checkbox",{attrs:{primary:!0,disabled:!e.officialRepo,"label-key":"plugins.setup.remove.registry.official.title","data-testid":"disable-ext-modal-remove-official-repo"},model:{value:e.removeRepos.official,callback:function(t){e.$set(e.removeRepos,"official",t)},expression:"removeRepos.official"}}),e._v(" "),e.officialRepo?e._e():t("div",{staticClass:"checkbox-info"},[e._v("\n        ("+e._s(e.t("plugins.setup.uninstalled"))+")\n      ")])],1),e._v(" "),t("div",{staticClass:"mb-15"},[t("Checkbox",{attrs:{primary:!0,disabled:!e.partnersRepo,"label-key":"plugins.setup.remove.registry.partners.title","data-testid":"disable-ext-modal-remove-partners-repo"},model:{value:e.removeRepos.partners,callback:function(t){e.$set(e.removeRepos,"partners",t)},expression:"removeRepos.partners"}}),e._v(" "),e.partnersRepo?e._e():t("div",{staticClass:"checkbox-info"},[e._v("\n        ("+e._s(e.t("plugins.setup.uninstalled"))+")\n      ")])],1),e._v(" "),e.hasPluginsInstalled?t("div",{staticClass:"mt-20"},[t("Checkbox",{attrs:{primary:!0,"label-key":"plugins.setup.remove.crd.title"},model:{value:e.removeCRD,callback:function(t){e.removeCRD=t},expression:"removeCRD"}}),e._v(" "),t("div",{staticClass:"checkbox-info"},[e._v("\n        "+e._s(e.t("plugins.setup.remove.crd.prompt"))+"\n      ")])],1):e._e()]],2)},o=[],a=(r("b64b"),r("a4d3"),r("e439"),r("dbb4"),r("2909")),s=r("ade3"),i=r("1da1"),c=(r("7db0"),r("d3b7"),r("b0c0"),r("e6cf"),r("4de4"),r("e260"),r("f20a"),r("3ca3"),r("ddb0"),r("159b"),r("a34a")),l=r.n(c),u=(r("96cf"),r("2f62")),p=r("a788"),d=r("e5e4"),f=r("bd30"),m=r("7600");function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){Object(s["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h={components:{Checkbox:f["a"],Dialog:d["a"]},fetch:function(){var e=this;return Object(i["a"])(l.a.mark((function t(){var r;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$store.getters["management/schemaFor"](p["f"].CLUSTER_REPO)){t.next=3;break}return t.next=3,e.$store.dispatch("management/findAll",{type:p["f"].CLUSTER_REPO,opt:{force:!0}});case 3:if(!e.$store.getters["management/schemaFor"](p["Z"])){t.next=9;break}return t.next=6,e.$store.dispatch("management/findAll",{type:p["Z"]});case 6:r=t.sent,e.hasPluginsInstalled=(r||[]).length>0,e.removeCRD=!e.hasPluginsInstalled;case 9:case"end":return t.stop()}}),t)})))()},data:function(){return{errors:[],removeRepos:{official:!0,partners:!0},reposInfo:{official:{name:m["e"],url:m["f"],branch:m["d"]},partners:{name:m["b"],url:m["c"],branch:m["a"]}},removeCRD:!0,hasPluginsInstalled:!1}},computed:b(b({},Object(u["b"])({repos:"catalog/repos"})),{},{officialRepo:function(){var e=this.repos.find((function(e){return e.urlDisplay===m["f"]}));return null!==e&&void 0!==e&&e.id?e:void 0},partnersRepo:function(){var e=this.repos.find((function(e){return e.urlDisplay===m["c"]}));return null!==e&&void 0!==e&&e.id?e:void 0}}),methods:{removeChart:function(e){var t=this;return Object(i["a"])(l.a.mark((function r(){var n,o;return l.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$store.dispatch("management/findAll",{type:p["f"].APP});case 2:if(n=r.sent,o=n.find((function(t){return t.namespace===m["k"]&&t.name===e})),!o){r.next=6;break}return r.abrupt("return",o.remove());case 6:return r.abrupt("return",Promise.reject(new Error("Could not find chart ยง{ name }")));case 7:case"end":return r.stop()}}),r)})))()},showDialog:function(){this.removeRepos={official:!!this.officialRepo,partners:!!this.partnersRepo},this.$modal.show("confirm-uiplugins-remove")},doRemove:function(e){var t=this;return Object(i["a"])(l.a.mark((function r(){var n,o,s,i,c,u;return l.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.errors=[],n=Object(a["a"])(m["h"]).reverse(),t.removeCRD||(n=n.filter((function(e){return e!==m["l"]}))),o=0;case 4:if(!(o<n.length)){r.next=17;break}return s=n[o],r.prev=6,r.next=9,t.removeChart(s);case 9:r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](6),t.errors.push(r.t0.message);case 14:o++,r.next=4;break;case 17:for(c in i=[],t.removeRepos)t.removeRepos[c]&&t["".concat(c,"Repo")]&&i.push(t["".concat(c,"Repo")].remove());return r.next=21,Promise.allSettled(i);case 21:return u=r.sent,u.forEach((function(e){"rejected"===e.status&&(console.error(e.reason),t.errors.push(e.reason))})),t.$store.dispatch("management/forgetType",p["Z"]),r.next=26,new Promise((function(e){return setTimeout(e,5e3)}));case 26:t.$emit("done"),e(!0);case 28:case"end":return r.stop()}}),r,null,[[6,11]])})))()}}},g=h,x=(r("1915"),r("0c7c")),_=Object(x["a"])(g,n,o,!1,null,"41f62665",null);t["default"]=_.exports},1915:function(e,t,r){"use strict";r("519a")},"2c4d":function(e,t,r){var n=r("4bad");t=n(!1),t.push([e.i,".enable-plugin-support[data-v-41f62665]{font-size:14px;margin-top:20px}.plugin-setup-error[data-v-41f62665]{font-size:14px;color:var(--error);margin:10px 0 0 0}.checkbox-info[data-v-41f62665]{margin-left:20px;opacity:.7}",""]),e.exports=t},"45ca":function(e,t,r){"use strict";r("bcd1")},"519a":function(e,t,r){var n=r("2c4d");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=r("499e").default;o("54d51ff0",n,!0,{sourceMap:!1,shadowMode:!1})},bcd1:function(e,t,r){var n=r("de22");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=r("499e").default;o("9f14f054",n,!0,{sourceMap:!1,shadowMode:!1})},de22:function(e,t,r){var n=r("4bad");t=n(!1),t.push([e.i,".modal-dialog[data-v-5130a572]{padding:10px}.modal-dialog h4[data-v-5130a572]{font-weight:700}.modal-dialog .dialog-buttons[data-v-5130a572]{display:flex;justify-content:flex-end;margin-top:10px}.modal-dialog .dialog-buttons[data-v-5130a572]>:not(:last-child){margin-right:10px}",""]),e.exports=t},e5e4:function(e,t,r){"use strict";r("b0c0");var n=function(){var e=this,t=e._self._c;return t("modal",{attrs:{name:e.name,height:"auto",scrollable:!0},on:{closed:function(t){return e.closeDialog(!1)},"before-open":e.beforeOpen}},[t("div",{staticClass:"modal-dialog"},[t("h4",[e._v("\n      "+e._s(e.title)+"\n    ")]),e._v(" "),e._t("default"),e._v(" "),t("div",{staticClass:"dialog-buttons mt-20"},[e._t("buttons"),e._v(" "),e.$slots.buttons?e._e():t("div",[t("button",{staticClass:"btn role-secondary",on:{click:function(t){return e.closeDialog(!1)}}},[e._v("\n          "+e._s(e.t("generic.cancel"))+"\n        ")]),e._v(" "),e.mode?t("AsyncButton",{staticClass:"ml-10",attrs:{mode:e.mode},on:{click:e.ok}}):t("button",{staticClass:"btn role-primary ml-10",on:{click:function(t){return e.closeDialog(!0)}}},[e._v("\n          "+e._s(e.t("generic.ok"))+"\n        ")])],1)],2)],2)])},o=[],a=r("67c9"),s={components:{AsyncButton:a["b"]},props:{name:{type:String,required:!0},title:{type:String,required:!0},mode:{type:String,default:""}},data:function(){return{closed:!1}},methods:{beforeOpen:function(){this.closed=!1},ok:function(e){var t=this,r=function(r){e(r),r&&t.closeDialog(!0)};this.$emit("okay",r)},closeDialog:function(e){this.closed||(this.$modal.hide(this.name),this.$emit("closed",e),this.closed=!0)}}},i=s,c=(r("45ca"),r("0c7c")),l=Object(c["a"])(i,n,o,!1,null,"5130a572",null);t["a"]=l.exports}}]);
//# sourceMappingURL=RemoveUIPlugins.ae3dbf0f.js.map