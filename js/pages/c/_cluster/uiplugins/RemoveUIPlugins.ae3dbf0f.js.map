{"version":3,"sources":["webpack:///./shell/pages/c/_cluster/uiplugins/RemoveUIPlugins.vue","webpack:///shell/pages/c/_cluster/uiplugins/RemoveUIPlugins.vue","webpack:///./shell/pages/c/_cluster/uiplugins/RemoveUIPlugins.vue?c9dc","webpack:///./shell/pages/c/_cluster/uiplugins/RemoveUIPlugins.vue?c2b4","webpack:///./shell/pages/c/_cluster/uiplugins/RemoveUIPlugins.vue?d5dd","webpack:///./shell/pages/c/_cluster/uiplugins/RemoveUIPlugins.vue?b4bf","webpack:///./shell/components/Dialog.vue?903a","webpack:///./shell/pages/c/_cluster/uiplugins/RemoveUIPlugins.vue?0244","webpack:///./shell/components/Dialog.vue?4bac","webpack:///./shell/components/Dialog.vue?8e42","webpack:///./shell/components/Dialog.vue","webpack:///shell/components/Dialog.vue","webpack:///./shell/components/Dialog.vue?0d6a","webpack:///./shell/components/Dialog.vue?689e"],"names":["render","_vm","this","_c","_self","attrs","t","on","doRemove","staticClass","_v","_s","officialRepo","model","value","removeRepos","official","callback","$$v","$set","expression","_e","partnersRepo","partners","hasPluginsInstalled","removeCRD","staticRenderFns","components","Checkbox","Dialog","fetch","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","plugins","wrap","_context","prev","next","$store","getters","CATALOG","CLUSTER_REPO","dispatch","type","opt","force","UI_PLUGIN","sent","length","stop","data","errors","reposInfo","name","UI_PLUGINS_REPO_NAME","url","UI_PLUGINS_REPO_URL","branch","UI_PLUGINS_REPO_BRANCH","UI_PLUGINS_PARTNERS_REPO_NAME","UI_PLUGINS_PARTNERS_REPO_URL","UI_PLUGINS_PARTNERS_REPO_BRANCH","computed","_objectSpread","mapGetters","repos","repo","find","r","urlDisplay","id","undefined","methods","removeChart","_this2","_callee2","apps","found","_context2","APP","app","namespace","UI_PLUGIN_NAMESPACE","abrupt","remove","Promise","reject","Error","showDialog","$modal","show","btnCb","_this3","_callee3","uninstall","i","chart","promises","key","res","_context3","_toConsumableArray","UI_PLUGIN_CHARTS","reverse","filter","UI_PLUGIN_OPERATOR_CRD_CHART_NAME","t0","push","message","concat","allSettled","forEach","result","status","console","error","reason","resolve","setTimeout","$emit","component","___CSS_LOADER_API_IMPORT___","exports","module","content","__esModule","default","locals","add","$event","closeDialog","beforeOpen","title","_t","$slots","buttons","mode","ok","AsyncButton","props","String","required","closed","hide"],"mappings":"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","file":"js/pages/c/_cluster/uiplugins/RemoveUIPlugins.ae3dbf0f.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('Dialog',{attrs:{\"name\":\"confirm-uiplugins-remove\",\"title\":_vm.t('plugins.setup.remove.title'),\"mode\":\"disable\",\"data-testid\":\"disable-ext-modal\"},on:{\"okay\":_vm.doRemove}},[[_c('p',{staticClass:\"mb-20\"},[_vm._v(\"\\n      \"+_vm._s(_vm.t('plugins.setup.remove.prompt'))+\"\\n    \")]),_vm._v(\" \"),_c('div',{staticClass:\"mb-15\"},[_c('Checkbox',{attrs:{\"primary\":true,\"disabled\":!_vm.officialRepo,\"label-key\":\"plugins.setup.remove.registry.official.title\",\"data-testid\":\"disable-ext-modal-remove-official-repo\"},model:{value:(_vm.removeRepos.official),callback:function ($$v) {_vm.$set(_vm.removeRepos, \"official\", $$v)},expression:\"removeRepos.official\"}}),_vm._v(\" \"),(!_vm.officialRepo)?_c('div',{staticClass:\"checkbox-info\"},[_vm._v(\"\\n        (\"+_vm._s(_vm.t('plugins.setup.uninstalled'))+\")\\n      \")]):_vm._e()],1),_vm._v(\" \"),_c('div',{staticClass:\"mb-15\"},[_c('Checkbox',{attrs:{\"primary\":true,\"disabled\":!_vm.partnersRepo,\"label-key\":\"plugins.setup.remove.registry.partners.title\",\"data-testid\":\"disable-ext-modal-remove-partners-repo\"},model:{value:(_vm.removeRepos.partners),callback:function ($$v) {_vm.$set(_vm.removeRepos, \"partners\", $$v)},expression:\"removeRepos.partners\"}}),_vm._v(\" \"),(!_vm.partnersRepo)?_c('div',{staticClass:\"checkbox-info\"},[_vm._v(\"\\n        (\"+_vm._s(_vm.t('plugins.setup.uninstalled'))+\")\\n      \")]):_vm._e()],1),_vm._v(\" \"),(_vm.hasPluginsInstalled)?_c('div',{staticClass:\"mt-20\"},[_c('Checkbox',{attrs:{\"primary\":true,\"label-key\":\"plugins.setup.remove.crd.title\"},model:{value:(_vm.removeCRD),callback:function ($$v) {_vm.removeCRD=$$v},expression:\"removeCRD\"}}),_vm._v(\" \"),_c('div',{staticClass:\"checkbox-info\"},[_vm._v(\"\\n        \"+_vm._s(_vm.t('plugins.setup.remove.crd.prompt'))+\"\\n      \")])],1):_vm._e()]],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport { mapGetters } from 'vuex';\nimport { CATALOG, UI_PLUGIN } from '@shell/config/types';\nimport Dialog from '@shell/components/Dialog.vue';\nimport Checkbox from '@components/Form/Checkbox/Checkbox.vue';\nimport {\n  UI_PLUGIN_NAMESPACE,\n  UI_PLUGIN_CHARTS,\n  UI_PLUGIN_OPERATOR_CRD_CHART_NAME,\n  UI_PLUGINS_REPO_NAME,\n  UI_PLUGINS_REPO_URL,\n  UI_PLUGINS_REPO_BRANCH,\n  UI_PLUGINS_PARTNERS_REPO_NAME,\n  UI_PLUGINS_PARTNERS_REPO_URL,\n  UI_PLUGINS_PARTNERS_REPO_BRANCH,\n} from '@shell/config/uiplugins';\n\nexport default {\n  components: {\n    Checkbox,\n    Dialog,\n  },\n\n  async fetch() {\n    if (this.$store.getters['management/schemaFor'](CATALOG.CLUSTER_REPO)) {\n      // we need to force the request, so that we know at all times if what's the status of the offical and partners repos (installed or not)\n      await this.$store.dispatch('management/findAll', { type: CATALOG.CLUSTER_REPO, opt: { force: true } });\n    }\n\n    if (this.$store.getters['management/schemaFor'](UI_PLUGIN)) {\n      const plugins = await this.$store.dispatch('management/findAll', { type: UI_PLUGIN });\n\n      // Are there any plugins installed?\n      this.hasPluginsInstalled = (plugins || []).length > 0;\n      this.removeCRD = !this.hasPluginsInstalled;\n    }\n  },\n\n  data() {\n    return {\n      errors:      [],\n      removeRepos: {\n        official: true,\n        partners: true\n      },\n      reposInfo: {\n        official: {\n          name:   UI_PLUGINS_REPO_NAME,\n          url:    UI_PLUGINS_REPO_URL,\n          branch: UI_PLUGINS_REPO_BRANCH,\n        },\n        partners: {\n          name:   UI_PLUGINS_PARTNERS_REPO_NAME,\n          url:    UI_PLUGINS_PARTNERS_REPO_URL,\n          branch: UI_PLUGINS_PARTNERS_REPO_BRANCH,\n        }\n      },\n      removeCRD:           true,\n      hasPluginsInstalled: false,\n    };\n  },\n\n  computed: {\n    ...mapGetters({ repos: 'catalog/repos' }),\n    officialRepo() {\n      const repo = this.repos.find((r) => r.urlDisplay === UI_PLUGINS_REPO_URL);\n\n      return repo?.id ? repo : undefined;\n    },\n    partnersRepo() {\n      const repo = this.repos.find((r) => r.urlDisplay === UI_PLUGINS_PARTNERS_REPO_URL);\n\n      return repo?.id ? repo : undefined;\n    }\n  },\n\n  methods: {\n    async removeChart(name) {\n      const apps = await this.$store.dispatch('management/findAll', { type: CATALOG.APP });\n      const found = apps.find((app) => {\n        return app.namespace === UI_PLUGIN_NAMESPACE && app.name === name;\n      });\n\n      if (found) {\n        return found.remove();\n      }\n\n      // Return rejected promise - could not find the required chart\n      return Promise.reject(new Error(`Could not find chart ยง{ name }`));\n    },\n\n    showDialog() {\n      this.removeRepos = {\n        official: !!this.officialRepo,\n        partners: !!this.partnersRepo,\n      };\n      this.$modal.show('confirm-uiplugins-remove');\n    },\n\n    async doRemove(btnCb) {\n      this.errors = [];\n\n      // Remove the charts in the reverse order that we install them in\n      let uninstall = [...UI_PLUGIN_CHARTS].reverse();\n\n      if (!this.removeCRD) {\n        // User does not want to uninstall the CRD, so remove the chart\n        uninstall = uninstall.filter((chart) => chart !== UI_PLUGIN_OPERATOR_CRD_CHART_NAME);\n      }\n\n      for (let i = 0; i < uninstall.length; i++) {\n        const chart = uninstall[i];\n\n        try {\n          await this.removeChart(chart);\n        } catch (e) {\n          this.errors.push(e.message);\n        }\n      }\n\n      // remove extension repos that have been picked\n      const promises = [];\n\n      for (const key in this.removeRepos) {\n        if (this.removeRepos[key] && this[`${ key }Repo`]) {\n          promises.push(this[`${ key }Repo`].remove());\n        }\n      }\n\n      const res = await Promise.allSettled(promises);\n\n      res.forEach((result) => {\n        if (result.status === 'rejected') {\n          console.error(result.reason); // eslint-disable-line no-console\n\n          this.errors.push(result.reason);\n        }\n      });\n\n      // forget PLUGINS type from store as it's not needed\n      this.$store.dispatch('management/forgetType', UI_PLUGIN);\n\n      await new Promise((resolve) => setTimeout(resolve, 5000));\n\n      this.$emit('done');\n\n      btnCb(true);\n    },\n  }\n};\n</script>\n<template>\n  <Dialog\n    name=\"confirm-uiplugins-remove\"\n    :title=\"t('plugins.setup.remove.title')\"\n    mode=\"disable\"\n    data-testid=\"disable-ext-modal\"\n    @okay=\"doRemove\"\n  >\n    <template>\n      <p class=\"mb-20\">\n        {{ t('plugins.setup.remove.prompt') }}\n      </p>\n      <!-- Official repo -->\n      <div\n        class=\"mb-15\"\n      >\n        <Checkbox\n          v-model=\"removeRepos.official\"\n          :primary=\"true\"\n          :disabled=\"!officialRepo\"\n          label-key=\"plugins.setup.remove.registry.official.title\"\n          data-testid=\"disable-ext-modal-remove-official-repo\"\n        />\n        <div\n          v-if=\"!officialRepo\"\n          class=\"checkbox-info\"\n        >\n          ({{ t('plugins.setup.uninstalled') }})\n        </div>\n      </div>\n      <!-- Partners repo -->\n      <div\n        class=\"mb-15\"\n      >\n        <Checkbox\n          v-model=\"removeRepos.partners\"\n          :primary=\"true\"\n          :disabled=\"!partnersRepo\"\n          label-key=\"plugins.setup.remove.registry.partners.title\"\n          data-testid=\"disable-ext-modal-remove-partners-repo\"\n        />\n        <div\n          v-if=\"!partnersRepo\"\n          class=\"checkbox-info\"\n        >\n          ({{ t('plugins.setup.uninstalled') }})\n        </div>\n      </div>\n      <div\n        v-if=\"hasPluginsInstalled\"\n        class=\"mt-20\"\n      >\n        <Checkbox\n          v-model=\"removeCRD\"\n          :primary=\"true\"\n          label-key=\"plugins.setup.remove.crd.title\"\n        />\n        <div class=\"checkbox-info\">\n          {{ t('plugins.setup.remove.crd.prompt') }}\n        </div>\n      </div>\n    </template>\n  </Dialog>\n</template>\n<style lang=\"scss\" scoped>\n  .enable-plugin-support {\n    font-size: 14px;\n    margin-top: 20px;\n  }\n\n  .plugin-setup-error {\n    font-size: 14px;\n    color: var(--error);\n    margin: 10px 0 0 0;\n  }\n\n  .checkbox-info {\n    margin-left: 20px;\n    opacity: 0.7;\n  }\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../../../../node_modules/babel-loader/lib/index.js??ref--16-1!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./RemoveUIPlugins.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../../../../node_modules/babel-loader/lib/index.js??ref--16-1!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./RemoveUIPlugins.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RemoveUIPlugins.vue?vue&type=template&id=41f62665&scoped=true&\"\nimport script from \"./RemoveUIPlugins.vue?vue&type=script&lang=js&\"\nexport * from \"./RemoveUIPlugins.vue?vue&type=script&lang=js&\"\nimport style0 from \"./RemoveUIPlugins.vue?vue&type=style&index=0&id=41f62665&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"41f62665\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../node_modules/vue-style-loader/index.js??ref--9-oneOf-1-0!../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-3!../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./RemoveUIPlugins.vue?vue&type=style&index=0&id=41f62665&prod&lang=scss&scoped=true&\"","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".enable-plugin-support[data-v-41f62665]{font-size:14px;margin-top:20px}.plugin-setup-error[data-v-41f62665]{font-size:14px;color:var(--error);margin:10px 0 0 0}.checkbox-info[data-v-41f62665]{margin-left:20px;opacity:.7}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export * from \"-!../../node_modules/vue-style-loader/index.js??ref--9-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-3!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Dialog.vue?vue&type=style&index=0&id=5130a572&prod&lang=scss&scoped=true&\"","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-3!../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./RemoveUIPlugins.vue?vue&type=style&index=0&id=41f62665&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"54d51ff0\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-3!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Dialog.vue?vue&type=style&index=0&id=5130a572&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"9f14f054\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".modal-dialog[data-v-5130a572]{padding:10px}.modal-dialog h4[data-v-5130a572]{font-weight:700}.modal-dialog .dialog-buttons[data-v-5130a572]{display:flex;justify-content:flex-end;margin-top:10px}.modal-dialog .dialog-buttons[data-v-5130a572]>:not(:last-child){margin-right:10px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('modal',{attrs:{\"name\":_vm.name,\"height\":\"auto\",\"scrollable\":true},on:{\"closed\":function($event){return _vm.closeDialog(false)},\"before-open\":_vm.beforeOpen}},[_c('div',{staticClass:\"modal-dialog\"},[_c('h4',[_vm._v(\"\\n      \"+_vm._s(_vm.title)+\"\\n    \")]),_vm._v(\" \"),_vm._t(\"default\"),_vm._v(\" \"),_c('div',{staticClass:\"dialog-buttons mt-20\"},[_vm._t(\"buttons\"),_vm._v(\" \"),(!_vm.$slots.buttons)?_c('div',[_c('button',{staticClass:\"btn role-secondary\",on:{\"click\":function($event){return _vm.closeDialog(false)}}},[_vm._v(\"\\n          \"+_vm._s(_vm.t('generic.cancel'))+\"\\n        \")]),_vm._v(\" \"),(!_vm.mode)?_c('button',{staticClass:\"btn role-primary ml-10\",on:{\"click\":function($event){return _vm.closeDialog(true)}}},[_vm._v(\"\\n          \"+_vm._s(_vm.t('generic.ok'))+\"\\n        \")]):_c('AsyncButton',{staticClass:\"ml-10\",attrs:{\"mode\":_vm.mode},on:{\"click\":_vm.ok}})],1):_vm._e()],2)],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport AsyncButton from '@shell/components/AsyncButton';\n\nexport default {\n  components: { AsyncButton },\n\n  props: {\n    name: {\n      type:     String,\n      required: true,\n    },\n\n    title: {\n      type:     String,\n      required: true,\n    },\n\n    mode: {\n      type:    String,\n      default: '',\n    }\n  },\n\n  data() {\n    return { closed: false };\n  },\n\n  methods: {\n    beforeOpen() {\n      this.closed = false;\n    },\n\n    ok(btnCb) {\n      const callback = (ok) => {\n        btnCb(ok);\n        if (ok) {\n          this.closeDialog(true);\n        }\n      };\n\n      this.$emit('okay', callback);\n    },\n\n    closeDialog(result) {\n      if (!this.closed) {\n        this.$modal.hide(this.name);\n        this.$emit('closed', result);\n        this.closed = true;\n      }\n    },\n  }\n};\n</script>\n\n<template>\n  <modal\n    :name=\"name\"\n    height=\"auto\"\n    :scrollable=\"true\"\n    @closed=\"closeDialog(false)\"\n    @before-open=\"beforeOpen\"\n  >\n    <div class=\"modal-dialog\">\n      <h4>\n        {{ title }}\n      </h4>\n      <slot />\n      <div class=\"dialog-buttons mt-20\">\n        <slot name=\"buttons\" />\n        <div v-if=\"!$slots.buttons\">\n          <button\n            class=\"btn role-secondary\"\n            @click=\"closeDialog(false)\"\n          >\n            {{ t('generic.cancel') }}\n          </button>\n          <button\n            v-if=\"!mode\"\n            class=\"btn role-primary ml-10\"\n            @click=\"closeDialog(true)\"\n          >\n            {{ t('generic.ok') }}\n          </button>\n          <AsyncButton\n            v-else\n            :mode=\"mode\"\n            class=\"ml-10\"\n            @click=\"ok\"\n          />\n        </div>\n      </div>\n    </div>\n  </modal>\n</template>\n\n<style lang=\"scss\" scoped>\n  .modal-dialog {\n    padding: 10px;\n\n    h4 {\n      font-weight: bold;\n    }\n\n    .dialog-buttons {\n      display: flex;\n      justify-content: flex-end;\n      margin-top: 10px;\n\n      > *:not(:last-child) {\n        margin-right: 10px;\n      }\n    }\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../node_modules/babel-loader/lib/index.js??ref--16-1!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Dialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../node_modules/babel-loader/lib/index.js??ref--16-1!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./Dialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Dialog.vue?vue&type=template&id=5130a572&scoped=true&\"\nimport script from \"./Dialog.vue?vue&type=script&lang=js&\"\nexport * from \"./Dialog.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Dialog.vue?vue&type=style&index=0&id=5130a572&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5130a572\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}