(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/c/_cluster/uiplugins/index","pages/c/_cluster/uiplugins/DeveloperInstallDialog","pages/c/_cluster/uiplugins/InstallDialog","pages/c/_cluster/uiplugins/PluginInfoPanel","pages/c/_cluster/uiplugins/RemoveUIPlugins","pages/c/_cluster/uiplugins/SetupUIPlugins","pages/c/_cluster/uiplugins/UninstallDialog"],{"093f":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("Dialog",{attrs:{name:"confirm-uiplugins-remove",title:e.t("plugins.setup.remove.title"),mode:"disable","data-testid":"disable-ext-modal"},on:{okay:e.doRemove}},[[t("p",{staticClass:"mb-20"},[e._v("\n      "+e._s(e.t("plugins.setup.remove.prompt"))+"\n    ")]),e._v(" "),t("div",{staticClass:"mb-15"},[t("Checkbox",{attrs:{primary:!0,disabled:!e.officialRepo,"label-key":"plugins.setup.remove.registry.official.title","data-testid":"disable-ext-modal-remove-official-repo"},model:{value:e.removeRepos.official,callback:function(t){e.$set(e.removeRepos,"official",t)},expression:"removeRepos.official"}}),e._v(" "),e.officialRepo?e._e():t("div",{staticClass:"checkbox-info"},[e._v("\n        ("+e._s(e.t("plugins.setup.uninstalled"))+")\n      ")])],1),e._v(" "),t("div",{staticClass:"mb-15"},[t("Checkbox",{attrs:{primary:!0,disabled:!e.partnersRepo,"label-key":"plugins.setup.remove.registry.partners.title","data-testid":"disable-ext-modal-remove-partners-repo"},model:{value:e.removeRepos.partners,callback:function(t){e.$set(e.removeRepos,"partners",t)},expression:"removeRepos.partners"}}),e._v(" "),e.partnersRepo?e._e():t("div",{staticClass:"checkbox-info"},[e._v("\n        ("+e._s(e.t("plugins.setup.uninstalled"))+")\n      ")])],1),e._v(" "),e.hasPluginsInstalled?t("div",{staticClass:"mt-20"},[t("Checkbox",{attrs:{primary:!0,"label-key":"plugins.setup.remove.crd.title"},model:{value:e.removeCRD,callback:function(t){e.removeCRD=t},expression:"removeCRD"}}),e._v(" "),t("div",{staticClass:"checkbox-info"},[e._v("\n        "+e._s(e.t("plugins.setup.remove.crd.prompt"))+"\n      ")])],1):e._e()]],2)},i=[],s=(a("b64b"),a("a4d3"),a("e439"),a("dbb4"),a("2909")),r=a("ade3"),o=a("1da1"),l=(a("7db0"),a("d3b7"),a("b0c0"),a("e6cf"),a("4de4"),a("e260"),a("f20a"),a("3ca3"),a("ddb0"),a("159b"),a("a34a")),c=a.n(l),u=(a("96cf"),a("2f62")),d=a("a788"),p=a("e5e4"),g=a("bd30"),f=a("7600");function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={components:{Checkbox:g["a"],Dialog:p["a"]},fetch:function(){var e=this;return Object(o["a"])(c.a.mark((function t(){var a;return c.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$store.getters["management/schemaFor"](d["f"].CLUSTER_REPO)){t.next=3;break}return t.next=3,e.$store.dispatch("management/findAll",{type:d["f"].CLUSTER_REPO,opt:{force:!0}});case 3:if(!e.$store.getters["management/schemaFor"](d["Z"])){t.next=9;break}return t.next=6,e.$store.dispatch("management/findAll",{type:d["Z"]});case 6:a=t.sent,e.hasPluginsInstalled=(a||[]).length>0,e.removeCRD=!e.hasPluginsInstalled;case 9:case"end":return t.stop()}}),t)})))()},data:function(){return{errors:[],removeRepos:{official:!0,partners:!0},reposInfo:{official:{name:f["e"],url:f["f"],branch:f["d"]},partners:{name:f["b"],url:f["c"],branch:f["a"]}},removeCRD:!0,hasPluginsInstalled:!1}},computed:m(m({},Object(u["b"])({repos:"catalog/repos"})),{},{officialRepo:function(){var e=this.repos.find((function(e){return e.urlDisplay===f["f"]}));return null!==e&&void 0!==e&&e.id?e:void 0},partnersRepo:function(){var e=this.repos.find((function(e){return e.urlDisplay===f["c"]}));return null!==e&&void 0!==e&&e.id?e:void 0}}),methods:{removeChart:function(e){var t=this;return Object(o["a"])(c.a.mark((function a(){var n,i;return c.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$store.dispatch("management/findAll",{type:d["f"].APP});case 2:if(n=a.sent,i=n.find((function(t){return t.namespace===f["k"]&&t.name===e})),!i){a.next=6;break}return a.abrupt("return",i.remove());case 6:return a.abrupt("return",Promise.reject(new Error("Could not find chart ยง{ name }")));case 7:case"end":return a.stop()}}),a)})))()},showDialog:function(){this.removeRepos={official:!!this.officialRepo,partners:!!this.partnersRepo},this.$modal.show("confirm-uiplugins-remove")},doRemove:function(e){var t=this;return Object(o["a"])(c.a.mark((function a(){var n,i,r,o,l,u;return c.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.errors=[],n=Object(s["a"])(f["h"]).reverse(),t.removeCRD||(n=n.filter((function(e){return e!==f["l"]}))),i=0;case 4:if(!(i<n.length)){a.next=17;break}return r=n[i],a.prev=6,a.next=9,t.removeChart(r);case 9:a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](6),t.errors.push(a.t0.message);case 14:i++,a.next=4;break;case 17:for(l in o=[],t.removeRepos)t.removeRepos[l]&&t["".concat(l,"Repo")]&&o.push(t["".concat(l,"Repo")].remove());return a.next=21,Promise.allSettled(o);case 21:return u=a.sent,u.forEach((function(e){"rejected"===e.status&&(console.error(e.reason),t.errors.push(e.reason))})),t.$store.dispatch("management/forgetType",d["Z"]),a.next=26,new Promise((function(e){return setTimeout(e,5e3)}));case 26:t.$emit("done"),e(!0);case 28:case"end":return a.stop()}}),a,null,[[6,11]])})))()}}},b=h,x=(a("1915"),a("0c7c")),_=Object(x["a"])(b,n,i,!1,null,"41f62665",null);t["default"]=_.exports},"0ca4":function(e,t,a){"use strict";a("804f")},"10dd":function(e,t,a){"use strict";a.r(t);a("b0c0"),a("a4d3"),a("e01a");var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"plugins"},[t("div",{staticClass:"plugin-header"},[e.showCatalogList?[t("div",{staticClass:"catalog-title"},[t("h2",{staticClass:"mb-0 mr-10",attrs:{"data-testid":"extensions-catalog-title"}},[t("a",{staticClass:"link",on:{click:function(t){return e.manageExtensionView()}}},[e._v("\n            "+e._s(e.t("plugins.manageCatalog.title"))+":\n          ")]),e._v(" "),t("t",{attrs:{k:"plugins.manageCatalog.subtitle"}})],1),e._v(" "),t("BadgeState",{staticClass:"badge",attrs:{color:"bg-warning",label:e.t("generic.experimental")}})],1)]:[t("h2",{attrs:{"data-testid":"extensions-page-title"}},[e._v("\n        "+e._s(e.t("plugins.title"))+"\n      ")])],e._v(" "),e.reloadRequired?t("div",{staticClass:"plugin-reload-banner mr-20",attrs:{"data-testid":"extension-reload-banner"}},[t("i",{staticClass:"icon icon-checkmark mr-10"}),e._v(" "),t("span",[e._v("\n        "+e._s(e.t("plugins.reload"))+"\n      ")]),e._v(" "),t("button",{staticClass:"ml-10 btn btn-sm role-primary",attrs:{"data-testid":"extension-reload-banner-reload-btn"},on:{click:function(t){return e.reload()}}},[e._v("\n        "+e._s(e.t("generic.reload"))+"\n      ")])]):e._e(),e._v(" "),e.hasService&&e.hasMenuActions?t("div",{staticClass:"actions-container"},[t("button",{ref:"actions",staticClass:"btn role-multi-action actions",attrs:{"aria-haspopup":"true",type:"button","data-testid":"extensions-page-menu"},on:{click:e.setMenu}},[t("i",{staticClass:"icon icon-actions"})]),e._v(" "),t("ActionMenu",{attrs:{"custom-actions":e.menuActions,open:e.menuOpen,"use-custom-target-element":!0,"custom-target-element":e.menuTargetElement,"custom-target-event":e.menuTargetEvent},on:{close:function(t){return e.setMenu(!1)},devLoad:e.showDeveloperLoadDialog,removePluginSupport:e.removePluginSupport,manageRepos:e.manageRepos,addRancherRepos:e.showAddExtensionReposDialog,manageExtensionView:e.manageExtensionView}})],1):e._e()],2),e._v(" "),t("PluginInfoPanel",{ref:"infoPanel"}),e._v(" "),e.hasService?t("div",[e.showCatalogList?[t("CatalogList",{attrs:{plugins:e.pluginsFromCatalogImage},on:{showCatalogLoadDialog:e.showCatalogLoadDialog,showUninstallDialog:e.showUninstallDialog}})]:[e.showAddReposBanner?t("Banner",{staticClass:"add-repos-banner mb-20",attrs:{color:"warning","data-testid":"extensions-new-repos-banner"}},[t("span",[e._v(e._s(e.t("plugins.addRepos.banner",{},!0)))]),e._v(" "),t("button",{staticClass:"ml-10 btn btn-sm role-primary",attrs:{"data-testid":"extensions-new-repos-banner-action-btn"},on:{click:function(t){return e.showAddExtensionReposDialog()}}},[e._v("\n          "+e._s(e.t("plugins.addRepos.bannerBtn"))+"\n        ")])]):e._e(),e._v(" "),t("Tabbed",{ref:"tabs",attrs:{"tabs-only":!0,"data-testid":"extension-tabs"},on:{changed:e.filterChanged}},[t("Tab",{attrs:{name:e.TABS_VALUES.INSTALLED,"data-testid":"extension-tab-installed","label-key":"plugins.tabs.installed",weight:20}}),e._v(" "),t("Tab",{attrs:{name:e.TABS_VALUES.AVAILABLE,"data-testid":"extension-tab-available","label-key":"plugins.tabs.available",weight:19}}),e._v(" "),t("Tab",{attrs:{name:e.TABS_VALUES.UPDATES,"label-key":"plugins.tabs.updates",weight:18,badge:e.updates.length}}),e._v(" "),t("Tab",{attrs:{name:e.TABS_VALUES.ALL,"label-key":"plugins.tabs.all",weight:17}})],1),e._v(" "),[e.loading?t("div",{staticClass:"data-loading"},[t("i",{staticClass:"icon-spin icon icon-spinner"}),e._v(" "),t("t",{attrs:{k:"generic.loading",raw:!0}})],1):t("div",{staticClass:"plugin-list",class:{"v-margin":!e.list.length}},[0===e.list.length?t("IconMessage",{attrs:{vertical:!0,subtle:!0,icon:"icon-extension",message:e.emptyMessage}}):e._l(e.list,(function(a){return t("div",{key:a.name,staticClass:"plugin",attrs:{"data-testid":"extension-card-".concat(a.name)},on:{click:function(t){return e.showPluginDetail(a)}}},[t("div",{staticClass:"plugin-icon",class:e.applyDarkModeBg},[a.icon?t("LazyImage",{staticClass:"icon plugin-icon-img",attrs:{"initial-src":e.defaultIcon,"error-src":e.defaultIcon,src:a.icon}}):t("img",{staticClass:"icon plugin-icon-img",attrs:{src:e.defaultIcon}})],1),e._v(" "),t("div",{staticClass:"plugin-metadata"},[t("div",{staticClass:"plugin-name"},[e._v("\n                  "+e._s(a.label)+"\n                ")]),e._v(" "),t("div",[e._v(e._s(a.description))]),e._v(" "),t("div",{staticClass:"plugin-version"},[a.installing?t("span",{staticClass:"plugin-installing"},[e._v("\n                    -\n                  ")]):t("span",[t("span",[e._v(e._s(a.displayVersion))]),e._v(" "),a.upgrade?t("span",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.t("plugins.upgradeAvailable"),expression:"t('plugins.upgradeAvailable')"}]},[e._v(" -> "+e._s(a.upgrade))]):e._e(),e._v(" "),a.installedError?t("p",{staticClass:"incompatible"},[t("i",{staticClass:"icon icon-warning icon-lg text-warning"}),e._v(" "),t("span",[e._v(e._s(a.installedError))])]):a.incompatibleRancherVersion?t("p",{staticClass:"incompatible"},[e._v(e._s(a.incompatibleRancherVersion))]):a.incompatibleKubeVersion?t("p",{staticClass:"incompatible"},[e._v(e._s(a.incompatibleKubeVersion))]):e._e()])]),e._v(" "),a.builtin?t("div",{staticClass:"plugin-badges"},[t("div",{staticClass:"plugin-builtin"},[e._v("\n                    "+e._s(e.t("plugins.labels.builtin"))+"\n                  ")])]):t("div",{staticClass:"plugin-badges"},[a.certified?e._e():t("div",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.t("plugins.descriptions.third-party"),expression:"t('plugins.descriptions.third-party')"}]},[e._v("\n                    "+e._s(e.t("plugins.labels.third-party"))+"\n                  ")]),e._v(" "),a.experimental?t("div",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.t("plugins.descriptions.experimental"),expression:"t('plugins.descriptions.experimental')"}]},[e._v("\n                    "+e._s(e.t("plugins.labels.experimental"))+"\n                  ")]):e._e()]),e._v(" "),t("div",{staticClass:"plugin-spacer"}),e._v(" "),t("div",{staticClass:"plugin-actions"},[a.error?[t("div",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:a.error,expression:"plugin.error"}],staticClass:"plugin-error"},[t("i",{staticClass:"icon icon-warning"})])]:e._e(),e._v(" "),a.helmError?t("div",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.t("plugins.helmError"),expression:"t('plugins.helmError')"}],staticClass:"plugin-error"},[t("i",{staticClass:"icon icon-warning"})]):e._e(),e._v(" "),t("div",{staticClass:"plugin-spacer"}),e._v(" "),a.installing?t("div",{staticClass:"plugin-installing"},[t("i",{staticClass:"version-busy icon icon-spin icon-spinner"}),e._v(" "),"install"===a.installing?t("div",[e._v("\n                      "+e._s(e.t("plugins.labels.installing"))+"\n                    ")]):t("div",[e._v("\n                      "+e._s(e.t("plugins.labels.uninstalling"))+"\n                    ")])]):a.installed?t("div",{staticClass:"plugin-buttons"},[a.builtin?e._e():t("button",{staticClass:"btn role-secondary",attrs:{"data-testid":"extension-card-uninstall-btn-".concat(a.name)},on:{click:function(t){return e.showUninstallDialog(a,t)}}},[e._v("\n                      "+e._s(e.t("plugins.uninstall.label"))+"\n                    ")]),e._v(" "),a.upgrade?t("button",{staticClass:"btn role-secondary",attrs:{"data-testid":"extension-card-update-btn-".concat(a.name)},on:{click:function(t){return e.showInstallDialog(a,"update",t)}}},[e._v("\n                      "+e._s(e.t("plugins.update.label"))+"\n                    ")]):e._e(),e._v(" "),!a.upgrade&&a.installableVersions&&a.installableVersions.length>1?t("button",{staticClass:"btn role-secondary",attrs:{"data-testid":"extension-card-rollback-btn-".concat(a.name)},on:{click:function(t){return e.showInstallDialog(a,"rollback",t)}}},[e._v("\n                      "+e._s(e.t("plugins.rollback.label"))+"\n                    ")]):e._e()]):a.installableVersions&&a.installableVersions.length?t("div",{staticClass:"plugin-buttons"},[t("button",{staticClass:"btn role-secondary",attrs:{"data-testid":"extension-card-install-btn-".concat(a.name)},on:{click:function(t){return e.showInstallDialog(a,"install",t)}}},[e._v("\n                      "+e._s(e.t("plugins.install.label"))+"\n                    ")])]):e._e()],2)])])}))],2)]]],2):t("div",[e.loading?t("div",{staticClass:"data-loading"},[t("i",{staticClass:"icon-spin icon icon-spinner"}),e._v(" "),t("t",{attrs:{k:"generic.loading",raw:!0}})],1):t("SetupUIPlugins",{staticClass:"setup-message",on:{done:function(t){return e.updateInstallStatus(!0)},refreshCharts:function(t){return e.refreshCharts(!0)}}})],1),e._v(" "),t("InstallDialog",{ref:"installDialog",on:{closed:e.didInstall,update:e.updatePluginInstallStatus}}),e._v(" "),t("UninstallDialog",{ref:"uninstallDialog",on:{closed:e.didUninstall,update:e.updatePluginInstallStatus}}),e._v(" "),t("CatalogLoadDialog",{ref:"catalogLoadDialog",on:{closed:e.didInstall}}),e._v(" "),t("DeveloperInstallDialog",{ref:"developerInstallDialog",on:{closed:e.didInstall}}),e._v(" "),t("RemoveUIPlugins",{ref:"removeUIPlugins",on:{done:e.updateInstallStatus}}),e._v(" "),t("AddExtensionRepos",{ref:"addExtensionReposDialog",on:{done:function(t){return e.updateInstallStatus(!0)}}})],1)},i=[],s=(a("e439"),a("dbb4"),a("53ca")),r=a("2909"),o=a("ade3"),l=a("1da1"),c=a("a34a"),u=a.n(c),d=(a("96cf"),a("07ac"),a("7db0"),a("d3b7"),a("4de4"),a("d81d"),a("159b"),a("99af"),a("b64b"),a("2b0e")),p=a("2f62"),g=a("e528"),f=a("b25d"),v=a("fa98"),m=a("a788"),h=a("c5b9"),b=a("2f40"),x=a("ac98"),_=a("7388"),y=a("959a"),w=a("1ffb"),O=a("a4d2"),C=a("f38f"),k=a("2678"),R=a("bc1c"),P=a("4297"),E=a("94af"),j=a("28f0"),I=(a("498a"),function(){var e=this,t=e._self._c;return t("modal",{attrs:{name:"catalogLoadDialog",height:"auto",scrollable:!0},on:{closed:function(t){return e.closeDialog()}}},[e.$fetchState.loading?t("Loading",{attrs:{mode:"relative"}}):t("div",{staticClass:"plugin-install-dialog"},[[t("div",[t("h4",[e._v("\n          "+e._s(e.t("plugins.manageCatalog.imageLoad.load"))+"\n        ")]),e._v(" "),t("p",[e._v("\n          "+e._s(e.t("plugins.manageCatalog.imageLoad.prompt"))+"\n        ")]),e._v(" "),t("div",{staticClass:"custom mt-10"},[t("Banner",{staticClass:"mt-10",attrs:{color:"info",label:e.t("plugins.manageCatalog.imageLoad.banner")}})],1),e._v(" "),t("div",{staticClass:"custom mt-10"},[t("div",{staticClass:"fields"},[t("LabeledInput",{attrs:{"label-key":"plugins.manageCatalog.imageLoad.fields.image.label","placeholder-key":"plugins.manageCatalog.imageLoad.fields.image.placeholder"},model:{value:e.deploymentValues.spec.template.spec.containers[0].image,callback:function(t){e.$set(e.deploymentValues.spec.template.spec.containers[0],"image","string"===typeof t?t.trim():t)},expression:"deploymentValues.spec.template.spec.containers[0].image"}})],1)]),e._v(" "),t("div",{staticClass:"custom mt-10"},[t("div",{staticClass:"fields"},[t("LabeledSelect",{attrs:{label:e.t("workload.container.imagePullSecrets"),multiple:!0,taggable:!0,options:e.imagePullNamespacedSecrets,"option-label":"metadata.name",reduce:function(e){return e.metadata.name}},model:{value:e.imagePullSecrets,callback:function(t){e.imagePullSecrets=t},expression:"imagePullSecrets"}}),e._v(" "),t("Banner",{staticClass:"mt-10",attrs:{color:"warning"}},[t("span",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t("plugins.manageCatalog.imageLoad.fields.secrets.banner",{},!0),expression:"t('plugins.manageCatalog.imageLoad.fields.secrets.banner', {}, true)"}]})])],1)])])],e._v(" "),t("div",{staticClass:"custom mt-10"},[t("div",{staticClass:"fields"},[t("div",{staticClass:"dialog-buttons mt-20"},[t("button",{staticClass:"btn role-secondary",attrs:{"data-testid":"image-load-ext-modal-cancel-btn"},on:{click:function(t){return e.closeDialog()}}},[e._v("\n            "+e._s(e.t("generic.cancel"))+"\n          ")]),e._v(" "),t("AsyncButton",{attrs:{mode:"load","data-testid":"image-load-ext-modal-install-btn"},on:{click:e.loadImage}})],1)])])],2)],1)}),D=[],S=(a("e260"),a("4ec9"),a("6062"),a("cca6"),a("a15b"),a("ac1f"),a("13ea")),A=a.n(S),L=a("7600"),T=a("1f91"),V=a("2ba48"),$=a("67c9"),M=a("a95f"),N=a("c778"),U=a("bec1"),B=a("84d3");function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var F={type:m["eb"].DEPLOYMENT,metadata:{name:"",namespace:L["k"],labels:{}},spec:{replicas:1,selector:{matchLabels:{}},template:{metadata:{namespace:L["k"],labels:{}},spec:{containers:[{image:"",imagePullPolicy:"Always",name:"container-0"}],imagePullSecrets:[],restartPolicy:"Always"}}}},K={type:m["T"],metadata:{name:"",namespace:L["k"],labels:Object(o["a"])({},L["j"].CATALOG_IMAGE,"")},spec:{ports:[{name:"",port:8080,protocol:"TCP",targetPort:8080}],selector:Object(o["a"])({},L["j"].CATALOG_IMAGE,""),type:"ClusterIP"}},q={type:m["f"].CLUSTER_REPO,metadata:{name:"",labels:Object(o["a"])({},L["j"].CATALOG_IMAGE,"")},spec:{url:null}},Y=function(){var e=structuredClone(F),t=structuredClone(K),a=structuredClone(q);return{deploymentValues:e,serviceValues:t,repoValues:a,canModifyName:!0,canModifyImage:!0,imagePullSecrets:[],imagePullNamespacedSecrets:[],extensionUrl:null,extensionDeployment:null,extensionSvc:null,extensionRepo:null,extensionCrd:null}},Z={components:{AsyncButton:$["b"],Banner:U["a"],LabeledInput:B["a"],Loading:N["a"],LabeledSelect:M["a"]},mixins:[V["a"]],fetch:function(){var e=this;return Object(l["a"])(u.a.mark((function t(){var a;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={},e.$store.getters["management/canList"](m["eb"].DEPLOYMENT)&&(a.deployments=e.$store.dispatch("management/findAll",{type:m["eb"].DEPLOYMENT})),e.$store.getters["management/canList"](m["T"])&&(a.services=e.$store.dispatch("management/findAll",{type:m["T"]})),t.next=5,Object(v["a"])(a);case 5:e.secondaryResourceData=e.secondaryResourceDataConfig(),e.resourceManagerFetchSecondaryResources(e.secondaryResourceData);case 7:case"end":return t.stop()}}),t)})))()},data:function(){return z(z({},Y()),{},{secondaryResourceData:null})},computed:z(z({},Object(p["b"])({allRepos:"catalog/repos"})),{},{namespacedDeployments:function(){return this.$store.getters["management/all"](m["eb"].DEPLOYMENT).filter((function(e){return e.metadata.namespace===L["k"]}))},namespacedServices:function(){return this.$store.getters["management/all"](m["T"]).filter((function(e){return e.metadata.namespace===L["k"]}))}}),methods:{secondaryResourceDataConfig:function(){return{namespace:L["k"],data:Object(o["a"])({},m["S"],{applyTo:[{var:"imagePullNamespacedSecrets",parsingFunc:function(e){return e.filter((function(e){return e._type===T["TYPES"].DOCKER||e._type===T["TYPES"].DOCKER_JSON}))}}]})}},showDialog:function(){this.$modal.show("catalogLoadDialog")},closeDialog:function(e){this.$modal.hide("catalogLoadDialog"),this.$emit("closed",e),Object.assign(this.$data,Y()),this.secondaryResourceData=this.secondaryResourceDataConfig(),this.resourceManagerFetchSecondaryResources(this.secondaryResourceData)},loadImage:function(e){var t=this;return Object(l["a"])(u.a.mark((function a(){var n,i;return u.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,A()(t.deploymentValues.spec.template.spec.containers[0].image)){a.next=20;break}if(n=t.deploymentValues.spec.template.spec.containers[0].image,i=t.extractImageName(n),!i){a.next=19;break}return a.next=7,t.loadDeployment(n,i,e);case 7:if(!t.extensionDeployment){a.next=10;break}return a.next=10,t.loadService(i,e);case 10:if(!t.extensionSvc){a.next=13;break}return a.next=13,t.loadRepo(i,e);case 13:if(!t.extensionRepo){a.next=16;break}return a.next=16,t.loadPlugin(i,t.extensionUrl,n);case 16:e(!0),a.next=20;break;case 19:throw new Error("Unable to determine image name");case 20:a.next=26;break;case 22:a.prev=22,a.t0=a["catch"](0),t.handleGrowlError(a.t0,!0),e(!1);case 26:case"end":return a.stop()}}),a,null,[[0,22]])})))()},loadDeployment:function(e,t,a){var n=this;return Object(l["a"])(u.a.mark((function i(){var s,r,o;return u.a.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(s=n.namespacedDeployments.find((function(t){return t.spec.template.spec.containers[0].image===e})),s){i.next=17;break}return r=n.parseDeploymentValues(t),i.next=5,n.$store.dispatch("management/create",r);case 5:return n.extensionDeployment=i.sent,i.prev=6,i.next=9,n.extensionDeployment.save();case 9:i.next=15;break;case 11:i.prev=11,i.t0=i["catch"](6),n.handleGrowlError(i.t0,!0),a(!1);case 15:i.next=20;break;case 17:o={_statusText:n.t("plugins.manageCatalog.imageLoad.error.exists.deployment.title"),message:n.t("plugins.manageCatalog.imageLoad.error.exists.deployment.message",{image:e})},n.handleGrowlError(o),a(!1);case 20:case"end":return i.stop()}}),i,null,[[6,11]])})))()},loadService:function(e,t){var a=this;return Object(l["a"])(u.a.mark((function n(){var i,s,r,o,l;return u.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i="".concat(e,"-svc"),s=a.namespacedServices.find((function(e){return e.metadata.name===i})),!s){n.next=7;break}return r={_statusText:a.t("plugins.manageCatalog.imageLoad.error.exists.service.title"),message:a.t("plugins.manageCatalog.imageLoad.error.exists.service.message",{svc:i})},a.handleGrowlError(r,!0),t(!1),n.abrupt("return");case 7:return o=a.parseServiceValues(e,i),n.next=10,a.$store.dispatch("management/create",o);case 10:return l=n.sent,n.prev=11,n.next=14,l.save();case 14:n.next=21;break;case 16:return n.prev=16,n.t0=n["catch"](11),a.handleGrowlError(n.t0,!0),t(!1),n.abrupt("return");case 21:return n.prev=21,n.next=24,a.$store.dispatch("management/find",{type:m["T"],id:"".concat(L["k"],"/").concat(l.metadata.name),namespace:L["k"]});case 24:if(a.extensionSvc=n.sent,!a.extensionSvc){n.next=29;break}a.extensionUrl="http://".concat(a.extensionSvc.spec.clusterIP,":").concat(a.extensionSvc.spec.ports[0].port),n.next=30;break;case 29:throw new Error("Error fetching extension service");case 30:n.next=36;break;case 32:n.prev=32,n.t1=n["catch"](21),a.handleGrowlError(n.t1,!0),t(!1);case 36:case"end":return n.stop()}}),n,null,[[11,16],[21,32]])})))()},loadRepo:function(e,t){var a=this;return Object(l["a"])(u.a.mark((function n(){var i,s,r,o;return u.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i="".concat(e,"-charts"),s=a.allRepos.find((function(e){return e.metadata.name===i})),!s){n.next=8;break}return r={_statusText:a.t("plugins.manageCatalog.imageLoad.error.exists.repo.title"),message:a.t("plugins.manageCatalog.imageLoad.error.exists.repo.message",{repo:i})},a.handleGrowlError(r),t(!1),a.clean(),n.abrupt("return");case 8:return o=a.parseRepoValues(i),n.next=11,a.$store.dispatch("management/create",o);case 11:return a.extensionRepo=n.sent,n.prev=12,n.next=15,a.extensionRepo.save();case 15:n.next=21;break;case 17:n.prev=17,n.t0=n["catch"](12),a.handleGrowlError(n.t0,!0),t(!1);case 21:case"end":return n.stop()}}),n,null,[[12,17]])})))()},loadPlugin:function(e,t,a,n){var i=this;return Object(l["a"])(u.a.mark((function s(){var r,l,c,d;return u.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return l=i.extractImageVersion(a)||"latest",i.extractImageVersion(a)||i.$store.dispatch("growl/warning",{title:i.t("plugins.manageCatalog.imageLoad.imageVersion.title"),message:i.t("plugins.manageCatalog.imageLoad.imageVersion.message",{image:a}),timeout:4e3},{root:!0}),c=e,d=e.split("-"),d.length>=2&&(c=d.join("-")),s.next=7,i.$store.dispatch("management/create",{type:m["Z"],metadata:{name:e,namespace:L["k"],labels:(r={},Object(o["a"])(r,L["j"].CATALOG_IMAGE,e),Object(o["a"])(r,L["j"].REPOSITORY,i.extensionRepo.metadata.name),r)},spec:{plugin:{name:c,version:l,endpoint:t,noCache:!1,metadata:Object(o["a"])({},L["j"].CATALOG,"true")}}});case 7:return i.extensionCrd=s.sent,s.prev=8,s.next=11,i.extensionCrd.save({url:"/v1/".concat(m["Z"]),method:"POST"});case 11:i.closeDialog(),i.$store.dispatch("growl/success",{title:i.t("plugins.manageCatalog.imageLoad.success.title",{name:e}),message:i.t("plugins.manageCatalog.imageLoad.success.message"),timeout:4e3},{root:!0}),s.next=19;break;case 15:s.prev=15,s.t0=s["catch"](8),i.handleGrowlError(s.t0,!0),n(!1);case 19:case"end":return s.stop()}}),s,null,[[8,15]])})))()},parseDeploymentValues:function(e){var t={};this.$set(this.deploymentValues.metadata,"name",e);var a=Object(o["a"])({},L["j"].CATALOG_IMAGE,e),n=["metadata.labels","spec.selector.matchLabels","spec.template.metadata.labels"];return t=this.assignLabels(this.deploymentValues,a,n),this.imagePullSecrets.length&&(t.spec.template.spec.imagePullSecrets=this.imagePullSecrets.map((function(e){return{name:e}}))),t},parseServiceValues:function(e,t){var a=this.serviceValues;return a.metadata.name=t,a.metadata.labels[L["j"].CATALOG_IMAGE]=e,a.spec.selector[L["j"].CATALOG_IMAGE]=e,a},parseRepoValues:function(e){var t=this.repoValues;return t.metadata.name=e,t.metadata.labels[L["j"].CATALOG_IMAGE]=this.deploymentValues.metadata.name,t.spec.url=this.extensionUrl,t},assignLabels:function(e,t,a){for(var n=0;n<a.length;n++){for(var i=a[n].split("."),s=e,r=0;r<i.length-1;r++)s=s[i[r]];s[i[i.length-1]]=t}return e},extractImageVersion:function(e){var t=/:(\d+\.\d+\.\d+([-\w\d]+)*)$/,a=t.exec(e);return a?a[1]:null},extractImageName:function(e){var t=/\/([^/:]+)(?::\d+\.\d+\.\d+(-[a-zA-Z0-9]+)?|$)/,a=t.exec(e);return a?a[1]:null},clean:function(){this.extensionDeployment&&this.extensionDeployment.remove(),this.extensionSvc&&this.extensionSvc.remove(),this.extensionRepo&&this.extensionRepo.remove(),this.extensionCrd&&this.extensionCrd.remove()},handleGrowlError:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=(null===e||void 0===e?void 0:e.data)||e;this.$store.dispatch("growl/error",{title:a._statusText,message:a.message,timeout:5e3},{root:!0}),t&&this.clean()}}},W=Z,H=(a("daa9"),a("0c7c")),J=Object(H["a"])(W,I,D,!1,null,"33afadc2",null),X=J.exports,Q=a("9744"),ee=a("b4b2"),te=a("c150"),ae=a("093f"),ne=function(){var e=this,t=e._self._c;return t("Dialog",{attrs:{name:"add-extensions-repos",title:e.t("plugins.addRepos.title"),mode:"add","data-testid":"add-extensions-repos-modal"},on:{okay:e.doAddRepos}},[[t("p",{staticClass:"mb-20"},[e._v("\n      "+e._s(e.t("plugins.addRepos.prompt",{},!0))+"\n    ")]),e._v(" "),t("div",{staticClass:"mb-15"},[t("Checkbox",{attrs:{disabled:e.hasRancherUIPluginsRepo,primary:!0,"label-key":"plugins.setup.install.addRancherRepo","data-testid":"add-extensions-repos-modal-add-official-repo"},model:{value:e.addRepos.official,callback:function(t){e.$set(e.addRepos,"official",t)},expression:"addRepos.official"}}),e._v(" "),e.hasRancherUIPluginsRepo?t("div",{staticClass:"checkbox-info"},[e._v("\n        ("+e._s(e.t("plugins.setup.installed"))+")\n      ")]):e._e()],1),e._v(" "),t("div",{staticClass:"mb-15"},[t("Checkbox",{attrs:{disabled:e.hasRancherUIPartnersPluginsRepo,primary:!0,"label-key":"plugins.setup.install.addPartnersRancherRepo","data-testid":"add-extensions-repos-modal-add-partners-repo"},model:{value:e.addRepos.partners,callback:function(t){e.$set(e.addRepos,"partners",t)},expression:"addRepos.partners"}}),e._v(" "),e.hasRancherUIPartnersPluginsRepo?t("div",{staticClass:"checkbox-info"},[e._v("\n        ("+e._s(e.t("plugins.setup.installed"))+")\n      ")]):e._e()],1)]],2)},ie=[],se=(a("e6cf"),a("f20a"),a("3ca3"),a("ddb0"),a("e5e4")),re=a("bd30"),oe={components:{Checkbox:re["a"],Dialog:se["a"]},fetch:function(){var e=this;return Object(l["a"])(u.a.mark((function t(){return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$store.getters["management/schemaFor"](m["f"].CLUSTER_REPO)){t.next=4;break}return t.next=3,e.$store.dispatch("management/findAll",{type:m["f"].CLUSTER_REPO,opt:{force:!0}});case 3:e.repos=t.sent;case 4:case"end":return t.stop()}}),t)})))()},data:function(){return{errors:[],repos:[],addRepos:{official:!0,partners:!0},reposInfo:{official:{repo:void 0,name:L["e"],url:L["f"],branch:L["d"]},partners:{repo:void 0,name:L["b"],url:L["c"],branch:L["a"]}}}},computed:{hasRancherUIPluginsRepo:function(){return!!this.repos.find((function(e){return e.urlDisplay===L["f"]}))},hasRancherUIPartnersPluginsRepo:function(){return!!this.repos.find((function(e){return e.urlDisplay===L["c"]}))},isAnyRepoAvailableForInstall:function(){return!this.hasRancherUIPluginsRepo||!this.hasRancherUIPartnersPluginsRepo}},methods:{showDialog:function(){this.addRepos={official:!this.hasRancherUIPluginsRepo,partners:!this.hasRancherUIPartnersPluginsRepo},this.$modal.show("add-extensions-repos")},doAddRepos:function(e){var t=this;return Object(l["a"])(u.a.mark((function a(){var n,i,s,r;return u.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.errors=[],n=[],a.t0=u.a.keys(t.addRepos);case 3:if((a.t1=a.t0()).done){a.next=12;break}if(i=a.t1.value,!t.addRepos[i]){a.next=10;break}return a.next=8,t.$store.dispatch("management/create",{type:m["f"].CLUSTER_REPO,metadata:{name:t.reposInfo[i].name},spec:{gitBranch:t.reposInfo[i].branch,gitRepo:t.reposInfo[i].url}});case 8:s=a.sent,n.push(s.save());case 10:a.next=3;break;case 12:if(!n.length){a.next=17;break}return a.next=15,Promise.allSettled(n);case 15:r=a.sent,r.forEach((function(e){"rejected"===e.status&&(console.error(e.reason),t.errors.push(e.reason))}));case 17:t.$emit("done"),e(!0);case 19:case"end":return a.stop()}}),a)})))()}}},le=oe,ce=(a("e580"),Object(H["a"])(le,ne,ie,!1,null,"0c28a860",null)),ue=ce.exports,de=function(){var e=this,t=e._self._c;return t("div",{staticClass:"row mt-20"},[t("div",{staticClass:"col span-12"},[t("ResourceTable",{attrs:{headers:e.catalogHeaders,rows:e.catalogRows,paging:!0,"rows-per-page":10,"table-actions":!1,"key-field":"name"},scopedSlots:e._u([{key:"header-left",fn:function(){return[t("div",[t("button",{staticClass:"btn bg-primary mr-10",attrs:{type:"button","aria-haspopup":"dialog","data-testid":"extensions-catalog-load-dialog"},on:{click:function(t){return e.$emit("showCatalogLoadDialog")}}},[e._v("\n            "+e._s(e.t("plugins.manageCatalog.imageLoad.load"))+"\n          ")])])]},proxy:!0},{key:"row-actions",fn:function(a){var n=a.row;return[t("button",{ref:"catalogActions",staticClass:"btn btn-sm role-multi-action actions",attrs:{"aria-haspopup":"true",type:"button","data-testid":"extensions-page-catalog-row-menu"},on:{click:e.setMenu}},[t("i",{staticClass:"icon icon-actions"})]),e._v(" "),t("ActionMenu",{attrs:{"custom-actions":e.actions,open:e.menuOpen,"use-custom-target-element":!0,"custom-target-element":e.menuTargetElement,"custom-target-event":e.menuTargetEvent},on:{close:function(t){return e.setMenu(!1)},uninstall:function(t){return e.$emit("showUninstallDialog",n,t.event)}}})]}}])})],1)])},pe=[],ge=a("9149"),fe=a("b178");function ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function me(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ve(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var he={name:"CatalogList",props:{plugins:{type:Array,required:!0}},components:{ActionMenu:w["a"],ResourceTable:fe["a"]},mixins:[V["a"]],data:function(){var e=[{action:"uninstall",label:this.t("plugins.uninstall.label"),icon:"icon icon-trash",enabled:!0}];return{actions:e,catalogHeaders:ge["Fb"],menuTargetElement:null,menuTargetEvent:null,menuOpen:!1}},computed:me(me({},Object(p["b"])({allRepos:"catalog/repos"})),{},{namespacedDeployments:function(){return this.$store.getters["management/all"](m["eb"].DEPLOYMENT).filter((function(e){return e.metadata.namespace===L["k"]}))},namespacedServices:function(){return this.$store.getters["management/all"](m["T"]).filter((function(e){return e.metadata.namespace===L["k"]}))},catalogRows:function(){var e=this,t=[];return this.plugins.length&&this.plugins.forEach((function(a){var n,i,s=[e.namespacedDeployments,e.namespacedServices,e.allRepos],r=null===(n=a.metadata)||void 0===n||null===(i=n.labels)||void 0===i?void 0:i[L["j"].CATALOG_IMAGE];if(r){var o,l,c,u,d,p,g,f,v,m={uiplugin:a,catalog:!0,name:r,state:null===(o=a.metadata)||void 0===o||null===(l=o.state)||void 0===l?void 0:l.name,cacheState:null===(c=a.status)||void 0===c?void 0:c.cacheState,version:null===(u=a.spec)||void 0===u||null===(d=u.plugin)||void 0===d?void 0:d.version,deployment:null,deploymentImage:null,service:null,repo:null},h=["deployment","service","repo"];if(s.forEach((function(e,t){m[h[t]]=null===e||void 0===e?void 0:e.filter((function(e){var t,a;return(null===(t=e.metadata)||void 0===t||null===(a=t.labels)||void 0===a?void 0:a[L["j"].CATALOG_IMAGE])===r}))[0]})),!A()(null===m||void 0===m?void 0:m.deployment))m.deploymentImage=null===(p=m.deployment.spec)||void 0===p||null===(g=p.template)||void 0===g||null===(f=g.spec)||void 0===f||null===(v=f.containers[0])||void 0===v?void 0:v.image,t.push(m)}})),t}}),methods:{setMenu:function(e){this.menuOpen=!!e,e?(this.menuTargetElement=this.$refs.catalogActions,this.menuTargetEvent=e):(this.menuTargetElement=void 0,this.menuTargetEvent=void 0)}}},be=he,xe=(a("5a66"),Object(H["a"])(be,de,pe,!1,null,"474b3fee",null)),_e=xe.exports,ye=a("01ba");function we(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?we(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):we(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ce=200,ke={INSTALLED:"installed",UPDATES:"updates",AVAILABLE:"available",ALL:"all"},Re={components:{ActionMenu:w["a"],BadgeState:P["a"],DeveloperInstallDialog:Q["default"],IconMessage:k["a"],CatalogList:_e,Banner:ye["a"],CatalogLoadDialog:X,InstallDialog:j["default"],LazyImage:R["a"],PluginInfoPanel:ee["default"],Tab:C["a"],Tabbed:O["a"],UninstallDialog:E["default"],SetupUIPlugins:te["default"],RemoveUIPlugins:ae["default"],AddExtensionRepos:ue},data:function(){var e;return{TABS_VALUES:ke,kubeVersion:null,view:"",charts:[],installing:{},errors:{},plugins:[],helmOps:[],addExtensionReposBannerSetting:void 0,loading:!0,menuTargetElement:null,menuTargetEvent:null,menuOpen:!1,hasService:!1,defaultIcon:a("53a6"),reloadRequired:!1,rancherVersion:null===(e=Object(x["a"])())||void 0===e?void 0:e.Version,showCatalogList:!1}},layout:"plain",fetch:function(){var e=this;return Object(l["a"])(u.a.mark((function t(){var a,n,i,s,r,o;return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={},t.next=3,e.updateInstallStatus(!0);case 3:return i=t.sent,i&&e.$store.getters["management/schemaFor"](m["Z"])&&(n.plugins=e.$store.dispatch("management/findAll",{type:m["Z"]})),t.next=7,e.$store.dispatch("catalog/load",{reset:!0});case 7:if(n.load=t.sent,!e.$store.getters["management/schemaFor"](m["A"].CLUSTER)){t.next=12;break}return t.next=11,e.$store.dispatch("management/find",{type:m["A"].CLUSTER,id:"local"});case 11:n.localCluster=t.sent;case 12:if(!e.$store.getters["management/schemaFor"](m["f"].OPERATION)){t.next=16;break}return t.next=15,e.$store.dispatch("management/findAll",{type:m["f"].OPERATION});case 15:n.helmOps=t.sent;case 16:if(!e.$store.getters["management/schemaFor"](m["f"].CLUSTER_REPO)){t.next=20;break}return t.next=19,e.$store.dispatch("management/findAll",{type:m["f"].CLUSTER_REPO});case 19:n.repos=t.sent;case 20:return t.next=22,Object(v["a"])(n);case 22:return s=t.sent,e.plugins=s.plugins||[],e.repos=s.repos||[],e.helmOps=s.helmOps||[],e.kubeVersion=(null===(a=s.localCluster)||void 0===a?void 0:a.kubernetesVersionBase)||[],t.next=29,Object(b["a"])(e.$store,h["c"].ADD_EXTENSION_REPOS_BANNER_DISPLAY,"true",!0);case 29:if(t.t0=t.sent,t.t0){t.next=32;break}t.t0={};case 32:e.addExtensionReposBannerSetting=t.t0,r=e.$store.getters["catalog/rawCharts"],e.charts=Object.values(r),0===e.plugins.length&&(null===(o=e.$refs.tabs)||void 0===o||o.select(ke.AVAILABLE)),e.loading=!1;case 37:case"end":return t.stop()}}),t)})))()},computed:Oe(Oe(Oe(Oe({pluginDeveloper:Object(g["mapPref"])(g["PLUGIN_DEVELOPER"])},Object(p["b"])({uiplugins:"uiplugins/plugins"})),Object(p["b"])({uiErrors:"uiplugins/errors"})),Object(p["b"])({theme:"prefs/theme"})),{},{showAddReposBanner:function(){var e;return"true"===(null===(e=this.addExtensionReposBannerSetting)||void 0===e?void 0:e.value)&&(!this.repos.find((function(e){return e.urlDisplay===L["f"]}))||!this.repos.find((function(e){return e.urlDisplay===L["c"]})))},applyDarkModeBg:function(){return"dark"===this.theme?{"dark-mode":!0}:{}},menuActions:function(){var e=[];return e.push({action:"manageRepos",label:this.t("plugins.manageRepos"),enabled:!0}),e.push({action:"addRancherRepos",label:this.t("plugins.addRancherRepos"),enabled:!0}),this.showCatalogList||e.push({action:"manageExtensionView",label:this.t("plugins.manageCatalog.label"),enabled:!0}),this.pluginDeveloper&&(e.push({divider:!0}),e.push({action:"devLoad",label:this.t("plugins.developer.label"),enabled:!0})),this.hasService&&(e.push({divider:!0}),e.push({action:"removePluginSupport",label:this.t("plugins.setup.remove.label"),enabled:!0})),e},list:function(){var e=this.available;switch(this.view){case ke.INSTALLED:return e.filter((function(e){return!!e.installed||!!e.installing}));case ke.UPDATES:return this.updates;case ke.AVAILABLE:return e.filter((function(e){return!e.installed}));default:return e}},hasMenuActions:function(){var e;return(null===(e=this.menuActions)||void 0===e?void 0:e.length)>0},emptyMessage:function(){return this.t("plugins.empty.".concat(this.view))},updates:function(){return this.available.filter((function(e){return!!e.upgrade}))},available:function(){var e=this,t=this.charts.filter((function(e){return Object(L["q"])(e)}));return t=t.filter((function(e){return!Object(L["t"])(e,_["e"].HIDDEN,"true")})),t=t.map((function(t){var a,n,i=Object(L["s"])(L["i"].DISPLAY_NAME)||t.chartNameDisplay,s={name:t.chartNameDisplay,label:i,description:t.chartDescription,id:t.id,versions:[],installed:!1,builtin:!1,experimental:Object(L["t"])(t,_["e"].EXPERIMENTAL,"true"),certified:Object(L["t"])(t,_["e"].CERTIFIED,_["e"]._RANCHER)};s.versions=Object(r["a"])(t.versions),s.chart=t,s.installableVersions=s.versions.filter((function(t){return Object(L["p"])({version:t,kubeVersion:e.kubeVersion})&&Object(L["n"])({version:t,rancherVersion:e.rancherVersion,kubeVersion:e.kubeVersion})})),s.versions=s.versions.map((function(t){return Object(L["n"])({version:t,rancherVersion:e.rancherVersion,kubeVersion:e.kubeVersion},!0)}));var o,l,c,u=null===(a=s.installableVersions)||void 0===a?void 0:a[0],d=s.versions.find((function(e){return!e.isCompatibleWithUi||!e.isCompatibleWithKubeVersion}));u?(s.displayVersion=u.version,s.icon=u.icon):(s.displayVersion=null===(o=s.versions)||void 0===o||null===(l=o[0])||void 0===l?void 0:l.version,s.icon=t.icon||(null===u||void 0===u||null===(c=u.annotations)||void 0===c?void 0:c["catalog.cattle.io/ui-icon"]));return d&&s.installableVersions.length&&Object(L["o"])(d.version,null===(n=s.installableVersions)||void 0===n?void 0:n[0].version)&&(s.isCompatibleWithUi?s.isCompatibleWithKubeVersion||(s.incompatibleKubeVersion=e.t("plugins.incompatibleKubeVersion",{version:d.version,kubeVersion:d.requiredKubeVersion},!0)):s.incompatibleRancherVersion=e.t("plugins.incompatibleRancherVersion",{version:d.version,rancherVersion:d.requiredUiVersion},!0)),e.installing[s.name]&&(s.installing=e.installing[s.name]),s})),t=t.filter((function(e){return e.versions.length>0})),this.uiplugins.forEach((function(e){var a=t.find((function(t){return t.name===e.name}));if(!a){var n,i,r,o,l="object"===Object(s["a"])(null===(n=e.metadata)||void 0===n?void 0:n.rancher)?e.metadata.rancher:{},c=l[L["i"].DISPLAY_NAME]||e.name,u={name:e.name,label:c,description:null===(i=e.metadata)||void 0===i?void 0:i.description,icon:null===(r=e.metadata)||void 0===r?void 0:r.icon,id:e.id,versions:[],displayVersion:(null===(o=e.metadata)||void 0===o?void 0:o.version)||"-",installed:!0,builtin:!!e.builtin};t.push(u)}})),this.plugins.forEach((function(a){var n,i,s=t.find((function(e){return e.name===a.name}));if(null===(n=a.metadata)||void 0===n||null===(i=n.labels)||void 0===i||!i[L["j"].CATALOG_IMAGE])if(s){var r,o,l;s.installed=!0,s.uiplugin=a,s.displayVersion=a.version,s.installing=e.installing[s.name],null!==(r=s.installableVersions)&&void 0!==r&&r.length&&a.version!==(null===(o=s.installableVersions)||void 0===o||null===(l=o[0])||void 0===l?void 0:l.version)&&(s.upgrade=s.installableVersions[0].version)}else{var c={name:a.name,label:a.name,description:a.description||"-",id:"".concat(a.name,"-").concat(a.version),versions:[],displayVersion:a.version||"-",installed:!0,installing:!1,builtin:!1,uiplugin:a};t.push(c)}})),Object.keys(this.uiErrors).forEach((function(a){var n=t.find((function(e){return e.name===a}));if(n){var i=e.uiErrors[a];n.error=!(!i||"string"!==typeof i)&&e.t(e.uiErrors[a])}})),Object.keys(this.errors).forEach((function(a){var n=t.find((function(e){return e.name===a}));n&&(n.helmError=!!e.errors[a])})),t.forEach((function(t){if(t.description&&t.description.length>Ce&&(t.description="".concat(t.description.substr(0,Ce)," ...")),t.uiplugin){var a,n,i=null===(a=t.uiplugin.spec)||void 0===a||null===(n=a.plugin)||void 0===n?void 0:n.version,s=t.versions.find((function(e){return e.version===i}));if(s){var r,o=null===(r=s.annotations)||void 0===r?void 0:r[L["i"].KUBE_VERSION];e.kubeVersion&&!Object(L["p"])({version:s,kubeVersion:e.kubeVersion})&&(t.installedError=e.t("plugins.currentInstalledVersionBlockedByKubeVersion",{kubeVersion:e.kubeVersion,kubeVersionToCheck:o},!0))}}})),Object(f["b"])(t,"name",!1)},pluginsFromCatalogImage:function(){return this.plugins.filter((function(e){var t,a;return null===(t=e.metadata)||void 0===t||null===(a=t.labels)||void 0===a?void 0:a[L["j"].CATALOG_IMAGE]}))}}),watch:{helmOps:function(e){var t=this,a=e.filter((function(e){return e.namespace===L["k"]}));a=Object(f["b"])(a,"metadata.creationTimestamp",!0),(this.available||[]).forEach((function(e){var n=a.find((function(t){var a;return(null===(a=t.status)||void 0===a?void 0:a.releaseName)===e.name}));if(n){var i,s,r=null===(i=n.metadata.state)||void 0===i?void 0:i.transitioning,o=null===(s=n.metadata.state)||void 0===s?void 0:s.error;if(d["default"].set(t.errors,e.name,o),r){var l="upgrade"===n.status.action?"install":n.status.action;t.updatePluginInstallStatus(e.name,l)}else("uninstall"===n.status.action||o)&&t.updatePluginInstallStatus(e.name,!1)}else t.updatePluginInstallStatus(e.name,!1)}))},plugins:function(e,t){var a=this,n=this.$store.getters["uiplugins/plugins"],i=(n||[]).filter((function(e){return!a.uiErrors[e.name]&&!e.builtin})),s=0;(null===e||void 0===e?void 0:e.length)<i.length&&s++,e.forEach((function(e){var t,i,r=n.find((function(t){return!t.removed&&t.name===e.name&&t.version===e.version})),o=null===(t=e.metadata)||void 0===t||null===(i=t.labels)||void 0===i?void 0:i[L["j"].CATALOG_IMAGE];!r&&e.isCached&&(a.uiErrors[e.name]||o||s++,o&&a.refreshCharts(!0),a.updatePluginInstallStatus(e.name,!1))})),s>0&&d["default"].set(this,"reloadRequired",!0)}},beforeDestroy:function(){this.$store.dispatch("management/forgetType",m["Z"]),this.$store.dispatch("management/forgetType",m["f"].OPERATION),this.$store.dispatch("management/forgetType",m["f"].APP),this.$store.dispatch("management/forgetType",m["f"].CLUSTER_REPO)},methods:{refreshCharts:function(){var e=arguments,t=this;return Object(l["a"])(u.a.mark((function a(){var n,i;return u.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.length>0&&void 0!==e[0]&&e[0],a.next=3,t.$store.dispatch("catalog/load",{reset:!0,force:n});case 3:i=t.$store.getters["catalog/rawCharts"],t.charts=Object.values(i);case 5:case"end":return a.stop()}}),a)})))()},updateInstallStatus:function(){var e=arguments,t=this;return Object(l["a"])(u.a.mark((function a(){var n,i,s;return u.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.length>0&&void 0!==e[0]&&e[0],a.prev=1,a.next=4,t.$store.dispatch("management/find",{type:m["T"],id:"".concat(L["k"],"/ui-plugin-operator"),opt:{force:!0}});case 4:s=a.sent,i=!!s,a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](1),i=!1;case 11:return(i||n)&&t.refreshCharts(n),d["default"].set(t,"hasService",i),a.abrupt("return",i);case 14:case"end":return a.stop()}}),a,null,[[1,8]])})))()},filterChanged:function(e){this.view=e.selectedName},removePluginSupport:function(){this.refreshCharts(!0),this.$refs.removeUIPlugins.showDialog()},showDeveloperLoadDialog:function(){this.$refs.developerInstallDialog.showDialog()},showAddExtensionReposDialog:function(){this.updateAddReposSetting(),this.refreshCharts(!0),this.$refs.addExtensionReposDialog.showDialog()},showCatalogLoadDialog:function(){this.$refs.catalogLoadDialog.showDialog()},showInstallDialog:function(e,t,a){var n;null===(n=a.target)||void 0===n||n.blur(),a.preventDefault(),a.stopPropagation(),this.$refs.installDialog.showDialog(e,t)},showUninstallDialog:function(e,t){var a;null===(a=t.target)||void 0===a||a.blur(),t.preventDefault(),t.stopPropagation(),this.$refs.uninstallDialog.showDialog(e)},didUninstall:function(e){e&&(this.updatePluginInstallStatus(e.name,"uninstall"),e.catalog&&this.refreshCharts(),this.$store.dispatch("uiplugins/setError",{name:e.name,error:!1}))},didInstall:function(e){var t;e&&(null===(t=this.$refs.tabs)||void 0===t||t.select(ke.INSTALLED),this.$store.dispatch("uiplugins/setError",{name:e.name,error:!1}))},showPluginDetail:function(e){this.$refs.infoPanel.show(e)},updatePluginInstallStatus:function(e,t){d["default"].set(this.installing,e,t)},setMenu:function(e){this.menuOpen=!!e,e?(this.menuTargetElement=this.$refs.actions,this.menuTargetEvent=e):(this.menuTargetElement=void 0,this.menuTargetEvent=void 0)},reload:function(){this.$router.go()},manageRepos:function(){this.$router.push({name:"c-cluster-product-resource",params:{cluster:"local",product:y["NAME"],resource:m["f"].CLUSTER_REPO}})},manageExtensionView:function(){this.showCatalogList=!this.showCatalogList},updateAddReposSetting:function(){var e;"true"===(null===(e=this.addExtensionReposBannerSetting)||void 0===e?void 0:e.value)&&(this.addExtensionReposBannerSetting.value="false",this.addExtensionReposBannerSetting.save())}}},Pe=Re,Ee=(a("0ca4"),Object(H["a"])(Pe,n,i,!1,null,"a535dd98",null));t["default"]=Ee.exports},"120f":function(e,t,a){var n=a("4bad");t=n(!1),t.push([e.i,".plugin-install-dialog[data-v-33afadc2]{padding:10px}.plugin-install-dialog h4[data-v-33afadc2]{font-weight:700}.plugin-install-dialog .dialog-panel[data-v-33afadc2]{display:flex;flex-direction:column;min-height:100px}.plugin-install-dialog .dialog-panel p[data-v-33afadc2]{margin-bottom:5px}.plugin-install-dialog .dialog-panel .dialog-info[data-v-33afadc2]{flex:1}.plugin-install-dialog .dialog-buttons[data-v-33afadc2]{display:flex;justify-content:flex-end;margin-top:10px}.plugin-install-dialog .dialog-buttons[data-v-33afadc2]>:not(:last-child){margin-right:10px}",""]),e.exports=t},"17b9":function(e,t,a){var n=a("4bad");t=n(!1),t.push([e.i,".plugin-install-dialog[data-v-c8f2eee2]{padding:10px}.plugin-install-dialog h4[data-v-c8f2eee2]{font-weight:700}.plugin-install-dialog .dialog-panel[data-v-c8f2eee2]{display:flex;flex-direction:column;min-height:100px}.plugin-install-dialog .dialog-panel p[data-v-c8f2eee2]{margin-bottom:5px}.plugin-install-dialog .dialog-panel .dialog-info[data-v-c8f2eee2]{flex:1}.plugin-install-dialog .dialog-panel .toggle-advanced[data-v-c8f2eee2]{display:flex;align-items:center;cursor:pointer;margin:10px 0}.plugin-install-dialog .dialog-panel .toggle-advanced[data-v-c8f2eee2]:hover{text-decoration:none;color:var(--link)}.plugin-install-dialog .dialog-panel .version-selector[data-v-c8f2eee2]{margin:0 10px 10px 10px;width:auto}.plugin-install-dialog .dialog-buttons[data-v-c8f2eee2]{display:flex;justify-content:flex-end;margin-top:10px}.plugin-install-dialog .dialog-buttons[data-v-c8f2eee2]>:not(:last-child){margin-right:10px}",""]),e.exports=t},1915:function(e,t,a){"use strict";a("519a")},"1bc9":function(e,t,a){var n=a("3913");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("499e").default;i("09cac510",n,!0,{sourceMap:!1,shadowMode:!1})},"1c48":function(e,t,a){var n=a("5c02");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("499e").default;i("00ea486a",n,!0,{sourceMap:!1,shadowMode:!1})},"27ee":function(e,t,a){var n=a("9dae");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("499e").default;i("1d937753",n,!0,{sourceMap:!1,shadowMode:!1})},"28f0":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("modal",{attrs:{name:"installPluginDialog",height:"auto",scrollable:!0}},[e.plugin?t("div",{staticClass:"plugin-install-dialog"},[t("h4",{staticClass:"mt-10"},[e._v("\n      "+e._s(e.t("plugins.".concat(e.mode,".title"),{name:e.plugin.label}))+"\n    ")]),e._v(" "),t("div",{staticClass:"custom mt-10"},[t("div",{staticClass:"dialog-panel"},[t("p",[e._v("\n          "+e._s(e.t("plugins.".concat(e.mode,".prompt")))+"\n        ")]),e._v(" "),e.plugin.certified?e._e():t("Banner",{attrs:{color:"warning",label:e.t("plugins.install.warnNotCertified")}}),e._v(" "),e.showVersionSelector?t("LabeledSelect",{staticClass:"version-selector mt-10",attrs:{"label-key":"plugins.install.version",options:e.versionOptions,"data-testid":"install-ext-modal-select-version"},model:{value:e.version,callback:function(t){e.version=t},expression:"version"}}):t("div",[e._v("\n          "+e._s(e.t("plugins.install.version"))+" "+e._s(e.version)+"\n        ")])],1),e._v(" "),t("div",{staticClass:"dialog-buttons"},[t("button",{staticClass:"btn role-secondary",attrs:{disabled:e.busy,"data-testid":"install-ext-modal-cancel-btn"},on:{click:function(t){return e.closeDialog(!1)}}},[e._v("\n          "+e._s(e.t("generic.cancel"))+"\n        ")]),e._v(" "),t("AsyncButton",{attrs:{mode:e.buttonMode,"data-testid":"install-ext-modal-install-btn"},on:{click:e.install}})],1)])]):e._e()])},i=[],s=a("ade3"),r=a("1da1"),o=(a("4de4"),a("d3b7"),a("d81d"),a("7db0"),a("b0c0"),a("e260"),a("ddb0"),a("2ca0"),a("99af"),a("a34a")),l=a.n(o),c=(a("96cf"),a("67c9")),u=a("a95f"),d=a("a788"),p=a("7388"),g=a("7600"),f=a("01ba"),v={components:{AsyncButton:c["b"],Banner:f["a"],LabeledSelect:u["a"]},fetch:function(){var e=this;return Object(r["a"])(l.a.mark((function t(){return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("management/find",{type:d["A"].SETTING,id:"system-default-registry"});case 2:e.defaultRegistrySetting=t.sent;case 3:case"end":return t.stop()}}),t)})))()},data:function(){return{currentVersion:"",defaultRegistrySetting:null,plugin:void 0,busy:!1,version:"",update:!1,mode:""}},computed:{showVersionSelector:function(){var e;return(null===(e=this.versionOptions)||void 0===e?void 0:e.length)>1},versionOptions:function(){var e,t,a=this;if(!this.plugin)return[];var n=null===(e=this.plugin)||void 0===e||null===(t=e.installableVersions)||void 0===t?void 0:t.filter((function(e){return!a.currentVersion||e.version!==a.currentVersion}));return n.map((function(e){return{label:e.version,value:e.version}}))},buttonMode:function(){return this.update?"update":"install"}},methods:{showDialog:function(e,t){var a,n,i,s,r=this;if(this.plugin=e,this.mode=t,this.version=e.displayVersion,"update"===t)this.currentVersion=e.displayVersion,(null===(n=e.installableVersions)||void 0===n?void 0:n.length)>0&&(this.version=null===(i=e.installableVersions)||void 0===i||null===(s=i[0])||void 0===s?void 0:s.version);else if("rollback"===t){var o=e.installableVersions.filter((function(t){return t.version!==e.displayVersion}));this.currentVersion=e.displayVersion,o.length>0&&(this.version=o[0].version)}var l,c,u=null===(a=e.installableVersions)||void 0===a?void 0:a.find((function(e){return e.version===r.version}));u||(this.version=null===(l=e.installableVersions)||void 0===l||null===(c=l[0])||void 0===c?void 0:c.version);this.busy=!1,this.update="install"!==t,this.$modal.show("installPluginDialog")},closeDialog:function(e){this.$modal.hide("installPluginDialog"),this.$emit("closed",e)},install:function(){var e=this;return Object(r["a"])(l.a.mark((function t(){var a,n,i,r,o,c,u,f,v,m,h,b,x,_,y,w,O,C,k,R,P;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.busy=!0,r=e.plugin,e.$emit("update",r.name,"install"),o=null===(a=r.versions)||void 0===a?void 0:a.find((function(t){return t.version===e.version})),o){t.next=7;break}return e.busy=!1,t.abrupt("return");case 7:return c=!1,t.prev=8,t.next=11,e.$store.dispatch("catalog/getVersionInfo",{repoType:o.repoType,repoName:o.repoName,chartName:r.chart.chartName,versionName:e.version});case 11:v=t.sent,m=(null===v||void 0===v||null===(u=v.values)||void 0===u||null===(f=u.image)||void 0===f?void 0:f.repository)||"",c=m.startsWith("rancher/"),t.next=18;break;case 16:t.prev=16,t.t0=t["catch"](8);case 18:return h=!1,t.prev=19,t.next=22,e.$store.dispatch("management/find",{type:d["f"].APP,id:"".concat(g["k"],"/").concat(r.chart.chartName),opt:{force:!0}});case 22:b=t.sent,h=!!b,t.next=28;break;case 26:t.prev=26,t.t1=t["catch"](19);case 28:return x=o.repoType,_=o.repoName,y=e.$store.getters["catalog/repo"]({repoType:x,repoName:_}),w={chartName:r.chart.chartName,version:e.version,releaseName:r.chart.chartName,annotations:(n={},Object(s["a"])(n,p["e"].SOURCE_REPO_TYPE,r.repoType),Object(s["a"])(n,p["e"].SOURCE_REPO_NAME,r.repoName),n),values:{}},O=(null===(i=e.defaultRegistrySetting)||void 0===i?void 0:i.value)||"",c&&O&&(w.values.global=w.values.global||{},w.values.global.cattle=w.values.global.cattle||{},w.values.global.cattle.systemDefaultRegistry=O),C={charts:[w],namespace:g["k"]},k=h||e.update?"upgrade":"install",t.prev=36,t.next=39,y.doAction(k,C);case 39:return R=t.sent,P="".concat(R.operationNamespace,"/").concat(R.operationName),e.closeDialog(r),t.next=44,y.waitForOperation(P);case 44:return t.next=46,e.$store.dispatch("management/find",{type:d["f"].OPERATION,id:P});case 46:t.next=52;break;case 48:t.prev=48,t.t2=t["catch"](36),e.$store.dispatch("growl/error",{title:e.t("plugins.error.generic"),message:t.t2.message?t.t2.message:t.t2,timeout:1e4},{root:!0}),e.closeDialog(r);case 52:case"end":return t.stop()}}),t,null,[[8,16],[19,26],[36,48]])})))()}}},m=v,h=(a("d88e"),a("0c7c")),b=Object(h["a"])(m,n,i,!1,null,"24e3c204",null);t["default"]=b.exports},"2c4d":function(e,t,a){var n=a("4bad");t=n(!1),t.push([e.i,".enable-plugin-support[data-v-41f62665]{font-size:14px;margin-top:20px}.plugin-setup-error[data-v-41f62665]{font-size:14px;color:var(--error);margin:10px 0 0 0}.checkbox-info[data-v-41f62665]{margin-left:20px;opacity:.7}",""]),e.exports=t},"34eb":function(e,t,a){var n=a("4bad");t=n(!1),t.push([e.i,".setup-message[data-v-a535dd98]{margin-top:100px}.data-loading[data-v-a535dd98]{align-items:center;display:flex;justify-content:center}.data-loading>I[data-v-a535dd98]{margin-right:5px}.plugin-reload-banner[data-v-a535dd98]{align-items:center;background-color:var(--success-banner-bg);display:flex;padding:0 10px;border-radius:5px;min-height:36px}.plugin-reload-banner>i[data-v-a535dd98]{color:var(--success);font-size:14px;font-weight:700}.plugin-reload-banner>button[data-v-a535dd98]{line-height:30px;min-height:30px}.plugin-complete[data-v-a535dd98]{font-size:18px}.plugin-list[data-v-a535dd98]{display:flex;flex-wrap:wrap}.plugin-list>.plugin[data-v-a535dd98]:not(:last-child){margin-right:20px}.plugin-list.v-margin[data-v-a535dd98]{margin-top:40px}.plugins[data-v-a535dd98]{display:inherit}.plugin-header[data-v-a535dd98]{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}.plugin-header .catalog-title[data-v-a535dd98]{display:flex;flex-direction:row;align-items:center}.plugin-header>h2[data-v-a535dd98]{flex:1;margin-bottom:0}.plugin-header .link[data-v-a535dd98]{cursor:pointer}.plugin-header .actions-container[data-v-a535dd98]{display:flex;flex-direction:row;justify-content:flex-end}.plugin-header .btn.actions[data-v-a535dd98]{line-height:36px;min-height:36px;padding:0 10px}.plugin[data-v-a535dd98]{display:flex;border:1px solid var(--border);padding:10px;width:calc(33% - 20px);max-width:540px;margin-bottom:20px;cursor:pointer}.plugin .plugin-icon[data-v-a535dd98]{font-size:40px;margin-right:10px;color:#888;width:44px;height:44px;display:flex;justify-content:center;align-items:center}.plugin .plugin-icon.dark-mode[data-v-a535dd98]{border-radius:calc(var(--border-radius)*2);overflow:hidden;background-color:#fff}.plugin .plugin-icon .plugin-icon-img[data-v-a535dd98]{height:40px;width:40px;-o-object-fit:contain;object-fit:contain;top:2px;left:2px}.plugin .plugin-spacer[data-v-a535dd98]{flex:1}.plugin .plugin-metadata[data-v-a535dd98]{display:flex;flex:1;flex-direction:column}.plugin .plugin-metadata .plugin-buttons>button[data-v-a535dd98]:not(:first-child){margin-left:5px}.plugin .plugin-builtin[data-v-a535dd98]{color:var(--primary);display:block;padding:2px 0;text-transform:uppercase}.plugin .plugin-name[data-v-a535dd98]{font-size:16px;font-weight:700;margin-bottom:5px;text-transform:capitalize}.plugin .plugin-badges[data-v-a535dd98]{display:flex}.plugin .plugin-badges>div[data-v-a535dd98]{border:1px solid var(--border);border-radius:4px;padding:2px 8px;margin-right:10px;font-size:12px}.plugin .plugin-version[data-v-a535dd98]{align-items:center;display:inline-flex;font-size:12px;border-radius:4px;margin:5px 0}.plugin .plugin-version i.icon-spinner[data-v-a535dd98]{padding-right:5px;font-size:16px;height:16px;width:16px}.plugin .plugin-version .incompatible[data-v-a535dd98]{margin:10px 0;font-weight:700}.plugin .plugin-installing[data-v-a535dd98]{align-items:center;display:flex}.plugin .plugin-installing>div[data-v-a535dd98]{font-size:14px;margin-left:5px}.plugin .plugin-actions[data-v-a535dd98]{align-items:center;display:flex}.plugin .plugin-actions .plugin-error[data-v-a535dd98]{display:inline;cursor:help}.plugin .plugin-actions .plugin-error>i[data-v-a535dd98]{color:var(--error);height:22px;font-size:22px;width:22px}.plugin .plugin-actions .btn[data-v-a535dd98]{line-height:20px;min-height:20px;padding:0 5px}[data-v-a535dd98] .checkbox-label{font-weight:400!important}[data-v-a535dd98] .add-repos-banner .banner__content{display:flex;justify-content:space-between;align-items:center}@media screen and (max-width:1200px){.plugin-list .plugin[data-v-a535dd98]{width:calc(50% - 20px)}}@media screen and (max-width:960px){.plugin-list .plugin[data-v-a535dd98]{margin-right:0!important;width:100%}}",""]),e.exports=t},3913:function(e,t,a){var n=a("4bad");t=n(!1),t.push([e.i,".plugin-install-dialog[data-v-c715056e]{padding:10px}.plugin-install-dialog h4[data-v-c715056e]{font-weight:700}.plugin-install-dialog .dialog-panel[data-v-c715056e]{display:flex;flex-direction:column;min-height:100px}.plugin-install-dialog .dialog-panel .dialog-info[data-v-c715056e]{flex:1}.plugin-install-dialog .dialog-buttons[data-v-c715056e]{display:flex;justify-content:flex-end;margin-top:10px}.plugin-install-dialog .dialog-buttons[data-v-c715056e]>:not(:last-child){margin-right:10px}",""]),e.exports=t},"3c45":function(e,t,a){var n=a("cb60");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("499e").default;i("2102c3e6",n,!0,{sourceMap:!1,shadowMode:!1})},"45ca":function(e,t,a){"use strict";a("bcd1")},"46cd":function(e,t,a){var n=a("17b9");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("499e").default;i("8fec0bec",n,!0,{sourceMap:!1,shadowMode:!1})},"519a":function(e,t,a){var n=a("2c4d");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("499e").default;i("54d51ff0",n,!0,{sourceMap:!1,shadowMode:!1})},"53a6":function(e,t,a){e.exports=a.p+"img/generic-plugin.3cca4b04.svg"},"5a66":function(e,t,a){"use strict";a("7a7e")},"5c02":function(e,t,a){var n=a("4bad");t=n(!1),t.push([e.i,".plugin-install-dialog[data-v-24e3c204]{padding:10px}.plugin-install-dialog h4[data-v-24e3c204]{font-weight:700}.plugin-install-dialog .dialog-panel[data-v-24e3c204]{display:flex;flex-direction:column;min-height:100px}.plugin-install-dialog .dialog-panel p[data-v-24e3c204]{margin-bottom:5px}.plugin-install-dialog .dialog-panel .dialog-info[data-v-24e3c204]{flex:1}.plugin-install-dialog .dialog-panel .toggle-advanced[data-v-24e3c204]{display:flex;align-items:center;cursor:pointer;margin:10px 0}.plugin-install-dialog .dialog-panel .toggle-advanced[data-v-24e3c204]:hover{text-decoration:none;color:var(--link)}.plugin-install-dialog .dialog-panel .version-selector[data-v-24e3c204]{margin:0 10px 10px 10px;width:auto}.plugin-install-dialog .dialog-buttons[data-v-24e3c204]{display:flex;justify-content:flex-end;margin-top:10px}.plugin-install-dialog .dialog-buttons[data-v-24e3c204]>:not(:last-child){margin-right:10px}",""]),e.exports=t},"61a4":function(e,t,a){"use strict";a("1bc9")},"639d":function(e,t,a){"use strict";a("27ee")},"7a7e":function(e,t,a){var n=a("e7e5");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("499e").default;i("5d239789",n,!0,{sourceMap:!1,shadowMode:!1})},"804f":function(e,t,a){var n=a("34eb");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("499e").default;i("ee9035d2",n,!0,{sourceMap:!1,shadowMode:!1})},"94af":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("modal",{attrs:{name:"uninstallPluginDialog",height:"auto",scrollable:!0}},[e.plugin?t("div",{staticClass:"plugin-install-dialog"},[t("h4",{staticClass:"mt-10"},[e._v("\n      "+e._s(e.t("plugins.uninstall.title",{name:e.plugin.label}))+"\n    ")]),e._v(" "),t("div",{staticClass:"mt-10 dialog-panel"},[t("div",{staticClass:"dialog-info"},[t("p",[e._v("\n          "+e._s(e.plugin.catalog?e.t("plugins.uninstall.custom"):e.t("plugins.uninstall.prompt"))+"\n        ")])]),e._v(" "),t("div",{staticClass:"dialog-buttons"},[t("button",{staticClass:"btn role-secondary",attrs:{disabled:e.busy,"data-testid":"uninstall-ext-modal-cancel-btn"},on:{click:function(t){return e.closeDialog(!1)}}},[e._v("\n          "+e._s(e.t("generic.cancel"))+"\n        ")]),e._v(" "),t("AsyncButton",{attrs:{mode:"uninstall","data-testid":"uninstall-ext-modal-uninstall-btn"},on:{click:function(t){return e.uninstall()}}})],1)])]):e._e()])},i=[],s=(a("a4d3"),a("e439"),a("dbb4"),a("1da1")),r=a("ade3"),o=a("a34a"),l=a.n(o),c=(a("96cf"),a("b0c0"),a("4de4"),a("d3b7"),a("159b"),a("99af"),a("b64b"),a("2f62")),u=a("67c9"),d=a("a788"),p=a("7600"),g=a("fa98");function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m={components:{AsyncButton:u["b"]},data:function(){return{plugin:void 0,busy:!1}},computed:v({},Object(c["b"])({allCharts:"catalog/charts"})),methods:{showDialog:function(e){this.plugin=e,this.busy=!1,this.$modal.show("uninstallPluginDialog")},closeDialog:function(e){this.$modal.hide("uninstallPluginDialog"),this.$emit("closed",e)},uninstall:function(){var e=this;return Object(s["a"])(l.a.mark((function t(){var a,n,i,s;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.busy=!0,n=e.plugin,e.$emit("update",n.name,"uninstall"),!(null!==(a=n.uiplugin)&&void 0!==a&&a.isDeveloper||n.catalog&&n.uiplugin)){t.next=6;break}return t.next=6,n.uiplugin.remove();case 6:return t.next=8,e.$store.dispatch("management/findAll",{type:d["f"].APP});case 8:if(i=t.sent,s=i.filter((function(t){if(n.catalog&&t.namespace===p["k"]){var a=e.allCharts.filter((function(e){var t,a;return e.repoName===(null===(t=n.repo)||void 0===t||null===(a=t.metadata)||void 0===a?void 0:a.name)}));return a.some((function(e){return e.chartName===t.metadata.name}))}return t.namespace===p["k"]&&t.name===n.name&&t})),!n.catalog){t.next=13;break}return t.next=13,e.removePluginImageResources(n.uiplugin);case 13:if(!s.length){t.next=17;break}try{s.forEach((function(e){return e.remove()}))}catch(r){e.$store.dispatch("growl/error",{title:e.t("plugins.error.generic"),message:r.message?r.message:r,timeout:1e4},{root:!0})}return t.next=17,e.$store.dispatch("management/findAll",{type:d["f"].OPERATION});case 17:e.closeDialog(n);case 18:case"end":return t.stop()}}),t)})))()},removePluginImageResources:function(e){var t=this;return Object(s["a"])(l.a.mark((function a(){var n,i,s,r,o,c,u,f;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s="".concat(p["j"].CATALOG_IMAGE,"=").concat(null===(n=e.metadata)||void 0===n||null===(i=n.labels)||void 0===i?void 0:i[p["j"].CATALOG_IMAGE]),r=p["k"],!s){a.next=7;break}return a.next=5,Object(g["a"])({deployment:t.$store.dispatch("management/findMatching",{type:d["eb"].DEPLOYMENT,selector:s,namespace:r}),service:t.$store.dispatch("management/findMatching",{type:d["T"],selector:s,namespace:r}),repo:t.$store.dispatch("management/findMatching",{type:d["f"].CLUSTER_REPO,selector:s})});case 5:for(o=a.sent,c=0,u=Object.keys(o);c<u.length;c++)f=u[c],o[f]&&o[f].forEach((function(e){return e.remove()}));case 7:case"end":return a.stop()}}),a)})))()}}},h=m,b=(a("61a4"),a("0c7c")),x=Object(b["a"])(h,n,i,!1,null,"c715056e",null);t["default"]=x.exports},9744:function(e,t,a){"use strict";a.r(t);a("b0c0");var n=function(){var e=this,t=e._self._c;return t("modal",{attrs:{name:"developerInstallPluginDialog",height:"auto",scrollable:!0}},[t("div",{staticClass:"plugin-install-dialog"},[t("h4",[e._v("\n      "+e._s(e.t("plugins.developer.title"))+"\n    ")]),e._v(" "),t("p",[e._v("\n      "+e._s(e.t("plugins.developer.prompt"))+"\n    ")]),e._v(" "),t("div",{staticClass:"custom mt-10"},[t("div",{staticClass:"fields"},[t("LabeledInput",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{"label-key":"plugins.developer.fields.url"},on:{input:e.updateLocation},model:{value:e.location,callback:function(t){e.location=t},expression:"location"}})],1)]),e._v(" "),t("div",{staticClass:"custom mt-10"},[t("div",{staticClass:"fields"},[t("LabeledInput",{attrs:{"label-key":"plugins.developer.fields.name"},on:{input:e.updateName},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),t("div",{staticClass:"fields mt-10"},[t("Checkbox",{attrs:{"label-key":"plugins.developer.fields.persist"},model:{value:e.persist,callback:function(t){e.persist=t},expression:"persist"}})],1),e._v(" "),t("div",{staticClass:"dialog-buttons mt-20"},[t("button",{staticClass:"btn role-secondary",attrs:{"data-testid":"dev-install-ext-modal-cancel-btn"},on:{click:function(t){return e.closeDialog()}}},[e._v("\n          "+e._s(e.t("generic.cancel"))+"\n        ")]),e._v(" "),t("AsyncButton",{attrs:{mode:"load","data-testid":"dev-install-ext-modal-install-btn"},on:{click:e.loadPlugin}})],1)])])])},i=[],s=a("53ca"),r=a("1da1"),o=a("a34a"),l=a.n(o),c=(a("96cf"),a("99af"),a("a15b"),a("67c9")),u=a("84d3"),d=a("bd30"),p=a("a788"),g=a("7600"),f={components:{AsyncButton:c["b"],Checkbox:d["a"],LabeledInput:u["a"]},data:function(){return{name:"",location:"",persist:!1,canModifyName:!0,canModifyLocation:!0}},watch:{name:function(e,t){this.canModifyLocation&&(this.location="/pkg/".concat(e,"/").concat(e,".umd.min.js"))},location:function(e,t){if(this.canModifyName){var a=e.split("/"),n=a[a.length-1],i=n.indexOf(".umd.min.js");-1!==i?n=n.substr(0,i):(i=n.indexOf(".umd.js"),-1!==i&&(n=n.substr(0,i))),this.name=n}}},methods:{showDialog:function(){this.$modal.show("developerInstallPluginDialog")},closeDialog:function(e){this.$modal.hide("developerInstallPluginDialog"),this.$emit("closed",e)},updateName:function(e){this.canModifyName=0===e.length},updateLocation:function(e){this.canModifyLocation=0===e.length},loadPlugin:function(e){var t=this;return Object(r["a"])(l.a.mark((function a(){var n,i,r,o,c,u,d,f;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=t.name,i=t.location,n||(r=i.split("/"),o=r[r.length-1],n=o.split(".")[0]),c="0.0.1",u=n,d=n.split("-"),d.length>=2&&(c=d.pop(),u=d.join("-")),!t.persist){a.next=20;break}return a.next=10,t.$store.dispatch("management/create",{type:p["Z"],metadata:{name:n,namespace:g["k"]},spec:{plugin:{name:u,version:c,endpoint:i,noCache:!0,metadata:{developer:"true",direct:"true"}}}});case 10:return f=a.sent,a.prev=11,a.next=14,f.save({url:"/v1/".concat(p["Z"]),method:"POST"});case 14:a.next=20;break;case 16:a.prev=16,a.t0=a["catch"](11),console.error("Could not create CRD for plugin",a.t0),e(!1);case 20:t.$plugin.loadAsync(n,i).then((function(){t.closeDialog(!0),t.$store.dispatch("growl/success",{title:t.t("plugins.success.title",{name:n}),message:t.t("plugins.success.message"),timeout:3e3},{root:!0}),e(!0)})).catch((function(a){e(!1);var n="object"===Object(s["a"])(a)?t.t("plugins.error.message"):a;t.$store.dispatch("growl/error",{title:t.t("plugins.error.title"),message:n,timeout:5e3},{root:!0})}));case 21:case"end":return a.stop()}}),a,null,[[11,16]])})))()}}},v=f,m=(a("b07c"),a("0c7c")),h=Object(m["a"])(v,n,i,!1,null,"c8f2eee2",null);t["default"]=h.exports},9792:function(e,t,a){var n=a("4bad");t=n(!1),t.push([e.i,".enable-plugin-support[data-v-0c28a860]{font-size:14px;margin-top:20px}.plugin-setup-error[data-v-0c28a860]{font-size:14px;color:var(--error);margin:10px 0 0 0}.checkbox-info[data-v-0c28a860]{margin-left:20px;opacity:.7}",""]),e.exports=t},"9dae":function(e,t,a){var n=a("4bad");t=n(!1),t.push([e.i,".plugin-info-panel[data-v-297b3958]{position:fixed;top:0;left:0;z-index:1;--banner-top-offset:0}.plugin-info-panel .glass[data-v-297b3958]{z-index:9;left:0;width:100%;opacity:0}.plugin-info-panel .glass[data-v-297b3958],.plugin-info-panel .slideIn[data-v-297b3958]{position:fixed;top:calc(54px + var(--banner-top-offset));height:calc(100% - 54px - var(--banner-top-offset))}.plugin-info-panel .slideIn[data-v-297b3958]{border-left:var(--header-border-size) solid var(--header-border);right:-35%;background-color:var(--topmenu-bg);width:35%;z-index:10;display:flex;flex-direction:column;padding:10px;transition:right .5s ease}.plugin-info-panel .slideIn__header[data-v-297b3958]{text-transform:capitalize}.plugin-info-panel .slideIn .plugin-info-content[data-v-297b3958]{display:flex;flex-direction:column;overflow:hidden}.plugin-info-panel .slideIn .plugin-info-content .plugin-info-detail[data-v-297b3958]{overflow:auto}.plugin-info-panel .slideIn h3[data-v-297b3958]{font-size:14px;margin:15px 0 10px 0;opacity:.7;text-transform:uppercase}.plugin-info-panel .slideIn .plugin-header[data-v-297b3958]{border-bottom:1px solid var(--border);display:flex;padding-bottom:20px}.plugin-info-panel .slideIn .plugin-header .plugin-title[data-v-297b3958]{flex:1}.plugin-info-panel .slideIn .plugin-icon[data-v-297b3958]{font-size:40px;margin-right:10px;color:#888;width:44px;height:44px}.plugin-info-panel .slideIn .plugin-icon.dark-mode[data-v-297b3958]{border-radius:calc(var(--border-radius)*2);overflow:hidden;background-color:#fff}.plugin-info-panel .slideIn .plugin-icon .plugin-icon-img[data-v-297b3958]{height:40px;width:40px;-o-object-fit:contain;object-fit:contain;position:relative;top:2px;left:2px}.plugin-info-panel .slideIn .plugin-versions[data-v-297b3958]{display:flex;flex-wrap:wrap}.plugin-info-panel .slideIn .plugin-description[data-v-297b3958]{font-size:15px}.plugin-info-panel .slideIn .version-link[data-v-297b3958]{cursor:pointer;border:1px solid var(--link);padding:2px 8px;border-radius:5px;-webkit-user-select:none;-moz-user-select:none;user-select:none;margin:0 5px 5px 0;display:block}.plugin-info-panel .slideIn .version-link.version-active[data-v-297b3958]{color:var(--link-text);background:var(--link)}.plugin-info-panel .slideIn .version-link.disabled[data-v-297b3958]{cursor:not-allowed;color:var(--disabled-text)!important;background-color:var(--disabled-bg)!important;border-color:var(--disabled-bg)!important;text-decoration:none!important}.plugin-info-panel .slideIn .version-link.version-builtin[data-v-297b3958]{display:inline-block}.plugin-info-panel .slideIn__header[data-v-297b3958]{display:flex;align-items:center;justify-content:space-between}.plugin-info-panel .slideIn__header__buttons[data-v-297b3958]{display:flex}.plugin-info-panel .slideIn__header__button[data-v-297b3958]{cursor:pointer;display:flex;align-items:center;justify-content:center;padding:2px}.plugin-info-panel .slideIn__header__button>i[data-v-297b3958]{font-size:20px;opacity:.5}.plugin-info-panel .slideIn__header__button[data-v-297b3958]:hover{background-color:var(--wm-closer-hover-bg)}.plugin-info-panel .slideIn .chart-content__tabs[data-v-297b3958]{display:flex;flex-direction:column;flex:1;height:0;padding-bottom:10px}.plugin-info-panel .slideIn .chart-content__tabs[data-v-297b3958] .chart-readmes{flex:1;overflow:auto}.plugin-info-panel .slideIn__show[data-v-297b3958]{right:0}",""]),e.exports=t},b07c:function(e,t,a){"use strict";a("46cd")},b4b2:function(e,t,a){"use strict";a.r(t);a("a4d3"),a("e01a");var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"plugin-info-panel",style:"--banner-top-offset: ".concat(e.headerBannerSize,"px")},[e.showSlideIn?t("div",{staticClass:"glass",attrs:{"data-testid":"extension-details-bg"},on:{click:function(t){return e.hide()}}}):e._e(),e._v(" "),t("div",{staticClass:"slideIn",class:{hide:!1,slideIn__show:e.showSlideIn},attrs:{"data-testid":"extension-details"}},[e.info?t("div",{staticClass:"plugin-info-content"},[t("div",{staticClass:"plugin-header"},[t("div",{staticClass:"plugin-icon",class:e.applyDarkModeBg},[e.info.icon?t("LazyImage",{staticClass:"icon plugin-icon-img",attrs:{"initial-src":e.defaultIcon,"error-src":e.defaultIcon,src:e.info.icon}}):t("img",{staticClass:"icon plugin-icon-img",attrs:{src:e.defaultIcon}})],1),e._v(" "),t("div",{staticClass:"plugin-title"},[t("h2",{staticClass:"slideIn__header",attrs:{"data-testid":"extension-details-title"}},[e._v("\n            "+e._s(e.info.label)+"\n          ")]),e._v(" "),t("p",{staticClass:"plugin-description"},[e._v("\n            "+e._s(e.info.description)+"\n          ")])]),e._v(" "),t("div",{staticClass:"plugin-close"},[t("div",{staticClass:"slideIn__header__buttons"},[t("div",{staticClass:"slideIn__header__button",attrs:{"data-testid":"extension-details-close"},on:{click:function(t){e.showSlideIn=!1}}},[t("i",{staticClass:"icon icon-close"})])])])]),e._v(" "),t("div",[e.info.error?t("Banner",{staticClass:"mt-10",attrs:{color:"error",label:e.info.error}}):e._e(),e._v(" "),e.info.builtin?t("Banner",{staticClass:"mt-10",attrs:{color:"warning",label:e.t("plugins.descriptions.built-in")}}):[e.info.certified?e._e():t("Banner",{staticClass:"mt-10",attrs:{color:"warning",label:e.t("plugins.descriptions.third-party")}}),e._v(" "),e.info.experimental?t("Banner",{staticClass:"mt-10",attrs:{color:"warning",label:e.t("plugins.descriptions.experimental")}}):e._e()]],2),e._v(" "),e.info.versions.length?t("h3",[e._v("\n        "+e._s(e.t("plugins.info.versions"))+"\n      ")]):e._e(),e._v(" "),t("div",{staticClass:"plugin-versions mb-10"},e._l(e.info.versions,(function(a){return t("div",{key:a.version},[t("a",{directives:[{name:"clean-tooltip",rawName:"v-clean-tooltip",value:e.handleVersionBtnTooltip(a),expression:"handleVersionBtnTooltip(v)"}],staticClass:"version-link",class:e.handleVersionBtnClass(a),on:{click:function(t){return e.loadPluginVersionInfo(a.version)}}},[e._v("\n            "+e._s(a.version)+"\n          ")])])})),0),e._v(" "),e.versionError?t("div",[e._v("\n        "+e._s(e.t("plugins.info.versionError"))+"\n      ")]):e._e(),e._v(" "),e.versionInfo?t("h3",[e._v("\n        "+e._s(e.t("plugins.info.detail"))+"\n      ")]):e._e(),e._v(" "),e.versionInfo?t("div",{staticClass:"plugin-info-detail"},[e.versionInfo?t("ChartReadme",{attrs:{"version-info":e.versionInfo}}):e._e()],1):e._e(),e._v(" "),e.info.versions.length?e._e():t("div",[t("h3",[e._v("\n          "+e._s(e.t("plugins.info.versions"))+"\n        ")]),e._v(" "),t("div",{staticClass:"version-link version-active version-builtin"},[e._v("\n          "+e._s(e.info.displayVersion)+"\n        ")])])]):e._e()])])},i=[],s=(a("b64b"),a("4de4"),a("e439"),a("159b"),a("dbb4"),a("ade3")),r=a("1da1"),o=a("a34a"),l=a.n(o),c=(a("96cf"),a("a9e3"),a("7db0"),a("d3b7"),a("2f62")),u=a("5fc0"),d=a("bec1"),p=a("bc1c"),g=a("a788"),f=a("c5b9");function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){Object(s["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={fetch:function(){var e=this;return Object(r["a"])(l.a.mark((function t(){var a,n,i,s,r,o,c;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.getters["management/byId"](g["A"].SETTING,f["c"].BANNERS);case 2:a=t.sent,n=JSON.parse(a.value),i=n.showHeader,s=n.bannerHeader,"true"===i&&(c=Number(null!==(r=null===s||void 0===s||null===(o=s.fontSize)||void 0===o?void 0:o.split("px")[0])&&void 0!==r?r:0),e.headerBannerSize=2*c);case 5:case"end":return t.stop()}}),t)})))()},components:{Banner:d["a"],ChartReadme:u["a"],LazyImage:p["a"]},data:function(){return{showSlideIn:!1,info:void 0,infoVersion:void 0,versionInfo:void 0,versionError:void 0,defaultIcon:a("53a6"),headerBannerSize:0}},computed:m(m({},Object(c["b"])({theme:"prefs/theme"})),{},{applyDarkModeBg:function(){return"dark"===this.theme?{"dark-mode":!0}:{}}}),methods:{show:function(e){this.info=e,this.showSlideIn=!0,this.version=null,this.versionInfo=null,this.versionError=null,this.loadPluginVersionInfo()},hide:function(){this.showSlideIn=!1},loadPluginVersionInfo:function(e){var t=this;return Object(r["a"])(l.a.mark((function a(){var n,i,s,r,o;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=e||t.info.displayVersion,r=null===(n=t.info.versions)||void 0===n?void 0:n.find((function(e){return e.version===s&&!e.isCompatibleWithUi})),o=null===(i=t.info.versions)||void 0===i?void 0:i.find((function(e){return e.version===s&&!e.isCompatibleWithKubeVersion})),t.info.chart&&!r&&!o){a.next=5;break}return a.abrupt("return");case 5:return t.infoVersion=s,t.versionError=!1,t.versionInfo=void 0,a.prev=8,a.next=11,t.$store.dispatch("catalog/getVersionInfo",{repoType:t.info.chart.repoType,repoName:t.info.chart.repoName,chartName:t.info.chart.chartName,versionName:s});case 11:t.versionInfo=a.sent,a.next=18;break;case 14:a.prev=14,a.t0=a["catch"](8),t.versionError=!0,console.error("Unable to fetch VersionInfo: ",a.t0);case 18:case"end":return a.stop()}}),a,null,[[8,14]])})))()},handleVersionBtnTooltip:function(e){return e.requiredUiVersion?this.t("plugins.info.requiresRancherVersion",{version:e.requiredUiVersion}):e.requiredKubeVersion?this.t("plugins.info.requiresKubeVersion",{version:e.requiredKubeVersion}):""},handleVersionBtnClass:function(e){return{"version-active":e.version===this.infoVersion,disabled:!e.isCompatibleWithUi||!e.isCompatibleWithKubeVersion}}}},b=h,x=(a("639d"),a("0c7c")),_=Object(x["a"])(b,n,i,!1,null,"297b3958",null);t["default"]=_.exports},bcd1:function(e,t,a){var n=a("de22");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("499e").default;i("9f14f054",n,!0,{sourceMap:!1,shadowMode:!1})},c150:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",[t("IconMessage",{attrs:{vertical:!0,subtle:!1,icon:"icon-gear"},scopedSlots:e._u([{key:"message",fn:function(){return[t("h2",[e._v("\n        "+e._s(e.t("plugins.setup.title"))+"\n      ")]),e._v(" "),e.loading?e._e():t("div",[e.haveCharts?t("div",[t("p",[e._v("\n            "+e._s(e.t("plugins.setup.prompt.can"))+"\n          ")]),e._v(" "),t("AsyncButton",{staticClass:"enable-plugin-support",attrs:{mode:"enable",manual:!0,"current-phase":e.buttonState,"data-testid":"extension-enable-operator"},on:{click:e.enable}})],1):t("div",[t("p",[e._v("\n            "+e._s(e.t("plugins.setup.prompt.cant"))+"\n          ")])]),e._v(" "),e._l(e.errors,(function(a,n){return t("div",{key:n,staticClass:"plugin-setup-error"},[e._v("\n          "+e._s(a)+"\n        ")])}))],2)]},proxy:!0}])}),e._v(" "),t("Dialog",{attrs:{name:"confirm-uiplugins-setup",title:e.t("plugins.setup.install.title")},on:{closed:e.dialogClosed}},[[t("p",{staticClass:"mb-20"},[e._v("\n        "+e._s(e.t("plugins.setup.install.prompt"))+"\n      ")]),e._v(" "),e.isAnyRepoAvailableForInstall?t("Banner",{staticClass:"mb-20",attrs:{color:"info"}},[e._v("\n        "+e._s(e.t("plugins.setup.install.airgap"))+"\n      ")]):e._e(),e._v(" "),t("div",{staticClass:"mb-15"},[t("Checkbox",{attrs:{disabled:e.hasRancherUIPluginsRepo,primary:!0,"label-key":"plugins.setup.install.addRancherRepo","data-testid":"extension-enable-operator-official-repo"},model:{value:e.addRepos.official,callback:function(t){e.$set(e.addRepos,"official",t)},expression:"addRepos.official"}}),e._v(" "),e.hasRancherUIPluginsRepo?t("div",{staticClass:"checkbox-info"},[e._v("\n          ("+e._s(e.t("plugins.setup.installed"))+")\n        ")]):e._e()],1),e._v(" "),t("div",{staticClass:"mb-15"},[t("Checkbox",{attrs:{disabled:e.hasRancherUIPartnersPluginsRepo,primary:!0,"label-key":"plugins.setup.install.addPartnersRancherRepo","data-testid":"extension-enable-operator-partners-repo"},model:{value:e.addRepos.partners,callback:function(t){e.$set(e.addRepos,"partners",t)},expression:"addRepos.partners"}}),e._v(" "),e.hasRancherUIPartnersPluginsRepo?t("div",{staticClass:"checkbox-info"},[e._v("\n          ("+e._s(e.t("plugins.setup.installed"))+")\n        ")]):e._e()],1)]],2)],1)},i=[],s=(a("b64b"),a("a4d3"),a("4de4"),a("e439"),a("dbb4"),a("ade3")),r=a("1da1"),o=a("a34a"),l=a.n(o),c=(a("96cf"),a("07ac"),a("d3b7"),a("159b"),a("7db0"),a("e260"),a("ddb0"),a("99af"),a("e6cf"),a("b0c0"),a("f20a"),a("3ca3"),a("2f62")),u=a("67c9"),d=a("2678"),p=a("a788"),g=a("7388"),f=a("e5e4"),v=a("bd30"),m=a("01ba"),h=a("7600");function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){Object(s["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var _={components:{AsyncButton:u["b"],Checkbox:v["a"],Banner:m["a"],IconMessage:d["a"],Dialog:f["a"]},fetch:function(){var e=this;return Object(r["a"])(l.a.mark((function t(){var a,n,i;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.$store.getters["catalog/rawCharts"],n=Object.values(a),i=[],h["h"].forEach((function(e){var t=n.find((function(t){return t.repoName===h["m"]&t.chartName===e}));t&&i.push(t)})),e.haveCharts=i.length===h["h"].length,!e.haveCharts){t.next=10;break}if(e.installCharts=i,!e.$store.getters["management/schemaFor"](p["f"].CLUSTER_REPO)){t.next=10;break}return t.next=10,e.$store.dispatch("management/findAll",{type:p["f"].CLUSTER_REPO,opt:{force:!0}});case 10:return t.next=12,e.$store.dispatch("management/find",{type:p["A"].SETTING,id:"system-default-registry"});case 12:e.defaultRegistrySetting=t.sent,e.loading=!1;case 14:case"end":return t.stop()}}),t)})))()},data:function(){return{loading:!0,haveCharts:!1,installCharts:[],errors:[],addRepos:{official:!0,partners:!0},reposInfo:{official:{name:h["e"],url:h["f"],branch:h["d"]},partners:{name:h["b"],url:h["c"],branch:h["a"]}},buttonState:u["a"].ACTION,defaultRegistrySetting:null}},computed:x(x({},Object(c["b"])({repos:"catalog/repos"})),{},{hasRancherUIPluginsRepo:function(){return!!this.repos.find((function(e){return e.urlDisplay===h["f"]}))},hasRancherUIPartnersPluginsRepo:function(){return!!this.repos.find((function(e){return e.urlDisplay===h["c"]}))},isAnyRepoAvailableForInstall:function(){return!this.hasRancherUIPluginsRepo||!this.hasRancherUIPartnersPluginsRepo}}),methods:{installChart:function(e){var t=this;return Object(r["a"])(l.a.mark((function a(){var n,i,r,o,c,u,d,f,v,m,b,x;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.versions[0],o=r.repoType,c=r.repoName,u=t.$store.getters["catalog/repo"]({repoType:o,repoName:c}),d={chartName:e.chartName,version:r.version,releaseName:e.chartName,annotations:(n={},Object(s["a"])(n,g["e"].SOURCE_REPO_TYPE,o),Object(s["a"])(n,g["e"].SOURCE_REPO_NAME,c),n),values:{}},f=(null===(i=t.defaultRegistrySetting)||void 0===i?void 0:i.value)||"",f&&(d.values.global=d.values.global||{},d.values.global.cattle=d.values.global.cattle||{},d.values.global.cattle.systemDefaultRegistry=f),v={charts:[d],wait:!0,namespace:h["k"]},m="install",a.next=11,u.doAction(m,v);case 11:return b=a.sent,x="".concat(b.operationNamespace,"/").concat(b.operationName),a.next=15,u.waitForOperation(x);case 15:return a.abrupt("return",t.$store.dispatch("management/find",{type:p["f"].OPERATION,id:x}));case 16:case"end":return a.stop()}}),a)})))()},enable:function(){var e=this;return Object(r["a"])(l.a.mark((function t(){return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.errors=[],e.$emit("refreshCharts"),e.addRepos={official:!e.hasRancherUIPluginsRepo,partners:!e.hasRancherUIPartnersPluginsRepo},e.$modal.show("confirm-uiplugins-setup");case 4:case"end":return t.stop()}}),t)})))()},dialogClosed:function(e){var t=this;return Object(r["a"])(l.a.mark((function a(){return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.errors=[],!e){a.next=12;break}if(t.buttonState=u["a"].WAITING,!Object.values(t.addRepos).find((function(e){return e}))){a.next=6;break}return a.next=6,t.addDefaultHelmRepositories();case 6:return a.next=8,t.installPluginCharts();case 8:return a.next=10,new Promise((function(e){return setTimeout(e,5e3)}));case 10:t.buttonState=t.errors.length>0?u["a"].ERROR:u["a"].ACTION,t.$emit("done");case 12:case"end":return a.stop()}}),a)})))()},addDefaultHelmRepositories:function(){var e=this;return Object(r["a"])(l.a.mark((function t(){var a,n,i,s;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=[],t.t0=l.a.keys(e.addRepos);case 2:if((t.t1=t.t0()).done){t.next=11;break}if(n=t.t1.value,!e.addRepos[n]){t.next=9;break}return t.next=7,e.$store.dispatch("management/create",{type:p["f"].CLUSTER_REPO,metadata:{name:e.reposInfo[n].name},spec:{gitBranch:e.reposInfo[n].branch,gitRepo:e.reposInfo[n].url}});case 7:i=t.sent,a.push(i.save());case 9:t.next=2;break;case 11:return t.next=13,Promise.allSettled(a);case 13:s=t.sent,s.forEach((function(t){"rejected"===t.status&&(console.error(t.reason),e.errors.push(t.reason))}));case 15:case"end":return t.stop()}}),t)})))()},installPluginCharts:function(){var e=this;return Object(r["a"])(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=0;case 1:if(!(a<e.installCharts.length)){t.next=14;break}return n=e.installCharts[a],t.prev=3,t.next=6,e.installChart(n);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](3),e.errors.push(t.t0.message);case 11:a++,t.next=1;break;case 14:return t.abrupt("return",new Promise((function(e){return setTimeout(e,2e3)})));case 15:case"end":return t.stop()}}),t,null,[[3,8]])})))()}}},y=_,w=(a("f79d"),a("0c7c")),O=Object(w["a"])(y,n,i,!1,null,"77c3eb63",null);t["default"]=O.exports},c80c:function(e,t,a){var n=a("120f");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("499e").default;i("4e41ee40",n,!0,{sourceMap:!1,shadowMode:!1})},cb60:function(e,t,a){var n=a("4bad");t=n(!1),t.push([e.i,".enable-plugin-support[data-v-77c3eb63]{font-size:14px;margin-top:20px}.plugin-setup-error[data-v-77c3eb63]{font-size:14px;color:var(--error);margin:10px 0 0 0}.checkbox-info[data-v-77c3eb63]{margin-left:20px;opacity:.7}",""]),e.exports=t},d88e:function(e,t,a){"use strict";a("1c48")},da0d:function(e,t,a){var n=a("9792");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var i=a("499e").default;i("928683b8",n,!0,{sourceMap:!1,shadowMode:!1})},daa9:function(e,t,a){"use strict";a("c80c")},de22:function(e,t,a){var n=a("4bad");t=n(!1),t.push([e.i,".modal-dialog[data-v-5130a572]{padding:10px}.modal-dialog h4[data-v-5130a572]{font-weight:700}.modal-dialog .dialog-buttons[data-v-5130a572]{display:flex;justify-content:flex-end;margin-top:10px}.modal-dialog .dialog-buttons[data-v-5130a572]>:not(:last-child){margin-right:10px}",""]),e.exports=t},e580:function(e,t,a){"use strict";a("da0d")},e5e4:function(e,t,a){"use strict";a("b0c0");var n=function(){var e=this,t=e._self._c;return t("modal",{attrs:{name:e.name,height:"auto",scrollable:!0},on:{closed:function(t){return e.closeDialog(!1)},"before-open":e.beforeOpen}},[t("div",{staticClass:"modal-dialog"},[t("h4",[e._v("\n      "+e._s(e.title)+"\n    ")]),e._v(" "),e._t("default"),e._v(" "),t("div",{staticClass:"dialog-buttons mt-20"},[e._t("buttons"),e._v(" "),e.$slots.buttons?e._e():t("div",[t("button",{staticClass:"btn role-secondary",on:{click:function(t){return e.closeDialog(!1)}}},[e._v("\n          "+e._s(e.t("generic.cancel"))+"\n        ")]),e._v(" "),e.mode?t("AsyncButton",{staticClass:"ml-10",attrs:{mode:e.mode},on:{click:e.ok}}):t("button",{staticClass:"btn role-primary ml-10",on:{click:function(t){return e.closeDialog(!0)}}},[e._v("\n          "+e._s(e.t("generic.ok"))+"\n        ")])],1)],2)],2)])},i=[],s=a("67c9"),r={components:{AsyncButton:s["b"]},props:{name:{type:String,required:!0},title:{type:String,required:!0},mode:{type:String,default:""}},data:function(){return{closed:!1}},methods:{beforeOpen:function(){this.closed=!1},ok:function(e){var t=this,a=function(a){e(a),a&&t.closeDialog(!0)};this.$emit("okay",a)},closeDialog:function(e){this.closed||(this.$modal.hide(this.name),this.$emit("closed",e),this.closed=!0)}}},o=r,l=(a("45ca"),a("0c7c")),c=Object(l["a"])(o,n,i,!1,null,"5130a572",null);t["a"]=c.exports},e7e5:function(e,t,a){var n=a("4bad");t=n(!1),t.push([e.i,".sub-row[data-v-474b3fee]{border-bottom:1px solid var(--sortable-table-top-divider);padding-left:1rem;padding-right:1rem}.col[data-v-474b3fee]{display:flex;flex-direction:column}.col section[data-v-474b3fee]{margin-bottom:1.5rem}.col .title[data-v-474b3fee]{margin-bottom:.5rem}",""]),e.exports=t},f79d:function(e,t,a){"use strict";a("3c45")}}]);
//# sourceMappingURL=index.36da0cd0.js.map