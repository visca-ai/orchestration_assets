{"version":3,"sources":["webpack:///./shell/pages/c/_cluster/uiplugins/InstallDialog.vue?502f","webpack:///./shell/pages/c/_cluster/uiplugins/InstallDialog.vue","webpack:///shell/pages/c/_cluster/uiplugins/InstallDialog.vue","webpack:///./shell/pages/c/_cluster/uiplugins/InstallDialog.vue?bccb","webpack:///./shell/pages/c/_cluster/uiplugins/InstallDialog.vue?51c0","webpack:///./shell/pages/c/_cluster/uiplugins/InstallDialog.vue?b211","webpack:///./shell/pages/c/_cluster/uiplugins/InstallDialog.vue?327a"],"names":["content","__esModule","default","module","i","locals","exports","add","render","_vm","this","_c","_self","attrs","plugin","staticClass","_v","_s","t","concat","mode","name","label","certified","_e","showVersionSelector","versionOptions","model","value","version","callback","$$v","expression","busy","on","$event","closeDialog","buttonMode","install","staticRenderFns","components","AsyncButton","Banner","LabeledSelect","fetch","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","$store","dispatch","type","MANAGEMENT","SETTING","id","defaultRegistrySetting","sent","stop","data","currentVersion","undefined","update","computed","_this$versionOptions","length","_this$plugin","_this$plugin$installa","_this2","versions","installableVersions","filter","v","map","methods","showDialog","_plugin$installableVe4","_plugin$installableVe","_plugin$installableVe2","_plugin$installableVe3","_this3","displayVersion","versionNames","_plugin$installableVe5","_plugin$installableVe6","versionChart","find","$modal","show","result","hide","$emit","_this4","_callee2","_plugin$versions","_annotations","_this4$defaultRegistr","isRancherImage","_chartVersionInfo$val","_chartVersionInfo$val2","chartVersionInfo","image","exists","app","repoType","repoName","repo","chart","defaultRegistry","input","action","res","operationId","_context2","abrupt","chartName","versionName","values","repository","startsWith","t0","CATALOG","APP","UI_PLUGIN_NAMESPACE","opt","force","t1","getters","releaseName","annotations","_defineProperty","CATALOG_ANNOTATIONS","SOURCE_REPO_TYPE","SOURCE_REPO_NAME","global","cattle","systemDefaultRegistry","charts","namespace","doAction","operationNamespace","operationName","waitForOperation","OPERATION","t2","title","message","timeout","root","component","___CSS_LOADER_API_IMPORT___","push"],"mappings":"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","file":"js/pages/c/_cluster/uiplugins/InstallDialog.96b4c702.js","sourcesContent":["// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-3!../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./InstallDialog.vue?vue&type=style&index=0&id=24e3c204&prod&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"00ea486a\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('modal',{attrs:{\"name\":\"installPluginDialog\",\"height\":\"auto\",\"scrollable\":true}},[(_vm.plugin)?_c('div',{staticClass:\"plugin-install-dialog\"},[_c('h4',{staticClass:\"mt-10\"},[_vm._v(\"\\n      \"+_vm._s(_vm.t(`plugins.${ _vm.mode }.title`, { name: _vm.plugin.label }))+\"\\n    \")]),_vm._v(\" \"),_c('div',{staticClass:\"custom mt-10\"},[_c('div',{staticClass:\"dialog-panel\"},[_c('p',[_vm._v(\"\\n          \"+_vm._s(_vm.t(`plugins.${ _vm.mode }.prompt`))+\"\\n        \")]),_vm._v(\" \"),(!_vm.plugin.certified)?_c('Banner',{attrs:{\"color\":\"warning\",\"label\":_vm.t('plugins.install.warnNotCertified')}}):_vm._e(),_vm._v(\" \"),(_vm.showVersionSelector)?_c('LabeledSelect',{staticClass:\"version-selector mt-10\",attrs:{\"label-key\":\"plugins.install.version\",\"options\":_vm.versionOptions,\"data-testid\":\"install-ext-modal-select-version\"},model:{value:(_vm.version),callback:function ($$v) {_vm.version=$$v},expression:\"version\"}}):_c('div',[_vm._v(\"\\n          \"+_vm._s(_vm.t('plugins.install.version'))+\" \"+_vm._s(_vm.version)+\"\\n        \")])],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-buttons\"},[_c('button',{staticClass:\"btn role-secondary\",attrs:{\"disabled\":_vm.busy,\"data-testid\":\"install-ext-modal-cancel-btn\"},on:{\"click\":function($event){return _vm.closeDialog(false)}}},[_vm._v(\"\\n          \"+_vm._s(_vm.t('generic.cancel'))+\"\\n        \")]),_vm._v(\" \"),_c('AsyncButton',{attrs:{\"mode\":_vm.buttonMode,\"data-testid\":\"install-ext-modal-install-btn\"},on:{\"click\":_vm.install}})],1)])]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<script>\nimport AsyncButton from '@shell/components/AsyncButton';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { CATALOG, MANAGEMENT } from '@shell/config/types';\nimport { CATALOG as CATALOG_ANNOTATIONS } from '@shell/config/labels-annotations';\nimport { UI_PLUGIN_NAMESPACE } from '@shell/config/uiplugins';\nimport Banner from '@components/Banner/Banner.vue';\n\n// Note: This dialog handles installation and update of a plugin\n\nexport default {\n  components: {\n    AsyncButton,\n    Banner,\n    LabeledSelect,\n  },\n\n  async fetch() {\n    this.defaultRegistrySetting = await this.$store.dispatch('management/find', {\n      type: MANAGEMENT.SETTING,\n      id:   'system-default-registry'\n    });\n  },\n\n  data() {\n    return {\n      currentVersion:         '',\n      defaultRegistrySetting: null,\n      plugin:                 undefined,\n      busy:                   false,\n      version:                '',\n      update:                 false,\n      mode:                   '',\n    };\n  },\n\n  computed: {\n    showVersionSelector() {\n      return this.versionOptions?.length > 1;\n    },\n\n    versionOptions() {\n      if (!this.plugin) {\n        return [];\n      }\n\n      // Don't allow update/rollback to current version\n      const versions = this.plugin?.installableVersions?.filter((v) => {\n        if (this.currentVersion) {\n          return v.version !== this.currentVersion;\n        }\n\n        return true;\n      });\n\n      return versions.map((version) => {\n        return {\n          label: version.version,\n          value: version.version,\n        };\n      });\n    },\n\n    buttonMode() {\n      return this.update ? 'update' : 'install';\n    }\n  },\n\n  methods: {\n    showDialog(plugin, mode) {\n      this.plugin = plugin;\n      this.mode = mode;\n\n      // Default to latest version on install (this is default on the plugin)\n      this.version = plugin.displayVersion;\n\n      if (mode === 'update') {\n        this.currentVersion = plugin.displayVersion;\n\n        // Update to latest version, so take the first version\n        if (plugin.installableVersions?.length > 0) {\n          this.version = plugin.installableVersions?.[0]?.version;\n        }\n      } else if (mode === 'rollback') {\n        // Find the newest version once we remove the current version\n        const versionNames = plugin.installableVersions.filter((v) => v.version !== plugin.displayVersion);\n\n        this.currentVersion = plugin.displayVersion;\n\n        if (versionNames.length > 0) {\n          this.version = versionNames[0].version;\n        }\n      }\n\n      // Make sure we have the version available\n      const versionChart = plugin.installableVersions?.find((v) => v.version === this.version);\n\n      if (!versionChart) {\n        this.version = plugin.installableVersions?.[0]?.version;\n      }\n\n      this.busy = false;\n      this.update = mode !== 'install';\n      this.$modal.show('installPluginDialog');\n    },\n\n    closeDialog(result) {\n      this.$modal.hide('installPluginDialog');\n      this.$emit('closed', result);\n    },\n\n    async install() {\n      this.busy = true;\n\n      const plugin = this.plugin;\n\n      this.$emit('update', plugin.name, 'install');\n\n      // Find the version that the user wants to install\n      const version = plugin.versions?.find((v) => v.version === this.version);\n\n      if (!version) {\n        this.busy = false;\n\n        return;\n      }\n\n      // is the image used by the chart in the rancher org?\n      let isRancherImage = false;\n\n      try {\n        const chartVersionInfo = await this.$store.dispatch('catalog/getVersionInfo', {\n          repoType:    version.repoType,\n          repoName:    version.repoName,\n          chartName:   plugin.chart.chartName,\n          versionName: this.version,\n        });\n\n        const image = chartVersionInfo?.values?.image?.repository || '';\n\n        isRancherImage = image.startsWith('rancher/');\n      } catch (e) {}\n\n      // See if there is already a plugin with this name\n      let exists = false;\n\n      try {\n        const app = await this.$store.dispatch('management/find', {\n          type: CATALOG.APP,\n          id:   `${ UI_PLUGIN_NAMESPACE }/${ plugin.chart.chartName }`,\n          opt:  { force: true },\n        });\n\n        exists = !!app;\n      } catch (e) {}\n\n      const repoType = version.repoType;\n      const repoName = version.repoName;\n      const repo = this.$store.getters['catalog/repo']({ repoType, repoName });\n\n      const chart = {\n        chartName:   plugin.chart.chartName,\n        version:     this.version,\n        releaseName: plugin.chart.chartName,\n        annotations: {\n          [CATALOG_ANNOTATIONS.SOURCE_REPO_TYPE]: plugin.repoType,\n          [CATALOG_ANNOTATIONS.SOURCE_REPO_NAME]: plugin.repoName\n        },\n        values: {}\n      };\n\n      // Pass in the system default registry property if set - only if the image is in the rancher org\n      const defaultRegistry = this.defaultRegistrySetting?.value || '';\n\n      if (isRancherImage && defaultRegistry) {\n        chart.values.global = chart.values.global || {};\n        chart.values.global.cattle = chart.values.global.cattle || {};\n        chart.values.global.cattle.systemDefaultRegistry = defaultRegistry;\n      }\n\n      const input = {\n        charts:    [chart],\n        // timeout:   this.cmdOptions.timeout > 0 ? `${ this.cmdOptions.timeout }s` : null,\n        // wait:      this.cmdOptions.wait === true,\n        namespace: UI_PLUGIN_NAMESPACE,\n      };\n\n      // Helm action\n      const action = (exists || this.update) ? 'upgrade' : 'install';\n\n      try {\n        const res = await repo.doAction(action, input);\n        const operationId = `${ res.operationNamespace }/${ res.operationName }`;\n\n        this.closeDialog(plugin);\n\n        await repo.waitForOperation(operationId);\n\n        await this.$store.dispatch(`management/find`, {\n          type: CATALOG.OPERATION,\n          id:   operationId\n        });\n      } catch (e) {\n        this.$store.dispatch('growl/error', {\n          title:   this.t('plugins.error.generic'),\n          message: e.message ? e.message : e,\n          timeout: 10000\n        }, { root: true });\n\n        this.closeDialog(plugin);\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <modal\n    name=\"installPluginDialog\"\n    height=\"auto\"\n    :scrollable=\"true\"\n  >\n    <div\n      v-if=\"plugin\"\n      class=\"plugin-install-dialog\"\n    >\n      <h4 class=\"mt-10\">\n        {{ t(`plugins.${ mode }.title`, { name: plugin.label }) }}\n      </h4>\n      <div class=\"custom mt-10\">\n        <div class=\"dialog-panel\">\n          <p>\n            {{ t(`plugins.${ mode }.prompt`) }}\n          </p>\n          <Banner\n            v-if=\"!plugin.certified\"\n            color=\"warning\"\n            :label=\"t('plugins.install.warnNotCertified')\"\n          />\n          <LabeledSelect\n            v-if=\"showVersionSelector\"\n            v-model=\"version\"\n            label-key=\"plugins.install.version\"\n            :options=\"versionOptions\"\n            class=\"version-selector mt-10\"\n            data-testid=\"install-ext-modal-select-version\"\n          />\n          <div v-else>\n            {{ t('plugins.install.version') }} {{ version }}\n          </div>\n        </div>\n        <div class=\"dialog-buttons\">\n          <button\n            :disabled=\"busy\"\n            class=\"btn role-secondary\"\n            data-testid=\"install-ext-modal-cancel-btn\"\n            @click=\"closeDialog(false)\"\n          >\n            {{ t('generic.cancel') }}\n          </button>\n          <AsyncButton\n            :mode=\"buttonMode\"\n            data-testid=\"install-ext-modal-install-btn\"\n            @click=\"install\"\n          />\n        </div>\n      </div>\n    </div>\n  </modal>\n</template>\n\n<style lang=\"scss\" scoped>\n  .plugin-install-dialog {\n    padding: 10px;\n\n    h4 {\n      font-weight: bold;\n    }\n\n    .dialog-panel {\n      display: flex;\n      flex-direction: column;\n      min-height: 100px;\n\n      p {\n        margin-bottom: 5px;\n      }\n\n      .dialog-info {\n        flex: 1;\n      }\n\n      .toggle-advanced {\n        display: flex;\n        align-items: center;\n        cursor: pointer;\n        margin: 10px 0;\n\n        &:hover {\n          text-decoration: none;\n          color: var(--link);\n        }\n      }\n\n      .version-selector {\n        margin: 0 10px 10px 10px;\n        width: auto;\n      }\n    }\n\n    .dialog-buttons {\n      display: flex;\n      justify-content: flex-end;\n      margin-top: 10px;\n\n      > *:not(:last-child) {\n        margin-right: 10px;\n      }\n    }\n  }\n</style>\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../../../../node_modules/babel-loader/lib/index.js??ref--16-1!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./InstallDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--16-0!../../../../../node_modules/babel-loader/lib/index.js??ref--16-1!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./InstallDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InstallDialog.vue?vue&type=template&id=24e3c204&scoped=true&\"\nimport script from \"./InstallDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./InstallDialog.vue?vue&type=script&lang=js&\"\nimport style0 from \"./InstallDialog.vue?vue&type=style&index=0&id=24e3c204&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"24e3c204\",\n  null\n  \n)\n\nexport default component.exports","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".plugin-install-dialog[data-v-24e3c204]{padding:10px}.plugin-install-dialog h4[data-v-24e3c204]{font-weight:700}.plugin-install-dialog .dialog-panel[data-v-24e3c204]{display:flex;flex-direction:column;min-height:100px}.plugin-install-dialog .dialog-panel p[data-v-24e3c204]{margin-bottom:5px}.plugin-install-dialog .dialog-panel .dialog-info[data-v-24e3c204]{flex:1}.plugin-install-dialog .dialog-panel .toggle-advanced[data-v-24e3c204]{display:flex;align-items:center;cursor:pointer;margin:10px 0}.plugin-install-dialog .dialog-panel .toggle-advanced[data-v-24e3c204]:hover{text-decoration:none;color:var(--link)}.plugin-install-dialog .dialog-panel .version-selector[data-v-24e3c204]{margin:0 10px 10px 10px;width:auto}.plugin-install-dialog .dialog-buttons[data-v-24e3c204]{display:flex;justify-content:flex-end;margin-top:10px}.plugin-install-dialog .dialog-buttons[data-v-24e3c204]>:not(:last-child){margin-right:10px}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","export * from \"-!../../../../../node_modules/vue-style-loader/index.js??ref--9-oneOf-1-0!../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-3!../../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!./InstallDialog.vue?vue&type=style&index=0&id=24e3c204&prod&lang=scss&scoped=true&\""],"sourceRoot":""}