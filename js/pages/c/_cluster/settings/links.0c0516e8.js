(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages/c/_cluster/settings/links","pages/c/_cluster/settings/DefaultLinksEditor"],{"1a6c":function(e,t,a){var n=a("78e8");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var s=a("499e").default;s("3bc8b4fe",n,!0,{sourceMap:!1,shadowMode:!1})},"2f11":function(e,t,a){"use strict";a("6cb1")},"4f969":function(e,t,a){"use strict";a.d(t,"a",(function(){return h})),a.d(t,"b",(function(){return m}));a("b64b"),a("a4d3"),a("4de4"),a("e439"),a("dbb4");var n=a("ade3"),s=a("1da1"),r=a("a34a"),i=a.n(r),u=(a("96cf"),a("7db0"),a("d3b7"),a("d81d"),a("159b"),a("99af"),a("58ec")),l=a("a788"),c=a("c5b9"),o=a("fa98");function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f=[{key:"docs",value:u["a"],enabled:!0},{key:"forums",value:"https://forums.rancher.com/",enabled:!0},{key:"slack",value:"https://slack.rancher.io/",enabled:!0},{key:"issues",value:"https://github.com/rancher/dashboard/issues/new/choose",enabled:!0},{key:"getStarted",value:"/docs/getting-started",enabled:!0}],b={key:"commercialSupport",value:"/support",enabled:!0,readonly:!0},p={key:"cnforums",value:"https://forums.rancher.cn/",enabled:!0},h="v1";function m(e,t,a,n){return k.apply(this,arguments)}function k(){return k=Object(s["a"])(i.a.mark((function e(t,a,n,s){var r,u,d,v,b,p,m,k,g,O;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u={},e.prev=1,e.next=4,t.dispatch("management/find",{type:l["A"].SETTING,id:c["c"].UI_CUSTOM_LINKS});case 4:d=e.sent,d.value&&(u=JSON.parse(d.value)),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),console.warn("Could not parse custom link settings",e.t0);case 11:if((null===(r=u)||void 0===r?void 0:r.version)!==h){e.next=14;break}return u.defaults&&(v=[].concat(f),v.forEach((function(e){var t=u.defaults.find((function(t){return t===e.key}));e.enabled=!!t})),u.defaults=v),e.abrupt("return",y(u,a,n,s,t));case 14:return b={version:h,defaults:[].concat(f),custom:[]},e.prev=15,e.next=18,Object(o["a"])({uiIssuesSetting:t.dispatch("management/find",{type:l["A"].SETTING,id:c["c"].ISSUES}),uiCommunitySetting:t.dispatch("management/find",{type:l["A"].SETTING,id:c["c"].COMMUNITY_LINKS})});case 18:p=e.sent,m=p.uiIssuesSetting,k=p.uiCommunitySetting,"false"===(null===k||void 0===k?void 0:k.value)&&b.defaults.forEach((function(e){return e.enabled=!1})),null!==m&&void 0!==m&&m.value&&(b.custom.push({label:s?s("customLinks.defaults.issues"):"Issues",value:m.value}),O=null===(g=b.defaults)||void 0===g?void 0:g.find((function(e){return"issues"===e.key})),O&&(O.enabled=!1,O.readOnly=!0)),e.next=28;break;case 25:e.prev=25,e.t1=e["catch"](15),console.warn("Could not parse legacy link settings",e.t1);case 28:return e.abrupt("return",y(b,a,n,s,t));case 29:case"end":return e.stop()}}),e,null,[[1,8],[15,25]])}))),k.apply(this,arguments)}function y(e,t,a,n,s){if(!t&&!a){var r,i=null===(r=e.defaults)||void 0===r?void 0:r.find((function(e){return"commercialSupport"===e.key}));i||e.defaults.push(b)}var u=s.getters["i18n/selectedLocaleLabel"];u===n("locale.zh-hans")&&e.defaults.push(p),e.defaults=e.defaults.map((function(e){return v(v({},e),{},{label:n("'customLinks.defaults.".concat(e.key))})}));var l=e.custom.reduce((function(e,t){return e[t.label]=t,e}),{});return e.defaults.forEach((function(e){l[e.label]&&(e.enabled=!1,e.readonly=!0)})),e}},5668:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"key-value"},[t("div",{staticClass:"clearfix"},[t("h3",[e._v("\n      "+e._s(e.t("customLinks.settings.default"))+"\n    ")])]),e._v(" "),t("div",{staticClass:"kv-container"},[t("label",{staticClass:"text-label"},[e._v("\n      "+e._s(e.t("customLinks.settings.keyLabel"))+"\n    ")]),e._v(" "),t("label",{staticClass:"text-label"},[e._v("\n      "+e._s(e.t("customLinks.settings.valueLabel"))+"\n    ")]),e._v(" "),t("label",{staticClass:"text-label"}),e._v(" "),e._l(e.value,(function(a,n){return[t("div",{key:n+"key",staticClass:"kv-item key",class:{"link-hidden":!a.enabled}},[t("span",[e._v(e._s(a.label))])]),e._v(" "),t("div",{key:n+"value",staticClass:"kv-item value",class:{"link-hidden":!a.enabled}},[t("span",[e._v(e._s(a.value))])]),e._v(" "),a.readonly||e.isView?t("div",{key:n+"show"}):t("div",{key:n+"show"},[e.isView?e._e():t("Checkbox",{attrs:{"label-key":"customLinks.settings.showLabel"},on:{input:function(t){return e.showhide(a,n,t)}},model:{value:a.enabled,callback:function(t){e.$set(a,"enabled",t)},expression:"row.enabled"}})],1)]}))],2)])},s=[],r=a("2b0e"),i=a("fa3b"),u=a("4de2"),l={name:"DefaultLinksEditor",components:{Checkbox:u["a"]},props:{value:{type:Array,default:function(){return[]}},mode:{type:String,required:!0}},computed:{isView:function(){return this.mode===i["T"]}},methods:{showhide:function(e,t,a){var n=this.value[t];r["default"].set(n,"enabled",!!n.enabled),this.$emit("input",this.value)}}},c=l,o=(a("2f11"),a("0c7c")),d=Object(o["a"])(c,n,s,!1,null,"5e339f98",null);t["default"]=d.exports},"6cb1":function(e,t,a){var n=a("7817");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var s=a("499e").default;s("051b30f1",n,!0,{sourceMap:!1,shadowMode:!1})},7817:function(e,t,a){var n=a("4bad");t=n(!1),t.push([e.i,".key-value[data-v-5e339f98]{width:100%}.key-value .kv-container[data-v-5e339f98]{display:grid;align-items:center;grid-template-columns:1fr 1fr 50px;-moz-column-gap:1.75%;column-gap:1.75%}.key-value .kv-container .kv-item[data-v-5e339f98]{background-color:var(--disabled-bg);border:1px solid var(--border);border-radius:5px;width:100%;margin:10px 0 10px 0;height:40px;line-height:40px;padding:0 10px}.key-value .kv-container .kv-item.link-hidden[data-v-5e339f98]{color:var(--disabled-text)}.key-value .kv-container .kv-item.key[data-v-5e339f98]{align-self:flex-start}",""]),e.exports=t},"78e8":function(e,t,a){var n=a("4bad");t=n(!1),t.push([e.i,".overlay[data-v-4c06ec2d]{width:100%;height:100%;position:absolute;top:0;left:0;background-color:var(--overlay-bg);z-index:1}.ui-links-setting P[data-v-4c06ec2d]{line-height:1.25;margin-bottom:10px}.ui-links-setting .underline[data-v-4c06ec2d]{text-decoration:underline}.action[data-v-4c06ec2d]{display:flex}.action input[data-v-4c06ec2d]{margin-right:5px}",""]),e.exports=t},ba8f:function(e,t,a){"use strict";a("1a6c")},eebf:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return e.$fetchState.pending?t("Loading"):t("div",[t("h1",{staticClass:"mb-20"},[e._v("\n    "+e._s(e.t("customLinks.label"))+"\n  ")]),e._v(" "),t("div",[t("label",{staticClass:"text-label"},[e._v("\n      "+e._s(e.t("customLinks.description",{},!0))+"\n    ")])]),e._v(" "),t("div",{staticClass:"mt-20"},[t("KeyValue",{attrs:{title:"Custom Links","as-map":!1,"key-name":"label","key-label":e.t("customLinks.settings.keyLabel"),"value-label":e.t("customLinks.settings.valueLabel"),"add-label":e.t("customLinks.addLink"),"read-allowed":!1,protip:!1,mode:e.mode},model:{value:e.value.custom,callback:function(t){e.$set(e.value,"custom",t)},expression:"value.custom"}})],1),e._v(" "),t("div",{staticClass:"ui-links-setting mt-20"},[t("DefaultLinksEditor",{attrs:{mode:e.mode},model:{value:e.value.defaults,callback:function(t){e.$set(e.value,"defaults",t)},expression:"value.defaults"}})],1),e._v(" "),e._l(e.errors,(function(e){return[t("Banner",{key:e,attrs:{color:"error",label:e}})]})),e._v(" "),"edit"===e.mode?t("div",{staticClass:"mt-20"},[t("AsyncButton",{staticClass:"pull-right",attrs:{mode:"apply"},on:{click:e.save}})],1):e._e()],2)},s=[],r=(a("b64b"),a("a4d3"),a("e439"),a("159b"),a("dbb4"),a("ade3")),i=a("1da1"),u=(a("caad"),a("2532"),a("d81d"),a("4de4"),a("d3b7"),a("a34a")),l=a.n(u),c=(a("96cf"),a("c778")),o=a("67c9"),d=a("01ba"),v=a("a788"),f=a("2f40"),b=a("c5b9"),p=a("fa3b"),h=a("aaa3"),m=a("2f62"),k=a("ac98"),y=a("5668"),g=a("4f969");function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var x={layout:"authenticated",components:{KeyValue:h["a"],Loading:c["a"],AsyncButton:o["b"],Banner:d["a"],DefaultLinksEditor:y["default"]},fetch:function(){var e=this;return Object(i["a"])(l.a.mark((function t(){return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(g["b"])(e.$store,e.hasSupport,!1,(function(t){return e.t(t)}));case 2:e.value=t.sent;case 3:case"end":return t.stop()}}),t)})))()},data:function(){return{defaultsDisabled:!0,isRancherPrime:Object(k["b"])(),uiCustomLinks:{},bannerVal:{},value:[],errors:[]}},computed:w(w({},Object(m["b"])({multiWithFallback:"i18n/multiWithFallback"})),{},{mode:function(){var e,t=this.$store.getters["management/schemaFor"](v["A"].SETTING);return null!==t&&void 0!==t&&null!==(e=t.resourceMethods)&&void 0!==e&&e.includes("PUT")?p["M"]:p["T"]},allValues:function(){return{version:g["a"],defaults:this.value.defaults.filter((function(e){return e.enabled})).map((function(e){return e.key})),custom:this.value.custom}},hasSupport:function(){var e;return Object(k["b"])()||"true"===(null===(e=this.$store.getters["management/byId"](v["A"].SETTING,b["c"].SUPPORTED))||void 0===e?void 0:e.value)}}),methods:{deprecateIssueLinks:function(){if(this.uiIssuesSetting.value||this.uiIssuesSetting.value)return this.uiIssuesSetting.value="",this.uiCommunitySetting.value="",this.uiIssuesSetting.save()},save:function(e){var t=this;return Object(i["a"])(l.a.mark((function a(){var n;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.errors=[],a.prev=1,a.next=4,Object(f["a"])(t.$store,b["c"].UI_CUSTOM_LINKS,"");case 4:return n=a.sent,n.value=JSON.stringify(t.allValues),a.next=8,n.save();case 8:return a.next=10,Object(g["b"])(t.$store,t.hasSupport,!1,(function(e){return t.t(e)}));case 10:t.value=a.sent,e(!0),a.next=18;break;case 14:a.prev=14,a.t0=a["catch"](1),t.errors.push(a.t0),e(!1);case 18:case"end":return a.stop()}}),a,null,[[1,14]])})))()}}},_=x,S=(a("ba8f"),a("0c7c")),j=Object(S["a"])(_,n,s,!1,null,"4c06ec2d",null);t["default"]=j.exports}}]);
//# sourceMappingURL=links.0c0516e8.js.map