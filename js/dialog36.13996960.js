(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dialog36","dialog21"],{"2bf1":function(e,t,n){var a=n("8c053");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=n("499e").default;r("e4ab2e52",a,!0,{sourceMap:!1,shadowMode:!1})},"4c64":function(e,t,n){"use strict";n("2bf1")},6038:function(e,t,n){"use strict";n("8fb0")},7796:function(e,t,n){var a=n("4bad");t=a(!1),t.push([e.i,".prompt-restore[data-v-376502e7]{margin:0}.bottom[data-v-376502e7]{display:flex;flex-direction:column;flex:1}.bottom .banner[data-v-376502e7]{margin-top:0}.bottom .buttons[data-v-376502e7]{display:flex;justify-content:flex-end;width:100%}",""]),e.exports=t},"8c053":function(e,t,n){var a=n("4bad");t=a(!1),t.push([e.i,".body div[data-v-768cb740]:not(:last-of-type){padding-bottom:15px}.body .retained-machine[data-v-768cb740]{display:flex;flex-direction:column}",""]),e.exports=t},"8fb0":function(e,t,n){var a=n("7796");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=n("499e").default;r("72e3d4d9",a,!0,{sourceMap:!1,shadowMode:!1})},a90a:function(e,t,n){"use strict";n.r(t);n("b0c0");var a=function(){var e=this,t=e._self._c;return t("GenericPrompt",e._b({on:{close:function(t){return e.$emit("close")}}},"GenericPrompt",e.config,!1),[t("template",{slot:"body"},[t("div",{staticClass:"pl-10 pr-10 mt-20 mb-20 body"},[1===e.allToDelete.length?t("div",[e._v("\n        "+e._s(e.t("promptRemove.attemptingToRemove",{type:e.type}))+" "),t("b",[e._v(e._s(e.safeMachinesToDelete[0].name))])]):t("div",[e._v("\n        "+e._s(e.t("promptScaleMachineDown.attemptingToRemove",{type:e.type,count:e.allToDelete.length},!0))+"\n      ")]),e._v(" "),e.ignored.length?t("div",{staticClass:"retained-machine"},[t("span",{staticClass:"mb-20"},[e._v(e._s(e.t("promptScaleMachineDown.retainedMachine1")))]),e._v(" "),e._l(e.ignored,(function(n){return t("span",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.t("promptScaleMachineDown.retainedMachine2",{name:n.name},!0),expression:"t('promptScaleMachineDown.retainedMachine2', { name: i.name }, true)"}],key:n.name})}))],2):e._e()])])],2)},r=[],o=n("2909"),c=n("3835"),s=n("1da1"),i=n("a34a"),l=n.n(i),p=(n("96cf"),n("e260"),n("d3b7"),n("e6cf"),n("3ca3"),n("ddb0"),n("4de4"),n("99af"),n("4ec9"),n("c206"),n("477f"),n("97fb"),n("d2af"),n("9f9a"),n("43b3"),n("567a"),n("9c87"),n("094c"),n("a9cd"),n("54ec"),n("4e16"),n("f43e"),n("a630"),n("d81d"),n("7388")),d=n("a788"),u=n("d1d6"),f={components:{GenericPrompt:u["default"]},props:{resources:{type:Array,required:!0}},fetch:function(){var e=this;return Object(s["a"])(l.a.mark((function t(){return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.$store.dispatch("management/findAll",{type:d["e"].MACHINE_DEPLOYMENT}),e.$store.dispatch("management/findAll",{type:d["e"].MACHINE})]);case 2:case"end":return t.stop()}}),t)})))()},data:function(){var e=Array.isArray(this.resources)?this.resources:[this.resources],t=e[0].cluster,n=this.deleteType("isControlPlane",e,t),a=Object(c["a"])(n,2),r=a[0],o=a[1],s=this.deleteType("isEtcd",o,t),i=Object(c["a"])(s,2),l=i[0],p=i[1],d=[r,l].filter((function(e){return!!e}));return{cluster:t,allToDelete:e,safeMachinesToDelete:p,ignored:d,type:this.$store.getters["type-map/labelFor"](e[0].schema,e.length),config:{title:this.t("promptRemove.title"),applyMode:"delete",applyAction:this.remove}}},methods:{deleteType:function(e,t,n){var a=t.reduce((function(t,n){return n[e]?t.typed.push(n):t.others.push(n),t}),{typed:[],others:[]}),r=n.machines.filter((function(t){return t[e]})).length,c=a.typed.length,s=r-c===0?a.typed.pop():void 0,i=[].concat(Object(o["a"])(a.typed),Object(o["a"])(a.others));return[s,i]},remove:function(){var e=this;return Object(s["a"])(l.a.mark((function t(){var n,a;return l.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.safeMachinesToDelete.reduce((function(e,t){return e.set(t.pool,e.get(t.pool)||[]),e.get(t.pool).push(t),e}),new Map),a=Array.from(n.entries()),t.next=4,Promise.all(a.map((function(e){var t=Object(c["a"])(e,2),n=t[0],a=t[1];return Promise.all(a.map((function(e){return e.setAnnotation(p["d"].DELETE_MACHINE,"true"),e.save()}))).then((function(){return n.scalePool(-a.length,!1)}))})));case 4:return t.next=6,e.cluster.save();case 6:case"end":return t.stop()}}),t)})))()}}},m=f,h=(n("4c64"),n("0c7c")),v=Object(h["a"])(m,a,r,!1,null,"768cb740",null);t["default"]=v.exports},d1d6:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("Card",{staticClass:"prompt-restore",attrs:{"show-highlight-border":!1}},[t("template",{slot:"title"},[e._t("title",(function(){return[t("h4",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.title,expression:"title"}],staticClass:"text-default-text",attrs:{slot:"title"},slot:"title"})]}))],2),e._v(" "),t("template",{slot:"body"},[e._t("body",(function(){return[t("div",{directives:[{name:"clean-html",rawName:"v-clean-html",value:e.decodeHtml(e.body),expression:"decodeHtml(body)"}],staticClass:"pl-10 pr-10",staticStyle:{"min-height":"50px",display:"flex"}})]}))],2),e._v(" "),t("div",{staticClass:"bottom",attrs:{slot:"actions"},slot:"actions"},[e._l(e.errors,(function(e,n){return t("Banner",{key:n,attrs:{color:"error",label:e}})})),e._v(" "),t("div",{staticClass:"buttons"},[t("button",{staticClass:"btn role-secondary mr-10",on:{click:e.close}},[e._v("\n        "+e._s(e.t("generic.cancel"))+"\n      ")]),e._v(" "),t("AsyncButton",{attrs:{mode:e.applyMode},on:{click:e.apply}})],1)],2)],2)},r=[],o=n("1da1"),c=n("a34a"),s=n.n(c),i=(n("96cf"),n("67c9")),l=n("d4bf"),p=n("bec1"),d=n("4579"),u=n("2c94"),f={components:{Card:l["a"],AsyncButton:i["b"],Banner:p["a"]},props:{applyAction:{type:Function,default:function(){}},applyMode:{type:String,default:"create"},title:{type:String,default:""},body:{type:String,default:""},confirm:{type:Function,default:function(){}}},data:function(){return{errors:[]}},methods:{decodeHtml:u["f"],close:function(){this.confirm(!1),this.$emit("close",!1)},apply:function(e){var t=this;return Object(o["a"])(s.a.mark((function n(){return s.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.applyAction(e);case 3:t.confirm(!0),t.$emit("close",!0),n.next=12;break;case 7:n.prev=7,n.t0=n["catch"](0),console.error(n.t0),t.errors=Object(d["c"])(n.t0),e(!1);case 12:case"end":return n.stop()}}),n,null,[[0,7]])})))()}}},m=f,h=(n("6038"),n("0c7c")),v=Object(h["a"])(m,a,r,!1,null,"376502e7",null);t["default"]=v.exports}}]);
//# sourceMappingURL=dialog36.13996960.js.map