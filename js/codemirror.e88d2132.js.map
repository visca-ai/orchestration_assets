{"version":3,"sources":["webpack:///./node_modules/codemirror/theme/base16-dark.css","webpack:///./node_modules/codemirror/addon/lint/lint.css?ed68","webpack:///./node_modules/codemirror/theme/base16-light.css","webpack:///./node_modules/codemirror/addon/dialog/dialog.js","webpack:///./node_modules/codemirror/addon/lint/lint.css","webpack:///./node_modules/codemirror/keymap/emacs.js","webpack:///./node_modules/codemirror/addon/fold/foldcode.js","webpack:///./node_modules/codemirror/lib/codemirror.js","webpack:///./node_modules/codemirror/addon/fold/foldgutter.css?e73e","webpack:///./node_modules/codemirror/keymap/vim.js","webpack:///./node_modules/codemirror/addon/hint/anyword-hint.js","webpack:///./node_modules/codemirror/addon/lint/lint.js","webpack:///./node_modules/codemirror/theme/base16-dark.css?5581","webpack:///./node_modules/codemirror/addon/edit/matchbrackets.js","webpack:///./node_modules/vue-codemirror/dist/vue-codemirror.js","webpack:///./node_modules/codemirror/addon/hint/show-hint.css","webpack:///./node_modules/codemirror/keymap/sublime.js","webpack:///./node_modules/codemirror/addon/hint/show-hint.js","webpack:///./node_modules/codemirror/lib/codemirror.css?2ee2","webpack:///./node_modules/codemirror/addon/lint/yaml-lint.js","webpack:///./node_modules/codemirror/addon/search/searchcursor.js","webpack:///./node_modules/codemirror/addon/fold/foldgutter.js","webpack:///./node_modules/codemirror/theme/base16-light.css?c284","webpack:///./node_modules/codemirror/mode/yaml/yaml.js","webpack:///./node_modules/codemirror/lib/codemirror.css","webpack:///./shell/plugins/codemirror.js","webpack:///./node_modules/codemirror/addon/hint/show-hint.css?6cef","webpack:///./node_modules/codemirror/addon/fold/foldgutter.css","webpack:///./node_modules/codemirror/mode/javascript/javascript.js"],"names":["___CSS_LOADER_API_IMPORT___","exports","push","module","i","content","__esModule","default","locals","add","mod","CodeMirror","dialogDiv","cm","template","bottom","dialog","wrap","getWrapperElement","appendChild","document","createElement","className","innerHTML","addClass","closeNotification","newVal","state","currentNotificationClose","defineExtension","callback","options","this","closed","me","close","inp","value","rmClass","parentNode","removeChild","focus","onClose","button","getElementsByTagName","selectValueOnOpen","select","onInput","on","e","onKeyUp","onKeyDown","keyCode","closeOnEnter","blur","e_stop","closeOnBlur","evt","relatedTarget","callbacks","buttons","blurring","length","b","e_preventDefault","setTimeout","doneTimer","duration","clearTimeout","cmds","commands","Pos","posEq","a","line","ch","killRing","addToRing","str","shift","growRingTop","getFromRing","n","Math","min","popFromRing","pop","lastKill","_kill","from","to","ring","text","getRange","pos","isClean","gen","replaceRange","changeGeneration","byChar","dir","findPosH","byWord","byLine","findPosV","doc","sel","goalColumn","byPage","byParagraph","no","getLine","sawText","test","slice","fst","firstLine","lst","lastLine","clipPos","hasText","bySentence","sawWord","next","charAt","byExpr","findMatchingBracket","strict","match","forward","first","token","getTokenAt","after","start","end","string","newPos","getPrefix","precise","digits","emacsPrefix","clearPrefix","Number","repeated","cmd","f","execCommand","prefix","findEnd","by","move","extendSelection","getCursor","motion","killTo","cursor","selections","listSelections","head","_killRegion","somethingSelected","selection","anchor","addPrefix","digit","maybeClearPrefix","maybeDuplicateInput","prefixPreservingKeys","arg","emacsPrefixMap","hasOwnProperty","off","event","dup","origin","one","join","txt","replaceSelection","maybeRemovePrefixMap","removeKeyMap","prefixMap","clearMark","setExtending","setCursor","makePrompt","msg","fragment","createDocumentFragment","input","setAttribute","style","width","createTextNode","getInput","openDialog","prompt","operateOnWord","op","toEnclosingExpr","stack","setMark","getExtending","killRegion","killLineEmacs","killRingSave","getSelection","yank","setSelection","yankPop","forwardChar","backwardChar","deleteChar","deleteForwardChar","deleteBackwardChar","forwardWord","backwardWord","killWord","backwardKillWord","nextLine","previousLine","scrollDownCommand","scrollUpCommand","backwardParagraph","forwardParagraph","backwardSentence","forwardSentence","killSentence","backwardKillSentence","killSexp","backwardKillSexp","forwardSexp","backwardSexp","markSexp","transposeSexps","leftStart","leftEnd","rightEnd","rightStart","backwardUpList","justOneSpace","openLine","transposeCharsRepeatable","capitalizeWord","w","letter","search","toUpperCase","toLowerCase","upcaseWord","downcaseWord","undoRepeatable","keyboardQuit","newline","gotoLine","num","isNaN","indentRigidly","indentSelection","getOption","exchangePointAndMark","quotedInsertTab","universalArgument","addKeyMap","emacs","kill","keyMap","normalizeKeyMap","regPrefix","d","String","doFold","force","call","finder","minSize","allowFolded","range","marks","findMarksAt","__isFold","cleared","clear","myWidget","makeWidget","myRange","markText","replacedWith","clearOnEnter","signal","widget","cloneNode","newFoldFunction","rangeFinder","toggleFold","foldCode","fold","unfold","scanUp","foldAll","operation","unfoldAll","registerHelper","funcs","Array","prototype","arguments","found","helpers","getHelpers","cur","defaultOptions","auto","minFoldSize","name","undefined","editorOptions","foldOptions","defineOption","global","factory","userAgent","navigator","platform","gecko","ie_upto10","ie_11up","exec","edge","ie","ie_version","documentMode","webkit","qtwebkit","chrome","chrome_version","presto","safari","vendor","mac_geMountainLion","phantom","ios","maxTouchPoints","android","mobile","mac","chromeOS","windows","presto_version","flipCtrlCmd","captureRightClick","classTest","cls","RegExp","node","current","index","removeChildren","count","childNodes","firstChild","removeChildrenAndAdd","parent","elt","tag","cssText","eltP","contains","child","nodeType","host","activeElt","activeElement","body","shadowRoot","joinClasses","as","split","createRange","endNode","r","setEnd","setStart","createTextRange","moveToElementText","collapse","moveEnd","moveStart","selectInput","display","wrapper","ownerDocument","win","defaultView","bind","args","apply","copyObj","obj","target","overwrite","prop","countColumn","tabSize","startIndex","startValue","nextTab","indexOf","selectionStart","selectionEnd","_e","Delayed","id","time","handler","onTimeout","array","self","Date","set","ms","scrollerGap","Pass","toString","sel_dontScroll","scroll","sel_mouse","sel_move","findColumn","goal","col","skipped","spaceStrs","spaceStr","arr","map","out","insertSorted","score","priority","splice","nothing","createObj","base","props","inst","Object","create","nonASCIISingleCaseWordChar","isWordCharBasic","isWordChar","helper","source","isEmpty","extendingChars","isExtendingChar","charCodeAt","skipExtendingChars","findFirst","pred","midF","mid","ceil","floor","iterateBidiSections","order","part","max","level","bidiOther","getBidiPartAt","sticky","bidiOrdering","lowTypes","arabicTypes","charType","code","bidiRE","isNeutral","isStrong","countsAsLeft","countsAsNum","BidiSpan","direction","outerType","len","types","i$1","prev","type","i$2","type$1","i$3","prev$1","type$2","i$4","type$3","replace","j","i$5","cur$1","type$4","i$6","end$1","before","replace$1","j$1","m","i$7","at","isRTL","j$2","nstart","unshift","reverse","getOrder","noHandlers","emitter","addEventListener","attachEvent","_handlers","concat","getHandlers","removeEventListener","detachEvent","handlers","signalDOMEvent","override","preventDefault","defaultPrevented","e_defaultPrevented","codemirrorIgnore","signalCursorActivity","cursorActivity","curOp","cursorActivityHandlers","hasHandler","eventMixin","ctor","returnValue","e_stopPropagation","stopPropagation","cancelBubble","e_target","srcElement","e_button","which","ctrlKey","zwspSupported","badBidiRects","dragAndDrop","div","zeroWidthElement","measure","offsetHeight","offsetWidth","hasBadBidiRects","r0","getBoundingClientRect","r1","left","right","splitLinesAuto","result","l","nl","rt","hasSelection","window","te","parentElement","compareEndPoints","hasCopyEvent","oncopy","badZoomedRects","hasBadZoomedRects","normal","fromRange","abs","modes","mimeModes","defineMode","mode","dependencies","defineMIME","mime","spec","resolveMode","getMode","mfactory","modeObj","modeExtensions","exts","helperType","modeProps","prop$1","extendMode","properties","copyState","nstate","val","innerMode","info","startState","a1","a2","StringStream","lineOracle","lastColumnPos","lastColumnValue","lineStart","size","Error","chunk","lines","children","sz","chunkSize","getBetween","iter","getLines","updateLineHeight","height","diff","lineNo","lineAtHeight","h","outer","lh","isLine","lineNumberFor","lineNumberFormatter","firstLineNumber","cmp","equalCursorPos","copyPos","x","maxPos","minPos","clipLine","last","clipToLen","linelen","clipPosArray","eol","sol","peek","eat","ok","eatWhile","eatSpace","skipToEnd","skipTo","backUp","column","indentation","pattern","consume","caseInsensitive","cased","substr","hideFirstChars","inner","lookAhead","oracle","baseToken","SavedContext","Context","maxLookAhead","baseTokens","baseTokenPos","highlightLine","context","forceToEnd","st","modeGen","lineClasses","runMode","loop","o","overlay","overlays","i_end","opaque","styles","classes","bgClass","textClass","getLineStyles","updateFrontier","getContextBefore","resetState","maxHighlightLength","stateAfter","save","styleClasses","highlightFrontier","modeFrontier","findStartLine","saved","fromSaved","processLine","viewFrom","viewTo","startAt","stream","callBlankLine","readToken","blankLine","copy","Token","takeToken","asArray","tokens","extractLineClasses","output","lineClass","flattenSpans","curStart","curStyle","addModeClass","mName","minindent","minline","lim","indented","retreatFrontier","sawReadOnlySpans","sawCollapsedSpans","seeReadOnlySpans","seeCollapsedSpans","MarkedSpan","marker","getMarkedSpanFor","spans","span","removeMarkedSpan","addMarkedSpan","inThisOp","WeakSet","markedSpans","has","attachLine","markedSpansBefore","old","startCh","isInsert","nw","startsBefore","inclusiveLeft","insertLeft","endsAfter","inclusiveRight","markedSpansAfter","endCh","stretchSpansOverChange","change","full","oldFirst","oldLast","sameLine","offset","span$1","found$1","clearEmptySpans","newMarkers","gapMarkers","gap","clearWhenEmpty","removeReadOnlyRanges","markers","mark","readOnly","parts","mk","find","p","newParts","dfrom","dto","detachMarkedSpans","detachLine","attachMarkedSpans","extraLeft","extraRight","compareCollapsedMarkers","lenDiff","aPos","bPos","fromCmp","toCmp","collapsedSpanAtSide","sps","sp","collapsed","collapsedSpanAtStart","collapsedSpanAtEnd","collapsedSpanAround","conflictingCollapsedRange","visualLine","merged","visualLineEnd","visualLineContinued","visualLineNo","lineN","vis","visualLineEndNo","lineIsHidden","widgetNode","lineIsHiddenInner","heightAtLine","lineObj","lineLength","findMaxLine","maxLine","maxLineLength","maxLineChanged","Line","estimateHeight","updateLine","estHeight","cleanUpLine","styleToClassCache","styleToClassCacheWithMode","interpretTokenStyle","cache","buildLineContent","lineView","builder","pre","trailingSpace","splitSpaces","rest","addToken","buildToken","buildTokenBadBidi","allowFrontierUpdate","externalMeasured","insertLineContent","maps","caches","lastChild","querySelector","defaultSpecialCharPlaceholder","title","startStyle","endStyle","css","attributes","displayText","special","specialChars","mustWrap","lastIndex","txt$1","tabWidth","specialCharPlaceholder","fullStyle","attr","trailingBefore","spaceBefore","buildCollapsedSpan","ignoreWidget","needsContentAttribute","setUneditable","allText","spanStyle","spanEndStyle","spanStartStyle","nextChange","Infinity","foundBookmarks","endStyles","upto","tokenText","LineView","hidden","buildViewArray","nextPos","view","operationGroup","pushOperation","ops","ownsGroup","delayedCallbacks","fireCallbacksForOps","group","cursorActivityCalled","finishOperation","endCb","orphanDelayedCallbacks","signalLater","list","fireOrphanDelayed","delayed","updateLineForChanges","dims","changes","updateLineText","updateLineGutter","updateLineClasses","updateLineWidgets","ensureLineWrapped","replaceChild","zIndex","updateLineBackground","background","insertBefore","getLineContent","ext","built","wrapClass","gutter","gutterBackground","gutterClass","fixedGutter","fixedPos","gutterTotalWidth","gutterMarkers","lineNumbers","wrap$1","gutterWrap","lineNumber","gutterLeft","k","gutterSpecs","gutterWidth","alignable","isWidget","nextSibling","insertLineWidgets","buildLineElement","insertLineWidgetsFor","allowAbove","widgets","ws","handleMouseEvents","positionLineWidget","above","noHScroll","wrapperWidth","coverGutter","paddingLeft","position","marginLeft","widgetHeight","parentStyle","gutters","clientWidth","eventInWidget","getAttribute","sizer","mover","paddingTop","lineSpace","offsetTop","paddingVert","paddingH","cachedPaddingH","getComputedStyle","currentStyle","data","parseInt","paddingRight","scrollGap","nativeBarWidth","displayWidth","scroller","barWidth","displayHeight","clientHeight","barHeight","ensureLineHeights","rect","wrapping","lineWrapping","curWidth","heights","rects","getClientRects","top","mapFromLineView","updateExternalMeasurement","lineMeasure","measureChar","bias","measureCharPrepared","prepareMeasureForLine","findViewForLine","findViewIndex","getDimensions","forceUpdate","hasHeights","prepared","varHeight","key","measureCharInner","bogus","rtop","rbottom","measureText","nullRect","nodeAndOffsetInLineMap","mStart","mEnd","coverStart","coverEnd","getUsefulRect","place","maybeUpdateRectForZooming","rSpan","charWidth","rbot","bot","singleCursorHeightPerLine","screen","logicalXDPI","deviceXDPI","scaleX","scaleY","logicalYDPI","deviceYDPI","clearLineMeasurementCacheFor","clearLineMeasurementCache","externalMeasure","clearCaches","cachedCharWidth","cachedTextHeight","lineNumChars","pageScrollX","pageXOffset","documentElement","scrollLeft","pageScrollY","marginTop","pageYOffset","scrollTop","widgetTopHeight","ref","intoCoordSystem","includeWidgets","yOff","viewOffset","lOff","xOff","fromCoordSystem","coords","localBox","lineSpaceBox","charCoords","cursorCoords","preparedMeasure","get","getBidi","partPos","invert","other","estimateCoords","PosWithInfo","outside","xRel","coordsChar","y","coordsCharInner","rangeEnd","wrappedLineExtent","begin","wrappedLineExtentChar","targetTop","boxIsAfter","box","ltr","coordsBidiPartWrapped","coordsBidiPart","baseX","chAround","boxAround","atLeft","atStart","_lineNo","closestDist","endX","dist","textHeight","clientLeft","offsetLeft","compensateForHScroll","th","perLine","widgetsHeight","estimateLineHeights","est","posFromMouse","liberal","forRect","space","clientX","clientY","e$1","colDiff","round","regChange","lendiff","updateLineNumbers","viewChanged","resetView","cut","viewCuttingPoint","cut$1","cutTop","cutBot","regLineChange","oldN","newN","adjustView","countDirtyView","dirty","updateSelection","showSelection","prepareSelection","primary","curFragment","cursors","selFragment","customCursor","$customCursor","ranges","primIndex","empty","drawSelectionCursor","showCursorWhenSelecting","drawSelectionRange","cursorHeight","charPos","defaultCharWidth","otherCursor","cmpCoords","padding","leftSide","rightSide","sizerWidth","docLTR","drawForLine","fromArg","toArg","lineLen","wrapX","side","extent","fromPos","toPos","openStart","openEnd","openLeft","openRight","topLeft","topRight","botLeft","botRight","sFrom","sTo","fromLine","toLine","singleVLine","restartBlink","focused","clearInterval","blinker","cursorDiv","visibility","cursorBlinkRate","setInterval","hasFocus","onBlur","ensureFocus","onFocus","delayBlurEvent","delayingBlurEvent","draggingText","selForContextMenu","reset","receivedFocus","updateHeightsInViewport","prevBottom","lineDiv","viewTop","oldHeight","mustScroll","updateWidgetHeight","chWidth","visibleLines","viewport","ensure","ensureFrom","ensureTo","maybeScrollWindow","doScroll","innerHeight","scrollNode","scrollIntoView","scrollPosIntoView","margin","limit","changed","endCoords","scrollPos","calculateScrollPos","startTop","startLeft","updateScrollTop","setScrollLeft","snapMargin","screentop","docBottom","atTop","atBottom","newTop","gutterSpace","screenleft","screenw","tooWide","addToScrollTop","resolveScrollToPos","ensureCursorVisible","scrollToPos","cursorScrollMargin","scrollToCoords","scrollToRange","scrollToCoordsRange","sPos","updateDisplaySimple","setScrollTop","startWorker","forceScroll","scrollHeight","scrollbars","isScroller","scrollWidth","alignHorizontally","measureForScrollbars","gutterW","docH","viewHeight","viewWidth","barLeft","docHeight","NativeScrollbars","vert","horiz","tabIndex","checkedZeroWidth","minHeight","minWidth","update","needsH","needsV","sWidth","totalHeight","totalWidth","zeroWidthHack","disableHoriz","enableZeroWidthBar","disableVert","bar","delay","maybeDisable","elementFromPoint","NullScrollbars","updateScrollbars","startWidth","startHeight","updateScrollbarsInner","sizes","paddingBottom","heightForcer","borderBottom","scrollbarFiller","coverGutterNextToScrollbar","gutterFiller","scrollbarModel","initScrollbars","scrollbarStyle","axis","nextOpId","startOperation","updateInput","typing","changeObjs","selectionChanged","updateMaxLine","markArrays","endOperation","endOperations","endOperation_R1","endOperation_W1","endOperation_R2","endOperation_W2","endOperation_finish","maybeClipScrollbars","mustUpdate","DisplayUpdate","updatedDisplay","updateDisplayIfNeeded","barMeasure","adjustWidthTo","maxScrollLeft","preparedSelection","takeFocus","setDocumentHeight","postUpdateDisplay","wheelStartX","wheelStartY","maybeHiddenMarkers","unhidden","maybeUnhiddenMarkers","finish","runInOp","methodOp","docMethodOp","highlight","highlightWorker","workTime","changedLines","oldStyles","highlighted","oldCls","newCls","ischange","workDelay","visible","editorIsHidden","wrapperHeight","oldDisplayWidth","events","scrollbarsClipped","marginBottom","borderRightWidth","selectionSnapshot","active","anchorNode","extend","anchorOffset","focusNode","focusOffset","restoreSelection","snapshot","nodeName","removeAllRanges","addRange","renderedView","maybeUpdateLineNumberWidth","viewportMargin","different","lastWrapHeight","lastWrapWidth","toUpdate","selSnapshot","patchDisplay","selectionDiv","reportedViewFrom","reportedViewTo","updateNumbersFrom","container","rm","currentWheelTarget","updateNumber","updateGutterSpace","alignWidgets","comp","align","innerW","lineGutter","lineNumInnerWidth","lineNumWidth","getGutters","sawLineNumbers","renderGutters","specs","gElt","updateGutters","Display","clipPath","draggable","wheelDX","wheelDY","activeTouch","init","wheelSamples","wheelPixelsPerUnit","wheelEventDelta","dx","wheelDeltaX","dy","wheelDeltaY","detail","HORIZONTAL_AXIS","VERTICAL_AXIS","wheelDelta","wheelEventPixels","delta","onScrollWheel","chromeScrollHack","pointerEvents","pixelsPerUnit","deltaMode","deltaX","deltaY","canScrollX","canScrollY","pixels","movedX","movedY","sample","Selection","equals","here","there","deepCopy","Range","normalizeSelection","mayTouch","selectionsMayTouch","prim","sort","inv","simpleSelection","changeEnd","adjustForChange","computeSelAfterChange","offsetPos","computeReplacedSel","hint","oldPrev","newPrev","loadMode","modeOption","resetModeState","isWholeLineUpdate","wholeLineUpdateBefore","updateDoc","spansFor","linesFor","lastText","lastSpans","nlines","insert","remove","added","added$1","added$2","linkedDocs","sharedHistOnly","propagate","skip","sharedHist","linked","rel","shared","attachDoc","setDirectionClass","directionChanged","History","done","undone","undoDepth","lastModTime","lastSelTime","lastOp","lastSelOp","lastOrigin","lastSelOrigin","generation","maxGeneration","historyChangeFromChange","histChange","attachLocalSpans","clearSelectionEvents","lastChangeEvent","hist","addChangeToHistory","selAfter","opId","history","historyEventDelay","pushSelectionToHistory","selectionEventCanBeMerged","addSelectionToHistory","clearRedo","dest","existing","removeClearedSpans","explicitlyCleared","getOldSpans","mergeOldSpans","stretched","oldCur","stretchCur","copyHistoryArray","newGroup","instantiateSel","newChanges","extendRange","posBefore","extendSelections","heads","newSel","replaceOneSelection","setSimpleSelection","filterSelectionChange","setSelectionReplaceHistory","setSelectionNoUndo","NaN","setSelectionInner","skipAtomicInSelection","reCheckSelection","mayClear","newAnchor","skipAtomic","newHead","skipAtomicInner","oldPos","preventCursorLeft","selectLeft","preventCursorRight","selectRight","atomic","near","movePos","far","cantEdit","selectAll","filterChange","canceled","cancel","makeChange","ignoreReadOnly","suppressEdits","makeChangeInner","makeChangeSingleDoc","rebased","rebaseHist","makeChangeFromHistory","allowSelectionOnly","suppress","antiChanges","filter","returned","v","shiftDoc","distance","removed","makeChangeSingleDocInEditor","recomputeMaxLength","checkWidthStart","changesHandler","changeHandler","assign","splitLines","rebaseHistSelSingle","rebaseHistArray","sub","copied","changeLine","handle","changeType","LeafChunk","BranchChunk","removeInner","insertInner","iterN","remaining","leaf","maybeSpill","spilled","sibling","myIndex","used","LineWidget","opt","adjustScrollWhenAboveVisible","addLineWidget","insertAt","aboveVisible","this$1","oldH","nextMarkerId","TextMarker","markTextShared","addToHistory","curLine","clearHistory","withOp","visual","dHeight","SharedTextMarker","isParent","findSharedMarkers","findMarks","copySharedMarkers","mFrom","mTo","subMark","detachSharedMarkers","subMarker","nextDocId","Doc","lineSep","cleanGeneration","constructor","getValue","lineSeparator","setValue","getLineHandle","getLineNumber","getLineHandleVisualStart","lineCount","extendSelectionsBy","setSelections","addSelection","getSelections","replaceSelections","undo","redo","undoSelection","redoSelection","historySize","markClean","forceSplit","getHistory","setHistory","histData","setGutterMarker","gutterID","clearGutter","lineInfo","addLineClass","where","removeLineClass","removeLineWidget","setBookmark","realOpts","getAllMarks","posFromIndex","sepSize","indexFromPos","copyHistory","linkedDoc","unlinkDoc","link","splitIds","iterLinkedDocs","getEditor","setDirection","eachLine","lastDrop","onDrop","clearDragCursor","files","dataTransfer","isReadOnly","FileReader","File","read","markAsReadAndPasteIfAllFilesAreRead","t","readTextFromFile","file","allowDropFileTypes","reader","onerror","onload","readAsText","text$1","getData","selected","onDragStart","setData","effectAllowed","setDragImage","img","src","_top","onDragOver","frag","dragCursor","forEachCodeMirror","getElementsByClassName","byClass","editors","globalsRegistered","ensureGlobalHandlers","registerGlobalHandlers","resizeTimer","onResize","setSize","keyNames","3","8","9","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","44","45","46","59","61","91","92","93","106","107","109","110","111","145","173","186","187","188","189","190","191","192","219","220","221","222","224","63232","63233","63234","63235","63272","63273","63275","63276","63277","63302","fromCharCode","normalizeKeyName","alt","ctrl","keymap","keyname","keys","lookupKey","getKeyMap","fallthrough","isModifierKey","addModifierNames","noShift","altKey","metaKey","shiftKey","keyName","altGraphKey","deleteNearSelection","compute","toKill","replaced","moveCharLogically","moveLogically","endOfLine","visually","moveInStorageOrder","prep","moveVisually","bidi","mv","getWrappedLineExtent","searchInVisualLine","getRes","res","nextCh","basic","pcDefault","emacsy","macDefault","singleSelection","killLine","deleteLine","delLineLeft","delWrappedLineLeft","leftPos","delWrappedLineRight","rightPos","goDocStart","goDocEnd","goLineStart","goLineStartSmart","lineStartSmart","goLineEnd","lineEnd","goLineRight","goLineLeft","goLineLeftSmart","goLineUp","moveV","goLineDown","goPageUp","goPageDown","goCharLeft","moveH","goCharRight","goColumnLeft","goColumnRight","goWordLeft","goGroupRight","goGroupLeft","goWordRight","delCharBefore","deleteH","delCharAfter","delWordBefore","delWordAfter","delGroupBefore","delGroupAfter","indentAuto","indentMore","indentLess","insertTab","insertSoftTab","spaces","defaultTab","transposeChars","newlineAndIndent","sels","indentLine","toggleOverwrite","firstNonWS","inWS","doHandleBinding","bound","dropShift","ensurePolled","prevShift","lookupKeyForEditor","keyMaps","extraKeys","stopSeq","dispatchKey","seq","keySeq","dispatchKeyInner","handleKeyBinding","handleCharBinding","lastStoppedKey","getField","handled","showCrossHair","up","onKeyPress","charCode","lastClick","lastDoubleClick","DOUBLECLICK_DELAY","PastClick","clickRepeat","now","compare","onMouseDown","supportsTouch","clickInGutter","repeat","selectingText","handleMappedButton","leftButtonDown","onContextMenu","configureMouse","option","unit","addNew","moveOnDrag","contained","behavior","dragDrop","leftButtonStartDrag","leftButtonSelect","moved","dragEnd","mouseMove","dragStart","preventScroll","e2","rangeForUnit","findWordAt","doc$1","ourRange","ourIndex","startSel","lastPos","extendTo","startCol","posCol","oldRange","ranges$1","bidiSimplify","editorSize","counter","curCount","anchorLine","boundary","headIndex","usePart","gutterEvent","prevent","mX","mY","touches","lineBox","g","contextMenuInGutter","themeChanged","theme","Init","defaults","optionHandlers","defineOptions","deflt","notOnInit","newBreaks","refresh","getInputField","spellcheck","autocorrect","autocapitalize","detach","attach","wrappingChanged","integer","readOnlyChanged","screenReaderLabelChanged","dragDropChanged","resetPosition","wasOn","dragFunctions","toggle","enter","over","leave","drop","inputStyles","inputStyle","pasteIncoming","cutIncoming","autofocus","registerEventHandlers","finishInit","initHooks","textRendering","word","touchFinished","prevTouch","finishTouch","isMouseLikeTouchEvent","touch","radiusX","radiusY","farAway","pageX","pageY","how","aggressive","indent","curSpace","curSpaceString","indentUnit","indentString","indentWithTabs","pos$1","defineInitHook","lastCopied","setLastCopied","newLastCopied","applyTextInput","inserted","deleted","recent","paste","textLines","multiPaste","pasteLinesPerSelection","lineWise","changeEvent","triggerElectric","handlePaste","pasted","clipboardData","disableInput","electricChars","smartIndent","getModeAt","electricInput","copyableRanges","lineRange","disableBrowserMagic","field","hiddenTextarea","border","addEditorMethods","setOption","getDoc","addOverlay","modeSpec","removeOverlay","newRanges","getLineTokens","getTokenTypeAt","getHelper","help","_global","getStateAfter","defaultTextHeight","getViewport","addWidget","vspace","hspace","triggerOnKeyDown","triggerOnKeyPress","triggerOnKeyUp","triggerOnMouseDown","amount","hitSide","rtlMoveVisually","goals","headPos","startChar","check","scrollTo","getScrollInfo","interpret","swapDoc","phrase","phraseText","phrases","getScrollerElement","getGutterElement","registerGlobalHelper","predicate","origDir","lineDir","findNextLine","moveOnce","boundToLine","astral","sawType","pageSize","moveAmount","ContentEditableInput","lastAnchorNode","lastAnchorOffset","lastFocusNode","lastFocusOffset","polling","composing","gracePeriod","readDOMTimeout","posToDOM","isInGutter","scan","badPos","bad","domTextBetween","closing","extraLinebreak","recognizeMarker","addText","walk","cmText","markerID","isBlock","textContent","nodeValue","domToPos","lineNode","locateNodeInLineView","textNode","topNode","curNode","previousSibling","dist$1","belongsToInput","onCopyCut","lineWiseCopyCut","clearData","kludge","hadFocus","showPrimarySelection","contentEditable","updateFromDOM","readFromDOMSoon","forceCompositionEnd","label","removeAttribute","showMultipleSelections","curAnchor","curFocus","rng","rangeCount","getRangeAt","startGracePeriod","rememberSelection","selectionInEditor","commonAncestorContainer","poll","pollSelection","pollInterval","pollContent","fromIndex","fromNode","toNode","toIndex","newText","oldText","cutFront","cutEnd","oldTop","maxCutFront","newBot","oldBot","maxCutEnd","chFrom","chTo","TextareaInput","prevInput","pollingFast","resetting","fromTextArea","textarea","tabindex","placeholder","realSubmit","form","leaveSubmitMethodAlone","submit","wrappedSubmit","getTextArea","toTextArea","addLegacyProps","cmpPos","createField","prepareCopyCut","fastPoll","dispatchEvent","Event","_display","opts","moveInputWithCursor","wrapOff","lineOff","teTop","teLeft","drawn","contextMenuPending","slowPoll","missed","same","resetSelectionOnContextMenu","oldScrollY","oldCSS","oldWrapperCSS","wrapperBox","offsetParent","scrollY","rehide","detectingSelectAll","prepareSelectAllHack","mouseup","extval","disabled","dontDelegate","method","func","defineDocExtension","version","initVim$1","transformCursor","vim","insertMode","visualBlock","defaultKeymap","toKeys","action","motionArgs","linewise","toJumplist","wordEnd","bigWord","inclusive","explicitRepeat","toFirstChar","repeatOffset","isEdit","actionArgs","matchIndent","operator","operatorArgs","indentRight","toLower","operatorMotionArgs","shouldMoveCursor","interlaceInsertRepeat","blockwise","keepSpaces","fullLine","exitVisualBlock","increase","backtrack","textObjectInner","searchArgs","querySrc","wholeWordOnly","defaultKeymapLength","defaultExCommandMap","shortName","possiblyAsync","excludeFromCommandHistory","enterVimMode","onCursorActivity","maybeInitVimState","getOnPasteFn","leaveVimMode","highlightTimeout","detachVimMap","attachVimMap","cmKey","vimKey","cmKeyToVimKey","vimApi","findKey","modifiers","Shift","Ctrl","Alt","Cmd","Mod","CapsLock","specialKeys","Enter","Backspace","Delete","Insert","pieces","lastPiece","hasCharacter","piece","isUpperCase","onPasteFn","offsetCursor","actions","enterInsertMode","numberRegex","wordCharTest","bigWordCharTest","makeKeyRange","upperCaseChars","upperCaseAlphabet","lowerCaseAlphabet","numbers","validMarks","validRegisters","_","isLowerCase","isMatchableSymbol","isNumber","isWhiteSpaceString","isEndOfSentenceSymbol","inArray","defaultValue","aliases","cfg","scope","local","vimGlobalState","lastInsertModeKeyTimer","createCircularJumpList","pointer","tail","buffer","newCur","curMark","useNextSlot","trashMark","markPos","cursorEqual","inc","oldPointer","cachedCursor","createInsertModeChanges","c","expectCursorActivityForChange","MacroModeState","latestRegister","isPlaying","isRecording","replaySearchQueries","onRecordingDone","lastInsertModeChanges","inputState","InputState","lastEditInputState","lastEditActionCommand","lastHPos","lastHSPos","lastMotion","insertModeRepeat","visualMode","lastSelection","lastPastedText","resetVimGlobalState","optionName","searchQuery","searchIsReversed","lastSubstituteReplacePart","jumpList","macroModeState","lastCharacterSearch","increment","selectedCharacter","registerController","RegisterController","searchHistoryController","HistoryController","exCommandHistoryController","exitMacroRecordMode","enterMacroRecordMode","registerName","register","getRegister","dom","class","buildKeyMap","getRegisterController","resetVimGlobalState_","getVimGlobalState_","maybeInitVimState_","suppressErrorLogging","InsertModeKey","lhs","rhs","ctx","exCommandDispatcher","unmap","noremap","toCtxArray","ctxsToMap","actualLength","origLength","mapping","newMapping","_mapCommand","mappedCtxs","el","mapclear","userKeymap","contexts","defineEx","exCommands","commandMap_","handleKey","command","multiSelectHandleKey","handleMacroRecording","clearInputState","logKey","handleEsc","exitVisualMode","exitInsertMode","doKeyToKey","substring","handleKeyInsertMode","keyBuffer","keysAreChars","commandDispatcher","matchCommand","thisMatch","handleKeyNonInsertMode","keysMatcher","mainKey","operatorShortcut","pushRepeatDigit","isVimOp","processCommand","console","handleEx","defineMotion","defineAction","defineOperator","mapCommand","defineRegister","prefixRepeat","motionRepeat","reason","Register","insertModeChanges","searchQueries","registers","unnamedRegister","historyBuffer","iterator","initialPrefix","getRepeat","setText","pushText","pushInsertModeChanges","pushSearchQuery","query","isValidRegister","append","shiftNumericRegisters_","nextMatch","element","pushInput","bestMatch","matches","commandMatches","partial","character","lastChar","repeatOverride","processMotion","processOperator","processOperatorMotion","processAction","processSearch","processEx","copyArgs","evalInput","updateCmSelection","repeatIsExplicit","recordLastEdit","getSearchCursor","getSearchState","setReversed","promptPrefix","originalQuery","getQuery","originalScrollPos","handleQuery","showPrompt","onPromptClose","desc","onPromptKeyUp","onPromptKeyDown","expandWordUnderCursor","isKeyword","escapeRegex","ignoreCase","smartCase","updateSearchQuery","showConfirm","logSearchQuery","parsedQuery","findNext","clearSearchHighlight","exArgs","origHead","copyCursor","clipCursorToContent","origAnchor","oldHead","oldAnchor","noRepeat","motionResult","motions","recordJumpPosition","updateMark","cursorIsBefore","lastSel","lineOffset","chOffset","curEnd","cmSel","cursorMin","cursorMax","makeCmSelection","tmp","expandSelectionToLine","clipToLine","exclusive","operatorMoveTo","operators","actionCommand","moveToTopLine","_head","getUserVisibleLines","findFirstNonWhiteSpaceCharacter","moveToMiddleLine","moveToBottomLine","expandToLine","_cm","isReversed","highlightSearchMatches","findAndSelectNextInclusive","prevInputState","findNextFromAndToInclusive","subMode","goToMark","getMarkPos","moveToOtherHighlightedEnd","jumpToMark","best","isWrongDirection","equal","between","cursorIsBetween","moveByCharacters","moveByLines","moveByDisplayLines","moveByScroll","moveToColumn","moveToEol","posV","hasMarkedText","moveToStartOfLine","lastCharCoords","goalCoords","resCoords","moveByPage","moveByParagraph","findParagraph","moveBySentence","findSentence","scrollbox","orig","moveByWords","moveToWord","moveTillCharacter","moveToCharacter","recordLastCharacterSearch","moveToSymbol","findSymbol","moveToFirstNonWhiteSpaceCharacter","moveToMatchedSymbol","symbol","lineText","re","matched","bracketRegex","moveToLineOrEdgeOfDocument","lineNum","moveToStartOfDisplayLine","moveToEndOfDisplayLine","textObjectManipulation","mirroredPairs","selfPaired","'","selectCompanionObject","findBeginningAndEnd","expandTagUnderCursor","getSentence","expandSelection","repeatLastCharacterSearch","lastSearch","fn","fillArray","times","finalHead","MAX_VALUE","replacement","lastState","prevLineEnd","wasLastLine","startLine","endLine","_args","changeCase","swapped","toSwap","endPos","jumpListWalk","lineHeight","newBottom","scrollToCursor","lineLastCharPos","lineLastCharCoords","replayMacro","executeMacroRegister","getLastEditPos","onChange","onKeyEventTargetKeyDown","selectForInsert","toggleVisualMode","reselectLastSelection","_actionArgs","updateLastSelection","anchorMark","headMark","joinLines","finalCh","curFinalPos","newLineAndEnterInsertMode","newlineFn","newlineAndIndentContinueComment","whitespaceLength","tabs","currentLine","chompedText","wasChomped","firstIndent","wspace","newIndent","quotient","curPosFinal","idx","lastSelectionCurEnd","selectedArea","getSelectedAreaRange","selectedText","emptyStrings","selectBlock","lastCh","extendLineToColumn","repeatFn","setRegister","markName","replaceTo","replaceWith","replaceWithStr","incrementNumberToken","numberStr","lineStr","baseStr","number","zeroPadding","repeatLastEdit","includeLineBreak","maxCh","ret","offsetLine","offsetCh","commandMatch","pressed","mapped","prefixLen","pressedPrefix","mappedPrefix","cur1","cur2","cur3","cur1before2","cur2before3","trim","s","isClipped","curHead","getIndex","wasClipped","baseCh","headCh","newDir","lineHead","atAnchor","atHead","getCurrentSelectedAreaRange","getLastSelectedAreaRange","block","headOffset","fromCh","toCh","getHead","moveHead","_forward","noSymbol","wordStart","findMatchingTag","findEnclosingTag","tags","open","symbolToMode","findSymbolModes","bracket","isComplete","symb","depth","reverseSymb","section","curMoveThrough","comment","preprocess","curCh","findWord","emptyLineIsWord","charTests","stop","foundWord","words","eodCh","shortCircuit","firstWord","lastWord","keepHPos","retval","charIdxInLine","includeChar","lastIndexOf","isBoundary","any","nextChar","curr","ln","lastSentencePos","curr_index","last_valid","skip_empty_lines","bracketRegexp","openSym","curChar","scanForBracket","chars","firstIndex","SearchState","searchState_","splitBySlash","argString","splitBySeparator","findUnescapedSlashes","findUnescapedSeparators","separator","slashes","escapeNextChar","translateRegex","specials","unescape","specialComesNext","setQuery","getOverlay","searchOverlay","setOverlay","reversed","getScrollbarAnnotate","annotate","setScrollbarAnnotate","charUnescapes","translateRegexReplace","unescapes","unescapeRegexReplace","matcher","parseQuery","lastSearchRegister","regexPart","forceIgnoreCase","flagsPart","regexp","$color","$whiteSpace","openNotification","alert","innerText","$fontFamily","shortText","regexEqual","r2","rawQuery","matchSol","searchState","showMatchesOnScrollbar","lastEndPos","isInRange","scrollInfo","occludeToleranceTop","occludeToleranceBottom","bottomY","ExCommandDispatcher","buildCommandMap_","opt_params","that","_processCommand","commandHistoryRegister","previousCommand","inputStream","commandName","params","parseInput_","matchCommand_","parseCommandArgs_","toInput","parseLineSpec_","numberMatch","parseLineSpecOffset_","offsetMatch","delim","argDelimiter","user","colorscheme","mapArgs","imap","nmap","vmap","setArgs","setCfg","expr","forceGet","optionIsBoolean","oldValue","message","setOptionReturn","setlocal","setglobal","regArgs","regInfo","unique","parseArgs","decimal","hex","octal","err","radix","numPart","textPart","matchPart","comparePatternFn","compareFn","textOld","anum","bnum","vglobal","inverted","matchedLines","nextCommand","substitute","trailing","replacePart","confirm","startPos","doReplace","write","nohlsearch","delmarks","sym","startMark","finishMark","searchCursor","exMode","modifiedLineNumber","joined","replaceAll","unmodifiedLineNumber","findNextValidMatch","lastMatchTo","_value","savedCallback","insertModeChangeRegister","lastChange","logInsertModeChange","extra","imc","repeatInsertModeChanges","changeObj","ignoreCount","selectionCount","maybeReset","handleExternalSelection","onKeyFound","repeatForInsert","isAction","cachedInputState","repeatCommand","repeatInsert","changeObject","keyHandler","binding","cloneVimState","forEach","isArray","isHandled","wasInVisualBlock","wasMultiselect","isInMultiSelectMode","status","inVirtualSelectionMode","forEachSelection","virtualSelection","initVim","CodeMirror5","Vim","WORD","RANGE","editor","curWord","seen","GUTTER_ID","LINT_LINE_ID","showTooltip","tt","lint","selfContain","opacity","hideTooltip","showTooltipFor","tooltip","hide","LintState","conf","hasGutter","marked","Function","getAnnotations","linterOptions","timeout","onMouseOver","waitingFor","highlightLines","tooltips","lintOnChange","async","formatAnnotation","onUpdateLinting","clearMarks","clearErrorLines","makeMarker","labels","severity","multiple","getMaxSeverity","groupByLine","annotations","ann","annotationTooltip","tip","messageHTML","lintAsync","abort","arg2","updateLinting","startLinting","then","issues","annotationsNotSorted","anns","item","maxSeverity","tipLabel","__annotation","popupTooltips","hasLintGutter","ie_lt8","matching","config","afterCursor","maxScanLen","maxScanLineLength","maxScanLines","matchBrackets","autoclear","maxHighlightLen","maxHighlightLineLength","highlightNonMatching","doMatchBrackets","currentlyHighlighted","clearHighlighted","oldConfig","defineProperty","configurable","enumerable","TypeError","writable","codemirror","cminstance","unseenLines","merge","Boolean","globalOptions","globalEvents","watch","deep","$nextTick","switchMerge","handerCodeChange","methods","initialize","MergeView","$refs","mergeview","edit","$emit","unseenLineMarkers","destroy","mounted","beforeDestroy","install","u","component","render","staticRenderFns","_compiled","functional","_scopeId","$vnode","ssrContext","__VUE_SSR_CONTEXT__","_registeredComponents","_ssrRegister","beforeCreate","_injectStyles","esModule","$createElement","_self","_c","staticClass","attrs","findPosSubword","cat","moveSubword","insertLine","newSelection","wordAt","addCursorToSelection","newRange","isSelectedRange","goSubwordLeft","goSubwordRight","scrollLineUp","visibleBottomLine","scrollLineDown","visibleTopLine","splitSelectionByLine","lineRanges","singleSelectionTop","selectLine","extended","insertLineAfter","insertLineBefore","selectNextOccurrence","fullWord","sublimeFindFullWord","skipAndSelectNextOccurrence","prevAnchor","prevHead","addCursorToPrevLine","addCursorToNextLine","mirror","selectBetweenBrackets","opening","puncType","sortLines","caseSensitive","toSort","au","bu","modifyWordOrSelection","indices","replacements","getTarget","findAndGoTo","findPrevious","selectScope","goToBracket","swapLineUp","linesToMove","newSels","swapLineDown","toggleCommentIndented","toggleComment","actual","duplicateLine","reverseSortLines","sortLinesInsensitive","reverseSortLinesInsensitive","nextBookmark","sublimeBookmarks","prevBookmark","toggleBookmark","sublimeBookmark","clearBookmarks","selectBookmarks","smartBackspace","toStartOfLine","deletePos","prevIndent","delLineRight","upcaseAtCursor","downcaseAtCursor","setSublimeMark","sublimeMark","selectToSublimeMark","deleteToSublimeMark","sublimeKilled","swapWithSublimeMark","sublimeYank","showInCenter","findUnder","findUnderPrevious","findAllUnder","primaryIndex","macSublime","pcSublime","sublime","HINT_ELEMENT_CLASS","ACTIVE_HINT_ELEMENT_CLASS","Completion","debounce","tick","startLen","updateOnCursorActivity","activityFunc","showHint","getHints","newOpts","parseOptions","supportsSelection","completionActive","completion","requestAnimationFrame","cancelAnimationFrame","hintOptions","resolve","getText","baseMap","Up","moveFocus","Down","PageUp","menuSize","PageDown","Home","setFocus","End","pick","Tab","Esc","custom","customKeys","ourMap","addBinding","getHintElement","hintsElement","Widget","random","picked","parentWindow","hints","selectedHint","completions","hintId","alignWithWord","below","isContainerPositioned","offsetParentPosition","bodyPosition","winW","innerWidth","winH","startScroll","moveOnOverlap","DOMRect","scrolls","paddingForScrollbar","overlapY","spaceAbove","closingOnBlur","overlapX","avoidWrap","changeActive","screenAmount","closeOnUnfocus","onScroll","curScroll","point","completeOnSingleClick","selectedHintRange","getSelectedHintRange","scrollToActive","applicableHelpers","fetchHints","resolveAutoHints","resolved","app","run","fromList","anyword","closeOnPick","identStart","closeCharacters","disable","myTick","finishUpdate","completeSingle","node1","node2","firstNode","scrollMargin","term","autocomplete","jsyaml","error","loadAll","loc","noFold","regexpFlags","flags","multiline","ensureFlags","maybeMultiline","searchRegexpForward","searchRegexpForwardMultiline","inside","lastMatchIn","endMargin","newMatch","searchRegexpBackward","searchRegexpBackwardMultiline","adjustPos","folded","foldFunc","searchStringForward","caseFold","cutFrom","endString","searchStringBackward","topString","SearchCursor","atOccurrence","afterEmptyMatch","normalize","foldGutter","onGutterClick","onViewportChange","onFold","optionChange","State","updateInViewport","indicatorOpen","indicatorFolded","isFolded","updateFoldInfo","foldOption","clsFolded","clsOpen","vp","changeUpdate","foldOnChangeTimeSpan","updateViewportTimeSpan","cons","keywordRegex","esc","escaped","literal","keyCol","pair","pairStart","inlinePairs","inlineList","lineComment","isLineComment","commentIndent","spaceTo","lineIndent","strPad","markedSelection","Vue","use","VueCodemirror","myIndent","lastLineInFold","regex","_this","codeMirror","markedSelectionStyle","CHUNK_SIZE","coverRange","addAt","atEnd","parserConfig","statementIndent","jsonldMode","jsonld","jsonMode","json","trackScope","isTS","typescript","wordRE","wordCharacters","keywords","kw","A","B","C","D","atom","isOperatorChar","isJsonldKeyword","readRegexp","inSet","tp","cont","tokenBase","tokenize","tokenString","tokenComment","expressionAllowed","tokenQuasi","lexical","lastType","propertyIsEnumerable","quote","maybeEnd","brackets","findFatArrow","fatArrowAt","arrow","sawSomething","atomicTypes","JSLexical","inScope","varname","localVars","cx","vars","parseJS","cc","combinator","expression","statement","lex","pass","inList","newContext","registerVarScoped","Var","globalVars","isModifier","defaultVars","pushcontext","pushblockcontext","popcontext","pushlex","poplex","expect","wanted","exp","vardef","parenExpr","maybeexpression","maybeelse","functiondef","forspec","enumdef","typename","typeexpr","maybelabel","maybeCatchBinding","afterExport","afterImport","funarg","expressionInner","expressionNoComma","noComma","arrowBodyNoComma","arrowBody","commasep","maybeop","maybeoperatorNoComma","maybeoperatorComma","classExpression","arrayLiteral","contCommasep","objprop","quasi","maybeTarget","property","continueQuasi","targetNoComma","maybeTypeArgs","getterSetter","afterprop","maybetype","what","sep","proceed","maybetypeOrIn","mayberettype","isKW","afterType","typeprops","typearg","maybeReturnType","quasiType","typeprop","functiondecl","continueQuasiType","typeparam","maybeTypeDefault","maybeAssign","vardefCont","eltpattern","proppattern","_type","forspec1","forspec2","classNameAfter","classBody","classfield","isInterface","maybeFrom","exportField","importSpec","maybeMoreImports","maybeAs","enummember","isContinuedStatement","textAfter","basecolumn","firstChar","doubleIndentSwitch","blockCommentStart","blockCommentEnd","blockCommentContinue","closeBrackets","skipExpression"],"mappings":"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","file":"js/codemirror.e88d2132.js","sourcesContent":["// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".cm-s-base16-dark.CodeMirror{background:#151515;color:#e0e0e0}.cm-s-base16-dark div.CodeMirror-selected{background:#303030}.cm-s-base16-dark .CodeMirror-line::selection,.cm-s-base16-dark .CodeMirror-line>span::selection,.cm-s-base16-dark .CodeMirror-line>span>span::selection{background:rgba(48,48,48,.99)}.cm-s-base16-dark .CodeMirror-line::-moz-selection,.cm-s-base16-dark .CodeMirror-line>span::-moz-selection,.cm-s-base16-dark .CodeMirror-line>span>span::-moz-selection{background:rgba(48,48,48,.99)}.cm-s-base16-dark .CodeMirror-gutters{background:#151515;border-right:0}.cm-s-base16-dark .CodeMirror-guttermarker{color:#ac4142}.cm-s-base16-dark .CodeMirror-guttermarker-subtle,.cm-s-base16-dark .CodeMirror-linenumber{color:#505050}.cm-s-base16-dark .CodeMirror-cursor{border-left:1px solid #b0b0b0}.cm-s-base16-dark .cm-animate-fat-cursor,.cm-s-base16-dark.cm-fat-cursor .CodeMirror-cursor{background-color:rgba(142,141,136,.4588235294117647)!important}.cm-s-base16-dark span.cm-comment{color:#8f5536}.cm-s-base16-dark span.cm-atom,.cm-s-base16-dark span.cm-number{color:#aa759f}.cm-s-base16-dark span.cm-attribute,.cm-s-base16-dark span.cm-property{color:#90a959}.cm-s-base16-dark span.cm-keyword{color:#ac4142}.cm-s-base16-dark span.cm-string{color:#f4bf75}.cm-s-base16-dark span.cm-variable{color:#90a959}.cm-s-base16-dark span.cm-variable-2{color:#6a9fb5}.cm-s-base16-dark span.cm-def{color:#d28445}.cm-s-base16-dark span.cm-bracket{color:#e0e0e0}.cm-s-base16-dark span.cm-tag{color:#ac4142}.cm-s-base16-dark span.cm-link{color:#aa759f}.cm-s-base16-dark span.cm-error{background:#ac4142;color:#b0b0b0}.cm-s-base16-dark .CodeMirror-activeline-background{background:#202020}.cm-s-base16-dark .CodeMirror-matchingbracket{text-decoration:underline;color:#fff!important}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-3-1!../../../postcss-loader/src/index.js??ref--7-oneOf-3-2!../../../postcss-loader/src/index.js??ref--7-oneOf-3-3!./lint.css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"23b29e40\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".cm-s-base16-light.CodeMirror{background:#f5f5f5;color:#202020}.cm-s-base16-light div.CodeMirror-selected{background:#e0e0e0}.cm-s-base16-light .CodeMirror-line::selection,.cm-s-base16-light .CodeMirror-line>span::selection,.cm-s-base16-light .CodeMirror-line>span>span::selection{background:#e0e0e0}.cm-s-base16-light .CodeMirror-line::-moz-selection,.cm-s-base16-light .CodeMirror-line>span::-moz-selection,.cm-s-base16-light .CodeMirror-line>span>span::-moz-selection{background:#e0e0e0}.cm-s-base16-light .CodeMirror-gutters{background:#f5f5f5;border-right:0}.cm-s-base16-light .CodeMirror-guttermarker{color:#ac4142}.cm-s-base16-light .CodeMirror-guttermarker-subtle,.cm-s-base16-light .CodeMirror-linenumber{color:#b0b0b0}.cm-s-base16-light .CodeMirror-cursor{border-left:1px solid #505050}.cm-s-base16-light span.cm-comment{color:#8f5536}.cm-s-base16-light span.cm-atom,.cm-s-base16-light span.cm-number{color:#aa759f}.cm-s-base16-light span.cm-attribute,.cm-s-base16-light span.cm-property{color:#90a959}.cm-s-base16-light span.cm-keyword{color:#ac4142}.cm-s-base16-light span.cm-string{color:#f4bf75}.cm-s-base16-light span.cm-variable{color:#90a959}.cm-s-base16-light span.cm-variable-2{color:#6a9fb5}.cm-s-base16-light span.cm-def{color:#d28445}.cm-s-base16-light span.cm-bracket{color:#202020}.cm-s-base16-light span.cm-tag{color:#ac4142}.cm-s-base16-light span.cm-link{color:#aa759f}.cm-s-base16-light span.cm-error{background:#ac4142;color:#505050}.cm-s-base16-light .CodeMirror-activeline-background{background:#dddcdc}.cm-s-base16-light .CodeMirror-matchingbracket{color:#f5f5f5!important;background-color:#6a9fb5!important}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n\n// Open simple dialogs on top of an editor. Relies on dialog.css.\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  function dialogDiv(cm, template, bottom) {\n    var wrap = cm.getWrapperElement();\n    var dialog;\n    dialog = wrap.appendChild(document.createElement(\"div\"));\n    if (bottom)\n      dialog.className = \"CodeMirror-dialog CodeMirror-dialog-bottom\";\n    else\n      dialog.className = \"CodeMirror-dialog CodeMirror-dialog-top\";\n\n    if (typeof template == \"string\") {\n      dialog.innerHTML = template;\n    } else { // Assuming it's a detached DOM element.\n      dialog.appendChild(template);\n    }\n    CodeMirror.addClass(wrap, 'dialog-opened');\n    return dialog;\n  }\n\n  function closeNotification(cm, newVal) {\n    if (cm.state.currentNotificationClose)\n      cm.state.currentNotificationClose();\n    cm.state.currentNotificationClose = newVal;\n  }\n\n  CodeMirror.defineExtension(\"openDialog\", function(template, callback, options) {\n    if (!options) options = {};\n\n    closeNotification(this, null);\n\n    var dialog = dialogDiv(this, template, options.bottom);\n    var closed = false, me = this;\n    function close(newVal) {\n      if (typeof newVal == 'string') {\n        inp.value = newVal;\n      } else {\n        if (closed) return;\n        closed = true;\n        CodeMirror.rmClass(dialog.parentNode, 'dialog-opened');\n        dialog.parentNode.removeChild(dialog);\n        me.focus();\n\n        if (options.onClose) options.onClose(dialog);\n      }\n    }\n\n    var inp = dialog.getElementsByTagName(\"input\")[0], button;\n    if (inp) {\n      inp.focus();\n\n      if (options.value) {\n        inp.value = options.value;\n        if (options.selectValueOnOpen !== false) {\n          inp.select();\n        }\n      }\n\n      if (options.onInput)\n        CodeMirror.on(inp, \"input\", function(e) { options.onInput(e, inp.value, close);});\n      if (options.onKeyUp)\n        CodeMirror.on(inp, \"keyup\", function(e) {options.onKeyUp(e, inp.value, close);});\n\n      CodeMirror.on(inp, \"keydown\", function(e) {\n        if (options && options.onKeyDown && options.onKeyDown(e, inp.value, close)) { return; }\n        if (e.keyCode == 27 || (options.closeOnEnter !== false && e.keyCode == 13)) {\n          inp.blur();\n          CodeMirror.e_stop(e);\n          close();\n        }\n        if (e.keyCode == 13) callback(inp.value, e);\n      });\n\n      if (options.closeOnBlur !== false) CodeMirror.on(dialog, \"focusout\", function (evt) {\n        if (evt.relatedTarget !== null) close();\n      });\n    } else if (button = dialog.getElementsByTagName(\"button\")[0]) {\n      CodeMirror.on(button, \"click\", function() {\n        close();\n        me.focus();\n      });\n\n      if (options.closeOnBlur !== false) CodeMirror.on(button, \"blur\", close);\n\n      button.focus();\n    }\n    return close;\n  });\n\n  CodeMirror.defineExtension(\"openConfirm\", function(template, callbacks, options) {\n    closeNotification(this, null);\n    var dialog = dialogDiv(this, template, options && options.bottom);\n    var buttons = dialog.getElementsByTagName(\"button\");\n    var closed = false, me = this, blurring = 1;\n    function close() {\n      if (closed) return;\n      closed = true;\n      CodeMirror.rmClass(dialog.parentNode, 'dialog-opened');\n      dialog.parentNode.removeChild(dialog);\n      me.focus();\n    }\n    buttons[0].focus();\n    for (var i = 0; i < buttons.length; ++i) {\n      var b = buttons[i];\n      (function(callback) {\n        CodeMirror.on(b, \"click\", function(e) {\n          CodeMirror.e_preventDefault(e);\n          close();\n          if (callback) callback(me);\n        });\n      })(callbacks[i]);\n      CodeMirror.on(b, \"blur\", function() {\n        --blurring;\n        setTimeout(function() { if (blurring <= 0) close(); }, 200);\n      });\n      CodeMirror.on(b, \"focus\", function() { ++blurring; });\n    }\n  });\n\n  /*\n   * openNotification\n   * Opens a notification, that can be closed with an optional timer\n   * (default 5000ms timer) and always closes on click.\n   *\n   * If a notification is opened while another is opened, it will close the\n   * currently opened one and open the new one immediately.\n   */\n  CodeMirror.defineExtension(\"openNotification\", function(template, options) {\n    closeNotification(this, close);\n    var dialog = dialogDiv(this, template, options && options.bottom);\n    var closed = false, doneTimer;\n    var duration = options && typeof options.duration !== \"undefined\" ? options.duration : 5000;\n\n    function close() {\n      if (closed) return;\n      closed = true;\n      clearTimeout(doneTimer);\n      CodeMirror.rmClass(dialog.parentNode, 'dialog-opened');\n      dialog.parentNode.removeChild(dialog);\n    }\n\n    CodeMirror.on(dialog, 'click', function(e) {\n      CodeMirror.e_preventDefault(e);\n      close();\n    });\n\n    if (duration)\n      doneTimer = setTimeout(close, duration);\n\n    return close;\n  });\n});\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".CodeMirror-lint-markers{width:16px}.CodeMirror-lint-tooltip{background-color:#ffd;border:1px solid #000;border-radius:4px 4px 4px 4px;color:#000;font-family:monospace;font-size:10pt;overflow:hidden;padding:2px 5px;position:fixed;white-space:pre;white-space:pre-wrap;z-index:100;max-width:600px;opacity:0;transition:opacity .4s;-moz-transition:opacity .4s;-webkit-transition:opacity .4s;-o-transition:opacity .4s;-ms-transition:opacity .4s}.CodeMirror-lint-mark{background-position:0 100%;background-repeat:repeat-x}.CodeMirror-lint-mark-warning{background-image:url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJFhQXEbhTg7YAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAMklEQVQI12NkgIIvJ3QXMjAwdDN+OaEbysDA4MPAwNDNwMCwiOHLCd1zX07o6kBVGQEAKBANtobskNMAAAAASUVORK5CYII=\\\")}.CodeMirror-lint-mark-error{background-image:url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg==\\\")}.CodeMirror-lint-marker{background-position:50%;background-repeat:no-repeat;cursor:pointer;display:inline-block;height:16px;width:16px;vertical-align:middle;position:relative}.CodeMirror-lint-message{padding-left:18px;background-position:0 0;background-repeat:no-repeat}.CodeMirror-lint-marker-warning,.CodeMirror-lint-message-warning{background-image:url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII=\\\")}.CodeMirror-lint-marker-error,.CodeMirror-lint-message-error{background-image:url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII=\\\")}.CodeMirror-lint-marker-multiple{background-image:url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC\\\");background-repeat:no-repeat;background-position:100% 100%;width:100%;height:100%}.CodeMirror-lint-line-error{background-color:rgba(183,76,81,.08)}.CodeMirror-lint-line-warning{background-color:rgba(255,211,0,.1)}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  var cmds = CodeMirror.commands;\n  var Pos = CodeMirror.Pos;\n  function posEq(a, b) { return a.line == b.line && a.ch == b.ch; }\n\n  // Kill 'ring'\n\n  var killRing = [];\n  function addToRing(str) {\n    killRing.push(str);\n    if (killRing.length > 50) killRing.shift();\n  }\n  function growRingTop(str) {\n    if (!killRing.length) return addToRing(str);\n    killRing[killRing.length - 1] += str;\n  }\n  function getFromRing(n) { return killRing[killRing.length - (n ? Math.min(n, 1) : 1)] || \"\"; }\n  function popFromRing() { if (killRing.length > 1) killRing.pop(); return getFromRing(); }\n\n  var lastKill = null;\n\n  // Internal generic kill function, used by several mapped kill \"family\" functions.\n  function _kill(cm, from, to, ring, text) {\n    if (text == null) text = cm.getRange(from, to);\n\n    if (ring == \"grow\" && lastKill && lastKill.cm == cm && posEq(from, lastKill.pos) && cm.isClean(lastKill.gen))\n      growRingTop(text);\n    else if (ring !== false)\n      addToRing(text);\n    cm.replaceRange(\"\", from, to, \"+delete\");\n\n    if (ring == \"grow\") lastKill = {cm: cm, pos: from, gen: cm.changeGeneration()};\n    else lastKill = null;\n  }\n\n  // Boundaries of various units\n\n  function byChar(cm, pos, dir) {\n    return cm.findPosH(pos, dir, \"char\", true);\n  }\n\n  function byWord(cm, pos, dir) {\n    return cm.findPosH(pos, dir, \"word\", true);\n  }\n\n  function byLine(cm, pos, dir) {\n    return cm.findPosV(pos, dir, \"line\", cm.doc.sel.goalColumn);\n  }\n\n  function byPage(cm, pos, dir) {\n    return cm.findPosV(pos, dir, \"page\", cm.doc.sel.goalColumn);\n  }\n\n  function byParagraph(cm, pos, dir) {\n    var no = pos.line, line = cm.getLine(no);\n    var sawText = /\\S/.test(dir < 0 ? line.slice(0, pos.ch) : line.slice(pos.ch));\n    var fst = cm.firstLine(), lst = cm.lastLine();\n    for (;;) {\n      no += dir;\n      if (no < fst || no > lst)\n        return cm.clipPos(Pos(no - dir, dir < 0 ? 0 : null));\n      line = cm.getLine(no);\n      var hasText = /\\S/.test(line);\n      if (hasText) sawText = true;\n      else if (sawText) return Pos(no, 0);\n    }\n  }\n\n  function bySentence(cm, pos, dir) {\n    var line = pos.line, ch = pos.ch;\n    var text = cm.getLine(pos.line), sawWord = false;\n    for (;;) {\n      var next = text.charAt(ch + (dir < 0 ? -1 : 0));\n      if (!next) { // End/beginning of line reached\n        if (line == (dir < 0 ? cm.firstLine() : cm.lastLine())) return Pos(line, ch);\n        text = cm.getLine(line + dir);\n        if (!/\\S/.test(text)) return Pos(line, ch);\n        line += dir;\n        ch = dir < 0 ? text.length : 0;\n        continue;\n      }\n      if (sawWord && /[!?.]/.test(next)) return Pos(line, ch + (dir > 0 ? 1 : 0));\n      if (!sawWord) sawWord = /\\w/.test(next);\n      ch += dir;\n    }\n  }\n\n  function byExpr(cm, pos, dir) {\n    var wrap;\n    if (cm.findMatchingBracket && (wrap = cm.findMatchingBracket(pos, {strict: true}))\n        && wrap.match && (wrap.forward ? 1 : -1) == dir)\n      return dir > 0 ? Pos(wrap.to.line, wrap.to.ch + 1) : wrap.to;\n\n    for (var first = true;; first = false) {\n      var token = cm.getTokenAt(pos);\n      var after = Pos(pos.line, dir < 0 ? token.start : token.end);\n      if (first && dir > 0 && token.end == pos.ch || !/\\w/.test(token.string)) {\n        var newPos = cm.findPosH(after, dir, \"char\");\n        if (posEq(after, newPos)) return pos;\n        else pos = newPos;\n      } else {\n        return after;\n      }\n    }\n  }\n\n  // Prefixes (only crudely supported)\n\n  function getPrefix(cm, precise) {\n    var digits = cm.state.emacsPrefix;\n    if (!digits) return precise ? null : 1;\n    clearPrefix(cm);\n    return digits == \"-\" ? -1 : Number(digits);\n  }\n\n  function repeated(cmd) {\n    var f = typeof cmd == \"string\" ? function(cm) { cm.execCommand(cmd); } : cmd;\n    return function(cm) {\n      var prefix = getPrefix(cm);\n      f(cm);\n      for (var i = 1; i < prefix; ++i) f(cm);\n    };\n  }\n\n  function findEnd(cm, pos, by, dir) {\n    var prefix = getPrefix(cm);\n    if (prefix < 0) { dir = -dir; prefix = -prefix; }\n    for (var i = 0; i < prefix; ++i) {\n      var newPos = by(cm, pos, dir);\n      if (posEq(newPos, pos)) break;\n      pos = newPos;\n    }\n    return pos;\n  }\n\n  function move(by, dir) {\n    var f = function(cm) {\n      cm.extendSelection(findEnd(cm, cm.getCursor(), by, dir));\n    };\n    f.motion = true;\n    return f;\n  }\n\n  function killTo(cm, by, dir, ring) {\n    var selections = cm.listSelections(), cursor;\n    var i = selections.length;\n    while (i--) {\n      cursor = selections[i].head;\n      _kill(cm, cursor, findEnd(cm, cursor, by, dir), ring);\n    }\n  }\n\n  function _killRegion(cm, ring) {\n    if (cm.somethingSelected()) {\n      var selections = cm.listSelections(), selection;\n      var i = selections.length;\n      while (i--) {\n        selection = selections[i];\n        _kill(cm, selection.anchor, selection.head, ring);\n      }\n      return true;\n    }\n  }\n\n  function addPrefix(cm, digit) {\n    if (cm.state.emacsPrefix) {\n      if (digit != \"-\") cm.state.emacsPrefix += digit;\n      return;\n    }\n    // Not active yet\n    cm.state.emacsPrefix = digit;\n    cm.on(\"keyHandled\", maybeClearPrefix);\n    cm.on(\"inputRead\", maybeDuplicateInput);\n  }\n\n  var prefixPreservingKeys = {\"Alt-G\": true, \"Ctrl-X\": true, \"Ctrl-Q\": true, \"Ctrl-U\": true};\n\n  function maybeClearPrefix(cm, arg) {\n    if (!cm.state.emacsPrefixMap && !prefixPreservingKeys.hasOwnProperty(arg))\n      clearPrefix(cm);\n  }\n\n  function clearPrefix(cm) {\n    cm.state.emacsPrefix = null;\n    cm.off(\"keyHandled\", maybeClearPrefix);\n    cm.off(\"inputRead\", maybeDuplicateInput);\n  }\n\n  function maybeDuplicateInput(cm, event) {\n    var dup = getPrefix(cm);\n    if (dup > 1 && event.origin == \"+input\") {\n      var one = event.text.join(\"\\n\"), txt = \"\";\n      for (var i = 1; i < dup; ++i) txt += one;\n      cm.replaceSelection(txt);\n    }\n  }\n\n  function maybeRemovePrefixMap(cm, arg) {\n    if (typeof arg == \"string\" && (/^\\d$/.test(arg) || arg == \"Ctrl-U\")) return;\n    cm.removeKeyMap(prefixMap);\n    cm.state.emacsPrefixMap = false;\n    cm.off(\"keyHandled\", maybeRemovePrefixMap);\n    cm.off(\"inputRead\", maybeRemovePrefixMap);\n  }\n\n  // Utilities\n\n  cmds.setMark = function (cm) {\n    cm.setCursor(cm.getCursor());\n    cm.setExtending(!cm.getExtending());\n    cm.on(\"change\", function() { cm.setExtending(false); });\n  }\n\n  function clearMark(cm) {\n    cm.setExtending(false);\n    cm.setCursor(cm.getCursor());\n  }\n\n  function makePrompt(msg) {\n    var fragment = document.createDocumentFragment();\n    var input = document.createElement(\"input\");\n    input.setAttribute(\"type\", \"text\");\n    input.style.width = \"10em\";\n    fragment.appendChild(document.createTextNode(msg + \": \"));\n    fragment.appendChild(input);\n    return fragment;\n  }\n\n  function getInput(cm, msg, f) {\n    if (cm.openDialog)\n      cm.openDialog(makePrompt(msg), f, {bottom: true});\n    else\n      f(prompt(msg, \"\"));\n  }\n\n  function operateOnWord(cm, op) {\n    var start = cm.getCursor(), end = cm.findPosH(start, 1, \"word\");\n    cm.replaceRange(op(cm.getRange(start, end)), start, end);\n    cm.setCursor(end);\n  }\n\n  function toEnclosingExpr(cm) {\n    var pos = cm.getCursor(), line = pos.line, ch = pos.ch;\n    var stack = [];\n    while (line >= cm.firstLine()) {\n      var text = cm.getLine(line);\n      for (var i = ch == null ? text.length : ch; i > 0;) {\n        var ch = text.charAt(--i);\n        if (ch == \")\")\n          stack.push(\"(\");\n        else if (ch == \"]\")\n          stack.push(\"[\");\n        else if (ch == \"}\")\n          stack.push(\"{\");\n        else if (/[\\(\\{\\[]/.test(ch) && (!stack.length || stack.pop() != ch))\n          return cm.extendSelection(Pos(line, i));\n      }\n      --line; ch = null;\n    }\n  }\n\n  // Commands. Names should match emacs function names (albeit in camelCase)\n  // except where emacs function names collide with code mirror core commands.\n\n  cmds.killRegion = function(cm) {\n    _kill(cm, cm.getCursor(\"start\"), cm.getCursor(\"end\"), true);\n  };\n\n  // Maps to emacs kill-line\n  cmds.killLineEmacs = repeated(function(cm) {\n    var start = cm.getCursor(), end = cm.clipPos(Pos(start.line));\n    var text = cm.getRange(start, end);\n    if (!/\\S/.test(text)) {\n      text += \"\\n\";\n      end = Pos(start.line + 1, 0);\n    }\n    _kill(cm, start, end, \"grow\", text);\n  });\n\n  cmds.killRingSave = function(cm) {\n    addToRing(cm.getSelection());\n    clearMark(cm);\n  };\n\n  cmds.yank = function(cm) {\n    var start = cm.getCursor();\n    cm.replaceRange(getFromRing(getPrefix(cm)), start, start, \"paste\");\n    cm.setSelection(start, cm.getCursor());\n  };\n\n  cmds.yankPop = function(cm) {\n    cm.replaceSelection(popFromRing(), \"around\", \"paste\");\n  };\n\n  cmds.forwardChar = move(byChar, 1);\n\n  cmds.backwardChar = move(byChar, -1)\n\n  cmds.deleteChar = function(cm) { killTo(cm, byChar, 1, false); };\n\n  cmds.deleteForwardChar = function(cm) {\n    _killRegion(cm, false) || killTo(cm, byChar, 1, false);\n  };\n\n  cmds.deleteBackwardChar = function(cm) {\n    _killRegion(cm, false) || killTo(cm, byChar, -1, false);\n  };\n\n  cmds.forwardWord = move(byWord, 1);\n\n  cmds.backwardWord = move(byWord, -1);\n\n  cmds.killWord = function(cm) { killTo(cm, byWord, 1, \"grow\"); };\n\n  cmds.backwardKillWord = function(cm) { killTo(cm, byWord, -1, \"grow\"); };\n\n  cmds.nextLine = move(byLine, 1);\n\n  cmds.previousLine = move(byLine, -1);\n\n  cmds.scrollDownCommand = move(byPage, -1);\n\n  cmds.scrollUpCommand = move(byPage, 1);\n\n  cmds.backwardParagraph = move(byParagraph, -1);\n\n  cmds.forwardParagraph = move(byParagraph, 1);\n\n  cmds.backwardSentence = move(bySentence, -1);\n\n  cmds.forwardSentence = move(bySentence, 1);\n\n  cmds.killSentence = function(cm) { killTo(cm, bySentence, 1, \"grow\"); };\n\n  cmds.backwardKillSentence = function(cm) {\n    _kill(cm, cm.getCursor(), bySentence(cm, cm.getCursor(), 1), \"grow\");\n  };\n\n  cmds.killSexp = function(cm) { killTo(cm, byExpr, 1, \"grow\"); };\n\n  cmds.backwardKillSexp = function(cm) { killTo(cm, byExpr, -1, \"grow\"); };\n\n  cmds.forwardSexp = move(byExpr, 1);\n\n  cmds.backwardSexp = move(byExpr, -1);\n\n  cmds.markSexp = function(cm) {\n    var cursor = cm.getCursor();\n    cm.setSelection(findEnd(cm, cursor, byExpr, 1), cursor);\n  };\n\n  cmds.transposeSexps = function(cm) {\n    var leftStart = byExpr(cm, cm.getCursor(), -1);\n    var leftEnd = byExpr(cm, leftStart, 1);\n    var rightEnd = byExpr(cm, leftEnd, 1);\n    var rightStart = byExpr(cm, rightEnd, -1);\n    cm.replaceRange(cm.getRange(rightStart, rightEnd) +\n                    cm.getRange(leftEnd, rightStart) +\n                    cm.getRange(leftStart, leftEnd), leftStart, rightEnd);\n  };\n\n  cmds.backwardUpList = repeated(toEnclosingExpr);\n\n  cmds.justOneSpace = function(cm) {\n    var pos = cm.getCursor(), from = pos.ch;\n    var to = pos.ch, text = cm.getLine(pos.line);\n    while (from && /\\s/.test(text.charAt(from - 1))) --from;\n    while (to < text.length && /\\s/.test(text.charAt(to))) ++to;\n    cm.replaceRange(\" \", Pos(pos.line, from), Pos(pos.line, to));\n  };\n\n  cmds.openLine = repeated(function(cm) {\n    cm.replaceSelection(\"\\n\", \"start\");\n  });\n\n  // maps to emacs 'transpose-chars'\n  cmds.transposeCharsRepeatable = repeated(function(cm) {\n    cm.execCommand(\"transposeChars\");\n  });\n\n  cmds.capitalizeWord = repeated(function(cm) {\n    operateOnWord(cm, function(w) {\n      var letter = w.search(/\\w/);\n      if (letter == -1) return w;\n      return w.slice(0, letter) + w.charAt(letter).toUpperCase() +\n          w.slice(letter + 1).toLowerCase();\n    });\n  });\n\n  cmds.upcaseWord = repeated(function(cm) {\n    operateOnWord(cm, function(w) { return w.toUpperCase(); });\n  });\n\n  cmds.downcaseWord = repeated(function(cm) {\n    operateOnWord(cm, function(w) { return w.toLowerCase(); });\n  });\n\n  // maps to emacs 'undo'\n  cmds.undoRepeatable = repeated(\"undo\");\n\n  cmds.keyboardQuit = function(cm) {\n    cm.execCommand(\"clearSearch\");\n    clearMark(cm);\n  }\n\n  cmds.newline = repeated(function(cm) { cm.replaceSelection(\"\\n\", \"end\"); });\n\n  cmds.gotoLine = function(cm) {\n    var prefix = getPrefix(cm, true);\n    if (prefix != null && prefix > 0) return cm.setCursor(prefix - 1);\n\n    getInput(cm, \"Goto line\", function(str) {\n      var num;\n      if (str && !isNaN(num = Number(str)) && num == (num|0) && num > 0)\n      cm.setCursor(num - 1);\n    });\n  };\n\n  cmds.indentRigidly = function(cm) {\n    cm.indentSelection(getPrefix(cm, true) || cm.getOption(\"indentUnit\"));\n  };\n\n  cmds.exchangePointAndMark = function(cm) {\n    cm.setSelection(cm.getCursor(\"head\"), cm.getCursor(\"anchor\"));\n  };\n\n  cmds.quotedInsertTab = repeated(\"insertTab\");\n\n  cmds.universalArgument = function addPrefixMap(cm) {\n    cm.state.emacsPrefixMap = true;\n    cm.addKeyMap(prefixMap);\n    cm.on(\"keyHandled\", maybeRemovePrefixMap);\n    cm.on(\"inputRead\", maybeRemovePrefixMap);\n  };\n\n  CodeMirror.emacs = {kill: _kill, killRegion: _killRegion, repeated: repeated};\n\n  // Actual keymap\n  var keyMap = CodeMirror.keyMap.emacs = CodeMirror.normalizeKeyMap({\n    \"Ctrl-W\": \"killRegion\",\n    \"Ctrl-K\": \"killLineEmacs\",\n    \"Alt-W\": \"killRingSave\",\n    \"Ctrl-Y\": \"yank\",\n    \"Alt-Y\": \"yankPop\",\n    \"Ctrl-Space\": \"setMark\",\n    \"Ctrl-Shift-2\": \"setMark\",\n    \"Ctrl-F\": \"forwardChar\",\n    \"Ctrl-B\": \"backwardChar\",\n    \"Right\": \"forwardChar\",\n    \"Left\": \"backwardChar\",\n    \"Ctrl-D\": \"deleteChar\",\n    \"Delete\": \"deleteForwardChar\",\n    \"Ctrl-H\": \"deleteBackwardChar\",\n    \"Backspace\": \"deleteBackwardChar\",\n    \"Alt-F\": \"forwardWord\",\n    \"Alt-B\": \"backwardWord\",\n    \"Alt-Right\": \"forwardWord\",\n    \"Alt-Left\": \"backwardWord\",\n    \"Alt-D\": \"killWord\",\n    \"Alt-Backspace\": \"backwardKillWord\",\n    \"Ctrl-N\": \"nextLine\",\n    \"Ctrl-P\": \"previousLine\",\n    \"Down\": \"nextLine\",\n    \"Up\": \"previousLine\",\n    \"Ctrl-A\": \"goLineStart\",\n    \"Ctrl-E\": \"goLineEnd\",\n    \"End\": \"goLineEnd\",\n    \"Home\": \"goLineStart\",\n    \"Alt-V\": \"scrollDownCommand\",\n    \"Ctrl-V\": \"scrollUpCommand\",\n    \"PageUp\": \"scrollDownCommand\",\n    \"PageDown\": \"scrollUpCommand\",\n    \"Ctrl-Up\": \"backwardParagraph\",\n    \"Ctrl-Down\": \"forwardParagraph\",\n    \"Alt-{\": \"backwardParagraph\",\n    \"Alt-}\": \"forwardParagraph\",\n    \"Alt-A\": \"backwardSentence\",\n    \"Alt-E\": \"forwardSentence\",\n    \"Alt-K\": \"killSentence\",\n    \"Ctrl-X Delete\": \"backwardKillSentence\",\n    \"Ctrl-Alt-K\": \"killSexp\",\n    \"Ctrl-Alt-Backspace\": \"backwardKillSexp\",\n    \"Ctrl-Alt-F\": \"forwardSexp\",\n    \"Ctrl-Alt-B\": \"backwardSexp\",\n    \"Shift-Ctrl-Alt-2\": \"markSexp\",\n    \"Ctrl-Alt-T\": \"transposeSexps\",\n    \"Ctrl-Alt-U\": \"backwardUpList\",\n    \"Alt-Space\": \"justOneSpace\",\n    \"Ctrl-O\": \"openLine\",\n    \"Ctrl-T\": \"transposeCharsRepeatable\",\n    \"Alt-C\": \"capitalizeWord\",\n    \"Alt-U\": \"upcaseWord\",\n    \"Alt-L\": \"downcaseWord\",\n    \"Alt-;\": \"toggleComment\",\n    \"Ctrl-/\": \"undoRepeatable\",\n    \"Shift-Ctrl--\": \"undoRepeatable\",\n    \"Ctrl-Z\": \"undoRepeatable\",\n    \"Cmd-Z\": \"undoRepeatable\",\n    \"Ctrl-X U\": \"undoRepeatable\",\n    \"Shift-Ctrl-Z\": \"redo\",\n    \"Shift-Alt-,\": \"goDocStart\",\n    \"Shift-Alt-.\": \"goDocEnd\",\n    \"Ctrl-S\": \"findPersistentNext\",\n    \"Ctrl-R\": \"findPersistentPrev\",\n    \"Ctrl-G\": \"keyboardQuit\",\n    \"Shift-Alt-5\": \"replace\",\n    \"Alt-/\": \"autocomplete\",\n    \"Enter\": \"newlineAndIndent\",\n    \"Ctrl-J\": \"newline\",\n    \"Tab\": \"indentAuto\",\n    \"Alt-G G\": \"gotoLine\",\n    \"Ctrl-X Tab\": \"indentRigidly\",\n    \"Ctrl-X Ctrl-X\": \"exchangePointAndMark\",\n    \"Ctrl-X Ctrl-S\": \"save\",\n    \"Ctrl-X Ctrl-W\": \"save\",\n    \"Ctrl-X S\": \"saveAll\",\n    \"Ctrl-X F\": \"open\",\n    \"Ctrl-X K\": \"close\",\n    \"Ctrl-X H\": \"selectAll\",\n    \"Ctrl-Q Tab\": \"quotedInsertTab\",\n    \"Ctrl-U\": \"universalArgument\",\n    \"fallthrough\": \"default\"\n  });\n\n  var prefixMap = {\"Ctrl-G\": clearPrefix};\n  function regPrefix(d) {\n    prefixMap[d] = function(cm) { addPrefix(cm, d); };\n    keyMap[\"Ctrl-\" + d] = function(cm) { addPrefix(cm, d); };\n    prefixPreservingKeys[\"Ctrl-\" + d] = true;\n  }\n  for (var i = 0; i < 10; ++i) regPrefix(String(i));\n  regPrefix(\"-\");\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  function doFold(cm, pos, options, force) {\n    if (options && options.call) {\n      var finder = options;\n      options = null;\n    } else {\n      var finder = getOption(cm, options, \"rangeFinder\");\n    }\n    if (typeof pos == \"number\") pos = CodeMirror.Pos(pos, 0);\n    var minSize = getOption(cm, options, \"minFoldSize\");\n\n    function getRange(allowFolded) {\n      var range = finder(cm, pos);\n      if (!range || range.to.line - range.from.line < minSize) return null;\n      if (force === \"fold\") return range;\n\n      var marks = cm.findMarksAt(range.from);\n      for (var i = 0; i < marks.length; ++i) {\n        if (marks[i].__isFold) {\n          if (!allowFolded) return null;\n          range.cleared = true;\n          marks[i].clear();\n        }\n      }\n      return range;\n    }\n\n    var range = getRange(true);\n    if (getOption(cm, options, \"scanUp\")) while (!range && pos.line > cm.firstLine()) {\n      pos = CodeMirror.Pos(pos.line - 1, 0);\n      range = getRange(false);\n    }\n    if (!range || range.cleared || force === \"unfold\") return;\n\n    var myWidget = makeWidget(cm, options, range);\n    CodeMirror.on(myWidget, \"mousedown\", function(e) {\n      myRange.clear();\n      CodeMirror.e_preventDefault(e);\n    });\n    var myRange = cm.markText(range.from, range.to, {\n      replacedWith: myWidget,\n      clearOnEnter: getOption(cm, options, \"clearOnEnter\"),\n      __isFold: true\n    });\n    myRange.on(\"clear\", function(from, to) {\n      CodeMirror.signal(cm, \"unfold\", cm, from, to);\n    });\n    CodeMirror.signal(cm, \"fold\", cm, range.from, range.to);\n  }\n\n  function makeWidget(cm, options, range) {\n    var widget = getOption(cm, options, \"widget\");\n\n    if (typeof widget == \"function\") {\n      widget = widget(range.from, range.to);\n    }\n\n    if (typeof widget == \"string\") {\n      var text = document.createTextNode(widget);\n      widget = document.createElement(\"span\");\n      widget.appendChild(text);\n      widget.className = \"CodeMirror-foldmarker\";\n    } else if (widget) {\n      widget = widget.cloneNode(true)\n    }\n    return widget;\n  }\n\n  // Clumsy backwards-compatible interface\n  CodeMirror.newFoldFunction = function(rangeFinder, widget) {\n    return function(cm, pos) { doFold(cm, pos, {rangeFinder: rangeFinder, widget: widget}); };\n  };\n\n  // New-style interface\n  CodeMirror.defineExtension(\"foldCode\", function(pos, options, force) {\n    doFold(this, pos, options, force);\n  });\n\n  CodeMirror.defineExtension(\"isFolded\", function(pos) {\n    var marks = this.findMarksAt(pos);\n    for (var i = 0; i < marks.length; ++i)\n      if (marks[i].__isFold) return true;\n  });\n\n  CodeMirror.commands.toggleFold = function(cm) {\n    cm.foldCode(cm.getCursor());\n  };\n  CodeMirror.commands.fold = function(cm) {\n    cm.foldCode(cm.getCursor(), null, \"fold\");\n  };\n  CodeMirror.commands.unfold = function(cm) {\n    cm.foldCode(cm.getCursor(), { scanUp: false }, \"unfold\");\n  };\n  CodeMirror.commands.foldAll = function(cm) {\n    cm.operation(function() {\n      for (var i = cm.firstLine(), e = cm.lastLine(); i <= e; i++)\n        cm.foldCode(CodeMirror.Pos(i, 0), { scanUp: false }, \"fold\");\n    });\n  };\n  CodeMirror.commands.unfoldAll = function(cm) {\n    cm.operation(function() {\n      for (var i = cm.firstLine(), e = cm.lastLine(); i <= e; i++)\n        cm.foldCode(CodeMirror.Pos(i, 0), { scanUp: false }, \"unfold\");\n    });\n  };\n\n  CodeMirror.registerHelper(\"fold\", \"combine\", function() {\n    var funcs = Array.prototype.slice.call(arguments, 0);\n    return function(cm, start) {\n      for (var i = 0; i < funcs.length; ++i) {\n        var found = funcs[i](cm, start);\n        if (found) return found;\n      }\n    };\n  });\n\n  CodeMirror.registerHelper(\"fold\", \"auto\", function(cm, start) {\n    var helpers = cm.getHelpers(start, \"fold\");\n    for (var i = 0; i < helpers.length; i++) {\n      var cur = helpers[i](cm, start);\n      if (cur) return cur;\n    }\n  });\n\n  var defaultOptions = {\n    rangeFinder: CodeMirror.fold.auto,\n    widget: \"\\u2194\",\n    minFoldSize: 0,\n    scanUp: false,\n    clearOnEnter: true\n  };\n\n  CodeMirror.defineOption(\"foldOptions\", null);\n\n  function getOption(cm, options, name) {\n    if (options && options[name] !== undefined)\n      return options[name];\n    var editorOptions = cm.options.foldOptions;\n    if (editorOptions && editorOptions[name] !== undefined)\n      return editorOptions[name];\n    return defaultOptions[name];\n  }\n\n  CodeMirror.defineExtension(\"foldOption\", function(options, name) {\n    return getOption(this, options, name);\n  });\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n\n// This is CodeMirror (https://codemirror.net/5), a code editor\n// implemented in JavaScript on top of the browser's DOM.\n//\n// You can find some technical background for some of the code below\n// at http://marijnhaverbeke.nl/blog/#cm-internals .\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.CodeMirror = factory());\n}(this, (function () { 'use strict';\n\n  // Kludges for bugs and behavior differences that can't be feature\n  // detected are enabled based on userAgent etc sniffing.\n  var userAgent = navigator.userAgent;\n  var platform = navigator.platform;\n\n  var gecko = /gecko\\/\\d/i.test(userAgent);\n  var ie_upto10 = /MSIE \\d/.test(userAgent);\n  var ie_11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(userAgent);\n  var edge = /Edge\\/(\\d+)/.exec(userAgent);\n  var ie = ie_upto10 || ie_11up || edge;\n  var ie_version = ie && (ie_upto10 ? document.documentMode || 6 : +(edge || ie_11up)[1]);\n  var webkit = !edge && /WebKit\\//.test(userAgent);\n  var qtwebkit = webkit && /Qt\\/\\d+\\.\\d+/.test(userAgent);\n  var chrome = !edge && /Chrome\\/(\\d+)/.exec(userAgent);\n  var chrome_version = chrome && +chrome[1];\n  var presto = /Opera\\//.test(userAgent);\n  var safari = /Apple Computer/.test(navigator.vendor);\n  var mac_geMountainLion = /Mac OS X 1\\d\\D([8-9]|\\d\\d)\\D/.test(userAgent);\n  var phantom = /PhantomJS/.test(userAgent);\n\n  var ios = safari && (/Mobile\\/\\w+/.test(userAgent) || navigator.maxTouchPoints > 2);\n  var android = /Android/.test(userAgent);\n  // This is woefully incomplete. Suggestions for alternative methods welcome.\n  var mobile = ios || android || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent);\n  var mac = ios || /Mac/.test(platform);\n  var chromeOS = /\\bCrOS\\b/.test(userAgent);\n  var windows = /win/i.test(platform);\n\n  var presto_version = presto && userAgent.match(/Version\\/(\\d*\\.\\d*)/);\n  if (presto_version) { presto_version = Number(presto_version[1]); }\n  if (presto_version && presto_version >= 15) { presto = false; webkit = true; }\n  // Some browsers use the wrong event properties to signal cmd/ctrl on OS X\n  var flipCtrlCmd = mac && (qtwebkit || presto && (presto_version == null || presto_version < 12.11));\n  var captureRightClick = gecko || (ie && ie_version >= 9);\n\n  function classTest(cls) { return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\") }\n\n  var rmClass = function(node, cls) {\n    var current = node.className;\n    var match = classTest(cls).exec(current);\n    if (match) {\n      var after = current.slice(match.index + match[0].length);\n      node.className = current.slice(0, match.index) + (after ? match[1] + after : \"\");\n    }\n  };\n\n  function removeChildren(e) {\n    for (var count = e.childNodes.length; count > 0; --count)\n      { e.removeChild(e.firstChild); }\n    return e\n  }\n\n  function removeChildrenAndAdd(parent, e) {\n    return removeChildren(parent).appendChild(e)\n  }\n\n  function elt(tag, content, className, style) {\n    var e = document.createElement(tag);\n    if (className) { e.className = className; }\n    if (style) { e.style.cssText = style; }\n    if (typeof content == \"string\") { e.appendChild(document.createTextNode(content)); }\n    else if (content) { for (var i = 0; i < content.length; ++i) { e.appendChild(content[i]); } }\n    return e\n  }\n  // wrapper for elt, which removes the elt from the accessibility tree\n  function eltP(tag, content, className, style) {\n    var e = elt(tag, content, className, style);\n    e.setAttribute(\"role\", \"presentation\");\n    return e\n  }\n\n  var range;\n  if (document.createRange) { range = function(node, start, end, endNode) {\n    var r = document.createRange();\n    r.setEnd(endNode || node, end);\n    r.setStart(node, start);\n    return r\n  }; }\n  else { range = function(node, start, end) {\n    var r = document.body.createTextRange();\n    try { r.moveToElementText(node.parentNode); }\n    catch(e) { return r }\n    r.collapse(true);\n    r.moveEnd(\"character\", end);\n    r.moveStart(\"character\", start);\n    return r\n  }; }\n\n  function contains(parent, child) {\n    if (child.nodeType == 3) // Android browser always returns false when child is a textnode\n      { child = child.parentNode; }\n    if (parent.contains)\n      { return parent.contains(child) }\n    do {\n      if (child.nodeType == 11) { child = child.host; }\n      if (child == parent) { return true }\n    } while (child = child.parentNode)\n  }\n\n  function activeElt(doc) {\n    // IE and Edge may throw an \"Unspecified Error\" when accessing document.activeElement.\n    // IE < 10 will throw when accessed while the page is loading or in an iframe.\n    // IE > 9 and Edge will throw when accessed in an iframe if document.body is unavailable.\n    var activeElement;\n    try {\n      activeElement = doc.activeElement;\n    } catch(e) {\n      activeElement = doc.body || null;\n    }\n    while (activeElement && activeElement.shadowRoot && activeElement.shadowRoot.activeElement)\n      { activeElement = activeElement.shadowRoot.activeElement; }\n    return activeElement\n  }\n\n  function addClass(node, cls) {\n    var current = node.className;\n    if (!classTest(cls).test(current)) { node.className += (current ? \" \" : \"\") + cls; }\n  }\n  function joinClasses(a, b) {\n    var as = a.split(\" \");\n    for (var i = 0; i < as.length; i++)\n      { if (as[i] && !classTest(as[i]).test(b)) { b += \" \" + as[i]; } }\n    return b\n  }\n\n  var selectInput = function(node) { node.select(); };\n  if (ios) // Mobile Safari apparently has a bug where select() is broken.\n    { selectInput = function(node) { node.selectionStart = 0; node.selectionEnd = node.value.length; }; }\n  else if (ie) // Suppress mysterious IE10 errors\n    { selectInput = function(node) { try { node.select(); } catch(_e) {} }; }\n\n  function doc(cm) { return cm.display.wrapper.ownerDocument }\n\n  function win(cm) { return doc(cm).defaultView }\n\n  function bind(f) {\n    var args = Array.prototype.slice.call(arguments, 1);\n    return function(){return f.apply(null, args)}\n  }\n\n  function copyObj(obj, target, overwrite) {\n    if (!target) { target = {}; }\n    for (var prop in obj)\n      { if (obj.hasOwnProperty(prop) && (overwrite !== false || !target.hasOwnProperty(prop)))\n        { target[prop] = obj[prop]; } }\n    return target\n  }\n\n  // Counts the column offset in a string, taking tabs into account.\n  // Used mostly to find indentation.\n  function countColumn(string, end, tabSize, startIndex, startValue) {\n    if (end == null) {\n      end = string.search(/[^\\s\\u00a0]/);\n      if (end == -1) { end = string.length; }\n    }\n    for (var i = startIndex || 0, n = startValue || 0;;) {\n      var nextTab = string.indexOf(\"\\t\", i);\n      if (nextTab < 0 || nextTab >= end)\n        { return n + (end - i) }\n      n += nextTab - i;\n      n += tabSize - (n % tabSize);\n      i = nextTab + 1;\n    }\n  }\n\n  var Delayed = function() {\n    this.id = null;\n    this.f = null;\n    this.time = 0;\n    this.handler = bind(this.onTimeout, this);\n  };\n  Delayed.prototype.onTimeout = function (self) {\n    self.id = 0;\n    if (self.time <= +new Date) {\n      self.f();\n    } else {\n      setTimeout(self.handler, self.time - +new Date);\n    }\n  };\n  Delayed.prototype.set = function (ms, f) {\n    this.f = f;\n    var time = +new Date + ms;\n    if (!this.id || time < this.time) {\n      clearTimeout(this.id);\n      this.id = setTimeout(this.handler, ms);\n      this.time = time;\n    }\n  };\n\n  function indexOf(array, elt) {\n    for (var i = 0; i < array.length; ++i)\n      { if (array[i] == elt) { return i } }\n    return -1\n  }\n\n  // Number of pixels added to scroller and sizer to hide scrollbar\n  var scrollerGap = 50;\n\n  // Returned or thrown by various protocols to signal 'I'm not\n  // handling this'.\n  var Pass = {toString: function(){return \"CodeMirror.Pass\"}};\n\n  // Reused option objects for setSelection & friends\n  var sel_dontScroll = {scroll: false}, sel_mouse = {origin: \"*mouse\"}, sel_move = {origin: \"+move\"};\n\n  // The inverse of countColumn -- find the offset that corresponds to\n  // a particular column.\n  function findColumn(string, goal, tabSize) {\n    for (var pos = 0, col = 0;;) {\n      var nextTab = string.indexOf(\"\\t\", pos);\n      if (nextTab == -1) { nextTab = string.length; }\n      var skipped = nextTab - pos;\n      if (nextTab == string.length || col + skipped >= goal)\n        { return pos + Math.min(skipped, goal - col) }\n      col += nextTab - pos;\n      col += tabSize - (col % tabSize);\n      pos = nextTab + 1;\n      if (col >= goal) { return pos }\n    }\n  }\n\n  var spaceStrs = [\"\"];\n  function spaceStr(n) {\n    while (spaceStrs.length <= n)\n      { spaceStrs.push(lst(spaceStrs) + \" \"); }\n    return spaceStrs[n]\n  }\n\n  function lst(arr) { return arr[arr.length-1] }\n\n  function map(array, f) {\n    var out = [];\n    for (var i = 0; i < array.length; i++) { out[i] = f(array[i], i); }\n    return out\n  }\n\n  function insertSorted(array, value, score) {\n    var pos = 0, priority = score(value);\n    while (pos < array.length && score(array[pos]) <= priority) { pos++; }\n    array.splice(pos, 0, value);\n  }\n\n  function nothing() {}\n\n  function createObj(base, props) {\n    var inst;\n    if (Object.create) {\n      inst = Object.create(base);\n    } else {\n      nothing.prototype = base;\n      inst = new nothing();\n    }\n    if (props) { copyObj(props, inst); }\n    return inst\n  }\n\n  var nonASCIISingleCaseWordChar = /[\\u00df\\u0587\\u0590-\\u05f4\\u0600-\\u06ff\\u3040-\\u309f\\u30a0-\\u30ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\uac00-\\ud7af]/;\n  function isWordCharBasic(ch) {\n    return /\\w/.test(ch) || ch > \"\\x80\" &&\n      (ch.toUpperCase() != ch.toLowerCase() || nonASCIISingleCaseWordChar.test(ch))\n  }\n  function isWordChar(ch, helper) {\n    if (!helper) { return isWordCharBasic(ch) }\n    if (helper.source.indexOf(\"\\\\w\") > -1 && isWordCharBasic(ch)) { return true }\n    return helper.test(ch)\n  }\n\n  function isEmpty(obj) {\n    for (var n in obj) { if (obj.hasOwnProperty(n) && obj[n]) { return false } }\n    return true\n  }\n\n  // Extending unicode characters. A series of a non-extending char +\n  // any number of extending chars is treated as a single unit as far\n  // as editing and measuring is concerned. This is not fully correct,\n  // since some scripts/fonts/browsers also treat other configurations\n  // of code points as a group.\n  var extendingChars = /[\\u0300-\\u036f\\u0483-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u064b-\\u065e\\u0670\\u06d6-\\u06dc\\u06de-\\u06e4\\u06e7\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0900-\\u0902\\u093c\\u0941-\\u0948\\u094d\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2\\u09e3\\u0a01\\u0a02\\u0a3c\\u0a41\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70\\u0a71\\u0a75\\u0a81\\u0a82\\u0abc\\u0ac1-\\u0ac5\\u0ac7\\u0ac8\\u0acd\\u0ae2\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57\\u0b62\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62\\u0c63\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc\\u0ccd\\u0cd5\\u0cd6\\u0ce2\\u0ce3\\u0d3e\\u0d41-\\u0d44\\u0d4d\\u0d57\\u0d62\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9\\u0ebb\\u0ebc\\u0ec8-\\u0ecd\\u0f18\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86\\u0f87\\u0f90-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039\\u103a\\u103d\\u103e\\u1058\\u1059\\u105e-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108d\\u109d\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193b\\u1a17\\u1a18\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1b00-\\u1b03\\u1b34\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80\\u1b81\\u1ba2-\\u1ba5\\u1ba8\\u1ba9\\u1c2c-\\u1c33\\u1c36\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1dc0-\\u1de6\\u1dfd-\\u1dff\\u200c\\u200d\\u20d0-\\u20f0\\u2cef-\\u2cf1\\u2de0-\\u2dff\\u302a-\\u302f\\u3099\\u309a\\ua66f-\\ua672\\ua67c\\ua67d\\ua6f0\\ua6f1\\ua802\\ua806\\ua80b\\ua825\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc\\uaa29-\\uaa2e\\uaa31\\uaa32\\uaa35\\uaa36\\uaa43\\uaa4c\\uaab0\\uaab2-\\uaab4\\uaab7\\uaab8\\uaabe\\uaabf\\uaac1\\uabe5\\uabe8\\uabed\\udc00-\\udfff\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe26\\uff9e\\uff9f]/;\n  function isExtendingChar(ch) { return ch.charCodeAt(0) >= 768 && extendingChars.test(ch) }\n\n  // Returns a number from the range [`0`; `str.length`] unless `pos` is outside that range.\n  function skipExtendingChars(str, pos, dir) {\n    while ((dir < 0 ? pos > 0 : pos < str.length) && isExtendingChar(str.charAt(pos))) { pos += dir; }\n    return pos\n  }\n\n  // Returns the value from the range [`from`; `to`] that satisfies\n  // `pred` and is closest to `from`. Assumes that at least `to`\n  // satisfies `pred`. Supports `from` being greater than `to`.\n  function findFirst(pred, from, to) {\n    // At any point we are certain `to` satisfies `pred`, don't know\n    // whether `from` does.\n    var dir = from > to ? -1 : 1;\n    for (;;) {\n      if (from == to) { return from }\n      var midF = (from + to) / 2, mid = dir < 0 ? Math.ceil(midF) : Math.floor(midF);\n      if (mid == from) { return pred(mid) ? from : to }\n      if (pred(mid)) { to = mid; }\n      else { from = mid + dir; }\n    }\n  }\n\n  // BIDI HELPERS\n\n  function iterateBidiSections(order, from, to, f) {\n    if (!order) { return f(from, to, \"ltr\", 0) }\n    var found = false;\n    for (var i = 0; i < order.length; ++i) {\n      var part = order[i];\n      if (part.from < to && part.to > from || from == to && part.to == from) {\n        f(Math.max(part.from, from), Math.min(part.to, to), part.level == 1 ? \"rtl\" : \"ltr\", i);\n        found = true;\n      }\n    }\n    if (!found) { f(from, to, \"ltr\"); }\n  }\n\n  var bidiOther = null;\n  function getBidiPartAt(order, ch, sticky) {\n    var found;\n    bidiOther = null;\n    for (var i = 0; i < order.length; ++i) {\n      var cur = order[i];\n      if (cur.from < ch && cur.to > ch) { return i }\n      if (cur.to == ch) {\n        if (cur.from != cur.to && sticky == \"before\") { found = i; }\n        else { bidiOther = i; }\n      }\n      if (cur.from == ch) {\n        if (cur.from != cur.to && sticky != \"before\") { found = i; }\n        else { bidiOther = i; }\n      }\n    }\n    return found != null ? found : bidiOther\n  }\n\n  // Bidirectional ordering algorithm\n  // See http://unicode.org/reports/tr9/tr9-13.html for the algorithm\n  // that this (partially) implements.\n\n  // One-char codes used for character types:\n  // L (L):   Left-to-Right\n  // R (R):   Right-to-Left\n  // r (AL):  Right-to-Left Arabic\n  // 1 (EN):  European Number\n  // + (ES):  European Number Separator\n  // % (ET):  European Number Terminator\n  // n (AN):  Arabic Number\n  // , (CS):  Common Number Separator\n  // m (NSM): Non-Spacing Mark\n  // b (BN):  Boundary Neutral\n  // s (B):   Paragraph Separator\n  // t (S):   Segment Separator\n  // w (WS):  Whitespace\n  // N (ON):  Other Neutrals\n\n  // Returns null if characters are ordered as they appear\n  // (left-to-right), or an array of sections ({from, to, level}\n  // objects) in the order in which they occur visually.\n  var bidiOrdering = (function() {\n    // Character types for codepoints 0 to 0xff\n    var lowTypes = \"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN\";\n    // Character types for codepoints 0x600 to 0x6f9\n    var arabicTypes = \"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111\";\n    function charType(code) {\n      if (code <= 0xf7) { return lowTypes.charAt(code) }\n      else if (0x590 <= code && code <= 0x5f4) { return \"R\" }\n      else if (0x600 <= code && code <= 0x6f9) { return arabicTypes.charAt(code - 0x600) }\n      else if (0x6ee <= code && code <= 0x8ac) { return \"r\" }\n      else if (0x2000 <= code && code <= 0x200b) { return \"w\" }\n      else if (code == 0x200c) { return \"b\" }\n      else { return \"L\" }\n    }\n\n    var bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac]/;\n    var isNeutral = /[stwN]/, isStrong = /[LRr]/, countsAsLeft = /[Lb1n]/, countsAsNum = /[1n]/;\n\n    function BidiSpan(level, from, to) {\n      this.level = level;\n      this.from = from; this.to = to;\n    }\n\n    return function(str, direction) {\n      var outerType = direction == \"ltr\" ? \"L\" : \"R\";\n\n      if (str.length == 0 || direction == \"ltr\" && !bidiRE.test(str)) { return false }\n      var len = str.length, types = [];\n      for (var i = 0; i < len; ++i)\n        { types.push(charType(str.charCodeAt(i))); }\n\n      // W1. Examine each non-spacing mark (NSM) in the level run, and\n      // change the type of the NSM to the type of the previous\n      // character. If the NSM is at the start of the level run, it will\n      // get the type of sor.\n      for (var i$1 = 0, prev = outerType; i$1 < len; ++i$1) {\n        var type = types[i$1];\n        if (type == \"m\") { types[i$1] = prev; }\n        else { prev = type; }\n      }\n\n      // W2. Search backwards from each instance of a European number\n      // until the first strong type (R, L, AL, or sor) is found. If an\n      // AL is found, change the type of the European number to Arabic\n      // number.\n      // W3. Change all ALs to R.\n      for (var i$2 = 0, cur = outerType; i$2 < len; ++i$2) {\n        var type$1 = types[i$2];\n        if (type$1 == \"1\" && cur == \"r\") { types[i$2] = \"n\"; }\n        else if (isStrong.test(type$1)) { cur = type$1; if (type$1 == \"r\") { types[i$2] = \"R\"; } }\n      }\n\n      // W4. A single European separator between two European numbers\n      // changes to a European number. A single common separator between\n      // two numbers of the same type changes to that type.\n      for (var i$3 = 1, prev$1 = types[0]; i$3 < len - 1; ++i$3) {\n        var type$2 = types[i$3];\n        if (type$2 == \"+\" && prev$1 == \"1\" && types[i$3+1] == \"1\") { types[i$3] = \"1\"; }\n        else if (type$2 == \",\" && prev$1 == types[i$3+1] &&\n                 (prev$1 == \"1\" || prev$1 == \"n\")) { types[i$3] = prev$1; }\n        prev$1 = type$2;\n      }\n\n      // W5. A sequence of European terminators adjacent to European\n      // numbers changes to all European numbers.\n      // W6. Otherwise, separators and terminators change to Other\n      // Neutral.\n      for (var i$4 = 0; i$4 < len; ++i$4) {\n        var type$3 = types[i$4];\n        if (type$3 == \",\") { types[i$4] = \"N\"; }\n        else if (type$3 == \"%\") {\n          var end = (void 0);\n          for (end = i$4 + 1; end < len && types[end] == \"%\"; ++end) {}\n          var replace = (i$4 && types[i$4-1] == \"!\") || (end < len && types[end] == \"1\") ? \"1\" : \"N\";\n          for (var j = i$4; j < end; ++j) { types[j] = replace; }\n          i$4 = end - 1;\n        }\n      }\n\n      // W7. Search backwards from each instance of a European number\n      // until the first strong type (R, L, or sor) is found. If an L is\n      // found, then change the type of the European number to L.\n      for (var i$5 = 0, cur$1 = outerType; i$5 < len; ++i$5) {\n        var type$4 = types[i$5];\n        if (cur$1 == \"L\" && type$4 == \"1\") { types[i$5] = \"L\"; }\n        else if (isStrong.test(type$4)) { cur$1 = type$4; }\n      }\n\n      // N1. A sequence of neutrals takes the direction of the\n      // surrounding strong text if the text on both sides has the same\n      // direction. European and Arabic numbers act as if they were R in\n      // terms of their influence on neutrals. Start-of-level-run (sor)\n      // and end-of-level-run (eor) are used at level run boundaries.\n      // N2. Any remaining neutrals take the embedding direction.\n      for (var i$6 = 0; i$6 < len; ++i$6) {\n        if (isNeutral.test(types[i$6])) {\n          var end$1 = (void 0);\n          for (end$1 = i$6 + 1; end$1 < len && isNeutral.test(types[end$1]); ++end$1) {}\n          var before = (i$6 ? types[i$6-1] : outerType) == \"L\";\n          var after = (end$1 < len ? types[end$1] : outerType) == \"L\";\n          var replace$1 = before == after ? (before ? \"L\" : \"R\") : outerType;\n          for (var j$1 = i$6; j$1 < end$1; ++j$1) { types[j$1] = replace$1; }\n          i$6 = end$1 - 1;\n        }\n      }\n\n      // Here we depart from the documented algorithm, in order to avoid\n      // building up an actual levels array. Since there are only three\n      // levels (0, 1, 2) in an implementation that doesn't take\n      // explicit embedding into account, we can build up the order on\n      // the fly, without following the level-based algorithm.\n      var order = [], m;\n      for (var i$7 = 0; i$7 < len;) {\n        if (countsAsLeft.test(types[i$7])) {\n          var start = i$7;\n          for (++i$7; i$7 < len && countsAsLeft.test(types[i$7]); ++i$7) {}\n          order.push(new BidiSpan(0, start, i$7));\n        } else {\n          var pos = i$7, at = order.length, isRTL = direction == \"rtl\" ? 1 : 0;\n          for (++i$7; i$7 < len && types[i$7] != \"L\"; ++i$7) {}\n          for (var j$2 = pos; j$2 < i$7;) {\n            if (countsAsNum.test(types[j$2])) {\n              if (pos < j$2) { order.splice(at, 0, new BidiSpan(1, pos, j$2)); at += isRTL; }\n              var nstart = j$2;\n              for (++j$2; j$2 < i$7 && countsAsNum.test(types[j$2]); ++j$2) {}\n              order.splice(at, 0, new BidiSpan(2, nstart, j$2));\n              at += isRTL;\n              pos = j$2;\n            } else { ++j$2; }\n          }\n          if (pos < i$7) { order.splice(at, 0, new BidiSpan(1, pos, i$7)); }\n        }\n      }\n      if (direction == \"ltr\") {\n        if (order[0].level == 1 && (m = str.match(/^\\s+/))) {\n          order[0].from = m[0].length;\n          order.unshift(new BidiSpan(0, 0, m[0].length));\n        }\n        if (lst(order).level == 1 && (m = str.match(/\\s+$/))) {\n          lst(order).to -= m[0].length;\n          order.push(new BidiSpan(0, len - m[0].length, len));\n        }\n      }\n\n      return direction == \"rtl\" ? order.reverse() : order\n    }\n  })();\n\n  // Get the bidi ordering for the given line (and cache it). Returns\n  // false for lines that are fully left-to-right, and an array of\n  // BidiSpan objects otherwise.\n  function getOrder(line, direction) {\n    var order = line.order;\n    if (order == null) { order = line.order = bidiOrdering(line.text, direction); }\n    return order\n  }\n\n  // EVENT HANDLING\n\n  // Lightweight event framework. on/off also work on DOM nodes,\n  // registering native DOM handlers.\n\n  var noHandlers = [];\n\n  var on = function(emitter, type, f) {\n    if (emitter.addEventListener) {\n      emitter.addEventListener(type, f, false);\n    } else if (emitter.attachEvent) {\n      emitter.attachEvent(\"on\" + type, f);\n    } else {\n      var map = emitter._handlers || (emitter._handlers = {});\n      map[type] = (map[type] || noHandlers).concat(f);\n    }\n  };\n\n  function getHandlers(emitter, type) {\n    return emitter._handlers && emitter._handlers[type] || noHandlers\n  }\n\n  function off(emitter, type, f) {\n    if (emitter.removeEventListener) {\n      emitter.removeEventListener(type, f, false);\n    } else if (emitter.detachEvent) {\n      emitter.detachEvent(\"on\" + type, f);\n    } else {\n      var map = emitter._handlers, arr = map && map[type];\n      if (arr) {\n        var index = indexOf(arr, f);\n        if (index > -1)\n          { map[type] = arr.slice(0, index).concat(arr.slice(index + 1)); }\n      }\n    }\n  }\n\n  function signal(emitter, type /*, values...*/) {\n    var handlers = getHandlers(emitter, type);\n    if (!handlers.length) { return }\n    var args = Array.prototype.slice.call(arguments, 2);\n    for (var i = 0; i < handlers.length; ++i) { handlers[i].apply(null, args); }\n  }\n\n  // The DOM events that CodeMirror handles can be overridden by\n  // registering a (non-DOM) handler on the editor for the event name,\n  // and preventDefault-ing the event in that handler.\n  function signalDOMEvent(cm, e, override) {\n    if (typeof e == \"string\")\n      { e = {type: e, preventDefault: function() { this.defaultPrevented = true; }}; }\n    signal(cm, override || e.type, cm, e);\n    return e_defaultPrevented(e) || e.codemirrorIgnore\n  }\n\n  function signalCursorActivity(cm) {\n    var arr = cm._handlers && cm._handlers.cursorActivity;\n    if (!arr) { return }\n    var set = cm.curOp.cursorActivityHandlers || (cm.curOp.cursorActivityHandlers = []);\n    for (var i = 0; i < arr.length; ++i) { if (indexOf(set, arr[i]) == -1)\n      { set.push(arr[i]); } }\n  }\n\n  function hasHandler(emitter, type) {\n    return getHandlers(emitter, type).length > 0\n  }\n\n  // Add on and off methods to a constructor's prototype, to make\n  // registering events on such objects more convenient.\n  function eventMixin(ctor) {\n    ctor.prototype.on = function(type, f) {on(this, type, f);};\n    ctor.prototype.off = function(type, f) {off(this, type, f);};\n  }\n\n  // Due to the fact that we still support jurassic IE versions, some\n  // compatibility wrappers are needed.\n\n  function e_preventDefault(e) {\n    if (e.preventDefault) { e.preventDefault(); }\n    else { e.returnValue = false; }\n  }\n  function e_stopPropagation(e) {\n    if (e.stopPropagation) { e.stopPropagation(); }\n    else { e.cancelBubble = true; }\n  }\n  function e_defaultPrevented(e) {\n    return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == false\n  }\n  function e_stop(e) {e_preventDefault(e); e_stopPropagation(e);}\n\n  function e_target(e) {return e.target || e.srcElement}\n  function e_button(e) {\n    var b = e.which;\n    if (b == null) {\n      if (e.button & 1) { b = 1; }\n      else if (e.button & 2) { b = 3; }\n      else if (e.button & 4) { b = 2; }\n    }\n    if (mac && e.ctrlKey && b == 1) { b = 3; }\n    return b\n  }\n\n  // Detect drag-and-drop\n  var dragAndDrop = function() {\n    // There is *some* kind of drag-and-drop support in IE6-8, but I\n    // couldn't get it to work yet.\n    if (ie && ie_version < 9) { return false }\n    var div = elt('div');\n    return \"draggable\" in div || \"dragDrop\" in div\n  }();\n\n  var zwspSupported;\n  function zeroWidthElement(measure) {\n    if (zwspSupported == null) {\n      var test = elt(\"span\", \"\\u200b\");\n      removeChildrenAndAdd(measure, elt(\"span\", [test, document.createTextNode(\"x\")]));\n      if (measure.firstChild.offsetHeight != 0)\n        { zwspSupported = test.offsetWidth <= 1 && test.offsetHeight > 2 && !(ie && ie_version < 8); }\n    }\n    var node = zwspSupported ? elt(\"span\", \"\\u200b\") :\n      elt(\"span\", \"\\u00a0\", null, \"display: inline-block; width: 1px; margin-right: -1px\");\n    node.setAttribute(\"cm-text\", \"\");\n    return node\n  }\n\n  // Feature-detect IE's crummy client rect reporting for bidi text\n  var badBidiRects;\n  function hasBadBidiRects(measure) {\n    if (badBidiRects != null) { return badBidiRects }\n    var txt = removeChildrenAndAdd(measure, document.createTextNode(\"A\\u062eA\"));\n    var r0 = range(txt, 0, 1).getBoundingClientRect();\n    var r1 = range(txt, 1, 2).getBoundingClientRect();\n    removeChildren(measure);\n    if (!r0 || r0.left == r0.right) { return false } // Safari returns null in some cases (#2780)\n    return badBidiRects = (r1.right - r0.right < 3)\n  }\n\n  // See if \"\".split is the broken IE version, if so, provide an\n  // alternative way to split lines.\n  var splitLinesAuto = \"\\n\\nb\".split(/\\n/).length != 3 ? function (string) {\n    var pos = 0, result = [], l = string.length;\n    while (pos <= l) {\n      var nl = string.indexOf(\"\\n\", pos);\n      if (nl == -1) { nl = string.length; }\n      var line = string.slice(pos, string.charAt(nl - 1) == \"\\r\" ? nl - 1 : nl);\n      var rt = line.indexOf(\"\\r\");\n      if (rt != -1) {\n        result.push(line.slice(0, rt));\n        pos += rt + 1;\n      } else {\n        result.push(line);\n        pos = nl + 1;\n      }\n    }\n    return result\n  } : function (string) { return string.split(/\\r\\n?|\\n/); };\n\n  var hasSelection = window.getSelection ? function (te) {\n    try { return te.selectionStart != te.selectionEnd }\n    catch(e) { return false }\n  } : function (te) {\n    var range;\n    try {range = te.ownerDocument.selection.createRange();}\n    catch(e) {}\n    if (!range || range.parentElement() != te) { return false }\n    return range.compareEndPoints(\"StartToEnd\", range) != 0\n  };\n\n  var hasCopyEvent = (function () {\n    var e = elt(\"div\");\n    if (\"oncopy\" in e) { return true }\n    e.setAttribute(\"oncopy\", \"return;\");\n    return typeof e.oncopy == \"function\"\n  })();\n\n  var badZoomedRects = null;\n  function hasBadZoomedRects(measure) {\n    if (badZoomedRects != null) { return badZoomedRects }\n    var node = removeChildrenAndAdd(measure, elt(\"span\", \"x\"));\n    var normal = node.getBoundingClientRect();\n    var fromRange = range(node, 0, 1).getBoundingClientRect();\n    return badZoomedRects = Math.abs(normal.left - fromRange.left) > 1\n  }\n\n  // Known modes, by name and by MIME\n  var modes = {}, mimeModes = {};\n\n  // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n  function defineMode(name, mode) {\n    if (arguments.length > 2)\n      { mode.dependencies = Array.prototype.slice.call(arguments, 2); }\n    modes[name] = mode;\n  }\n\n  function defineMIME(mime, spec) {\n    mimeModes[mime] = spec;\n  }\n\n  // Given a MIME type, a {name, ...options} config object, or a name\n  // string, return a mode config object.\n  function resolveMode(spec) {\n    if (typeof spec == \"string\" && mimeModes.hasOwnProperty(spec)) {\n      spec = mimeModes[spec];\n    } else if (spec && typeof spec.name == \"string\" && mimeModes.hasOwnProperty(spec.name)) {\n      var found = mimeModes[spec.name];\n      if (typeof found == \"string\") { found = {name: found}; }\n      spec = createObj(found, spec);\n      spec.name = found.name;\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+xml$/.test(spec)) {\n      return resolveMode(\"application/xml\")\n    } else if (typeof spec == \"string\" && /^[\\w\\-]+\\/[\\w\\-]+\\+json$/.test(spec)) {\n      return resolveMode(\"application/json\")\n    }\n    if (typeof spec == \"string\") { return {name: spec} }\n    else { return spec || {name: \"null\"} }\n  }\n\n  // Given a mode spec (anything that resolveMode accepts), find and\n  // initialize an actual mode object.\n  function getMode(options, spec) {\n    spec = resolveMode(spec);\n    var mfactory = modes[spec.name];\n    if (!mfactory) { return getMode(options, \"text/plain\") }\n    var modeObj = mfactory(options, spec);\n    if (modeExtensions.hasOwnProperty(spec.name)) {\n      var exts = modeExtensions[spec.name];\n      for (var prop in exts) {\n        if (!exts.hasOwnProperty(prop)) { continue }\n        if (modeObj.hasOwnProperty(prop)) { modeObj[\"_\" + prop] = modeObj[prop]; }\n        modeObj[prop] = exts[prop];\n      }\n    }\n    modeObj.name = spec.name;\n    if (spec.helperType) { modeObj.helperType = spec.helperType; }\n    if (spec.modeProps) { for (var prop$1 in spec.modeProps)\n      { modeObj[prop$1] = spec.modeProps[prop$1]; } }\n\n    return modeObj\n  }\n\n  // This can be used to attach properties to mode objects from\n  // outside the actual mode definition.\n  var modeExtensions = {};\n  function extendMode(mode, properties) {\n    var exts = modeExtensions.hasOwnProperty(mode) ? modeExtensions[mode] : (modeExtensions[mode] = {});\n    copyObj(properties, exts);\n  }\n\n  function copyState(mode, state) {\n    if (state === true) { return state }\n    if (mode.copyState) { return mode.copyState(state) }\n    var nstate = {};\n    for (var n in state) {\n      var val = state[n];\n      if (val instanceof Array) { val = val.concat([]); }\n      nstate[n] = val;\n    }\n    return nstate\n  }\n\n  // Given a mode and a state (for that mode), find the inner mode and\n  // state at the position that the state refers to.\n  function innerMode(mode, state) {\n    var info;\n    while (mode.innerMode) {\n      info = mode.innerMode(state);\n      if (!info || info.mode == mode) { break }\n      state = info.state;\n      mode = info.mode;\n    }\n    return info || {mode: mode, state: state}\n  }\n\n  function startState(mode, a1, a2) {\n    return mode.startState ? mode.startState(a1, a2) : true\n  }\n\n  // STRING STREAM\n\n  // Fed to the mode parsers, provides helper functions to make\n  // parsers more succinct.\n\n  var StringStream = function(string, tabSize, lineOracle) {\n    this.pos = this.start = 0;\n    this.string = string;\n    this.tabSize = tabSize || 8;\n    this.lastColumnPos = this.lastColumnValue = 0;\n    this.lineStart = 0;\n    this.lineOracle = lineOracle;\n  };\n\n  StringStream.prototype.eol = function () {return this.pos >= this.string.length};\n  StringStream.prototype.sol = function () {return this.pos == this.lineStart};\n  StringStream.prototype.peek = function () {return this.string.charAt(this.pos) || undefined};\n  StringStream.prototype.next = function () {\n    if (this.pos < this.string.length)\n      { return this.string.charAt(this.pos++) }\n  };\n  StringStream.prototype.eat = function (match) {\n    var ch = this.string.charAt(this.pos);\n    var ok;\n    if (typeof match == \"string\") { ok = ch == match; }\n    else { ok = ch && (match.test ? match.test(ch) : match(ch)); }\n    if (ok) {++this.pos; return ch}\n  };\n  StringStream.prototype.eatWhile = function (match) {\n    var start = this.pos;\n    while (this.eat(match)){}\n    return this.pos > start\n  };\n  StringStream.prototype.eatSpace = function () {\n    var start = this.pos;\n    while (/[\\s\\u00a0]/.test(this.string.charAt(this.pos))) { ++this.pos; }\n    return this.pos > start\n  };\n  StringStream.prototype.skipToEnd = function () {this.pos = this.string.length;};\n  StringStream.prototype.skipTo = function (ch) {\n    var found = this.string.indexOf(ch, this.pos);\n    if (found > -1) {this.pos = found; return true}\n  };\n  StringStream.prototype.backUp = function (n) {this.pos -= n;};\n  StringStream.prototype.column = function () {\n    if (this.lastColumnPos < this.start) {\n      this.lastColumnValue = countColumn(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue);\n      this.lastColumnPos = this.start;\n    }\n    return this.lastColumnValue - (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n  };\n  StringStream.prototype.indentation = function () {\n    return countColumn(this.string, null, this.tabSize) -\n      (this.lineStart ? countColumn(this.string, this.lineStart, this.tabSize) : 0)\n  };\n  StringStream.prototype.match = function (pattern, consume, caseInsensitive) {\n    if (typeof pattern == \"string\") {\n      var cased = function (str) { return caseInsensitive ? str.toLowerCase() : str; };\n      var substr = this.string.substr(this.pos, pattern.length);\n      if (cased(substr) == cased(pattern)) {\n        if (consume !== false) { this.pos += pattern.length; }\n        return true\n      }\n    } else {\n      var match = this.string.slice(this.pos).match(pattern);\n      if (match && match.index > 0) { return null }\n      if (match && consume !== false) { this.pos += match[0].length; }\n      return match\n    }\n  };\n  StringStream.prototype.current = function (){return this.string.slice(this.start, this.pos)};\n  StringStream.prototype.hideFirstChars = function (n, inner) {\n    this.lineStart += n;\n    try { return inner() }\n    finally { this.lineStart -= n; }\n  };\n  StringStream.prototype.lookAhead = function (n) {\n    var oracle = this.lineOracle;\n    return oracle && oracle.lookAhead(n)\n  };\n  StringStream.prototype.baseToken = function () {\n    var oracle = this.lineOracle;\n    return oracle && oracle.baseToken(this.pos)\n  };\n\n  // Find the line object corresponding to the given line number.\n  function getLine(doc, n) {\n    n -= doc.first;\n    if (n < 0 || n >= doc.size) { throw new Error(\"There is no line \" + (n + doc.first) + \" in the document.\") }\n    var chunk = doc;\n    while (!chunk.lines) {\n      for (var i = 0;; ++i) {\n        var child = chunk.children[i], sz = child.chunkSize();\n        if (n < sz) { chunk = child; break }\n        n -= sz;\n      }\n    }\n    return chunk.lines[n]\n  }\n\n  // Get the part of a document between two positions, as an array of\n  // strings.\n  function getBetween(doc, start, end) {\n    var out = [], n = start.line;\n    doc.iter(start.line, end.line + 1, function (line) {\n      var text = line.text;\n      if (n == end.line) { text = text.slice(0, end.ch); }\n      if (n == start.line) { text = text.slice(start.ch); }\n      out.push(text);\n      ++n;\n    });\n    return out\n  }\n  // Get the lines between from and to, as array of strings.\n  function getLines(doc, from, to) {\n    var out = [];\n    doc.iter(from, to, function (line) { out.push(line.text); }); // iter aborts when callback returns truthy value\n    return out\n  }\n\n  // Update the height of a line, propagating the height change\n  // upwards to parent nodes.\n  function updateLineHeight(line, height) {\n    var diff = height - line.height;\n    if (diff) { for (var n = line; n; n = n.parent) { n.height += diff; } }\n  }\n\n  // Given a line object, find its line number by walking up through\n  // its parent links.\n  function lineNo(line) {\n    if (line.parent == null) { return null }\n    var cur = line.parent, no = indexOf(cur.lines, line);\n    for (var chunk = cur.parent; chunk; cur = chunk, chunk = chunk.parent) {\n      for (var i = 0;; ++i) {\n        if (chunk.children[i] == cur) { break }\n        no += chunk.children[i].chunkSize();\n      }\n    }\n    return no + cur.first\n  }\n\n  // Find the line at the given vertical position, using the height\n  // information in the document tree.\n  function lineAtHeight(chunk, h) {\n    var n = chunk.first;\n    outer: do {\n      for (var i$1 = 0; i$1 < chunk.children.length; ++i$1) {\n        var child = chunk.children[i$1], ch = child.height;\n        if (h < ch) { chunk = child; continue outer }\n        h -= ch;\n        n += child.chunkSize();\n      }\n      return n\n    } while (!chunk.lines)\n    var i = 0;\n    for (; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i], lh = line.height;\n      if (h < lh) { break }\n      h -= lh;\n    }\n    return n + i\n  }\n\n  function isLine(doc, l) {return l >= doc.first && l < doc.first + doc.size}\n\n  function lineNumberFor(options, i) {\n    return String(options.lineNumberFormatter(i + options.firstLineNumber))\n  }\n\n  // A Pos instance represents a position within the text.\n  function Pos(line, ch, sticky) {\n    if ( sticky === void 0 ) sticky = null;\n\n    if (!(this instanceof Pos)) { return new Pos(line, ch, sticky) }\n    this.line = line;\n    this.ch = ch;\n    this.sticky = sticky;\n  }\n\n  // Compare two positions, return 0 if they are the same, a negative\n  // number when a is less, and a positive number otherwise.\n  function cmp(a, b) { return a.line - b.line || a.ch - b.ch }\n\n  function equalCursorPos(a, b) { return a.sticky == b.sticky && cmp(a, b) == 0 }\n\n  function copyPos(x) {return Pos(x.line, x.ch)}\n  function maxPos(a, b) { return cmp(a, b) < 0 ? b : a }\n  function minPos(a, b) { return cmp(a, b) < 0 ? a : b }\n\n  // Most of the external API clips given positions to make sure they\n  // actually exist within the document.\n  function clipLine(doc, n) {return Math.max(doc.first, Math.min(n, doc.first + doc.size - 1))}\n  function clipPos(doc, pos) {\n    if (pos.line < doc.first) { return Pos(doc.first, 0) }\n    var last = doc.first + doc.size - 1;\n    if (pos.line > last) { return Pos(last, getLine(doc, last).text.length) }\n    return clipToLen(pos, getLine(doc, pos.line).text.length)\n  }\n  function clipToLen(pos, linelen) {\n    var ch = pos.ch;\n    if (ch == null || ch > linelen) { return Pos(pos.line, linelen) }\n    else if (ch < 0) { return Pos(pos.line, 0) }\n    else { return pos }\n  }\n  function clipPosArray(doc, array) {\n    var out = [];\n    for (var i = 0; i < array.length; i++) { out[i] = clipPos(doc, array[i]); }\n    return out\n  }\n\n  var SavedContext = function(state, lookAhead) {\n    this.state = state;\n    this.lookAhead = lookAhead;\n  };\n\n  var Context = function(doc, state, line, lookAhead) {\n    this.state = state;\n    this.doc = doc;\n    this.line = line;\n    this.maxLookAhead = lookAhead || 0;\n    this.baseTokens = null;\n    this.baseTokenPos = 1;\n  };\n\n  Context.prototype.lookAhead = function (n) {\n    var line = this.doc.getLine(this.line + n);\n    if (line != null && n > this.maxLookAhead) { this.maxLookAhead = n; }\n    return line\n  };\n\n  Context.prototype.baseToken = function (n) {\n    if (!this.baseTokens) { return null }\n    while (this.baseTokens[this.baseTokenPos] <= n)\n      { this.baseTokenPos += 2; }\n    var type = this.baseTokens[this.baseTokenPos + 1];\n    return {type: type && type.replace(/( |^)overlay .*/, \"\"),\n            size: this.baseTokens[this.baseTokenPos] - n}\n  };\n\n  Context.prototype.nextLine = function () {\n    this.line++;\n    if (this.maxLookAhead > 0) { this.maxLookAhead--; }\n  };\n\n  Context.fromSaved = function (doc, saved, line) {\n    if (saved instanceof SavedContext)\n      { return new Context(doc, copyState(doc.mode, saved.state), line, saved.lookAhead) }\n    else\n      { return new Context(doc, copyState(doc.mode, saved), line) }\n  };\n\n  Context.prototype.save = function (copy) {\n    var state = copy !== false ? copyState(this.doc.mode, this.state) : this.state;\n    return this.maxLookAhead > 0 ? new SavedContext(state, this.maxLookAhead) : state\n  };\n\n\n  // Compute a style array (an array starting with a mode generation\n  // -- for invalidation -- followed by pairs of end positions and\n  // style strings), which is used to highlight the tokens on the\n  // line.\n  function highlightLine(cm, line, context, forceToEnd) {\n    // A styles array always starts with a number identifying the\n    // mode/overlays that it is based on (for easy invalidation).\n    var st = [cm.state.modeGen], lineClasses = {};\n    // Compute the base array of styles\n    runMode(cm, line.text, cm.doc.mode, context, function (end, style) { return st.push(end, style); },\n            lineClasses, forceToEnd);\n    var state = context.state;\n\n    // Run overlays, adjust style array.\n    var loop = function ( o ) {\n      context.baseTokens = st;\n      var overlay = cm.state.overlays[o], i = 1, at = 0;\n      context.state = true;\n      runMode(cm, line.text, overlay.mode, context, function (end, style) {\n        var start = i;\n        // Ensure there's a token end at the current position, and that i points at it\n        while (at < end) {\n          var i_end = st[i];\n          if (i_end > end)\n            { st.splice(i, 1, end, st[i+1], i_end); }\n          i += 2;\n          at = Math.min(end, i_end);\n        }\n        if (!style) { return }\n        if (overlay.opaque) {\n          st.splice(start, i - start, end, \"overlay \" + style);\n          i = start + 2;\n        } else {\n          for (; start < i; start += 2) {\n            var cur = st[start+1];\n            st[start+1] = (cur ? cur + \" \" : \"\") + \"overlay \" + style;\n          }\n        }\n      }, lineClasses);\n      context.state = state;\n      context.baseTokens = null;\n      context.baseTokenPos = 1;\n    };\n\n    for (var o = 0; o < cm.state.overlays.length; ++o) loop( o );\n\n    return {styles: st, classes: lineClasses.bgClass || lineClasses.textClass ? lineClasses : null}\n  }\n\n  function getLineStyles(cm, line, updateFrontier) {\n    if (!line.styles || line.styles[0] != cm.state.modeGen) {\n      var context = getContextBefore(cm, lineNo(line));\n      var resetState = line.text.length > cm.options.maxHighlightLength && copyState(cm.doc.mode, context.state);\n      var result = highlightLine(cm, line, context);\n      if (resetState) { context.state = resetState; }\n      line.stateAfter = context.save(!resetState);\n      line.styles = result.styles;\n      if (result.classes) { line.styleClasses = result.classes; }\n      else if (line.styleClasses) { line.styleClasses = null; }\n      if (updateFrontier === cm.doc.highlightFrontier)\n        { cm.doc.modeFrontier = Math.max(cm.doc.modeFrontier, ++cm.doc.highlightFrontier); }\n    }\n    return line.styles\n  }\n\n  function getContextBefore(cm, n, precise) {\n    var doc = cm.doc, display = cm.display;\n    if (!doc.mode.startState) { return new Context(doc, true, n) }\n    var start = findStartLine(cm, n, precise);\n    var saved = start > doc.first && getLine(doc, start - 1).stateAfter;\n    var context = saved ? Context.fromSaved(doc, saved, start) : new Context(doc, startState(doc.mode), start);\n\n    doc.iter(start, n, function (line) {\n      processLine(cm, line.text, context);\n      var pos = context.line;\n      line.stateAfter = pos == n - 1 || pos % 5 == 0 || pos >= display.viewFrom && pos < display.viewTo ? context.save() : null;\n      context.nextLine();\n    });\n    if (precise) { doc.modeFrontier = context.line; }\n    return context\n  }\n\n  // Lightweight form of highlight -- proceed over this line and\n  // update state, but don't save a style array. Used for lines that\n  // aren't currently visible.\n  function processLine(cm, text, context, startAt) {\n    var mode = cm.doc.mode;\n    var stream = new StringStream(text, cm.options.tabSize, context);\n    stream.start = stream.pos = startAt || 0;\n    if (text == \"\") { callBlankLine(mode, context.state); }\n    while (!stream.eol()) {\n      readToken(mode, stream, context.state);\n      stream.start = stream.pos;\n    }\n  }\n\n  function callBlankLine(mode, state) {\n    if (mode.blankLine) { return mode.blankLine(state) }\n    if (!mode.innerMode) { return }\n    var inner = innerMode(mode, state);\n    if (inner.mode.blankLine) { return inner.mode.blankLine(inner.state) }\n  }\n\n  function readToken(mode, stream, state, inner) {\n    for (var i = 0; i < 10; i++) {\n      if (inner) { inner[0] = innerMode(mode, state).mode; }\n      var style = mode.token(stream, state);\n      if (stream.pos > stream.start) { return style }\n    }\n    throw new Error(\"Mode \" + mode.name + \" failed to advance stream.\")\n  }\n\n  var Token = function(stream, type, state) {\n    this.start = stream.start; this.end = stream.pos;\n    this.string = stream.current();\n    this.type = type || null;\n    this.state = state;\n  };\n\n  // Utility for getTokenAt and getLineTokens\n  function takeToken(cm, pos, precise, asArray) {\n    var doc = cm.doc, mode = doc.mode, style;\n    pos = clipPos(doc, pos);\n    var line = getLine(doc, pos.line), context = getContextBefore(cm, pos.line, precise);\n    var stream = new StringStream(line.text, cm.options.tabSize, context), tokens;\n    if (asArray) { tokens = []; }\n    while ((asArray || stream.pos < pos.ch) && !stream.eol()) {\n      stream.start = stream.pos;\n      style = readToken(mode, stream, context.state);\n      if (asArray) { tokens.push(new Token(stream, style, copyState(doc.mode, context.state))); }\n    }\n    return asArray ? tokens : new Token(stream, style, context.state)\n  }\n\n  function extractLineClasses(type, output) {\n    if (type) { for (;;) {\n      var lineClass = type.match(/(?:^|\\s+)line-(background-)?(\\S+)/);\n      if (!lineClass) { break }\n      type = type.slice(0, lineClass.index) + type.slice(lineClass.index + lineClass[0].length);\n      var prop = lineClass[1] ? \"bgClass\" : \"textClass\";\n      if (output[prop] == null)\n        { output[prop] = lineClass[2]; }\n      else if (!(new RegExp(\"(?:^|\\\\s)\" + lineClass[2] + \"(?:$|\\\\s)\")).test(output[prop]))\n        { output[prop] += \" \" + lineClass[2]; }\n    } }\n    return type\n  }\n\n  // Run the given mode's parser over a line, calling f for each token.\n  function runMode(cm, text, mode, context, f, lineClasses, forceToEnd) {\n    var flattenSpans = mode.flattenSpans;\n    if (flattenSpans == null) { flattenSpans = cm.options.flattenSpans; }\n    var curStart = 0, curStyle = null;\n    var stream = new StringStream(text, cm.options.tabSize, context), style;\n    var inner = cm.options.addModeClass && [null];\n    if (text == \"\") { extractLineClasses(callBlankLine(mode, context.state), lineClasses); }\n    while (!stream.eol()) {\n      if (stream.pos > cm.options.maxHighlightLength) {\n        flattenSpans = false;\n        if (forceToEnd) { processLine(cm, text, context, stream.pos); }\n        stream.pos = text.length;\n        style = null;\n      } else {\n        style = extractLineClasses(readToken(mode, stream, context.state, inner), lineClasses);\n      }\n      if (inner) {\n        var mName = inner[0].name;\n        if (mName) { style = \"m-\" + (style ? mName + \" \" + style : mName); }\n      }\n      if (!flattenSpans || curStyle != style) {\n        while (curStart < stream.start) {\n          curStart = Math.min(stream.start, curStart + 5000);\n          f(curStart, curStyle);\n        }\n        curStyle = style;\n      }\n      stream.start = stream.pos;\n    }\n    while (curStart < stream.pos) {\n      // Webkit seems to refuse to render text nodes longer than 57444\n      // characters, and returns inaccurate measurements in nodes\n      // starting around 5000 chars.\n      var pos = Math.min(stream.pos, curStart + 5000);\n      f(pos, curStyle);\n      curStart = pos;\n    }\n  }\n\n  // Finds the line to start with when starting a parse. Tries to\n  // find a line with a stateAfter, so that it can start with a\n  // valid state. If that fails, it returns the line with the\n  // smallest indentation, which tends to need the least context to\n  // parse correctly.\n  function findStartLine(cm, n, precise) {\n    var minindent, minline, doc = cm.doc;\n    var lim = precise ? -1 : n - (cm.doc.mode.innerMode ? 1000 : 100);\n    for (var search = n; search > lim; --search) {\n      if (search <= doc.first) { return doc.first }\n      var line = getLine(doc, search - 1), after = line.stateAfter;\n      if (after && (!precise || search + (after instanceof SavedContext ? after.lookAhead : 0) <= doc.modeFrontier))\n        { return search }\n      var indented = countColumn(line.text, null, cm.options.tabSize);\n      if (minline == null || minindent > indented) {\n        minline = search - 1;\n        minindent = indented;\n      }\n    }\n    return minline\n  }\n\n  function retreatFrontier(doc, n) {\n    doc.modeFrontier = Math.min(doc.modeFrontier, n);\n    if (doc.highlightFrontier < n - 10) { return }\n    var start = doc.first;\n    for (var line = n - 1; line > start; line--) {\n      var saved = getLine(doc, line).stateAfter;\n      // change is on 3\n      // state on line 1 looked ahead 2 -- so saw 3\n      // test 1 + 2 < 3 should cover this\n      if (saved && (!(saved instanceof SavedContext) || line + saved.lookAhead < n)) {\n        start = line + 1;\n        break\n      }\n    }\n    doc.highlightFrontier = Math.min(doc.highlightFrontier, start);\n  }\n\n  // Optimize some code when these features are not used.\n  var sawReadOnlySpans = false, sawCollapsedSpans = false;\n\n  function seeReadOnlySpans() {\n    sawReadOnlySpans = true;\n  }\n\n  function seeCollapsedSpans() {\n    sawCollapsedSpans = true;\n  }\n\n  // TEXTMARKER SPANS\n\n  function MarkedSpan(marker, from, to) {\n    this.marker = marker;\n    this.from = from; this.to = to;\n  }\n\n  // Search an array of spans for a span matching the given marker.\n  function getMarkedSpanFor(spans, marker) {\n    if (spans) { for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if (span.marker == marker) { return span }\n    } }\n  }\n\n  // Remove a span from an array, returning undefined if no spans are\n  // left (we don't store arrays for lines without spans).\n  function removeMarkedSpan(spans, span) {\n    var r;\n    for (var i = 0; i < spans.length; ++i)\n      { if (spans[i] != span) { (r || (r = [])).push(spans[i]); } }\n    return r\n  }\n\n  // Add a span to a line.\n  function addMarkedSpan(line, span, op) {\n    var inThisOp = op && window.WeakSet && (op.markedSpans || (op.markedSpans = new WeakSet));\n    if (inThisOp && line.markedSpans && inThisOp.has(line.markedSpans)) {\n      line.markedSpans.push(span);\n    } else {\n      line.markedSpans = line.markedSpans ? line.markedSpans.concat([span]) : [span];\n      if (inThisOp) { inThisOp.add(line.markedSpans); }\n    }\n    span.marker.attachLine(line);\n  }\n\n  // Used for the algorithm that adjusts markers for a change in the\n  // document. These functions cut an array of spans at a given\n  // character position, returning an array of remaining chunks (or\n  // undefined if nothing remains).\n  function markedSpansBefore(old, startCh, isInsert) {\n    var nw;\n    if (old) { for (var i = 0; i < old.length; ++i) {\n      var span = old[i], marker = span.marker;\n      var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= startCh : span.from < startCh);\n      if (startsBefore || span.from == startCh && marker.type == \"bookmark\" && (!isInsert || !span.marker.insertLeft)) {\n        var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= startCh : span.to > startCh)\n        ;(nw || (nw = [])).push(new MarkedSpan(marker, span.from, endsAfter ? null : span.to));\n      }\n    } }\n    return nw\n  }\n  function markedSpansAfter(old, endCh, isInsert) {\n    var nw;\n    if (old) { for (var i = 0; i < old.length; ++i) {\n      var span = old[i], marker = span.marker;\n      var endsAfter = span.to == null || (marker.inclusiveRight ? span.to >= endCh : span.to > endCh);\n      if (endsAfter || span.from == endCh && marker.type == \"bookmark\" && (!isInsert || span.marker.insertLeft)) {\n        var startsBefore = span.from == null || (marker.inclusiveLeft ? span.from <= endCh : span.from < endCh)\n        ;(nw || (nw = [])).push(new MarkedSpan(marker, startsBefore ? null : span.from - endCh,\n                                              span.to == null ? null : span.to - endCh));\n      }\n    } }\n    return nw\n  }\n\n  // Given a change object, compute the new set of marker spans that\n  // cover the line in which the change took place. Removes spans\n  // entirely within the change, reconnects spans belonging to the\n  // same marker that appear on both sides of the change, and cuts off\n  // spans partially within the change. Returns an array of span\n  // arrays with one element for each line in (after) the change.\n  function stretchSpansOverChange(doc, change) {\n    if (change.full) { return null }\n    var oldFirst = isLine(doc, change.from.line) && getLine(doc, change.from.line).markedSpans;\n    var oldLast = isLine(doc, change.to.line) && getLine(doc, change.to.line).markedSpans;\n    if (!oldFirst && !oldLast) { return null }\n\n    var startCh = change.from.ch, endCh = change.to.ch, isInsert = cmp(change.from, change.to) == 0;\n    // Get the spans that 'stick out' on both sides\n    var first = markedSpansBefore(oldFirst, startCh, isInsert);\n    var last = markedSpansAfter(oldLast, endCh, isInsert);\n\n    // Next, merge those two ends\n    var sameLine = change.text.length == 1, offset = lst(change.text).length + (sameLine ? startCh : 0);\n    if (first) {\n      // Fix up .to properties of first\n      for (var i = 0; i < first.length; ++i) {\n        var span = first[i];\n        if (span.to == null) {\n          var found = getMarkedSpanFor(last, span.marker);\n          if (!found) { span.to = startCh; }\n          else if (sameLine) { span.to = found.to == null ? null : found.to + offset; }\n        }\n      }\n    }\n    if (last) {\n      // Fix up .from in last (or move them into first in case of sameLine)\n      for (var i$1 = 0; i$1 < last.length; ++i$1) {\n        var span$1 = last[i$1];\n        if (span$1.to != null) { span$1.to += offset; }\n        if (span$1.from == null) {\n          var found$1 = getMarkedSpanFor(first, span$1.marker);\n          if (!found$1) {\n            span$1.from = offset;\n            if (sameLine) { (first || (first = [])).push(span$1); }\n          }\n        } else {\n          span$1.from += offset;\n          if (sameLine) { (first || (first = [])).push(span$1); }\n        }\n      }\n    }\n    // Make sure we didn't create any zero-length spans\n    if (first) { first = clearEmptySpans(first); }\n    if (last && last != first) { last = clearEmptySpans(last); }\n\n    var newMarkers = [first];\n    if (!sameLine) {\n      // Fill gap with whole-line-spans\n      var gap = change.text.length - 2, gapMarkers;\n      if (gap > 0 && first)\n        { for (var i$2 = 0; i$2 < first.length; ++i$2)\n          { if (first[i$2].to == null)\n            { (gapMarkers || (gapMarkers = [])).push(new MarkedSpan(first[i$2].marker, null, null)); } } }\n      for (var i$3 = 0; i$3 < gap; ++i$3)\n        { newMarkers.push(gapMarkers); }\n      newMarkers.push(last);\n    }\n    return newMarkers\n  }\n\n  // Remove spans that are empty and don't have a clearWhenEmpty\n  // option of false.\n  function clearEmptySpans(spans) {\n    for (var i = 0; i < spans.length; ++i) {\n      var span = spans[i];\n      if (span.from != null && span.from == span.to && span.marker.clearWhenEmpty !== false)\n        { spans.splice(i--, 1); }\n    }\n    if (!spans.length) { return null }\n    return spans\n  }\n\n  // Used to 'clip' out readOnly ranges when making a change.\n  function removeReadOnlyRanges(doc, from, to) {\n    var markers = null;\n    doc.iter(from.line, to.line + 1, function (line) {\n      if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n        var mark = line.markedSpans[i].marker;\n        if (mark.readOnly && (!markers || indexOf(markers, mark) == -1))\n          { (markers || (markers = [])).push(mark); }\n      } }\n    });\n    if (!markers) { return null }\n    var parts = [{from: from, to: to}];\n    for (var i = 0; i < markers.length; ++i) {\n      var mk = markers[i], m = mk.find(0);\n      for (var j = 0; j < parts.length; ++j) {\n        var p = parts[j];\n        if (cmp(p.to, m.from) < 0 || cmp(p.from, m.to) > 0) { continue }\n        var newParts = [j, 1], dfrom = cmp(p.from, m.from), dto = cmp(p.to, m.to);\n        if (dfrom < 0 || !mk.inclusiveLeft && !dfrom)\n          { newParts.push({from: p.from, to: m.from}); }\n        if (dto > 0 || !mk.inclusiveRight && !dto)\n          { newParts.push({from: m.to, to: p.to}); }\n        parts.splice.apply(parts, newParts);\n        j += newParts.length - 3;\n      }\n    }\n    return parts\n  }\n\n  // Connect or disconnect spans from a line.\n  function detachMarkedSpans(line) {\n    var spans = line.markedSpans;\n    if (!spans) { return }\n    for (var i = 0; i < spans.length; ++i)\n      { spans[i].marker.detachLine(line); }\n    line.markedSpans = null;\n  }\n  function attachMarkedSpans(line, spans) {\n    if (!spans) { return }\n    for (var i = 0; i < spans.length; ++i)\n      { spans[i].marker.attachLine(line); }\n    line.markedSpans = spans;\n  }\n\n  // Helpers used when computing which overlapping collapsed span\n  // counts as the larger one.\n  function extraLeft(marker) { return marker.inclusiveLeft ? -1 : 0 }\n  function extraRight(marker) { return marker.inclusiveRight ? 1 : 0 }\n\n  // Returns a number indicating which of two overlapping collapsed\n  // spans is larger (and thus includes the other). Falls back to\n  // comparing ids when the spans cover exactly the same range.\n  function compareCollapsedMarkers(a, b) {\n    var lenDiff = a.lines.length - b.lines.length;\n    if (lenDiff != 0) { return lenDiff }\n    var aPos = a.find(), bPos = b.find();\n    var fromCmp = cmp(aPos.from, bPos.from) || extraLeft(a) - extraLeft(b);\n    if (fromCmp) { return -fromCmp }\n    var toCmp = cmp(aPos.to, bPos.to) || extraRight(a) - extraRight(b);\n    if (toCmp) { return toCmp }\n    return b.id - a.id\n  }\n\n  // Find out whether a line ends or starts in a collapsed span. If\n  // so, return the marker for that span.\n  function collapsedSpanAtSide(line, start) {\n    var sps = sawCollapsedSpans && line.markedSpans, found;\n    if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n      sp = sps[i];\n      if (sp.marker.collapsed && (start ? sp.from : sp.to) == null &&\n          (!found || compareCollapsedMarkers(found, sp.marker) < 0))\n        { found = sp.marker; }\n    } }\n    return found\n  }\n  function collapsedSpanAtStart(line) { return collapsedSpanAtSide(line, true) }\n  function collapsedSpanAtEnd(line) { return collapsedSpanAtSide(line, false) }\n\n  function collapsedSpanAround(line, ch) {\n    var sps = sawCollapsedSpans && line.markedSpans, found;\n    if (sps) { for (var i = 0; i < sps.length; ++i) {\n      var sp = sps[i];\n      if (sp.marker.collapsed && (sp.from == null || sp.from < ch) && (sp.to == null || sp.to > ch) &&\n          (!found || compareCollapsedMarkers(found, sp.marker) < 0)) { found = sp.marker; }\n    } }\n    return found\n  }\n\n  // Test whether there exists a collapsed span that partially\n  // overlaps (covers the start or end, but not both) of a new span.\n  // Such overlap is not allowed.\n  function conflictingCollapsedRange(doc, lineNo, from, to, marker) {\n    var line = getLine(doc, lineNo);\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps) { for (var i = 0; i < sps.length; ++i) {\n      var sp = sps[i];\n      if (!sp.marker.collapsed) { continue }\n      var found = sp.marker.find(0);\n      var fromCmp = cmp(found.from, from) || extraLeft(sp.marker) - extraLeft(marker);\n      var toCmp = cmp(found.to, to) || extraRight(sp.marker) - extraRight(marker);\n      if (fromCmp >= 0 && toCmp <= 0 || fromCmp <= 0 && toCmp >= 0) { continue }\n      if (fromCmp <= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.to, from) >= 0 : cmp(found.to, from) > 0) ||\n          fromCmp >= 0 && (sp.marker.inclusiveRight && marker.inclusiveLeft ? cmp(found.from, to) <= 0 : cmp(found.from, to) < 0))\n        { return true }\n    } }\n  }\n\n  // A visual line is a line as drawn on the screen. Folding, for\n  // example, can cause multiple logical lines to appear on the same\n  // visual line. This finds the start of the visual line that the\n  // given line is part of (usually that is the line itself).\n  function visualLine(line) {\n    var merged;\n    while (merged = collapsedSpanAtStart(line))\n      { line = merged.find(-1, true).line; }\n    return line\n  }\n\n  function visualLineEnd(line) {\n    var merged;\n    while (merged = collapsedSpanAtEnd(line))\n      { line = merged.find(1, true).line; }\n    return line\n  }\n\n  // Returns an array of logical lines that continue the visual line\n  // started by the argument, or undefined if there are no such lines.\n  function visualLineContinued(line) {\n    var merged, lines;\n    while (merged = collapsedSpanAtEnd(line)) {\n      line = merged.find(1, true).line\n      ;(lines || (lines = [])).push(line);\n    }\n    return lines\n  }\n\n  // Get the line number of the start of the visual line that the\n  // given line number is part of.\n  function visualLineNo(doc, lineN) {\n    var line = getLine(doc, lineN), vis = visualLine(line);\n    if (line == vis) { return lineN }\n    return lineNo(vis)\n  }\n\n  // Get the line number of the start of the next visual line after\n  // the given line.\n  function visualLineEndNo(doc, lineN) {\n    if (lineN > doc.lastLine()) { return lineN }\n    var line = getLine(doc, lineN), merged;\n    if (!lineIsHidden(doc, line)) { return lineN }\n    while (merged = collapsedSpanAtEnd(line))\n      { line = merged.find(1, true).line; }\n    return lineNo(line) + 1\n  }\n\n  // Compute whether a line is hidden. Lines count as hidden when they\n  // are part of a visual line that starts with another line, or when\n  // they are entirely covered by collapsed, non-widget span.\n  function lineIsHidden(doc, line) {\n    var sps = sawCollapsedSpans && line.markedSpans;\n    if (sps) { for (var sp = (void 0), i = 0; i < sps.length; ++i) {\n      sp = sps[i];\n      if (!sp.marker.collapsed) { continue }\n      if (sp.from == null) { return true }\n      if (sp.marker.widgetNode) { continue }\n      if (sp.from == 0 && sp.marker.inclusiveLeft && lineIsHiddenInner(doc, line, sp))\n        { return true }\n    } }\n  }\n  function lineIsHiddenInner(doc, line, span) {\n    if (span.to == null) {\n      var end = span.marker.find(1, true);\n      return lineIsHiddenInner(doc, end.line, getMarkedSpanFor(end.line.markedSpans, span.marker))\n    }\n    if (span.marker.inclusiveRight && span.to == line.text.length)\n      { return true }\n    for (var sp = (void 0), i = 0; i < line.markedSpans.length; ++i) {\n      sp = line.markedSpans[i];\n      if (sp.marker.collapsed && !sp.marker.widgetNode && sp.from == span.to &&\n          (sp.to == null || sp.to != span.from) &&\n          (sp.marker.inclusiveLeft || span.marker.inclusiveRight) &&\n          lineIsHiddenInner(doc, line, sp)) { return true }\n    }\n  }\n\n  // Find the height above the given line.\n  function heightAtLine(lineObj) {\n    lineObj = visualLine(lineObj);\n\n    var h = 0, chunk = lineObj.parent;\n    for (var i = 0; i < chunk.lines.length; ++i) {\n      var line = chunk.lines[i];\n      if (line == lineObj) { break }\n      else { h += line.height; }\n    }\n    for (var p = chunk.parent; p; chunk = p, p = chunk.parent) {\n      for (var i$1 = 0; i$1 < p.children.length; ++i$1) {\n        var cur = p.children[i$1];\n        if (cur == chunk) { break }\n        else { h += cur.height; }\n      }\n    }\n    return h\n  }\n\n  // Compute the character length of a line, taking into account\n  // collapsed ranges (see markText) that might hide parts, and join\n  // other lines onto it.\n  function lineLength(line) {\n    if (line.height == 0) { return 0 }\n    var len = line.text.length, merged, cur = line;\n    while (merged = collapsedSpanAtStart(cur)) {\n      var found = merged.find(0, true);\n      cur = found.from.line;\n      len += found.from.ch - found.to.ch;\n    }\n    cur = line;\n    while (merged = collapsedSpanAtEnd(cur)) {\n      var found$1 = merged.find(0, true);\n      len -= cur.text.length - found$1.from.ch;\n      cur = found$1.to.line;\n      len += cur.text.length - found$1.to.ch;\n    }\n    return len\n  }\n\n  // Find the longest line in the document.\n  function findMaxLine(cm) {\n    var d = cm.display, doc = cm.doc;\n    d.maxLine = getLine(doc, doc.first);\n    d.maxLineLength = lineLength(d.maxLine);\n    d.maxLineChanged = true;\n    doc.iter(function (line) {\n      var len = lineLength(line);\n      if (len > d.maxLineLength) {\n        d.maxLineLength = len;\n        d.maxLine = line;\n      }\n    });\n  }\n\n  // LINE DATA STRUCTURE\n\n  // Line objects. These hold state related to a line, including\n  // highlighting info (the styles array).\n  var Line = function(text, markedSpans, estimateHeight) {\n    this.text = text;\n    attachMarkedSpans(this, markedSpans);\n    this.height = estimateHeight ? estimateHeight(this) : 1;\n  };\n\n  Line.prototype.lineNo = function () { return lineNo(this) };\n  eventMixin(Line);\n\n  // Change the content (text, markers) of a line. Automatically\n  // invalidates cached information and tries to re-estimate the\n  // line's height.\n  function updateLine(line, text, markedSpans, estimateHeight) {\n    line.text = text;\n    if (line.stateAfter) { line.stateAfter = null; }\n    if (line.styles) { line.styles = null; }\n    if (line.order != null) { line.order = null; }\n    detachMarkedSpans(line);\n    attachMarkedSpans(line, markedSpans);\n    var estHeight = estimateHeight ? estimateHeight(line) : 1;\n    if (estHeight != line.height) { updateLineHeight(line, estHeight); }\n  }\n\n  // Detach a line from the document tree and its markers.\n  function cleanUpLine(line) {\n    line.parent = null;\n    detachMarkedSpans(line);\n  }\n\n  // Convert a style as returned by a mode (either null, or a string\n  // containing one or more styles) to a CSS style. This is cached,\n  // and also looks for line-wide styles.\n  var styleToClassCache = {}, styleToClassCacheWithMode = {};\n  function interpretTokenStyle(style, options) {\n    if (!style || /^\\s*$/.test(style)) { return null }\n    var cache = options.addModeClass ? styleToClassCacheWithMode : styleToClassCache;\n    return cache[style] ||\n      (cache[style] = style.replace(/\\S+/g, \"cm-$&\"))\n  }\n\n  // Render the DOM representation of the text of a line. Also builds\n  // up a 'line map', which points at the DOM nodes that represent\n  // specific stretches of text, and is used by the measuring code.\n  // The returned object contains the DOM node, this map, and\n  // information about line-wide styles that were set by the mode.\n  function buildLineContent(cm, lineView) {\n    // The padding-right forces the element to have a 'border', which\n    // is needed on Webkit to be able to get line-level bounding\n    // rectangles for it (in measureChar).\n    var content = eltP(\"span\", null, null, webkit ? \"padding-right: .1px\" : null);\n    var builder = {pre: eltP(\"pre\", [content], \"CodeMirror-line\"), content: content,\n                   col: 0, pos: 0, cm: cm,\n                   trailingSpace: false,\n                   splitSpaces: cm.getOption(\"lineWrapping\")};\n    lineView.measure = {};\n\n    // Iterate over the logical lines that make up this visual line.\n    for (var i = 0; i <= (lineView.rest ? lineView.rest.length : 0); i++) {\n      var line = i ? lineView.rest[i - 1] : lineView.line, order = (void 0);\n      builder.pos = 0;\n      builder.addToken = buildToken;\n      // Optionally wire in some hacks into the token-rendering\n      // algorithm, to deal with browser quirks.\n      if (hasBadBidiRects(cm.display.measure) && (order = getOrder(line, cm.doc.direction)))\n        { builder.addToken = buildTokenBadBidi(builder.addToken, order); }\n      builder.map = [];\n      var allowFrontierUpdate = lineView != cm.display.externalMeasured && lineNo(line);\n      insertLineContent(line, builder, getLineStyles(cm, line, allowFrontierUpdate));\n      if (line.styleClasses) {\n        if (line.styleClasses.bgClass)\n          { builder.bgClass = joinClasses(line.styleClasses.bgClass, builder.bgClass || \"\"); }\n        if (line.styleClasses.textClass)\n          { builder.textClass = joinClasses(line.styleClasses.textClass, builder.textClass || \"\"); }\n      }\n\n      // Ensure at least a single node is present, for measuring.\n      if (builder.map.length == 0)\n        { builder.map.push(0, 0, builder.content.appendChild(zeroWidthElement(cm.display.measure))); }\n\n      // Store the map and a cache object for the current logical line\n      if (i == 0) {\n        lineView.measure.map = builder.map;\n        lineView.measure.cache = {};\n      } else {\n  (lineView.measure.maps || (lineView.measure.maps = [])).push(builder.map)\n        ;(lineView.measure.caches || (lineView.measure.caches = [])).push({});\n      }\n    }\n\n    // See issue #2901\n    if (webkit) {\n      var last = builder.content.lastChild;\n      if (/\\bcm-tab\\b/.test(last.className) || (last.querySelector && last.querySelector(\".cm-tab\")))\n        { builder.content.className = \"cm-tab-wrap-hack\"; }\n    }\n\n    signal(cm, \"renderLine\", cm, lineView.line, builder.pre);\n    if (builder.pre.className)\n      { builder.textClass = joinClasses(builder.pre.className, builder.textClass || \"\"); }\n\n    return builder\n  }\n\n  function defaultSpecialCharPlaceholder(ch) {\n    var token = elt(\"span\", \"\\u2022\", \"cm-invalidchar\");\n    token.title = \"\\\\u\" + ch.charCodeAt(0).toString(16);\n    token.setAttribute(\"aria-label\", token.title);\n    return token\n  }\n\n  // Build up the DOM representation for a single token, and add it to\n  // the line map. Takes care to render special characters separately.\n  function buildToken(builder, text, style, startStyle, endStyle, css, attributes) {\n    if (!text) { return }\n    var displayText = builder.splitSpaces ? splitSpaces(text, builder.trailingSpace) : text;\n    var special = builder.cm.state.specialChars, mustWrap = false;\n    var content;\n    if (!special.test(text)) {\n      builder.col += text.length;\n      content = document.createTextNode(displayText);\n      builder.map.push(builder.pos, builder.pos + text.length, content);\n      if (ie && ie_version < 9) { mustWrap = true; }\n      builder.pos += text.length;\n    } else {\n      content = document.createDocumentFragment();\n      var pos = 0;\n      while (true) {\n        special.lastIndex = pos;\n        var m = special.exec(text);\n        var skipped = m ? m.index - pos : text.length - pos;\n        if (skipped) {\n          var txt = document.createTextNode(displayText.slice(pos, pos + skipped));\n          if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt])); }\n          else { content.appendChild(txt); }\n          builder.map.push(builder.pos, builder.pos + skipped, txt);\n          builder.col += skipped;\n          builder.pos += skipped;\n        }\n        if (!m) { break }\n        pos += skipped + 1;\n        var txt$1 = (void 0);\n        if (m[0] == \"\\t\") {\n          var tabSize = builder.cm.options.tabSize, tabWidth = tabSize - builder.col % tabSize;\n          txt$1 = content.appendChild(elt(\"span\", spaceStr(tabWidth), \"cm-tab\"));\n          txt$1.setAttribute(\"role\", \"presentation\");\n          txt$1.setAttribute(\"cm-text\", \"\\t\");\n          builder.col += tabWidth;\n        } else if (m[0] == \"\\r\" || m[0] == \"\\n\") {\n          txt$1 = content.appendChild(elt(\"span\", m[0] == \"\\r\" ? \"\\u240d\" : \"\\u2424\", \"cm-invalidchar\"));\n          txt$1.setAttribute(\"cm-text\", m[0]);\n          builder.col += 1;\n        } else {\n          txt$1 = builder.cm.options.specialCharPlaceholder(m[0]);\n          txt$1.setAttribute(\"cm-text\", m[0]);\n          if (ie && ie_version < 9) { content.appendChild(elt(\"span\", [txt$1])); }\n          else { content.appendChild(txt$1); }\n          builder.col += 1;\n        }\n        builder.map.push(builder.pos, builder.pos + 1, txt$1);\n        builder.pos++;\n      }\n    }\n    builder.trailingSpace = displayText.charCodeAt(text.length - 1) == 32;\n    if (style || startStyle || endStyle || mustWrap || css || attributes) {\n      var fullStyle = style || \"\";\n      if (startStyle) { fullStyle += startStyle; }\n      if (endStyle) { fullStyle += endStyle; }\n      var token = elt(\"span\", [content], fullStyle, css);\n      if (attributes) {\n        for (var attr in attributes) { if (attributes.hasOwnProperty(attr) && attr != \"style\" && attr != \"class\")\n          { token.setAttribute(attr, attributes[attr]); } }\n      }\n      return builder.content.appendChild(token)\n    }\n    builder.content.appendChild(content);\n  }\n\n  // Change some spaces to NBSP to prevent the browser from collapsing\n  // trailing spaces at the end of a line when rendering text (issue #1362).\n  function splitSpaces(text, trailingBefore) {\n    if (text.length > 1 && !/  /.test(text)) { return text }\n    var spaceBefore = trailingBefore, result = \"\";\n    for (var i = 0; i < text.length; i++) {\n      var ch = text.charAt(i);\n      if (ch == \" \" && spaceBefore && (i == text.length - 1 || text.charCodeAt(i + 1) == 32))\n        { ch = \"\\u00a0\"; }\n      result += ch;\n      spaceBefore = ch == \" \";\n    }\n    return result\n  }\n\n  // Work around nonsense dimensions being reported for stretches of\n  // right-to-left text.\n  function buildTokenBadBidi(inner, order) {\n    return function (builder, text, style, startStyle, endStyle, css, attributes) {\n      style = style ? style + \" cm-force-border\" : \"cm-force-border\";\n      var start = builder.pos, end = start + text.length;\n      for (;;) {\n        // Find the part that overlaps with the start of this text\n        var part = (void 0);\n        for (var i = 0; i < order.length; i++) {\n          part = order[i];\n          if (part.to > start && part.from <= start) { break }\n        }\n        if (part.to >= end) { return inner(builder, text, style, startStyle, endStyle, css, attributes) }\n        inner(builder, text.slice(0, part.to - start), style, startStyle, null, css, attributes);\n        startStyle = null;\n        text = text.slice(part.to - start);\n        start = part.to;\n      }\n    }\n  }\n\n  function buildCollapsedSpan(builder, size, marker, ignoreWidget) {\n    var widget = !ignoreWidget && marker.widgetNode;\n    if (widget) { builder.map.push(builder.pos, builder.pos + size, widget); }\n    if (!ignoreWidget && builder.cm.display.input.needsContentAttribute) {\n      if (!widget)\n        { widget = builder.content.appendChild(document.createElement(\"span\")); }\n      widget.setAttribute(\"cm-marker\", marker.id);\n    }\n    if (widget) {\n      builder.cm.display.input.setUneditable(widget);\n      builder.content.appendChild(widget);\n    }\n    builder.pos += size;\n    builder.trailingSpace = false;\n  }\n\n  // Outputs a number of spans to make up a line, taking highlighting\n  // and marked text into account.\n  function insertLineContent(line, builder, styles) {\n    var spans = line.markedSpans, allText = line.text, at = 0;\n    if (!spans) {\n      for (var i$1 = 1; i$1 < styles.length; i$1+=2)\n        { builder.addToken(builder, allText.slice(at, at = styles[i$1]), interpretTokenStyle(styles[i$1+1], builder.cm.options)); }\n      return\n    }\n\n    var len = allText.length, pos = 0, i = 1, text = \"\", style, css;\n    var nextChange = 0, spanStyle, spanEndStyle, spanStartStyle, collapsed, attributes;\n    for (;;) {\n      if (nextChange == pos) { // Update current marker set\n        spanStyle = spanEndStyle = spanStartStyle = css = \"\";\n        attributes = null;\n        collapsed = null; nextChange = Infinity;\n        var foundBookmarks = [], endStyles = (void 0);\n        for (var j = 0; j < spans.length; ++j) {\n          var sp = spans[j], m = sp.marker;\n          if (m.type == \"bookmark\" && sp.from == pos && m.widgetNode) {\n            foundBookmarks.push(m);\n          } else if (sp.from <= pos && (sp.to == null || sp.to > pos || m.collapsed && sp.to == pos && sp.from == pos)) {\n            if (sp.to != null && sp.to != pos && nextChange > sp.to) {\n              nextChange = sp.to;\n              spanEndStyle = \"\";\n            }\n            if (m.className) { spanStyle += \" \" + m.className; }\n            if (m.css) { css = (css ? css + \";\" : \"\") + m.css; }\n            if (m.startStyle && sp.from == pos) { spanStartStyle += \" \" + m.startStyle; }\n            if (m.endStyle && sp.to == nextChange) { (endStyles || (endStyles = [])).push(m.endStyle, sp.to); }\n            // support for the old title property\n            // https://github.com/codemirror/CodeMirror/pull/5673\n            if (m.title) { (attributes || (attributes = {})).title = m.title; }\n            if (m.attributes) {\n              for (var attr in m.attributes)\n                { (attributes || (attributes = {}))[attr] = m.attributes[attr]; }\n            }\n            if (m.collapsed && (!collapsed || compareCollapsedMarkers(collapsed.marker, m) < 0))\n              { collapsed = sp; }\n          } else if (sp.from > pos && nextChange > sp.from) {\n            nextChange = sp.from;\n          }\n        }\n        if (endStyles) { for (var j$1 = 0; j$1 < endStyles.length; j$1 += 2)\n          { if (endStyles[j$1 + 1] == nextChange) { spanEndStyle += \" \" + endStyles[j$1]; } } }\n\n        if (!collapsed || collapsed.from == pos) { for (var j$2 = 0; j$2 < foundBookmarks.length; ++j$2)\n          { buildCollapsedSpan(builder, 0, foundBookmarks[j$2]); } }\n        if (collapsed && (collapsed.from || 0) == pos) {\n          buildCollapsedSpan(builder, (collapsed.to == null ? len + 1 : collapsed.to) - pos,\n                             collapsed.marker, collapsed.from == null);\n          if (collapsed.to == null) { return }\n          if (collapsed.to == pos) { collapsed = false; }\n        }\n      }\n      if (pos >= len) { break }\n\n      var upto = Math.min(len, nextChange);\n      while (true) {\n        if (text) {\n          var end = pos + text.length;\n          if (!collapsed) {\n            var tokenText = end > upto ? text.slice(0, upto - pos) : text;\n            builder.addToken(builder, tokenText, style ? style + spanStyle : spanStyle,\n                             spanStartStyle, pos + tokenText.length == nextChange ? spanEndStyle : \"\", css, attributes);\n          }\n          if (end >= upto) {text = text.slice(upto - pos); pos = upto; break}\n          pos = end;\n          spanStartStyle = \"\";\n        }\n        text = allText.slice(at, at = styles[i++]);\n        style = interpretTokenStyle(styles[i++], builder.cm.options);\n      }\n    }\n  }\n\n\n  // These objects are used to represent the visible (currently drawn)\n  // part of the document. A LineView may correspond to multiple\n  // logical lines, if those are connected by collapsed ranges.\n  function LineView(doc, line, lineN) {\n    // The starting line\n    this.line = line;\n    // Continuing lines, if any\n    this.rest = visualLineContinued(line);\n    // Number of logical lines in this visual line\n    this.size = this.rest ? lineNo(lst(this.rest)) - lineN + 1 : 1;\n    this.node = this.text = null;\n    this.hidden = lineIsHidden(doc, line);\n  }\n\n  // Create a range of LineView objects for the given lines.\n  function buildViewArray(cm, from, to) {\n    var array = [], nextPos;\n    for (var pos = from; pos < to; pos = nextPos) {\n      var view = new LineView(cm.doc, getLine(cm.doc, pos), pos);\n      nextPos = pos + view.size;\n      array.push(view);\n    }\n    return array\n  }\n\n  var operationGroup = null;\n\n  function pushOperation(op) {\n    if (operationGroup) {\n      operationGroup.ops.push(op);\n    } else {\n      op.ownsGroup = operationGroup = {\n        ops: [op],\n        delayedCallbacks: []\n      };\n    }\n  }\n\n  function fireCallbacksForOps(group) {\n    // Calls delayed callbacks and cursorActivity handlers until no\n    // new ones appear\n    var callbacks = group.delayedCallbacks, i = 0;\n    do {\n      for (; i < callbacks.length; i++)\n        { callbacks[i].call(null); }\n      for (var j = 0; j < group.ops.length; j++) {\n        var op = group.ops[j];\n        if (op.cursorActivityHandlers)\n          { while (op.cursorActivityCalled < op.cursorActivityHandlers.length)\n            { op.cursorActivityHandlers[op.cursorActivityCalled++].call(null, op.cm); } }\n      }\n    } while (i < callbacks.length)\n  }\n\n  function finishOperation(op, endCb) {\n    var group = op.ownsGroup;\n    if (!group) { return }\n\n    try { fireCallbacksForOps(group); }\n    finally {\n      operationGroup = null;\n      endCb(group);\n    }\n  }\n\n  var orphanDelayedCallbacks = null;\n\n  // Often, we want to signal events at a point where we are in the\n  // middle of some work, but don't want the handler to start calling\n  // other methods on the editor, which might be in an inconsistent\n  // state or simply not expect any other events to happen.\n  // signalLater looks whether there are any handlers, and schedules\n  // them to be executed when the last operation ends, or, if no\n  // operation is active, when a timeout fires.\n  function signalLater(emitter, type /*, values...*/) {\n    var arr = getHandlers(emitter, type);\n    if (!arr.length) { return }\n    var args = Array.prototype.slice.call(arguments, 2), list;\n    if (operationGroup) {\n      list = operationGroup.delayedCallbacks;\n    } else if (orphanDelayedCallbacks) {\n      list = orphanDelayedCallbacks;\n    } else {\n      list = orphanDelayedCallbacks = [];\n      setTimeout(fireOrphanDelayed, 0);\n    }\n    var loop = function ( i ) {\n      list.push(function () { return arr[i].apply(null, args); });\n    };\n\n    for (var i = 0; i < arr.length; ++i)\n      loop( i );\n  }\n\n  function fireOrphanDelayed() {\n    var delayed = orphanDelayedCallbacks;\n    orphanDelayedCallbacks = null;\n    for (var i = 0; i < delayed.length; ++i) { delayed[i](); }\n  }\n\n  // When an aspect of a line changes, a string is added to\n  // lineView.changes. This updates the relevant part of the line's\n  // DOM structure.\n  function updateLineForChanges(cm, lineView, lineN, dims) {\n    for (var j = 0; j < lineView.changes.length; j++) {\n      var type = lineView.changes[j];\n      if (type == \"text\") { updateLineText(cm, lineView); }\n      else if (type == \"gutter\") { updateLineGutter(cm, lineView, lineN, dims); }\n      else if (type == \"class\") { updateLineClasses(cm, lineView); }\n      else if (type == \"widget\") { updateLineWidgets(cm, lineView, dims); }\n    }\n    lineView.changes = null;\n  }\n\n  // Lines with gutter elements, widgets or a background class need to\n  // be wrapped, and have the extra elements added to the wrapper div\n  function ensureLineWrapped(lineView) {\n    if (lineView.node == lineView.text) {\n      lineView.node = elt(\"div\", null, null, \"position: relative\");\n      if (lineView.text.parentNode)\n        { lineView.text.parentNode.replaceChild(lineView.node, lineView.text); }\n      lineView.node.appendChild(lineView.text);\n      if (ie && ie_version < 8) { lineView.node.style.zIndex = 2; }\n    }\n    return lineView.node\n  }\n\n  function updateLineBackground(cm, lineView) {\n    var cls = lineView.bgClass ? lineView.bgClass + \" \" + (lineView.line.bgClass || \"\") : lineView.line.bgClass;\n    if (cls) { cls += \" CodeMirror-linebackground\"; }\n    if (lineView.background) {\n      if (cls) { lineView.background.className = cls; }\n      else { lineView.background.parentNode.removeChild(lineView.background); lineView.background = null; }\n    } else if (cls) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.background = wrap.insertBefore(elt(\"div\", null, cls), wrap.firstChild);\n      cm.display.input.setUneditable(lineView.background);\n    }\n  }\n\n  // Wrapper around buildLineContent which will reuse the structure\n  // in display.externalMeasured when possible.\n  function getLineContent(cm, lineView) {\n    var ext = cm.display.externalMeasured;\n    if (ext && ext.line == lineView.line) {\n      cm.display.externalMeasured = null;\n      lineView.measure = ext.measure;\n      return ext.built\n    }\n    return buildLineContent(cm, lineView)\n  }\n\n  // Redraw the line's text. Interacts with the background and text\n  // classes because the mode may output tokens that influence these\n  // classes.\n  function updateLineText(cm, lineView) {\n    var cls = lineView.text.className;\n    var built = getLineContent(cm, lineView);\n    if (lineView.text == lineView.node) { lineView.node = built.pre; }\n    lineView.text.parentNode.replaceChild(built.pre, lineView.text);\n    lineView.text = built.pre;\n    if (built.bgClass != lineView.bgClass || built.textClass != lineView.textClass) {\n      lineView.bgClass = built.bgClass;\n      lineView.textClass = built.textClass;\n      updateLineClasses(cm, lineView);\n    } else if (cls) {\n      lineView.text.className = cls;\n    }\n  }\n\n  function updateLineClasses(cm, lineView) {\n    updateLineBackground(cm, lineView);\n    if (lineView.line.wrapClass)\n      { ensureLineWrapped(lineView).className = lineView.line.wrapClass; }\n    else if (lineView.node != lineView.text)\n      { lineView.node.className = \"\"; }\n    var textClass = lineView.textClass ? lineView.textClass + \" \" + (lineView.line.textClass || \"\") : lineView.line.textClass;\n    lineView.text.className = textClass || \"\";\n  }\n\n  function updateLineGutter(cm, lineView, lineN, dims) {\n    if (lineView.gutter) {\n      lineView.node.removeChild(lineView.gutter);\n      lineView.gutter = null;\n    }\n    if (lineView.gutterBackground) {\n      lineView.node.removeChild(lineView.gutterBackground);\n      lineView.gutterBackground = null;\n    }\n    if (lineView.line.gutterClass) {\n      var wrap = ensureLineWrapped(lineView);\n      lineView.gutterBackground = elt(\"div\", null, \"CodeMirror-gutter-background \" + lineView.line.gutterClass,\n                                      (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px; width: \" + (dims.gutterTotalWidth) + \"px\"));\n      cm.display.input.setUneditable(lineView.gutterBackground);\n      wrap.insertBefore(lineView.gutterBackground, lineView.text);\n    }\n    var markers = lineView.line.gutterMarkers;\n    if (cm.options.lineNumbers || markers) {\n      var wrap$1 = ensureLineWrapped(lineView);\n      var gutterWrap = lineView.gutter = elt(\"div\", null, \"CodeMirror-gutter-wrapper\", (\"left: \" + (cm.options.fixedGutter ? dims.fixedPos : -dims.gutterTotalWidth) + \"px\"));\n      gutterWrap.setAttribute(\"aria-hidden\", \"true\");\n      cm.display.input.setUneditable(gutterWrap);\n      wrap$1.insertBefore(gutterWrap, lineView.text);\n      if (lineView.line.gutterClass)\n        { gutterWrap.className += \" \" + lineView.line.gutterClass; }\n      if (cm.options.lineNumbers && (!markers || !markers[\"CodeMirror-linenumbers\"]))\n        { lineView.lineNumber = gutterWrap.appendChild(\n          elt(\"div\", lineNumberFor(cm.options, lineN),\n              \"CodeMirror-linenumber CodeMirror-gutter-elt\",\n              (\"left: \" + (dims.gutterLeft[\"CodeMirror-linenumbers\"]) + \"px; width: \" + (cm.display.lineNumInnerWidth) + \"px\"))); }\n      if (markers) { for (var k = 0; k < cm.display.gutterSpecs.length; ++k) {\n        var id = cm.display.gutterSpecs[k].className, found = markers.hasOwnProperty(id) && markers[id];\n        if (found)\n          { gutterWrap.appendChild(elt(\"div\", [found], \"CodeMirror-gutter-elt\",\n                                     (\"left: \" + (dims.gutterLeft[id]) + \"px; width: \" + (dims.gutterWidth[id]) + \"px\"))); }\n      } }\n    }\n  }\n\n  function updateLineWidgets(cm, lineView, dims) {\n    if (lineView.alignable) { lineView.alignable = null; }\n    var isWidget = classTest(\"CodeMirror-linewidget\");\n    for (var node = lineView.node.firstChild, next = (void 0); node; node = next) {\n      next = node.nextSibling;\n      if (isWidget.test(node.className)) { lineView.node.removeChild(node); }\n    }\n    insertLineWidgets(cm, lineView, dims);\n  }\n\n  // Build a line's DOM representation from scratch\n  function buildLineElement(cm, lineView, lineN, dims) {\n    var built = getLineContent(cm, lineView);\n    lineView.text = lineView.node = built.pre;\n    if (built.bgClass) { lineView.bgClass = built.bgClass; }\n    if (built.textClass) { lineView.textClass = built.textClass; }\n\n    updateLineClasses(cm, lineView);\n    updateLineGutter(cm, lineView, lineN, dims);\n    insertLineWidgets(cm, lineView, dims);\n    return lineView.node\n  }\n\n  // A lineView may contain multiple logical lines (when merged by\n  // collapsed spans). The widgets for all of them need to be drawn.\n  function insertLineWidgets(cm, lineView, dims) {\n    insertLineWidgetsFor(cm, lineView.line, lineView, dims, true);\n    if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n      { insertLineWidgetsFor(cm, lineView.rest[i], lineView, dims, false); } }\n  }\n\n  function insertLineWidgetsFor(cm, line, lineView, dims, allowAbove) {\n    if (!line.widgets) { return }\n    var wrap = ensureLineWrapped(lineView);\n    for (var i = 0, ws = line.widgets; i < ws.length; ++i) {\n      var widget = ws[i], node = elt(\"div\", [widget.node], \"CodeMirror-linewidget\" + (widget.className ? \" \" + widget.className : \"\"));\n      if (!widget.handleMouseEvents) { node.setAttribute(\"cm-ignore-events\", \"true\"); }\n      positionLineWidget(widget, node, lineView, dims);\n      cm.display.input.setUneditable(node);\n      if (allowAbove && widget.above)\n        { wrap.insertBefore(node, lineView.gutter || lineView.text); }\n      else\n        { wrap.appendChild(node); }\n      signalLater(widget, \"redraw\");\n    }\n  }\n\n  function positionLineWidget(widget, node, lineView, dims) {\n    if (widget.noHScroll) {\n  (lineView.alignable || (lineView.alignable = [])).push(node);\n      var width = dims.wrapperWidth;\n      node.style.left = dims.fixedPos + \"px\";\n      if (!widget.coverGutter) {\n        width -= dims.gutterTotalWidth;\n        node.style.paddingLeft = dims.gutterTotalWidth + \"px\";\n      }\n      node.style.width = width + \"px\";\n    }\n    if (widget.coverGutter) {\n      node.style.zIndex = 5;\n      node.style.position = \"relative\";\n      if (!widget.noHScroll) { node.style.marginLeft = -dims.gutterTotalWidth + \"px\"; }\n    }\n  }\n\n  function widgetHeight(widget) {\n    if (widget.height != null) { return widget.height }\n    var cm = widget.doc.cm;\n    if (!cm) { return 0 }\n    if (!contains(document.body, widget.node)) {\n      var parentStyle = \"position: relative;\";\n      if (widget.coverGutter)\n        { parentStyle += \"margin-left: -\" + cm.display.gutters.offsetWidth + \"px;\"; }\n      if (widget.noHScroll)\n        { parentStyle += \"width: \" + cm.display.wrapper.clientWidth + \"px;\"; }\n      removeChildrenAndAdd(cm.display.measure, elt(\"div\", [widget.node], null, parentStyle));\n    }\n    return widget.height = widget.node.parentNode.offsetHeight\n  }\n\n  // Return true when the given mouse event happened in a widget\n  function eventInWidget(display, e) {\n    for (var n = e_target(e); n != display.wrapper; n = n.parentNode) {\n      if (!n || (n.nodeType == 1 && n.getAttribute(\"cm-ignore-events\") == \"true\") ||\n          (n.parentNode == display.sizer && n != display.mover))\n        { return true }\n    }\n  }\n\n  // POSITION MEASUREMENT\n\n  function paddingTop(display) {return display.lineSpace.offsetTop}\n  function paddingVert(display) {return display.mover.offsetHeight - display.lineSpace.offsetHeight}\n  function paddingH(display) {\n    if (display.cachedPaddingH) { return display.cachedPaddingH }\n    var e = removeChildrenAndAdd(display.measure, elt(\"pre\", \"x\", \"CodeMirror-line-like\"));\n    var style = window.getComputedStyle ? window.getComputedStyle(e) : e.currentStyle;\n    var data = {left: parseInt(style.paddingLeft), right: parseInt(style.paddingRight)};\n    if (!isNaN(data.left) && !isNaN(data.right)) { display.cachedPaddingH = data; }\n    return data\n  }\n\n  function scrollGap(cm) { return scrollerGap - cm.display.nativeBarWidth }\n  function displayWidth(cm) {\n    return cm.display.scroller.clientWidth - scrollGap(cm) - cm.display.barWidth\n  }\n  function displayHeight(cm) {\n    return cm.display.scroller.clientHeight - scrollGap(cm) - cm.display.barHeight\n  }\n\n  // Ensure the lineView.wrapping.heights array is populated. This is\n  // an array of bottom offsets for the lines that make up a drawn\n  // line. When lineWrapping is on, there might be more than one\n  // height.\n  function ensureLineHeights(cm, lineView, rect) {\n    var wrapping = cm.options.lineWrapping;\n    var curWidth = wrapping && displayWidth(cm);\n    if (!lineView.measure.heights || wrapping && lineView.measure.width != curWidth) {\n      var heights = lineView.measure.heights = [];\n      if (wrapping) {\n        lineView.measure.width = curWidth;\n        var rects = lineView.text.firstChild.getClientRects();\n        for (var i = 0; i < rects.length - 1; i++) {\n          var cur = rects[i], next = rects[i + 1];\n          if (Math.abs(cur.bottom - next.bottom) > 2)\n            { heights.push((cur.bottom + next.top) / 2 - rect.top); }\n        }\n      }\n      heights.push(rect.bottom - rect.top);\n    }\n  }\n\n  // Find a line map (mapping character offsets to text nodes) and a\n  // measurement cache for the given line number. (A line view might\n  // contain multiple lines when collapsed ranges are present.)\n  function mapFromLineView(lineView, line, lineN) {\n    if (lineView.line == line)\n      { return {map: lineView.measure.map, cache: lineView.measure.cache} }\n    if (lineView.rest) {\n      for (var i = 0; i < lineView.rest.length; i++)\n        { if (lineView.rest[i] == line)\n          { return {map: lineView.measure.maps[i], cache: lineView.measure.caches[i]} } }\n      for (var i$1 = 0; i$1 < lineView.rest.length; i$1++)\n        { if (lineNo(lineView.rest[i$1]) > lineN)\n          { return {map: lineView.measure.maps[i$1], cache: lineView.measure.caches[i$1], before: true} } }\n    }\n  }\n\n  // Render a line into the hidden node display.externalMeasured. Used\n  // when measurement is needed for a line that's not in the viewport.\n  function updateExternalMeasurement(cm, line) {\n    line = visualLine(line);\n    var lineN = lineNo(line);\n    var view = cm.display.externalMeasured = new LineView(cm.doc, line, lineN);\n    view.lineN = lineN;\n    var built = view.built = buildLineContent(cm, view);\n    view.text = built.pre;\n    removeChildrenAndAdd(cm.display.lineMeasure, built.pre);\n    return view\n  }\n\n  // Get a {top, bottom, left, right} box (in line-local coordinates)\n  // for a given character.\n  function measureChar(cm, line, ch, bias) {\n    return measureCharPrepared(cm, prepareMeasureForLine(cm, line), ch, bias)\n  }\n\n  // Find a line view that corresponds to the given line number.\n  function findViewForLine(cm, lineN) {\n    if (lineN >= cm.display.viewFrom && lineN < cm.display.viewTo)\n      { return cm.display.view[findViewIndex(cm, lineN)] }\n    var ext = cm.display.externalMeasured;\n    if (ext && lineN >= ext.lineN && lineN < ext.lineN + ext.size)\n      { return ext }\n  }\n\n  // Measurement can be split in two steps, the set-up work that\n  // applies to the whole line, and the measurement of the actual\n  // character. Functions like coordsChar, that need to do a lot of\n  // measurements in a row, can thus ensure that the set-up work is\n  // only done once.\n  function prepareMeasureForLine(cm, line) {\n    var lineN = lineNo(line);\n    var view = findViewForLine(cm, lineN);\n    if (view && !view.text) {\n      view = null;\n    } else if (view && view.changes) {\n      updateLineForChanges(cm, view, lineN, getDimensions(cm));\n      cm.curOp.forceUpdate = true;\n    }\n    if (!view)\n      { view = updateExternalMeasurement(cm, line); }\n\n    var info = mapFromLineView(view, line, lineN);\n    return {\n      line: line, view: view, rect: null,\n      map: info.map, cache: info.cache, before: info.before,\n      hasHeights: false\n    }\n  }\n\n  // Given a prepared measurement object, measures the position of an\n  // actual character (or fetches it from the cache).\n  function measureCharPrepared(cm, prepared, ch, bias, varHeight) {\n    if (prepared.before) { ch = -1; }\n    var key = ch + (bias || \"\"), found;\n    if (prepared.cache.hasOwnProperty(key)) {\n      found = prepared.cache[key];\n    } else {\n      if (!prepared.rect)\n        { prepared.rect = prepared.view.text.getBoundingClientRect(); }\n      if (!prepared.hasHeights) {\n        ensureLineHeights(cm, prepared.view, prepared.rect);\n        prepared.hasHeights = true;\n      }\n      found = measureCharInner(cm, prepared, ch, bias);\n      if (!found.bogus) { prepared.cache[key] = found; }\n    }\n    return {left: found.left, right: found.right,\n            top: varHeight ? found.rtop : found.top,\n            bottom: varHeight ? found.rbottom : found.bottom}\n  }\n\n  var nullRect = {left: 0, right: 0, top: 0, bottom: 0};\n\n  function nodeAndOffsetInLineMap(map, ch, bias) {\n    var node, start, end, collapse, mStart, mEnd;\n    // First, search the line map for the text node corresponding to,\n    // or closest to, the target character.\n    for (var i = 0; i < map.length; i += 3) {\n      mStart = map[i];\n      mEnd = map[i + 1];\n      if (ch < mStart) {\n        start = 0; end = 1;\n        collapse = \"left\";\n      } else if (ch < mEnd) {\n        start = ch - mStart;\n        end = start + 1;\n      } else if (i == map.length - 3 || ch == mEnd && map[i + 3] > ch) {\n        end = mEnd - mStart;\n        start = end - 1;\n        if (ch >= mEnd) { collapse = \"right\"; }\n      }\n      if (start != null) {\n        node = map[i + 2];\n        if (mStart == mEnd && bias == (node.insertLeft ? \"left\" : \"right\"))\n          { collapse = bias; }\n        if (bias == \"left\" && start == 0)\n          { while (i && map[i - 2] == map[i - 3] && map[i - 1].insertLeft) {\n            node = map[(i -= 3) + 2];\n            collapse = \"left\";\n          } }\n        if (bias == \"right\" && start == mEnd - mStart)\n          { while (i < map.length - 3 && map[i + 3] == map[i + 4] && !map[i + 5].insertLeft) {\n            node = map[(i += 3) + 2];\n            collapse = \"right\";\n          } }\n        break\n      }\n    }\n    return {node: node, start: start, end: end, collapse: collapse, coverStart: mStart, coverEnd: mEnd}\n  }\n\n  function getUsefulRect(rects, bias) {\n    var rect = nullRect;\n    if (bias == \"left\") { for (var i = 0; i < rects.length; i++) {\n      if ((rect = rects[i]).left != rect.right) { break }\n    } } else { for (var i$1 = rects.length - 1; i$1 >= 0; i$1--) {\n      if ((rect = rects[i$1]).left != rect.right) { break }\n    } }\n    return rect\n  }\n\n  function measureCharInner(cm, prepared, ch, bias) {\n    var place = nodeAndOffsetInLineMap(prepared.map, ch, bias);\n    var node = place.node, start = place.start, end = place.end, collapse = place.collapse;\n\n    var rect;\n    if (node.nodeType == 3) { // If it is a text node, use a range to retrieve the coordinates.\n      for (var i$1 = 0; i$1 < 4; i$1++) { // Retry a maximum of 4 times when nonsense rectangles are returned\n        while (start && isExtendingChar(prepared.line.text.charAt(place.coverStart + start))) { --start; }\n        while (place.coverStart + end < place.coverEnd && isExtendingChar(prepared.line.text.charAt(place.coverStart + end))) { ++end; }\n        if (ie && ie_version < 9 && start == 0 && end == place.coverEnd - place.coverStart)\n          { rect = node.parentNode.getBoundingClientRect(); }\n        else\n          { rect = getUsefulRect(range(node, start, end).getClientRects(), bias); }\n        if (rect.left || rect.right || start == 0) { break }\n        end = start;\n        start = start - 1;\n        collapse = \"right\";\n      }\n      if (ie && ie_version < 11) { rect = maybeUpdateRectForZooming(cm.display.measure, rect); }\n    } else { // If it is a widget, simply get the box for the whole widget.\n      if (start > 0) { collapse = bias = \"right\"; }\n      var rects;\n      if (cm.options.lineWrapping && (rects = node.getClientRects()).length > 1)\n        { rect = rects[bias == \"right\" ? rects.length - 1 : 0]; }\n      else\n        { rect = node.getBoundingClientRect(); }\n    }\n    if (ie && ie_version < 9 && !start && (!rect || !rect.left && !rect.right)) {\n      var rSpan = node.parentNode.getClientRects()[0];\n      if (rSpan)\n        { rect = {left: rSpan.left, right: rSpan.left + charWidth(cm.display), top: rSpan.top, bottom: rSpan.bottom}; }\n      else\n        { rect = nullRect; }\n    }\n\n    var rtop = rect.top - prepared.rect.top, rbot = rect.bottom - prepared.rect.top;\n    var mid = (rtop + rbot) / 2;\n    var heights = prepared.view.measure.heights;\n    var i = 0;\n    for (; i < heights.length - 1; i++)\n      { if (mid < heights[i]) { break } }\n    var top = i ? heights[i - 1] : 0, bot = heights[i];\n    var result = {left: (collapse == \"right\" ? rect.right : rect.left) - prepared.rect.left,\n                  right: (collapse == \"left\" ? rect.left : rect.right) - prepared.rect.left,\n                  top: top, bottom: bot};\n    if (!rect.left && !rect.right) { result.bogus = true; }\n    if (!cm.options.singleCursorHeightPerLine) { result.rtop = rtop; result.rbottom = rbot; }\n\n    return result\n  }\n\n  // Work around problem with bounding client rects on ranges being\n  // returned incorrectly when zoomed on IE10 and below.\n  function maybeUpdateRectForZooming(measure, rect) {\n    if (!window.screen || screen.logicalXDPI == null ||\n        screen.logicalXDPI == screen.deviceXDPI || !hasBadZoomedRects(measure))\n      { return rect }\n    var scaleX = screen.logicalXDPI / screen.deviceXDPI;\n    var scaleY = screen.logicalYDPI / screen.deviceYDPI;\n    return {left: rect.left * scaleX, right: rect.right * scaleX,\n            top: rect.top * scaleY, bottom: rect.bottom * scaleY}\n  }\n\n  function clearLineMeasurementCacheFor(lineView) {\n    if (lineView.measure) {\n      lineView.measure.cache = {};\n      lineView.measure.heights = null;\n      if (lineView.rest) { for (var i = 0; i < lineView.rest.length; i++)\n        { lineView.measure.caches[i] = {}; } }\n    }\n  }\n\n  function clearLineMeasurementCache(cm) {\n    cm.display.externalMeasure = null;\n    removeChildren(cm.display.lineMeasure);\n    for (var i = 0; i < cm.display.view.length; i++)\n      { clearLineMeasurementCacheFor(cm.display.view[i]); }\n  }\n\n  function clearCaches(cm) {\n    clearLineMeasurementCache(cm);\n    cm.display.cachedCharWidth = cm.display.cachedTextHeight = cm.display.cachedPaddingH = null;\n    if (!cm.options.lineWrapping) { cm.display.maxLineChanged = true; }\n    cm.display.lineNumChars = null;\n  }\n\n  function pageScrollX(doc) {\n    // Work around https://bugs.chromium.org/p/chromium/issues/detail?id=489206\n    // which causes page_Offset and bounding client rects to use\n    // different reference viewports and invalidate our calculations.\n    if (chrome && android) { return -(doc.body.getBoundingClientRect().left - parseInt(getComputedStyle(doc.body).marginLeft)) }\n    return doc.defaultView.pageXOffset || (doc.documentElement || doc.body).scrollLeft\n  }\n  function pageScrollY(doc) {\n    if (chrome && android) { return -(doc.body.getBoundingClientRect().top - parseInt(getComputedStyle(doc.body).marginTop)) }\n    return doc.defaultView.pageYOffset || (doc.documentElement || doc.body).scrollTop\n  }\n\n  function widgetTopHeight(lineObj) {\n    var ref = visualLine(lineObj);\n    var widgets = ref.widgets;\n    var height = 0;\n    if (widgets) { for (var i = 0; i < widgets.length; ++i) { if (widgets[i].above)\n      { height += widgetHeight(widgets[i]); } } }\n    return height\n  }\n\n  // Converts a {top, bottom, left, right} box from line-local\n  // coordinates into another coordinate system. Context may be one of\n  // \"line\", \"div\" (display.lineDiv), \"local\"./null (editor), \"window\",\n  // or \"page\".\n  function intoCoordSystem(cm, lineObj, rect, context, includeWidgets) {\n    if (!includeWidgets) {\n      var height = widgetTopHeight(lineObj);\n      rect.top += height; rect.bottom += height;\n    }\n    if (context == \"line\") { return rect }\n    if (!context) { context = \"local\"; }\n    var yOff = heightAtLine(lineObj);\n    if (context == \"local\") { yOff += paddingTop(cm.display); }\n    else { yOff -= cm.display.viewOffset; }\n    if (context == \"page\" || context == \"window\") {\n      var lOff = cm.display.lineSpace.getBoundingClientRect();\n      yOff += lOff.top + (context == \"window\" ? 0 : pageScrollY(doc(cm)));\n      var xOff = lOff.left + (context == \"window\" ? 0 : pageScrollX(doc(cm)));\n      rect.left += xOff; rect.right += xOff;\n    }\n    rect.top += yOff; rect.bottom += yOff;\n    return rect\n  }\n\n  // Coverts a box from \"div\" coords to another coordinate system.\n  // Context may be \"window\", \"page\", \"div\", or \"local\"./null.\n  function fromCoordSystem(cm, coords, context) {\n    if (context == \"div\") { return coords }\n    var left = coords.left, top = coords.top;\n    // First move into \"page\" coordinate system\n    if (context == \"page\") {\n      left -= pageScrollX(doc(cm));\n      top -= pageScrollY(doc(cm));\n    } else if (context == \"local\" || !context) {\n      var localBox = cm.display.sizer.getBoundingClientRect();\n      left += localBox.left;\n      top += localBox.top;\n    }\n\n    var lineSpaceBox = cm.display.lineSpace.getBoundingClientRect();\n    return {left: left - lineSpaceBox.left, top: top - lineSpaceBox.top}\n  }\n\n  function charCoords(cm, pos, context, lineObj, bias) {\n    if (!lineObj) { lineObj = getLine(cm.doc, pos.line); }\n    return intoCoordSystem(cm, lineObj, measureChar(cm, lineObj, pos.ch, bias), context)\n  }\n\n  // Returns a box for a given cursor position, which may have an\n  // 'other' property containing the position of the secondary cursor\n  // on a bidi boundary.\n  // A cursor Pos(line, char, \"before\") is on the same visual line as `char - 1`\n  // and after `char - 1` in writing order of `char - 1`\n  // A cursor Pos(line, char, \"after\") is on the same visual line as `char`\n  // and before `char` in writing order of `char`\n  // Examples (upper-case letters are RTL, lower-case are LTR):\n  //     Pos(0, 1, ...)\n  //     before   after\n  // ab     a|b     a|b\n  // aB     a|B     aB|\n  // Ab     |Ab     A|b\n  // AB     B|A     B|A\n  // Every position after the last character on a line is considered to stick\n  // to the last character on the line.\n  function cursorCoords(cm, pos, context, lineObj, preparedMeasure, varHeight) {\n    lineObj = lineObj || getLine(cm.doc, pos.line);\n    if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\n    function get(ch, right) {\n      var m = measureCharPrepared(cm, preparedMeasure, ch, right ? \"right\" : \"left\", varHeight);\n      if (right) { m.left = m.right; } else { m.right = m.left; }\n      return intoCoordSystem(cm, lineObj, m, context)\n    }\n    var order = getOrder(lineObj, cm.doc.direction), ch = pos.ch, sticky = pos.sticky;\n    if (ch >= lineObj.text.length) {\n      ch = lineObj.text.length;\n      sticky = \"before\";\n    } else if (ch <= 0) {\n      ch = 0;\n      sticky = \"after\";\n    }\n    if (!order) { return get(sticky == \"before\" ? ch - 1 : ch, sticky == \"before\") }\n\n    function getBidi(ch, partPos, invert) {\n      var part = order[partPos], right = part.level == 1;\n      return get(invert ? ch - 1 : ch, right != invert)\n    }\n    var partPos = getBidiPartAt(order, ch, sticky);\n    var other = bidiOther;\n    var val = getBidi(ch, partPos, sticky == \"before\");\n    if (other != null) { val.other = getBidi(ch, other, sticky != \"before\"); }\n    return val\n  }\n\n  // Used to cheaply estimate the coordinates for a position. Used for\n  // intermediate scroll updates.\n  function estimateCoords(cm, pos) {\n    var left = 0;\n    pos = clipPos(cm.doc, pos);\n    if (!cm.options.lineWrapping) { left = charWidth(cm.display) * pos.ch; }\n    var lineObj = getLine(cm.doc, pos.line);\n    var top = heightAtLine(lineObj) + paddingTop(cm.display);\n    return {left: left, right: left, top: top, bottom: top + lineObj.height}\n  }\n\n  // Positions returned by coordsChar contain some extra information.\n  // xRel is the relative x position of the input coordinates compared\n  // to the found position (so xRel > 0 means the coordinates are to\n  // the right of the character position, for example). When outside\n  // is true, that means the coordinates lie outside the line's\n  // vertical range.\n  function PosWithInfo(line, ch, sticky, outside, xRel) {\n    var pos = Pos(line, ch, sticky);\n    pos.xRel = xRel;\n    if (outside) { pos.outside = outside; }\n    return pos\n  }\n\n  // Compute the character position closest to the given coordinates.\n  // Input must be lineSpace-local (\"div\" coordinate system).\n  function coordsChar(cm, x, y) {\n    var doc = cm.doc;\n    y += cm.display.viewOffset;\n    if (y < 0) { return PosWithInfo(doc.first, 0, null, -1, -1) }\n    var lineN = lineAtHeight(doc, y), last = doc.first + doc.size - 1;\n    if (lineN > last)\n      { return PosWithInfo(doc.first + doc.size - 1, getLine(doc, last).text.length, null, 1, 1) }\n    if (x < 0) { x = 0; }\n\n    var lineObj = getLine(doc, lineN);\n    for (;;) {\n      var found = coordsCharInner(cm, lineObj, lineN, x, y);\n      var collapsed = collapsedSpanAround(lineObj, found.ch + (found.xRel > 0 || found.outside > 0 ? 1 : 0));\n      if (!collapsed) { return found }\n      var rangeEnd = collapsed.find(1);\n      if (rangeEnd.line == lineN) { return rangeEnd }\n      lineObj = getLine(doc, lineN = rangeEnd.line);\n    }\n  }\n\n  function wrappedLineExtent(cm, lineObj, preparedMeasure, y) {\n    y -= widgetTopHeight(lineObj);\n    var end = lineObj.text.length;\n    var begin = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch - 1).bottom <= y; }, end, 0);\n    end = findFirst(function (ch) { return measureCharPrepared(cm, preparedMeasure, ch).top > y; }, begin, end);\n    return {begin: begin, end: end}\n  }\n\n  function wrappedLineExtentChar(cm, lineObj, preparedMeasure, target) {\n    if (!preparedMeasure) { preparedMeasure = prepareMeasureForLine(cm, lineObj); }\n    var targetTop = intoCoordSystem(cm, lineObj, measureCharPrepared(cm, preparedMeasure, target), \"line\").top;\n    return wrappedLineExtent(cm, lineObj, preparedMeasure, targetTop)\n  }\n\n  // Returns true if the given side of a box is after the given\n  // coordinates, in top-to-bottom, left-to-right order.\n  function boxIsAfter(box, x, y, left) {\n    return box.bottom <= y ? false : box.top > y ? true : (left ? box.left : box.right) > x\n  }\n\n  function coordsCharInner(cm, lineObj, lineNo, x, y) {\n    // Move y into line-local coordinate space\n    y -= heightAtLine(lineObj);\n    var preparedMeasure = prepareMeasureForLine(cm, lineObj);\n    // When directly calling `measureCharPrepared`, we have to adjust\n    // for the widgets at this line.\n    var widgetHeight = widgetTopHeight(lineObj);\n    var begin = 0, end = lineObj.text.length, ltr = true;\n\n    var order = getOrder(lineObj, cm.doc.direction);\n    // If the line isn't plain left-to-right text, first figure out\n    // which bidi section the coordinates fall into.\n    if (order) {\n      var part = (cm.options.lineWrapping ? coordsBidiPartWrapped : coordsBidiPart)\n                   (cm, lineObj, lineNo, preparedMeasure, order, x, y);\n      ltr = part.level != 1;\n      // The awkward -1 offsets are needed because findFirst (called\n      // on these below) will treat its first bound as inclusive,\n      // second as exclusive, but we want to actually address the\n      // characters in the part's range\n      begin = ltr ? part.from : part.to - 1;\n      end = ltr ? part.to : part.from - 1;\n    }\n\n    // A binary search to find the first character whose bounding box\n    // starts after the coordinates. If we run across any whose box wrap\n    // the coordinates, store that.\n    var chAround = null, boxAround = null;\n    var ch = findFirst(function (ch) {\n      var box = measureCharPrepared(cm, preparedMeasure, ch);\n      box.top += widgetHeight; box.bottom += widgetHeight;\n      if (!boxIsAfter(box, x, y, false)) { return false }\n      if (box.top <= y && box.left <= x) {\n        chAround = ch;\n        boxAround = box;\n      }\n      return true\n    }, begin, end);\n\n    var baseX, sticky, outside = false;\n    // If a box around the coordinates was found, use that\n    if (boxAround) {\n      // Distinguish coordinates nearer to the left or right side of the box\n      var atLeft = x - boxAround.left < boxAround.right - x, atStart = atLeft == ltr;\n      ch = chAround + (atStart ? 0 : 1);\n      sticky = atStart ? \"after\" : \"before\";\n      baseX = atLeft ? boxAround.left : boxAround.right;\n    } else {\n      // (Adjust for extended bound, if necessary.)\n      if (!ltr && (ch == end || ch == begin)) { ch++; }\n      // To determine which side to associate with, get the box to the\n      // left of the character and compare it's vertical position to the\n      // coordinates\n      sticky = ch == 0 ? \"after\" : ch == lineObj.text.length ? \"before\" :\n        (measureCharPrepared(cm, preparedMeasure, ch - (ltr ? 1 : 0)).bottom + widgetHeight <= y) == ltr ?\n        \"after\" : \"before\";\n      // Now get accurate coordinates for this place, in order to get a\n      // base X position\n      var coords = cursorCoords(cm, Pos(lineNo, ch, sticky), \"line\", lineObj, preparedMeasure);\n      baseX = coords.left;\n      outside = y < coords.top ? -1 : y >= coords.bottom ? 1 : 0;\n    }\n\n    ch = skipExtendingChars(lineObj.text, ch, 1);\n    return PosWithInfo(lineNo, ch, sticky, outside, x - baseX)\n  }\n\n  function coordsBidiPart(cm, lineObj, lineNo, preparedMeasure, order, x, y) {\n    // Bidi parts are sorted left-to-right, and in a non-line-wrapping\n    // situation, we can take this ordering to correspond to the visual\n    // ordering. This finds the first part whose end is after the given\n    // coordinates.\n    var index = findFirst(function (i) {\n      var part = order[i], ltr = part.level != 1;\n      return boxIsAfter(cursorCoords(cm, Pos(lineNo, ltr ? part.to : part.from, ltr ? \"before\" : \"after\"),\n                                     \"line\", lineObj, preparedMeasure), x, y, true)\n    }, 0, order.length - 1);\n    var part = order[index];\n    // If this isn't the first part, the part's start is also after\n    // the coordinates, and the coordinates aren't on the same line as\n    // that start, move one part back.\n    if (index > 0) {\n      var ltr = part.level != 1;\n      var start = cursorCoords(cm, Pos(lineNo, ltr ? part.from : part.to, ltr ? \"after\" : \"before\"),\n                               \"line\", lineObj, preparedMeasure);\n      if (boxIsAfter(start, x, y, true) && start.top > y)\n        { part = order[index - 1]; }\n    }\n    return part\n  }\n\n  function coordsBidiPartWrapped(cm, lineObj, _lineNo, preparedMeasure, order, x, y) {\n    // In a wrapped line, rtl text on wrapping boundaries can do things\n    // that don't correspond to the ordering in our `order` array at\n    // all, so a binary search doesn't work, and we want to return a\n    // part that only spans one line so that the binary search in\n    // coordsCharInner is safe. As such, we first find the extent of the\n    // wrapped line, and then do a flat search in which we discard any\n    // spans that aren't on the line.\n    var ref = wrappedLineExtent(cm, lineObj, preparedMeasure, y);\n    var begin = ref.begin;\n    var end = ref.end;\n    if (/\\s/.test(lineObj.text.charAt(end - 1))) { end--; }\n    var part = null, closestDist = null;\n    for (var i = 0; i < order.length; i++) {\n      var p = order[i];\n      if (p.from >= end || p.to <= begin) { continue }\n      var ltr = p.level != 1;\n      var endX = measureCharPrepared(cm, preparedMeasure, ltr ? Math.min(end, p.to) - 1 : Math.max(begin, p.from)).right;\n      // Weigh against spans ending before this, so that they are only\n      // picked if nothing ends after\n      var dist = endX < x ? x - endX + 1e9 : endX - x;\n      if (!part || closestDist > dist) {\n        part = p;\n        closestDist = dist;\n      }\n    }\n    if (!part) { part = order[order.length - 1]; }\n    // Clip the part to the wrapped line.\n    if (part.from < begin) { part = {from: begin, to: part.to, level: part.level}; }\n    if (part.to > end) { part = {from: part.from, to: end, level: part.level}; }\n    return part\n  }\n\n  var measureText;\n  // Compute the default text height.\n  function textHeight(display) {\n    if (display.cachedTextHeight != null) { return display.cachedTextHeight }\n    if (measureText == null) {\n      measureText = elt(\"pre\", null, \"CodeMirror-line-like\");\n      // Measure a bunch of lines, for browsers that compute\n      // fractional heights.\n      for (var i = 0; i < 49; ++i) {\n        measureText.appendChild(document.createTextNode(\"x\"));\n        measureText.appendChild(elt(\"br\"));\n      }\n      measureText.appendChild(document.createTextNode(\"x\"));\n    }\n    removeChildrenAndAdd(display.measure, measureText);\n    var height = measureText.offsetHeight / 50;\n    if (height > 3) { display.cachedTextHeight = height; }\n    removeChildren(display.measure);\n    return height || 1\n  }\n\n  // Compute the default character width.\n  function charWidth(display) {\n    if (display.cachedCharWidth != null) { return display.cachedCharWidth }\n    var anchor = elt(\"span\", \"xxxxxxxxxx\");\n    var pre = elt(\"pre\", [anchor], \"CodeMirror-line-like\");\n    removeChildrenAndAdd(display.measure, pre);\n    var rect = anchor.getBoundingClientRect(), width = (rect.right - rect.left) / 10;\n    if (width > 2) { display.cachedCharWidth = width; }\n    return width || 10\n  }\n\n  // Do a bulk-read of the DOM positions and sizes needed to draw the\n  // view, so that we don't interleave reading and writing to the DOM.\n  function getDimensions(cm) {\n    var d = cm.display, left = {}, width = {};\n    var gutterLeft = d.gutters.clientLeft;\n    for (var n = d.gutters.firstChild, i = 0; n; n = n.nextSibling, ++i) {\n      var id = cm.display.gutterSpecs[i].className;\n      left[id] = n.offsetLeft + n.clientLeft + gutterLeft;\n      width[id] = n.clientWidth;\n    }\n    return {fixedPos: compensateForHScroll(d),\n            gutterTotalWidth: d.gutters.offsetWidth,\n            gutterLeft: left,\n            gutterWidth: width,\n            wrapperWidth: d.wrapper.clientWidth}\n  }\n\n  // Computes display.scroller.scrollLeft + display.gutters.offsetWidth,\n  // but using getBoundingClientRect to get a sub-pixel-accurate\n  // result.\n  function compensateForHScroll(display) {\n    return display.scroller.getBoundingClientRect().left - display.sizer.getBoundingClientRect().left\n  }\n\n  // Returns a function that estimates the height of a line, to use as\n  // first approximation until the line becomes visible (and is thus\n  // properly measurable).\n  function estimateHeight(cm) {\n    var th = textHeight(cm.display), wrapping = cm.options.lineWrapping;\n    var perLine = wrapping && Math.max(5, cm.display.scroller.clientWidth / charWidth(cm.display) - 3);\n    return function (line) {\n      if (lineIsHidden(cm.doc, line)) { return 0 }\n\n      var widgetsHeight = 0;\n      if (line.widgets) { for (var i = 0; i < line.widgets.length; i++) {\n        if (line.widgets[i].height) { widgetsHeight += line.widgets[i].height; }\n      } }\n\n      if (wrapping)\n        { return widgetsHeight + (Math.ceil(line.text.length / perLine) || 1) * th }\n      else\n        { return widgetsHeight + th }\n    }\n  }\n\n  function estimateLineHeights(cm) {\n    var doc = cm.doc, est = estimateHeight(cm);\n    doc.iter(function (line) {\n      var estHeight = est(line);\n      if (estHeight != line.height) { updateLineHeight(line, estHeight); }\n    });\n  }\n\n  // Given a mouse event, find the corresponding position. If liberal\n  // is false, it checks whether a gutter or scrollbar was clicked,\n  // and returns null if it was. forRect is used by rectangular\n  // selections, and tries to estimate a character position even for\n  // coordinates beyond the right of the text.\n  function posFromMouse(cm, e, liberal, forRect) {\n    var display = cm.display;\n    if (!liberal && e_target(e).getAttribute(\"cm-not-content\") == \"true\") { return null }\n\n    var x, y, space = display.lineSpace.getBoundingClientRect();\n    // Fails unpredictably on IE[67] when mouse is dragged around quickly.\n    try { x = e.clientX - space.left; y = e.clientY - space.top; }\n    catch (e$1) { return null }\n    var coords = coordsChar(cm, x, y), line;\n    if (forRect && coords.xRel > 0 && (line = getLine(cm.doc, coords.line).text).length == coords.ch) {\n      var colDiff = countColumn(line, line.length, cm.options.tabSize) - line.length;\n      coords = Pos(coords.line, Math.max(0, Math.round((x - paddingH(cm.display).left) / charWidth(cm.display)) - colDiff));\n    }\n    return coords\n  }\n\n  // Find the view element corresponding to a given line. Return null\n  // when the line isn't visible.\n  function findViewIndex(cm, n) {\n    if (n >= cm.display.viewTo) { return null }\n    n -= cm.display.viewFrom;\n    if (n < 0) { return null }\n    var view = cm.display.view;\n    for (var i = 0; i < view.length; i++) {\n      n -= view[i].size;\n      if (n < 0) { return i }\n    }\n  }\n\n  // Updates the display.view data structure for a given change to the\n  // document. From and to are in pre-change coordinates. Lendiff is\n  // the amount of lines added or subtracted by the change. This is\n  // used for changes that span multiple lines, or change the way\n  // lines are divided into visual lines. regLineChange (below)\n  // registers single-line changes.\n  function regChange(cm, from, to, lendiff) {\n    if (from == null) { from = cm.doc.first; }\n    if (to == null) { to = cm.doc.first + cm.doc.size; }\n    if (!lendiff) { lendiff = 0; }\n\n    var display = cm.display;\n    if (lendiff && to < display.viewTo &&\n        (display.updateLineNumbers == null || display.updateLineNumbers > from))\n      { display.updateLineNumbers = from; }\n\n    cm.curOp.viewChanged = true;\n\n    if (from >= display.viewTo) { // Change after\n      if (sawCollapsedSpans && visualLineNo(cm.doc, from) < display.viewTo)\n        { resetView(cm); }\n    } else if (to <= display.viewFrom) { // Change before\n      if (sawCollapsedSpans && visualLineEndNo(cm.doc, to + lendiff) > display.viewFrom) {\n        resetView(cm);\n      } else {\n        display.viewFrom += lendiff;\n        display.viewTo += lendiff;\n      }\n    } else if (from <= display.viewFrom && to >= display.viewTo) { // Full overlap\n      resetView(cm);\n    } else if (from <= display.viewFrom) { // Top overlap\n      var cut = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cut) {\n        display.view = display.view.slice(cut.index);\n        display.viewFrom = cut.lineN;\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    } else if (to >= display.viewTo) { // Bottom overlap\n      var cut$1 = viewCuttingPoint(cm, from, from, -1);\n      if (cut$1) {\n        display.view = display.view.slice(0, cut$1.index);\n        display.viewTo = cut$1.lineN;\n      } else {\n        resetView(cm);\n      }\n    } else { // Gap in the middle\n      var cutTop = viewCuttingPoint(cm, from, from, -1);\n      var cutBot = viewCuttingPoint(cm, to, to + lendiff, 1);\n      if (cutTop && cutBot) {\n        display.view = display.view.slice(0, cutTop.index)\n          .concat(buildViewArray(cm, cutTop.lineN, cutBot.lineN))\n          .concat(display.view.slice(cutBot.index));\n        display.viewTo += lendiff;\n      } else {\n        resetView(cm);\n      }\n    }\n\n    var ext = display.externalMeasured;\n    if (ext) {\n      if (to < ext.lineN)\n        { ext.lineN += lendiff; }\n      else if (from < ext.lineN + ext.size)\n        { display.externalMeasured = null; }\n    }\n  }\n\n  // Register a change to a single line. Type must be one of \"text\",\n  // \"gutter\", \"class\", \"widget\"\n  function regLineChange(cm, line, type) {\n    cm.curOp.viewChanged = true;\n    var display = cm.display, ext = cm.display.externalMeasured;\n    if (ext && line >= ext.lineN && line < ext.lineN + ext.size)\n      { display.externalMeasured = null; }\n\n    if (line < display.viewFrom || line >= display.viewTo) { return }\n    var lineView = display.view[findViewIndex(cm, line)];\n    if (lineView.node == null) { return }\n    var arr = lineView.changes || (lineView.changes = []);\n    if (indexOf(arr, type) == -1) { arr.push(type); }\n  }\n\n  // Clear the view.\n  function resetView(cm) {\n    cm.display.viewFrom = cm.display.viewTo = cm.doc.first;\n    cm.display.view = [];\n    cm.display.viewOffset = 0;\n  }\n\n  function viewCuttingPoint(cm, oldN, newN, dir) {\n    var index = findViewIndex(cm, oldN), diff, view = cm.display.view;\n    if (!sawCollapsedSpans || newN == cm.doc.first + cm.doc.size)\n      { return {index: index, lineN: newN} }\n    var n = cm.display.viewFrom;\n    for (var i = 0; i < index; i++)\n      { n += view[i].size; }\n    if (n != oldN) {\n      if (dir > 0) {\n        if (index == view.length - 1) { return null }\n        diff = (n + view[index].size) - oldN;\n        index++;\n      } else {\n        diff = n - oldN;\n      }\n      oldN += diff; newN += diff;\n    }\n    while (visualLineNo(cm.doc, newN) != newN) {\n      if (index == (dir < 0 ? 0 : view.length - 1)) { return null }\n      newN += dir * view[index - (dir < 0 ? 1 : 0)].size;\n      index += dir;\n    }\n    return {index: index, lineN: newN}\n  }\n\n  // Force the view to cover a given range, adding empty view element\n  // or clipping off existing ones as needed.\n  function adjustView(cm, from, to) {\n    var display = cm.display, view = display.view;\n    if (view.length == 0 || from >= display.viewTo || to <= display.viewFrom) {\n      display.view = buildViewArray(cm, from, to);\n      display.viewFrom = from;\n    } else {\n      if (display.viewFrom > from)\n        { display.view = buildViewArray(cm, from, display.viewFrom).concat(display.view); }\n      else if (display.viewFrom < from)\n        { display.view = display.view.slice(findViewIndex(cm, from)); }\n      display.viewFrom = from;\n      if (display.viewTo < to)\n        { display.view = display.view.concat(buildViewArray(cm, display.viewTo, to)); }\n      else if (display.viewTo > to)\n        { display.view = display.view.slice(0, findViewIndex(cm, to)); }\n    }\n    display.viewTo = to;\n  }\n\n  // Count the number of lines in the view whose DOM representation is\n  // out of date (or nonexistent).\n  function countDirtyView(cm) {\n    var view = cm.display.view, dirty = 0;\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (!lineView.hidden && (!lineView.node || lineView.changes)) { ++dirty; }\n    }\n    return dirty\n  }\n\n  function updateSelection(cm) {\n    cm.display.input.showSelection(cm.display.input.prepareSelection());\n  }\n\n  function prepareSelection(cm, primary) {\n    if ( primary === void 0 ) primary = true;\n\n    var doc = cm.doc, result = {};\n    var curFragment = result.cursors = document.createDocumentFragment();\n    var selFragment = result.selection = document.createDocumentFragment();\n\n    var customCursor = cm.options.$customCursor;\n    if (customCursor) { primary = true; }\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      if (!primary && i == doc.sel.primIndex) { continue }\n      var range = doc.sel.ranges[i];\n      if (range.from().line >= cm.display.viewTo || range.to().line < cm.display.viewFrom) { continue }\n      var collapsed = range.empty();\n      if (customCursor) {\n        var head = customCursor(cm, range);\n        if (head) { drawSelectionCursor(cm, head, curFragment); }\n      } else if (collapsed || cm.options.showCursorWhenSelecting) {\n        drawSelectionCursor(cm, range.head, curFragment);\n      }\n      if (!collapsed)\n        { drawSelectionRange(cm, range, selFragment); }\n    }\n    return result\n  }\n\n  // Draws a cursor for the given range\n  function drawSelectionCursor(cm, head, output) {\n    var pos = cursorCoords(cm, head, \"div\", null, null, !cm.options.singleCursorHeightPerLine);\n\n    var cursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor\"));\n    cursor.style.left = pos.left + \"px\";\n    cursor.style.top = pos.top + \"px\";\n    cursor.style.height = Math.max(0, pos.bottom - pos.top) * cm.options.cursorHeight + \"px\";\n\n    if (/\\bcm-fat-cursor\\b/.test(cm.getWrapperElement().className)) {\n      var charPos = charCoords(cm, head, \"div\", null, null);\n      var width = charPos.right - charPos.left;\n      cursor.style.width = (width > 0 ? width : cm.defaultCharWidth()) + \"px\";\n    }\n\n    if (pos.other) {\n      // Secondary cursor, shown when on a 'jump' in bi-directional text\n      var otherCursor = output.appendChild(elt(\"div\", \"\\u00a0\", \"CodeMirror-cursor CodeMirror-secondarycursor\"));\n      otherCursor.style.display = \"\";\n      otherCursor.style.left = pos.other.left + \"px\";\n      otherCursor.style.top = pos.other.top + \"px\";\n      otherCursor.style.height = (pos.other.bottom - pos.other.top) * .85 + \"px\";\n    }\n  }\n\n  function cmpCoords(a, b) { return a.top - b.top || a.left - b.left }\n\n  // Draws the given range as a highlighted selection\n  function drawSelectionRange(cm, range, output) {\n    var display = cm.display, doc = cm.doc;\n    var fragment = document.createDocumentFragment();\n    var padding = paddingH(cm.display), leftSide = padding.left;\n    var rightSide = Math.max(display.sizerWidth, displayWidth(cm) - display.sizer.offsetLeft) - padding.right;\n    var docLTR = doc.direction == \"ltr\";\n\n    function add(left, top, width, bottom) {\n      if (top < 0) { top = 0; }\n      top = Math.round(top);\n      bottom = Math.round(bottom);\n      fragment.appendChild(elt(\"div\", null, \"CodeMirror-selected\", (\"position: absolute; left: \" + left + \"px;\\n                             top: \" + top + \"px; width: \" + (width == null ? rightSide - left : width) + \"px;\\n                             height: \" + (bottom - top) + \"px\")));\n    }\n\n    function drawForLine(line, fromArg, toArg) {\n      var lineObj = getLine(doc, line);\n      var lineLen = lineObj.text.length;\n      var start, end;\n      function coords(ch, bias) {\n        return charCoords(cm, Pos(line, ch), \"div\", lineObj, bias)\n      }\n\n      function wrapX(pos, dir, side) {\n        var extent = wrappedLineExtentChar(cm, lineObj, null, pos);\n        var prop = (dir == \"ltr\") == (side == \"after\") ? \"left\" : \"right\";\n        var ch = side == \"after\" ? extent.begin : extent.end - (/\\s/.test(lineObj.text.charAt(extent.end - 1)) ? 2 : 1);\n        return coords(ch, prop)[prop]\n      }\n\n      var order = getOrder(lineObj, doc.direction);\n      iterateBidiSections(order, fromArg || 0, toArg == null ? lineLen : toArg, function (from, to, dir, i) {\n        var ltr = dir == \"ltr\";\n        var fromPos = coords(from, ltr ? \"left\" : \"right\");\n        var toPos = coords(to - 1, ltr ? \"right\" : \"left\");\n\n        var openStart = fromArg == null && from == 0, openEnd = toArg == null && to == lineLen;\n        var first = i == 0, last = !order || i == order.length - 1;\n        if (toPos.top - fromPos.top <= 3) { // Single line\n          var openLeft = (docLTR ? openStart : openEnd) && first;\n          var openRight = (docLTR ? openEnd : openStart) && last;\n          var left = openLeft ? leftSide : (ltr ? fromPos : toPos).left;\n          var right = openRight ? rightSide : (ltr ? toPos : fromPos).right;\n          add(left, fromPos.top, right - left, fromPos.bottom);\n        } else { // Multiple lines\n          var topLeft, topRight, botLeft, botRight;\n          if (ltr) {\n            topLeft = docLTR && openStart && first ? leftSide : fromPos.left;\n            topRight = docLTR ? rightSide : wrapX(from, dir, \"before\");\n            botLeft = docLTR ? leftSide : wrapX(to, dir, \"after\");\n            botRight = docLTR && openEnd && last ? rightSide : toPos.right;\n          } else {\n            topLeft = !docLTR ? leftSide : wrapX(from, dir, \"before\");\n            topRight = !docLTR && openStart && first ? rightSide : fromPos.right;\n            botLeft = !docLTR && openEnd && last ? leftSide : toPos.left;\n            botRight = !docLTR ? rightSide : wrapX(to, dir, \"after\");\n          }\n          add(topLeft, fromPos.top, topRight - topLeft, fromPos.bottom);\n          if (fromPos.bottom < toPos.top) { add(leftSide, fromPos.bottom, null, toPos.top); }\n          add(botLeft, toPos.top, botRight - botLeft, toPos.bottom);\n        }\n\n        if (!start || cmpCoords(fromPos, start) < 0) { start = fromPos; }\n        if (cmpCoords(toPos, start) < 0) { start = toPos; }\n        if (!end || cmpCoords(fromPos, end) < 0) { end = fromPos; }\n        if (cmpCoords(toPos, end) < 0) { end = toPos; }\n      });\n      return {start: start, end: end}\n    }\n\n    var sFrom = range.from(), sTo = range.to();\n    if (sFrom.line == sTo.line) {\n      drawForLine(sFrom.line, sFrom.ch, sTo.ch);\n    } else {\n      var fromLine = getLine(doc, sFrom.line), toLine = getLine(doc, sTo.line);\n      var singleVLine = visualLine(fromLine) == visualLine(toLine);\n      var leftEnd = drawForLine(sFrom.line, sFrom.ch, singleVLine ? fromLine.text.length + 1 : null).end;\n      var rightStart = drawForLine(sTo.line, singleVLine ? 0 : null, sTo.ch).start;\n      if (singleVLine) {\n        if (leftEnd.top < rightStart.top - 2) {\n          add(leftEnd.right, leftEnd.top, null, leftEnd.bottom);\n          add(leftSide, rightStart.top, rightStart.left, rightStart.bottom);\n        } else {\n          add(leftEnd.right, leftEnd.top, rightStart.left - leftEnd.right, leftEnd.bottom);\n        }\n      }\n      if (leftEnd.bottom < rightStart.top)\n        { add(leftSide, leftEnd.bottom, null, rightStart.top); }\n    }\n\n    output.appendChild(fragment);\n  }\n\n  // Cursor-blinking\n  function restartBlink(cm) {\n    if (!cm.state.focused) { return }\n    var display = cm.display;\n    clearInterval(display.blinker);\n    var on = true;\n    display.cursorDiv.style.visibility = \"\";\n    if (cm.options.cursorBlinkRate > 0)\n      { display.blinker = setInterval(function () {\n        if (!cm.hasFocus()) { onBlur(cm); }\n        display.cursorDiv.style.visibility = (on = !on) ? \"\" : \"hidden\";\n      }, cm.options.cursorBlinkRate); }\n    else if (cm.options.cursorBlinkRate < 0)\n      { display.cursorDiv.style.visibility = \"hidden\"; }\n  }\n\n  function ensureFocus(cm) {\n    if (!cm.hasFocus()) {\n      cm.display.input.focus();\n      if (!cm.state.focused) { onFocus(cm); }\n    }\n  }\n\n  function delayBlurEvent(cm) {\n    cm.state.delayingBlurEvent = true;\n    setTimeout(function () { if (cm.state.delayingBlurEvent) {\n      cm.state.delayingBlurEvent = false;\n      if (cm.state.focused) { onBlur(cm); }\n    } }, 100);\n  }\n\n  function onFocus(cm, e) {\n    if (cm.state.delayingBlurEvent && !cm.state.draggingText) { cm.state.delayingBlurEvent = false; }\n\n    if (cm.options.readOnly == \"nocursor\") { return }\n    if (!cm.state.focused) {\n      signal(cm, \"focus\", cm, e);\n      cm.state.focused = true;\n      addClass(cm.display.wrapper, \"CodeMirror-focused\");\n      // This test prevents this from firing when a context\n      // menu is closed (since the input reset would kill the\n      // select-all detection hack)\n      if (!cm.curOp && cm.display.selForContextMenu != cm.doc.sel) {\n        cm.display.input.reset();\n        if (webkit) { setTimeout(function () { return cm.display.input.reset(true); }, 20); } // Issue #1730\n      }\n      cm.display.input.receivedFocus();\n    }\n    restartBlink(cm);\n  }\n  function onBlur(cm, e) {\n    if (cm.state.delayingBlurEvent) { return }\n\n    if (cm.state.focused) {\n      signal(cm, \"blur\", cm, e);\n      cm.state.focused = false;\n      rmClass(cm.display.wrapper, \"CodeMirror-focused\");\n    }\n    clearInterval(cm.display.blinker);\n    setTimeout(function () { if (!cm.state.focused) { cm.display.shift = false; } }, 150);\n  }\n\n  // Read the actual heights of the rendered lines, and update their\n  // stored heights to match.\n  function updateHeightsInViewport(cm) {\n    var display = cm.display;\n    var prevBottom = display.lineDiv.offsetTop;\n    var viewTop = Math.max(0, display.scroller.getBoundingClientRect().top);\n    var oldHeight = display.lineDiv.getBoundingClientRect().top;\n    var mustScroll = 0;\n    for (var i = 0; i < display.view.length; i++) {\n      var cur = display.view[i], wrapping = cm.options.lineWrapping;\n      var height = (void 0), width = 0;\n      if (cur.hidden) { continue }\n      oldHeight += cur.line.height;\n      if (ie && ie_version < 8) {\n        var bot = cur.node.offsetTop + cur.node.offsetHeight;\n        height = bot - prevBottom;\n        prevBottom = bot;\n      } else {\n        var box = cur.node.getBoundingClientRect();\n        height = box.bottom - box.top;\n        // Check that lines don't extend past the right of the current\n        // editor width\n        if (!wrapping && cur.text.firstChild)\n          { width = cur.text.firstChild.getBoundingClientRect().right - box.left - 1; }\n      }\n      var diff = cur.line.height - height;\n      if (diff > .005 || diff < -.005) {\n        if (oldHeight < viewTop) { mustScroll -= diff; }\n        updateLineHeight(cur.line, height);\n        updateWidgetHeight(cur.line);\n        if (cur.rest) { for (var j = 0; j < cur.rest.length; j++)\n          { updateWidgetHeight(cur.rest[j]); } }\n      }\n      if (width > cm.display.sizerWidth) {\n        var chWidth = Math.ceil(width / charWidth(cm.display));\n        if (chWidth > cm.display.maxLineLength) {\n          cm.display.maxLineLength = chWidth;\n          cm.display.maxLine = cur.line;\n          cm.display.maxLineChanged = true;\n        }\n      }\n    }\n    if (Math.abs(mustScroll) > 2) { display.scroller.scrollTop += mustScroll; }\n  }\n\n  // Read and store the height of line widgets associated with the\n  // given line.\n  function updateWidgetHeight(line) {\n    if (line.widgets) { for (var i = 0; i < line.widgets.length; ++i) {\n      var w = line.widgets[i], parent = w.node.parentNode;\n      if (parent) { w.height = parent.offsetHeight; }\n    } }\n  }\n\n  // Compute the lines that are visible in a given viewport (defaults\n  // the the current scroll position). viewport may contain top,\n  // height, and ensure (see op.scrollToPos) properties.\n  function visibleLines(display, doc, viewport) {\n    var top = viewport && viewport.top != null ? Math.max(0, viewport.top) : display.scroller.scrollTop;\n    top = Math.floor(top - paddingTop(display));\n    var bottom = viewport && viewport.bottom != null ? viewport.bottom : top + display.wrapper.clientHeight;\n\n    var from = lineAtHeight(doc, top), to = lineAtHeight(doc, bottom);\n    // Ensure is a {from: {line, ch}, to: {line, ch}} object, and\n    // forces those lines into the viewport (if possible).\n    if (viewport && viewport.ensure) {\n      var ensureFrom = viewport.ensure.from.line, ensureTo = viewport.ensure.to.line;\n      if (ensureFrom < from) {\n        from = ensureFrom;\n        to = lineAtHeight(doc, heightAtLine(getLine(doc, ensureFrom)) + display.wrapper.clientHeight);\n      } else if (Math.min(ensureTo, doc.lastLine()) >= to) {\n        from = lineAtHeight(doc, heightAtLine(getLine(doc, ensureTo)) - display.wrapper.clientHeight);\n        to = ensureTo;\n      }\n    }\n    return {from: from, to: Math.max(to, from + 1)}\n  }\n\n  // SCROLLING THINGS INTO VIEW\n\n  // If an editor sits on the top or bottom of the window, partially\n  // scrolled out of view, this ensures that the cursor is visible.\n  function maybeScrollWindow(cm, rect) {\n    if (signalDOMEvent(cm, \"scrollCursorIntoView\")) { return }\n\n    var display = cm.display, box = display.sizer.getBoundingClientRect(), doScroll = null;\n    var doc = display.wrapper.ownerDocument;\n    if (rect.top + box.top < 0) { doScroll = true; }\n    else if (rect.bottom + box.top > (doc.defaultView.innerHeight || doc.documentElement.clientHeight)) { doScroll = false; }\n    if (doScroll != null && !phantom) {\n      var scrollNode = elt(\"div\", \"\\u200b\", null, (\"position: absolute;\\n                         top: \" + (rect.top - display.viewOffset - paddingTop(cm.display)) + \"px;\\n                         height: \" + (rect.bottom - rect.top + scrollGap(cm) + display.barHeight) + \"px;\\n                         left: \" + (rect.left) + \"px; width: \" + (Math.max(2, rect.right - rect.left)) + \"px;\"));\n      cm.display.lineSpace.appendChild(scrollNode);\n      scrollNode.scrollIntoView(doScroll);\n      cm.display.lineSpace.removeChild(scrollNode);\n    }\n  }\n\n  // Scroll a given position into view (immediately), verifying that\n  // it actually became visible (as line heights are accurately\n  // measured, the position of something may 'drift' during drawing).\n  function scrollPosIntoView(cm, pos, end, margin) {\n    if (margin == null) { margin = 0; }\n    var rect;\n    if (!cm.options.lineWrapping && pos == end) {\n      // Set pos and end to the cursor positions around the character pos sticks to\n      // If pos.sticky == \"before\", that is around pos.ch - 1, otherwise around pos.ch\n      // If pos == Pos(_, 0, \"before\"), pos and end are unchanged\n      end = pos.sticky == \"before\" ? Pos(pos.line, pos.ch + 1, \"before\") : pos;\n      pos = pos.ch ? Pos(pos.line, pos.sticky == \"before\" ? pos.ch - 1 : pos.ch, \"after\") : pos;\n    }\n    for (var limit = 0; limit < 5; limit++) {\n      var changed = false;\n      var coords = cursorCoords(cm, pos);\n      var endCoords = !end || end == pos ? coords : cursorCoords(cm, end);\n      rect = {left: Math.min(coords.left, endCoords.left),\n              top: Math.min(coords.top, endCoords.top) - margin,\n              right: Math.max(coords.left, endCoords.left),\n              bottom: Math.max(coords.bottom, endCoords.bottom) + margin};\n      var scrollPos = calculateScrollPos(cm, rect);\n      var startTop = cm.doc.scrollTop, startLeft = cm.doc.scrollLeft;\n      if (scrollPos.scrollTop != null) {\n        updateScrollTop(cm, scrollPos.scrollTop);\n        if (Math.abs(cm.doc.scrollTop - startTop) > 1) { changed = true; }\n      }\n      if (scrollPos.scrollLeft != null) {\n        setScrollLeft(cm, scrollPos.scrollLeft);\n        if (Math.abs(cm.doc.scrollLeft - startLeft) > 1) { changed = true; }\n      }\n      if (!changed) { break }\n    }\n    return rect\n  }\n\n  // Scroll a given set of coordinates into view (immediately).\n  function scrollIntoView(cm, rect) {\n    var scrollPos = calculateScrollPos(cm, rect);\n    if (scrollPos.scrollTop != null) { updateScrollTop(cm, scrollPos.scrollTop); }\n    if (scrollPos.scrollLeft != null) { setScrollLeft(cm, scrollPos.scrollLeft); }\n  }\n\n  // Calculate a new scroll position needed to scroll the given\n  // rectangle into view. Returns an object with scrollTop and\n  // scrollLeft properties. When these are undefined, the\n  // vertical/horizontal position does not need to be adjusted.\n  function calculateScrollPos(cm, rect) {\n    var display = cm.display, snapMargin = textHeight(cm.display);\n    if (rect.top < 0) { rect.top = 0; }\n    var screentop = cm.curOp && cm.curOp.scrollTop != null ? cm.curOp.scrollTop : display.scroller.scrollTop;\n    var screen = displayHeight(cm), result = {};\n    if (rect.bottom - rect.top > screen) { rect.bottom = rect.top + screen; }\n    var docBottom = cm.doc.height + paddingVert(display);\n    var atTop = rect.top < snapMargin, atBottom = rect.bottom > docBottom - snapMargin;\n    if (rect.top < screentop) {\n      result.scrollTop = atTop ? 0 : rect.top;\n    } else if (rect.bottom > screentop + screen) {\n      var newTop = Math.min(rect.top, (atBottom ? docBottom : rect.bottom) - screen);\n      if (newTop != screentop) { result.scrollTop = newTop; }\n    }\n\n    var gutterSpace = cm.options.fixedGutter ? 0 : display.gutters.offsetWidth;\n    var screenleft = cm.curOp && cm.curOp.scrollLeft != null ? cm.curOp.scrollLeft : display.scroller.scrollLeft - gutterSpace;\n    var screenw = displayWidth(cm) - display.gutters.offsetWidth;\n    var tooWide = rect.right - rect.left > screenw;\n    if (tooWide) { rect.right = rect.left + screenw; }\n    if (rect.left < 10)\n      { result.scrollLeft = 0; }\n    else if (rect.left < screenleft)\n      { result.scrollLeft = Math.max(0, rect.left + gutterSpace - (tooWide ? 0 : 10)); }\n    else if (rect.right > screenw + screenleft - 3)\n      { result.scrollLeft = rect.right + (tooWide ? 0 : 10) - screenw; }\n    return result\n  }\n\n  // Store a relative adjustment to the scroll position in the current\n  // operation (to be applied when the operation finishes).\n  function addToScrollTop(cm, top) {\n    if (top == null) { return }\n    resolveScrollToPos(cm);\n    cm.curOp.scrollTop = (cm.curOp.scrollTop == null ? cm.doc.scrollTop : cm.curOp.scrollTop) + top;\n  }\n\n  // Make sure that at the end of the operation the current cursor is\n  // shown.\n  function ensureCursorVisible(cm) {\n    resolveScrollToPos(cm);\n    var cur = cm.getCursor();\n    cm.curOp.scrollToPos = {from: cur, to: cur, margin: cm.options.cursorScrollMargin};\n  }\n\n  function scrollToCoords(cm, x, y) {\n    if (x != null || y != null) { resolveScrollToPos(cm); }\n    if (x != null) { cm.curOp.scrollLeft = x; }\n    if (y != null) { cm.curOp.scrollTop = y; }\n  }\n\n  function scrollToRange(cm, range) {\n    resolveScrollToPos(cm);\n    cm.curOp.scrollToPos = range;\n  }\n\n  // When an operation has its scrollToPos property set, and another\n  // scroll action is applied before the end of the operation, this\n  // 'simulates' scrolling that position into view in a cheap way, so\n  // that the effect of intermediate scroll commands is not ignored.\n  function resolveScrollToPos(cm) {\n    var range = cm.curOp.scrollToPos;\n    if (range) {\n      cm.curOp.scrollToPos = null;\n      var from = estimateCoords(cm, range.from), to = estimateCoords(cm, range.to);\n      scrollToCoordsRange(cm, from, to, range.margin);\n    }\n  }\n\n  function scrollToCoordsRange(cm, from, to, margin) {\n    var sPos = calculateScrollPos(cm, {\n      left: Math.min(from.left, to.left),\n      top: Math.min(from.top, to.top) - margin,\n      right: Math.max(from.right, to.right),\n      bottom: Math.max(from.bottom, to.bottom) + margin\n    });\n    scrollToCoords(cm, sPos.scrollLeft, sPos.scrollTop);\n  }\n\n  // Sync the scrollable area and scrollbars, ensure the viewport\n  // covers the visible area.\n  function updateScrollTop(cm, val) {\n    if (Math.abs(cm.doc.scrollTop - val) < 2) { return }\n    if (!gecko) { updateDisplaySimple(cm, {top: val}); }\n    setScrollTop(cm, val, true);\n    if (gecko) { updateDisplaySimple(cm); }\n    startWorker(cm, 100);\n  }\n\n  function setScrollTop(cm, val, forceScroll) {\n    val = Math.max(0, Math.min(cm.display.scroller.scrollHeight - cm.display.scroller.clientHeight, val));\n    if (cm.display.scroller.scrollTop == val && !forceScroll) { return }\n    cm.doc.scrollTop = val;\n    cm.display.scrollbars.setScrollTop(val);\n    if (cm.display.scroller.scrollTop != val) { cm.display.scroller.scrollTop = val; }\n  }\n\n  // Sync scroller and scrollbar, ensure the gutter elements are\n  // aligned.\n  function setScrollLeft(cm, val, isScroller, forceScroll) {\n    val = Math.max(0, Math.min(val, cm.display.scroller.scrollWidth - cm.display.scroller.clientWidth));\n    if ((isScroller ? val == cm.doc.scrollLeft : Math.abs(cm.doc.scrollLeft - val) < 2) && !forceScroll) { return }\n    cm.doc.scrollLeft = val;\n    alignHorizontally(cm);\n    if (cm.display.scroller.scrollLeft != val) { cm.display.scroller.scrollLeft = val; }\n    cm.display.scrollbars.setScrollLeft(val);\n  }\n\n  // SCROLLBARS\n\n  // Prepare DOM reads needed to update the scrollbars. Done in one\n  // shot to minimize update/measure roundtrips.\n  function measureForScrollbars(cm) {\n    var d = cm.display, gutterW = d.gutters.offsetWidth;\n    var docH = Math.round(cm.doc.height + paddingVert(cm.display));\n    return {\n      clientHeight: d.scroller.clientHeight,\n      viewHeight: d.wrapper.clientHeight,\n      scrollWidth: d.scroller.scrollWidth, clientWidth: d.scroller.clientWidth,\n      viewWidth: d.wrapper.clientWidth,\n      barLeft: cm.options.fixedGutter ? gutterW : 0,\n      docHeight: docH,\n      scrollHeight: docH + scrollGap(cm) + d.barHeight,\n      nativeBarWidth: d.nativeBarWidth,\n      gutterWidth: gutterW\n    }\n  }\n\n  var NativeScrollbars = function(place, scroll, cm) {\n    this.cm = cm;\n    var vert = this.vert = elt(\"div\", [elt(\"div\", null, null, \"min-width: 1px\")], \"CodeMirror-vscrollbar\");\n    var horiz = this.horiz = elt(\"div\", [elt(\"div\", null, null, \"height: 100%; min-height: 1px\")], \"CodeMirror-hscrollbar\");\n    vert.tabIndex = horiz.tabIndex = -1;\n    place(vert); place(horiz);\n\n    on(vert, \"scroll\", function () {\n      if (vert.clientHeight) { scroll(vert.scrollTop, \"vertical\"); }\n    });\n    on(horiz, \"scroll\", function () {\n      if (horiz.clientWidth) { scroll(horiz.scrollLeft, \"horizontal\"); }\n    });\n\n    this.checkedZeroWidth = false;\n    // Need to set a minimum width to see the scrollbar on IE7 (but must not set it on IE8).\n    if (ie && ie_version < 8) { this.horiz.style.minHeight = this.vert.style.minWidth = \"18px\"; }\n  };\n\n  NativeScrollbars.prototype.update = function (measure) {\n    var needsH = measure.scrollWidth > measure.clientWidth + 1;\n    var needsV = measure.scrollHeight > measure.clientHeight + 1;\n    var sWidth = measure.nativeBarWidth;\n\n    if (needsV) {\n      this.vert.style.display = \"block\";\n      this.vert.style.bottom = needsH ? sWidth + \"px\" : \"0\";\n      var totalHeight = measure.viewHeight - (needsH ? sWidth : 0);\n      // A bug in IE8 can cause this value to be negative, so guard it.\n      this.vert.firstChild.style.height =\n        Math.max(0, measure.scrollHeight - measure.clientHeight + totalHeight) + \"px\";\n    } else {\n      this.vert.scrollTop = 0;\n      this.vert.style.display = \"\";\n      this.vert.firstChild.style.height = \"0\";\n    }\n\n    if (needsH) {\n      this.horiz.style.display = \"block\";\n      this.horiz.style.right = needsV ? sWidth + \"px\" : \"0\";\n      this.horiz.style.left = measure.barLeft + \"px\";\n      var totalWidth = measure.viewWidth - measure.barLeft - (needsV ? sWidth : 0);\n      this.horiz.firstChild.style.width =\n        Math.max(0, measure.scrollWidth - measure.clientWidth + totalWidth) + \"px\";\n    } else {\n      this.horiz.style.display = \"\";\n      this.horiz.firstChild.style.width = \"0\";\n    }\n\n    if (!this.checkedZeroWidth && measure.clientHeight > 0) {\n      if (sWidth == 0) { this.zeroWidthHack(); }\n      this.checkedZeroWidth = true;\n    }\n\n    return {right: needsV ? sWidth : 0, bottom: needsH ? sWidth : 0}\n  };\n\n  NativeScrollbars.prototype.setScrollLeft = function (pos) {\n    if (this.horiz.scrollLeft != pos) { this.horiz.scrollLeft = pos; }\n    if (this.disableHoriz) { this.enableZeroWidthBar(this.horiz, this.disableHoriz, \"horiz\"); }\n  };\n\n  NativeScrollbars.prototype.setScrollTop = function (pos) {\n    if (this.vert.scrollTop != pos) { this.vert.scrollTop = pos; }\n    if (this.disableVert) { this.enableZeroWidthBar(this.vert, this.disableVert, \"vert\"); }\n  };\n\n  NativeScrollbars.prototype.zeroWidthHack = function () {\n    var w = mac && !mac_geMountainLion ? \"12px\" : \"18px\";\n    this.horiz.style.height = this.vert.style.width = w;\n    this.horiz.style.visibility = this.vert.style.visibility = \"hidden\";\n    this.disableHoriz = new Delayed;\n    this.disableVert = new Delayed;\n  };\n\n  NativeScrollbars.prototype.enableZeroWidthBar = function (bar, delay, type) {\n    bar.style.visibility = \"\";\n    function maybeDisable() {\n      // To find out whether the scrollbar is still visible, we\n      // check whether the element under the pixel in the bottom\n      // right corner of the scrollbar box is the scrollbar box\n      // itself (when the bar is still visible) or its filler child\n      // (when the bar is hidden). If it is still visible, we keep\n      // it enabled, if it's hidden, we disable pointer events.\n      var box = bar.getBoundingClientRect();\n      var elt = type == \"vert\" ? document.elementFromPoint(box.right - 1, (box.top + box.bottom) / 2)\n          : document.elementFromPoint((box.right + box.left) / 2, box.bottom - 1);\n      if (elt != bar) { bar.style.visibility = \"hidden\"; }\n      else { delay.set(1000, maybeDisable); }\n    }\n    delay.set(1000, maybeDisable);\n  };\n\n  NativeScrollbars.prototype.clear = function () {\n    var parent = this.horiz.parentNode;\n    parent.removeChild(this.horiz);\n    parent.removeChild(this.vert);\n  };\n\n  var NullScrollbars = function () {};\n\n  NullScrollbars.prototype.update = function () { return {bottom: 0, right: 0} };\n  NullScrollbars.prototype.setScrollLeft = function () {};\n  NullScrollbars.prototype.setScrollTop = function () {};\n  NullScrollbars.prototype.clear = function () {};\n\n  function updateScrollbars(cm, measure) {\n    if (!measure) { measure = measureForScrollbars(cm); }\n    var startWidth = cm.display.barWidth, startHeight = cm.display.barHeight;\n    updateScrollbarsInner(cm, measure);\n    for (var i = 0; i < 4 && startWidth != cm.display.barWidth || startHeight != cm.display.barHeight; i++) {\n      if (startWidth != cm.display.barWidth && cm.options.lineWrapping)\n        { updateHeightsInViewport(cm); }\n      updateScrollbarsInner(cm, measureForScrollbars(cm));\n      startWidth = cm.display.barWidth; startHeight = cm.display.barHeight;\n    }\n  }\n\n  // Re-synchronize the fake scrollbars with the actual size of the\n  // content.\n  function updateScrollbarsInner(cm, measure) {\n    var d = cm.display;\n    var sizes = d.scrollbars.update(measure);\n\n    d.sizer.style.paddingRight = (d.barWidth = sizes.right) + \"px\";\n    d.sizer.style.paddingBottom = (d.barHeight = sizes.bottom) + \"px\";\n    d.heightForcer.style.borderBottom = sizes.bottom + \"px solid transparent\";\n\n    if (sizes.right && sizes.bottom) {\n      d.scrollbarFiller.style.display = \"block\";\n      d.scrollbarFiller.style.height = sizes.bottom + \"px\";\n      d.scrollbarFiller.style.width = sizes.right + \"px\";\n    } else { d.scrollbarFiller.style.display = \"\"; }\n    if (sizes.bottom && cm.options.coverGutterNextToScrollbar && cm.options.fixedGutter) {\n      d.gutterFiller.style.display = \"block\";\n      d.gutterFiller.style.height = sizes.bottom + \"px\";\n      d.gutterFiller.style.width = measure.gutterWidth + \"px\";\n    } else { d.gutterFiller.style.display = \"\"; }\n  }\n\n  var scrollbarModel = {\"native\": NativeScrollbars, \"null\": NullScrollbars};\n\n  function initScrollbars(cm) {\n    if (cm.display.scrollbars) {\n      cm.display.scrollbars.clear();\n      if (cm.display.scrollbars.addClass)\n        { rmClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\n    }\n\n    cm.display.scrollbars = new scrollbarModel[cm.options.scrollbarStyle](function (node) {\n      cm.display.wrapper.insertBefore(node, cm.display.scrollbarFiller);\n      // Prevent clicks in the scrollbars from killing focus\n      on(node, \"mousedown\", function () {\n        if (cm.state.focused) { setTimeout(function () { return cm.display.input.focus(); }, 0); }\n      });\n      node.setAttribute(\"cm-not-content\", \"true\");\n    }, function (pos, axis) {\n      if (axis == \"horizontal\") { setScrollLeft(cm, pos); }\n      else { updateScrollTop(cm, pos); }\n    }, cm);\n    if (cm.display.scrollbars.addClass)\n      { addClass(cm.display.wrapper, cm.display.scrollbars.addClass); }\n  }\n\n  // Operations are used to wrap a series of changes to the editor\n  // state in such a way that each change won't have to update the\n  // cursor and display (which would be awkward, slow, and\n  // error-prone). Instead, display updates are batched and then all\n  // combined and executed at once.\n\n  var nextOpId = 0;\n  // Start a new operation.\n  function startOperation(cm) {\n    cm.curOp = {\n      cm: cm,\n      viewChanged: false,      // Flag that indicates that lines might need to be redrawn\n      startHeight: cm.doc.height, // Used to detect need to update scrollbar\n      forceUpdate: false,      // Used to force a redraw\n      updateInput: 0,       // Whether to reset the input textarea\n      typing: false,           // Whether this reset should be careful to leave existing text (for compositing)\n      changeObjs: null,        // Accumulated changes, for firing change events\n      cursorActivityHandlers: null, // Set of handlers to fire cursorActivity on\n      cursorActivityCalled: 0, // Tracks which cursorActivity handlers have been called already\n      selectionChanged: false, // Whether the selection needs to be redrawn\n      updateMaxLine: false,    // Set when the widest line needs to be determined anew\n      scrollLeft: null, scrollTop: null, // Intermediate scroll position, not pushed to DOM yet\n      scrollToPos: null,       // Used to scroll to a specific position\n      focus: false,\n      id: ++nextOpId,          // Unique ID\n      markArrays: null         // Used by addMarkedSpan\n    };\n    pushOperation(cm.curOp);\n  }\n\n  // Finish an operation, updating the display and signalling delayed events\n  function endOperation(cm) {\n    var op = cm.curOp;\n    if (op) { finishOperation(op, function (group) {\n      for (var i = 0; i < group.ops.length; i++)\n        { group.ops[i].cm.curOp = null; }\n      endOperations(group);\n    }); }\n  }\n\n  // The DOM updates done when an operation finishes are batched so\n  // that the minimum number of relayouts are required.\n  function endOperations(group) {\n    var ops = group.ops;\n    for (var i = 0; i < ops.length; i++) // Read DOM\n      { endOperation_R1(ops[i]); }\n    for (var i$1 = 0; i$1 < ops.length; i$1++) // Write DOM (maybe)\n      { endOperation_W1(ops[i$1]); }\n    for (var i$2 = 0; i$2 < ops.length; i$2++) // Read DOM\n      { endOperation_R2(ops[i$2]); }\n    for (var i$3 = 0; i$3 < ops.length; i$3++) // Write DOM (maybe)\n      { endOperation_W2(ops[i$3]); }\n    for (var i$4 = 0; i$4 < ops.length; i$4++) // Read DOM\n      { endOperation_finish(ops[i$4]); }\n  }\n\n  function endOperation_R1(op) {\n    var cm = op.cm, display = cm.display;\n    maybeClipScrollbars(cm);\n    if (op.updateMaxLine) { findMaxLine(cm); }\n\n    op.mustUpdate = op.viewChanged || op.forceUpdate || op.scrollTop != null ||\n      op.scrollToPos && (op.scrollToPos.from.line < display.viewFrom ||\n                         op.scrollToPos.to.line >= display.viewTo) ||\n      display.maxLineChanged && cm.options.lineWrapping;\n    op.update = op.mustUpdate &&\n      new DisplayUpdate(cm, op.mustUpdate && {top: op.scrollTop, ensure: op.scrollToPos}, op.forceUpdate);\n  }\n\n  function endOperation_W1(op) {\n    op.updatedDisplay = op.mustUpdate && updateDisplayIfNeeded(op.cm, op.update);\n  }\n\n  function endOperation_R2(op) {\n    var cm = op.cm, display = cm.display;\n    if (op.updatedDisplay) { updateHeightsInViewport(cm); }\n\n    op.barMeasure = measureForScrollbars(cm);\n\n    // If the max line changed since it was last measured, measure it,\n    // and ensure the document's width matches it.\n    // updateDisplay_W2 will use these properties to do the actual resizing\n    if (display.maxLineChanged && !cm.options.lineWrapping) {\n      op.adjustWidthTo = measureChar(cm, display.maxLine, display.maxLine.text.length).left + 3;\n      cm.display.sizerWidth = op.adjustWidthTo;\n      op.barMeasure.scrollWidth =\n        Math.max(display.scroller.clientWidth, display.sizer.offsetLeft + op.adjustWidthTo + scrollGap(cm) + cm.display.barWidth);\n      op.maxScrollLeft = Math.max(0, display.sizer.offsetLeft + op.adjustWidthTo - displayWidth(cm));\n    }\n\n    if (op.updatedDisplay || op.selectionChanged)\n      { op.preparedSelection = display.input.prepareSelection(); }\n  }\n\n  function endOperation_W2(op) {\n    var cm = op.cm;\n\n    if (op.adjustWidthTo != null) {\n      cm.display.sizer.style.minWidth = op.adjustWidthTo + \"px\";\n      if (op.maxScrollLeft < cm.doc.scrollLeft)\n        { setScrollLeft(cm, Math.min(cm.display.scroller.scrollLeft, op.maxScrollLeft), true); }\n      cm.display.maxLineChanged = false;\n    }\n\n    var takeFocus = op.focus && op.focus == activeElt(doc(cm));\n    if (op.preparedSelection)\n      { cm.display.input.showSelection(op.preparedSelection, takeFocus); }\n    if (op.updatedDisplay || op.startHeight != cm.doc.height)\n      { updateScrollbars(cm, op.barMeasure); }\n    if (op.updatedDisplay)\n      { setDocumentHeight(cm, op.barMeasure); }\n\n    if (op.selectionChanged) { restartBlink(cm); }\n\n    if (cm.state.focused && op.updateInput)\n      { cm.display.input.reset(op.typing); }\n    if (takeFocus) { ensureFocus(op.cm); }\n  }\n\n  function endOperation_finish(op) {\n    var cm = op.cm, display = cm.display, doc = cm.doc;\n\n    if (op.updatedDisplay) { postUpdateDisplay(cm, op.update); }\n\n    // Abort mouse wheel delta measurement, when scrolling explicitly\n    if (display.wheelStartX != null && (op.scrollTop != null || op.scrollLeft != null || op.scrollToPos))\n      { display.wheelStartX = display.wheelStartY = null; }\n\n    // Propagate the scroll position to the actual DOM scroller\n    if (op.scrollTop != null) { setScrollTop(cm, op.scrollTop, op.forceScroll); }\n\n    if (op.scrollLeft != null) { setScrollLeft(cm, op.scrollLeft, true, true); }\n    // If we need to scroll a specific position into view, do so.\n    if (op.scrollToPos) {\n      var rect = scrollPosIntoView(cm, clipPos(doc, op.scrollToPos.from),\n                                   clipPos(doc, op.scrollToPos.to), op.scrollToPos.margin);\n      maybeScrollWindow(cm, rect);\n    }\n\n    // Fire events for markers that are hidden/unidden by editing or\n    // undoing\n    var hidden = op.maybeHiddenMarkers, unhidden = op.maybeUnhiddenMarkers;\n    if (hidden) { for (var i = 0; i < hidden.length; ++i)\n      { if (!hidden[i].lines.length) { signal(hidden[i], \"hide\"); } } }\n    if (unhidden) { for (var i$1 = 0; i$1 < unhidden.length; ++i$1)\n      { if (unhidden[i$1].lines.length) { signal(unhidden[i$1], \"unhide\"); } } }\n\n    if (display.wrapper.offsetHeight)\n      { doc.scrollTop = cm.display.scroller.scrollTop; }\n\n    // Fire change events, and delayed event handlers\n    if (op.changeObjs)\n      { signal(cm, \"changes\", cm, op.changeObjs); }\n    if (op.update)\n      { op.update.finish(); }\n  }\n\n  // Run the given function in an operation\n  function runInOp(cm, f) {\n    if (cm.curOp) { return f() }\n    startOperation(cm);\n    try { return f() }\n    finally { endOperation(cm); }\n  }\n  // Wraps a function in an operation. Returns the wrapped function.\n  function operation(cm, f) {\n    return function() {\n      if (cm.curOp) { return f.apply(cm, arguments) }\n      startOperation(cm);\n      try { return f.apply(cm, arguments) }\n      finally { endOperation(cm); }\n    }\n  }\n  // Used to add methods to editor and doc instances, wrapping them in\n  // operations.\n  function methodOp(f) {\n    return function() {\n      if (this.curOp) { return f.apply(this, arguments) }\n      startOperation(this);\n      try { return f.apply(this, arguments) }\n      finally { endOperation(this); }\n    }\n  }\n  function docMethodOp(f) {\n    return function() {\n      var cm = this.cm;\n      if (!cm || cm.curOp) { return f.apply(this, arguments) }\n      startOperation(cm);\n      try { return f.apply(this, arguments) }\n      finally { endOperation(cm); }\n    }\n  }\n\n  // HIGHLIGHT WORKER\n\n  function startWorker(cm, time) {\n    if (cm.doc.highlightFrontier < cm.display.viewTo)\n      { cm.state.highlight.set(time, bind(highlightWorker, cm)); }\n  }\n\n  function highlightWorker(cm) {\n    var doc = cm.doc;\n    if (doc.highlightFrontier >= cm.display.viewTo) { return }\n    var end = +new Date + cm.options.workTime;\n    var context = getContextBefore(cm, doc.highlightFrontier);\n    var changedLines = [];\n\n    doc.iter(context.line, Math.min(doc.first + doc.size, cm.display.viewTo + 500), function (line) {\n      if (context.line >= cm.display.viewFrom) { // Visible\n        var oldStyles = line.styles;\n        var resetState = line.text.length > cm.options.maxHighlightLength ? copyState(doc.mode, context.state) : null;\n        var highlighted = highlightLine(cm, line, context, true);\n        if (resetState) { context.state = resetState; }\n        line.styles = highlighted.styles;\n        var oldCls = line.styleClasses, newCls = highlighted.classes;\n        if (newCls) { line.styleClasses = newCls; }\n        else if (oldCls) { line.styleClasses = null; }\n        var ischange = !oldStyles || oldStyles.length != line.styles.length ||\n          oldCls != newCls && (!oldCls || !newCls || oldCls.bgClass != newCls.bgClass || oldCls.textClass != newCls.textClass);\n        for (var i = 0; !ischange && i < oldStyles.length; ++i) { ischange = oldStyles[i] != line.styles[i]; }\n        if (ischange) { changedLines.push(context.line); }\n        line.stateAfter = context.save();\n        context.nextLine();\n      } else {\n        if (line.text.length <= cm.options.maxHighlightLength)\n          { processLine(cm, line.text, context); }\n        line.stateAfter = context.line % 5 == 0 ? context.save() : null;\n        context.nextLine();\n      }\n      if (+new Date > end) {\n        startWorker(cm, cm.options.workDelay);\n        return true\n      }\n    });\n    doc.highlightFrontier = context.line;\n    doc.modeFrontier = Math.max(doc.modeFrontier, context.line);\n    if (changedLines.length) { runInOp(cm, function () {\n      for (var i = 0; i < changedLines.length; i++)\n        { regLineChange(cm, changedLines[i], \"text\"); }\n    }); }\n  }\n\n  // DISPLAY DRAWING\n\n  var DisplayUpdate = function(cm, viewport, force) {\n    var display = cm.display;\n\n    this.viewport = viewport;\n    // Store some values that we'll need later (but don't want to force a relayout for)\n    this.visible = visibleLines(display, cm.doc, viewport);\n    this.editorIsHidden = !display.wrapper.offsetWidth;\n    this.wrapperHeight = display.wrapper.clientHeight;\n    this.wrapperWidth = display.wrapper.clientWidth;\n    this.oldDisplayWidth = displayWidth(cm);\n    this.force = force;\n    this.dims = getDimensions(cm);\n    this.events = [];\n  };\n\n  DisplayUpdate.prototype.signal = function (emitter, type) {\n    if (hasHandler(emitter, type))\n      { this.events.push(arguments); }\n  };\n  DisplayUpdate.prototype.finish = function () {\n    for (var i = 0; i < this.events.length; i++)\n      { signal.apply(null, this.events[i]); }\n  };\n\n  function maybeClipScrollbars(cm) {\n    var display = cm.display;\n    if (!display.scrollbarsClipped && display.scroller.offsetWidth) {\n      display.nativeBarWidth = display.scroller.offsetWidth - display.scroller.clientWidth;\n      display.heightForcer.style.height = scrollGap(cm) + \"px\";\n      display.sizer.style.marginBottom = -display.nativeBarWidth + \"px\";\n      display.sizer.style.borderRightWidth = scrollGap(cm) + \"px\";\n      display.scrollbarsClipped = true;\n    }\n  }\n\n  function selectionSnapshot(cm) {\n    if (cm.hasFocus()) { return null }\n    var active = activeElt(doc(cm));\n    if (!active || !contains(cm.display.lineDiv, active)) { return null }\n    var result = {activeElt: active};\n    if (window.getSelection) {\n      var sel = win(cm).getSelection();\n      if (sel.anchorNode && sel.extend && contains(cm.display.lineDiv, sel.anchorNode)) {\n        result.anchorNode = sel.anchorNode;\n        result.anchorOffset = sel.anchorOffset;\n        result.focusNode = sel.focusNode;\n        result.focusOffset = sel.focusOffset;\n      }\n    }\n    return result\n  }\n\n  function restoreSelection(snapshot) {\n    if (!snapshot || !snapshot.activeElt || snapshot.activeElt == activeElt(snapshot.activeElt.ownerDocument)) { return }\n    snapshot.activeElt.focus();\n    if (!/^(INPUT|TEXTAREA)$/.test(snapshot.activeElt.nodeName) &&\n        snapshot.anchorNode && contains(document.body, snapshot.anchorNode) && contains(document.body, snapshot.focusNode)) {\n      var doc = snapshot.activeElt.ownerDocument;\n      var sel = doc.defaultView.getSelection(), range = doc.createRange();\n      range.setEnd(snapshot.anchorNode, snapshot.anchorOffset);\n      range.collapse(false);\n      sel.removeAllRanges();\n      sel.addRange(range);\n      sel.extend(snapshot.focusNode, snapshot.focusOffset);\n    }\n  }\n\n  // Does the actual updating of the line display. Bails out\n  // (returning false) when there is nothing to be done and forced is\n  // false.\n  function updateDisplayIfNeeded(cm, update) {\n    var display = cm.display, doc = cm.doc;\n\n    if (update.editorIsHidden) {\n      resetView(cm);\n      return false\n    }\n\n    // Bail out if the visible area is already rendered and nothing changed.\n    if (!update.force &&\n        update.visible.from >= display.viewFrom && update.visible.to <= display.viewTo &&\n        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo) &&\n        display.renderedView == display.view && countDirtyView(cm) == 0)\n      { return false }\n\n    if (maybeUpdateLineNumberWidth(cm)) {\n      resetView(cm);\n      update.dims = getDimensions(cm);\n    }\n\n    // Compute a suitable new viewport (from & to)\n    var end = doc.first + doc.size;\n    var from = Math.max(update.visible.from - cm.options.viewportMargin, doc.first);\n    var to = Math.min(end, update.visible.to + cm.options.viewportMargin);\n    if (display.viewFrom < from && from - display.viewFrom < 20) { from = Math.max(doc.first, display.viewFrom); }\n    if (display.viewTo > to && display.viewTo - to < 20) { to = Math.min(end, display.viewTo); }\n    if (sawCollapsedSpans) {\n      from = visualLineNo(cm.doc, from);\n      to = visualLineEndNo(cm.doc, to);\n    }\n\n    var different = from != display.viewFrom || to != display.viewTo ||\n      display.lastWrapHeight != update.wrapperHeight || display.lastWrapWidth != update.wrapperWidth;\n    adjustView(cm, from, to);\n\n    display.viewOffset = heightAtLine(getLine(cm.doc, display.viewFrom));\n    // Position the mover div to align with the current scroll position\n    cm.display.mover.style.top = display.viewOffset + \"px\";\n\n    var toUpdate = countDirtyView(cm);\n    if (!different && toUpdate == 0 && !update.force && display.renderedView == display.view &&\n        (display.updateLineNumbers == null || display.updateLineNumbers >= display.viewTo))\n      { return false }\n\n    // For big changes, we hide the enclosing element during the\n    // update, since that speeds up the operations on most browsers.\n    var selSnapshot = selectionSnapshot(cm);\n    if (toUpdate > 4) { display.lineDiv.style.display = \"none\"; }\n    patchDisplay(cm, display.updateLineNumbers, update.dims);\n    if (toUpdate > 4) { display.lineDiv.style.display = \"\"; }\n    display.renderedView = display.view;\n    // There might have been a widget with a focused element that got\n    // hidden or updated, if so re-focus it.\n    restoreSelection(selSnapshot);\n\n    // Prevent selection and cursors from interfering with the scroll\n    // width and height.\n    removeChildren(display.cursorDiv);\n    removeChildren(display.selectionDiv);\n    display.gutters.style.height = display.sizer.style.minHeight = 0;\n\n    if (different) {\n      display.lastWrapHeight = update.wrapperHeight;\n      display.lastWrapWidth = update.wrapperWidth;\n      startWorker(cm, 400);\n    }\n\n    display.updateLineNumbers = null;\n\n    return true\n  }\n\n  function postUpdateDisplay(cm, update) {\n    var viewport = update.viewport;\n\n    for (var first = true;; first = false) {\n      if (!first || !cm.options.lineWrapping || update.oldDisplayWidth == displayWidth(cm)) {\n        // Clip forced viewport to actual scrollable area.\n        if (viewport && viewport.top != null)\n          { viewport = {top: Math.min(cm.doc.height + paddingVert(cm.display) - displayHeight(cm), viewport.top)}; }\n        // Updated line heights might result in the drawn area not\n        // actually covering the viewport. Keep looping until it does.\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\n        if (update.visible.from >= cm.display.viewFrom && update.visible.to <= cm.display.viewTo)\n          { break }\n      } else if (first) {\n        update.visible = visibleLines(cm.display, cm.doc, viewport);\n      }\n      if (!updateDisplayIfNeeded(cm, update)) { break }\n      updateHeightsInViewport(cm);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.force = false;\n    }\n\n    update.signal(cm, \"update\", cm);\n    if (cm.display.viewFrom != cm.display.reportedViewFrom || cm.display.viewTo != cm.display.reportedViewTo) {\n      update.signal(cm, \"viewportChange\", cm, cm.display.viewFrom, cm.display.viewTo);\n      cm.display.reportedViewFrom = cm.display.viewFrom; cm.display.reportedViewTo = cm.display.viewTo;\n    }\n  }\n\n  function updateDisplaySimple(cm, viewport) {\n    var update = new DisplayUpdate(cm, viewport);\n    if (updateDisplayIfNeeded(cm, update)) {\n      updateHeightsInViewport(cm);\n      postUpdateDisplay(cm, update);\n      var barMeasure = measureForScrollbars(cm);\n      updateSelection(cm);\n      updateScrollbars(cm, barMeasure);\n      setDocumentHeight(cm, barMeasure);\n      update.finish();\n    }\n  }\n\n  // Sync the actual display DOM structure with display.view, removing\n  // nodes for lines that are no longer in view, and creating the ones\n  // that are not there yet, and updating the ones that are out of\n  // date.\n  function patchDisplay(cm, updateNumbersFrom, dims) {\n    var display = cm.display, lineNumbers = cm.options.lineNumbers;\n    var container = display.lineDiv, cur = container.firstChild;\n\n    function rm(node) {\n      var next = node.nextSibling;\n      // Works around a throw-scroll bug in OS X Webkit\n      if (webkit && mac && cm.display.currentWheelTarget == node)\n        { node.style.display = \"none\"; }\n      else\n        { node.parentNode.removeChild(node); }\n      return next\n    }\n\n    var view = display.view, lineN = display.viewFrom;\n    // Loop over the elements in the view, syncing cur (the DOM nodes\n    // in display.lineDiv) with the view as we go.\n    for (var i = 0; i < view.length; i++) {\n      var lineView = view[i];\n      if (lineView.hidden) ; else if (!lineView.node || lineView.node.parentNode != container) { // Not drawn yet\n        var node = buildLineElement(cm, lineView, lineN, dims);\n        container.insertBefore(node, cur);\n      } else { // Already drawn\n        while (cur != lineView.node) { cur = rm(cur); }\n        var updateNumber = lineNumbers && updateNumbersFrom != null &&\n          updateNumbersFrom <= lineN && lineView.lineNumber;\n        if (lineView.changes) {\n          if (indexOf(lineView.changes, \"gutter\") > -1) { updateNumber = false; }\n          updateLineForChanges(cm, lineView, lineN, dims);\n        }\n        if (updateNumber) {\n          removeChildren(lineView.lineNumber);\n          lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options, lineN)));\n        }\n        cur = lineView.node.nextSibling;\n      }\n      lineN += lineView.size;\n    }\n    while (cur) { cur = rm(cur); }\n  }\n\n  function updateGutterSpace(display) {\n    var width = display.gutters.offsetWidth;\n    display.sizer.style.marginLeft = width + \"px\";\n    // Send an event to consumers responding to changes in gutter width.\n    signalLater(display, \"gutterChanged\", display);\n  }\n\n  function setDocumentHeight(cm, measure) {\n    cm.display.sizer.style.minHeight = measure.docHeight + \"px\";\n    cm.display.heightForcer.style.top = measure.docHeight + \"px\";\n    cm.display.gutters.style.height = (measure.docHeight + cm.display.barHeight + scrollGap(cm)) + \"px\";\n  }\n\n  // Re-align line numbers and gutter marks to compensate for\n  // horizontal scrolling.\n  function alignHorizontally(cm) {\n    var display = cm.display, view = display.view;\n    if (!display.alignWidgets && (!display.gutters.firstChild || !cm.options.fixedGutter)) { return }\n    var comp = compensateForHScroll(display) - display.scroller.scrollLeft + cm.doc.scrollLeft;\n    var gutterW = display.gutters.offsetWidth, left = comp + \"px\";\n    for (var i = 0; i < view.length; i++) { if (!view[i].hidden) {\n      if (cm.options.fixedGutter) {\n        if (view[i].gutter)\n          { view[i].gutter.style.left = left; }\n        if (view[i].gutterBackground)\n          { view[i].gutterBackground.style.left = left; }\n      }\n      var align = view[i].alignable;\n      if (align) { for (var j = 0; j < align.length; j++)\n        { align[j].style.left = left; } }\n    } }\n    if (cm.options.fixedGutter)\n      { display.gutters.style.left = (comp + gutterW) + \"px\"; }\n  }\n\n  // Used to ensure that the line number gutter is still the right\n  // size for the current document size. Returns true when an update\n  // is needed.\n  function maybeUpdateLineNumberWidth(cm) {\n    if (!cm.options.lineNumbers) { return false }\n    var doc = cm.doc, last = lineNumberFor(cm.options, doc.first + doc.size - 1), display = cm.display;\n    if (last.length != display.lineNumChars) {\n      var test = display.measure.appendChild(elt(\"div\", [elt(\"div\", last)],\n                                                 \"CodeMirror-linenumber CodeMirror-gutter-elt\"));\n      var innerW = test.firstChild.offsetWidth, padding = test.offsetWidth - innerW;\n      display.lineGutter.style.width = \"\";\n      display.lineNumInnerWidth = Math.max(innerW, display.lineGutter.offsetWidth - padding) + 1;\n      display.lineNumWidth = display.lineNumInnerWidth + padding;\n      display.lineNumChars = display.lineNumInnerWidth ? last.length : -1;\n      display.lineGutter.style.width = display.lineNumWidth + \"px\";\n      updateGutterSpace(cm.display);\n      return true\n    }\n    return false\n  }\n\n  function getGutters(gutters, lineNumbers) {\n    var result = [], sawLineNumbers = false;\n    for (var i = 0; i < gutters.length; i++) {\n      var name = gutters[i], style = null;\n      if (typeof name != \"string\") { style = name.style; name = name.className; }\n      if (name == \"CodeMirror-linenumbers\") {\n        if (!lineNumbers) { continue }\n        else { sawLineNumbers = true; }\n      }\n      result.push({className: name, style: style});\n    }\n    if (lineNumbers && !sawLineNumbers) { result.push({className: \"CodeMirror-linenumbers\", style: null}); }\n    return result\n  }\n\n  // Rebuild the gutter elements, ensure the margin to the left of the\n  // code matches their width.\n  function renderGutters(display) {\n    var gutters = display.gutters, specs = display.gutterSpecs;\n    removeChildren(gutters);\n    display.lineGutter = null;\n    for (var i = 0; i < specs.length; ++i) {\n      var ref = specs[i];\n      var className = ref.className;\n      var style = ref.style;\n      var gElt = gutters.appendChild(elt(\"div\", null, \"CodeMirror-gutter \" + className));\n      if (style) { gElt.style.cssText = style; }\n      if (className == \"CodeMirror-linenumbers\") {\n        display.lineGutter = gElt;\n        gElt.style.width = (display.lineNumWidth || 1) + \"px\";\n      }\n    }\n    gutters.style.display = specs.length ? \"\" : \"none\";\n    updateGutterSpace(display);\n  }\n\n  function updateGutters(cm) {\n    renderGutters(cm.display);\n    regChange(cm);\n    alignHorizontally(cm);\n  }\n\n  // The display handles the DOM integration, both for input reading\n  // and content drawing. It holds references to DOM nodes and\n  // display-related state.\n\n  function Display(place, doc, input, options) {\n    var d = this;\n    this.input = input;\n\n    // Covers bottom-right square when both scrollbars are present.\n    d.scrollbarFiller = elt(\"div\", null, \"CodeMirror-scrollbar-filler\");\n    d.scrollbarFiller.setAttribute(\"cm-not-content\", \"true\");\n    // Covers bottom of gutter when coverGutterNextToScrollbar is on\n    // and h scrollbar is present.\n    d.gutterFiller = elt(\"div\", null, \"CodeMirror-gutter-filler\");\n    d.gutterFiller.setAttribute(\"cm-not-content\", \"true\");\n    // Will contain the actual code, positioned to cover the viewport.\n    d.lineDiv = eltP(\"div\", null, \"CodeMirror-code\");\n    // Elements are added to these to represent selection and cursors.\n    d.selectionDiv = elt(\"div\", null, null, \"position: relative; z-index: 1\");\n    d.cursorDiv = elt(\"div\", null, \"CodeMirror-cursors\");\n    // A visibility: hidden element used to find the size of things.\n    d.measure = elt(\"div\", null, \"CodeMirror-measure\");\n    // When lines outside of the viewport are measured, they are drawn in this.\n    d.lineMeasure = elt(\"div\", null, \"CodeMirror-measure\");\n    // Wraps everything that needs to exist inside the vertically-padded coordinate system\n    d.lineSpace = eltP(\"div\", [d.measure, d.lineMeasure, d.selectionDiv, d.cursorDiv, d.lineDiv],\n                      null, \"position: relative; outline: none\");\n    var lines = eltP(\"div\", [d.lineSpace], \"CodeMirror-lines\");\n    // Moved around its parent to cover visible view.\n    d.mover = elt(\"div\", [lines], null, \"position: relative\");\n    // Set to the height of the document, allowing scrolling.\n    d.sizer = elt(\"div\", [d.mover], \"CodeMirror-sizer\");\n    d.sizerWidth = null;\n    // Behavior of elts with overflow: auto and padding is\n    // inconsistent across browsers. This is used to ensure the\n    // scrollable area is big enough.\n    d.heightForcer = elt(\"div\", null, null, \"position: absolute; height: \" + scrollerGap + \"px; width: 1px;\");\n    // Will contain the gutters, if any.\n    d.gutters = elt(\"div\", null, \"CodeMirror-gutters\");\n    d.lineGutter = null;\n    // Actual scrollable element.\n    d.scroller = elt(\"div\", [d.sizer, d.heightForcer, d.gutters], \"CodeMirror-scroll\");\n    d.scroller.setAttribute(\"tabIndex\", \"-1\");\n    // The element in which the editor lives.\n    d.wrapper = elt(\"div\", [d.scrollbarFiller, d.gutterFiller, d.scroller], \"CodeMirror\");\n    // See #6982. FIXME remove when this has been fixed for a while in Chrome\n    if (chrome && chrome_version >= 105) { d.wrapper.style.clipPath = \"inset(0px)\"; }\n\n    // This attribute is respected by automatic translation systems such as Google Translate,\n    // and may also be respected by tools used by human translators.\n    d.wrapper.setAttribute('translate', 'no');\n\n    // Work around IE7 z-index bug (not perfect, hence IE7 not really being supported)\n    if (ie && ie_version < 8) { d.gutters.style.zIndex = -1; d.scroller.style.paddingRight = 0; }\n    if (!webkit && !(gecko && mobile)) { d.scroller.draggable = true; }\n\n    if (place) {\n      if (place.appendChild) { place.appendChild(d.wrapper); }\n      else { place(d.wrapper); }\n    }\n\n    // Current rendered range (may be bigger than the view window).\n    d.viewFrom = d.viewTo = doc.first;\n    d.reportedViewFrom = d.reportedViewTo = doc.first;\n    // Information about the rendered lines.\n    d.view = [];\n    d.renderedView = null;\n    // Holds info about a single rendered line when it was rendered\n    // for measurement, while not in view.\n    d.externalMeasured = null;\n    // Empty space (in pixels) above the view\n    d.viewOffset = 0;\n    d.lastWrapHeight = d.lastWrapWidth = 0;\n    d.updateLineNumbers = null;\n\n    d.nativeBarWidth = d.barHeight = d.barWidth = 0;\n    d.scrollbarsClipped = false;\n\n    // Used to only resize the line number gutter when necessary (when\n    // the amount of lines crosses a boundary that makes its width change)\n    d.lineNumWidth = d.lineNumInnerWidth = d.lineNumChars = null;\n    // Set to true when a non-horizontal-scrolling line widget is\n    // added. As an optimization, line widget aligning is skipped when\n    // this is false.\n    d.alignWidgets = false;\n\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n\n    // Tracks the maximum line length so that the horizontal scrollbar\n    // can be kept static when scrolling.\n    d.maxLine = null;\n    d.maxLineLength = 0;\n    d.maxLineChanged = false;\n\n    // Used for measuring wheel scrolling granularity\n    d.wheelDX = d.wheelDY = d.wheelStartX = d.wheelStartY = null;\n\n    // True when shift is held down.\n    d.shift = false;\n\n    // Used to track whether anything happened since the context menu\n    // was opened.\n    d.selForContextMenu = null;\n\n    d.activeTouch = null;\n\n    d.gutterSpecs = getGutters(options.gutters, options.lineNumbers);\n    renderGutters(d);\n\n    input.init(d);\n  }\n\n  // Since the delta values reported on mouse wheel events are\n  // unstandardized between browsers and even browser versions, and\n  // generally horribly unpredictable, this code starts by measuring\n  // the scroll effect that the first few mouse wheel events have,\n  // and, from that, detects the way it can convert deltas to pixel\n  // offsets afterwards.\n  //\n  // The reason we want to know the amount a wheel event will scroll\n  // is that it gives us a chance to update the display before the\n  // actual scrolling happens, reducing flickering.\n\n  var wheelSamples = 0, wheelPixelsPerUnit = null;\n  // Fill in a browser-detected starting value on browsers where we\n  // know one. These don't have to be accurate -- the result of them\n  // being wrong would just be a slight flicker on the first wheel\n  // scroll (if it is large enough).\n  if (ie) { wheelPixelsPerUnit = -.53; }\n  else if (gecko) { wheelPixelsPerUnit = 15; }\n  else if (chrome) { wheelPixelsPerUnit = -.7; }\n  else if (safari) { wheelPixelsPerUnit = -1/3; }\n\n  function wheelEventDelta(e) {\n    var dx = e.wheelDeltaX, dy = e.wheelDeltaY;\n    if (dx == null && e.detail && e.axis == e.HORIZONTAL_AXIS) { dx = e.detail; }\n    if (dy == null && e.detail && e.axis == e.VERTICAL_AXIS) { dy = e.detail; }\n    else if (dy == null) { dy = e.wheelDelta; }\n    return {x: dx, y: dy}\n  }\n  function wheelEventPixels(e) {\n    var delta = wheelEventDelta(e);\n    delta.x *= wheelPixelsPerUnit;\n    delta.y *= wheelPixelsPerUnit;\n    return delta\n  }\n\n  function onScrollWheel(cm, e) {\n    // On Chrome 102, viewport updates somehow stop wheel-based\n    // scrolling. Turning off pointer events during the scroll seems\n    // to avoid the issue.\n    if (chrome && chrome_version == 102) {\n      if (cm.display.chromeScrollHack == null) { cm.display.sizer.style.pointerEvents = \"none\"; }\n      else { clearTimeout(cm.display.chromeScrollHack); }\n      cm.display.chromeScrollHack = setTimeout(function () {\n        cm.display.chromeScrollHack = null;\n        cm.display.sizer.style.pointerEvents = \"\";\n      }, 100);\n    }\n    var delta = wheelEventDelta(e), dx = delta.x, dy = delta.y;\n    var pixelsPerUnit = wheelPixelsPerUnit;\n    if (e.deltaMode === 0) {\n      dx = e.deltaX;\n      dy = e.deltaY;\n      pixelsPerUnit = 1;\n    }\n\n    var display = cm.display, scroll = display.scroller;\n    // Quit if there's nothing to scroll here\n    var canScrollX = scroll.scrollWidth > scroll.clientWidth;\n    var canScrollY = scroll.scrollHeight > scroll.clientHeight;\n    if (!(dx && canScrollX || dy && canScrollY)) { return }\n\n    // Webkit browsers on OS X abort momentum scrolls when the target\n    // of the scroll event is removed from the scrollable element.\n    // This hack (see related code in patchDisplay) makes sure the\n    // element is kept around.\n    if (dy && mac && webkit) {\n      outer: for (var cur = e.target, view = display.view; cur != scroll; cur = cur.parentNode) {\n        for (var i = 0; i < view.length; i++) {\n          if (view[i].node == cur) {\n            cm.display.currentWheelTarget = cur;\n            break outer\n          }\n        }\n      }\n    }\n\n    // On some browsers, horizontal scrolling will cause redraws to\n    // happen before the gutter has been realigned, causing it to\n    // wriggle around in a most unseemly way. When we have an\n    // estimated pixels/delta value, we just handle horizontal\n    // scrolling entirely here. It'll be slightly off from native, but\n    // better than glitching out.\n    if (dx && !gecko && !presto && pixelsPerUnit != null) {\n      if (dy && canScrollY)\n        { updateScrollTop(cm, Math.max(0, scroll.scrollTop + dy * pixelsPerUnit)); }\n      setScrollLeft(cm, Math.max(0, scroll.scrollLeft + dx * pixelsPerUnit));\n      // Only prevent default scrolling if vertical scrolling is\n      // actually possible. Otherwise, it causes vertical scroll\n      // jitter on OSX trackpads when deltaX is small and deltaY\n      // is large (issue #3579)\n      if (!dy || (dy && canScrollY))\n        { e_preventDefault(e); }\n      display.wheelStartX = null; // Abort measurement, if in progress\n      return\n    }\n\n    // 'Project' the visible viewport to cover the area that is being\n    // scrolled into view (if we know enough to estimate it).\n    if (dy && pixelsPerUnit != null) {\n      var pixels = dy * pixelsPerUnit;\n      var top = cm.doc.scrollTop, bot = top + display.wrapper.clientHeight;\n      if (pixels < 0) { top = Math.max(0, top + pixels - 50); }\n      else { bot = Math.min(cm.doc.height, bot + pixels + 50); }\n      updateDisplaySimple(cm, {top: top, bottom: bot});\n    }\n\n    if (wheelSamples < 20 && e.deltaMode !== 0) {\n      if (display.wheelStartX == null) {\n        display.wheelStartX = scroll.scrollLeft; display.wheelStartY = scroll.scrollTop;\n        display.wheelDX = dx; display.wheelDY = dy;\n        setTimeout(function () {\n          if (display.wheelStartX == null) { return }\n          var movedX = scroll.scrollLeft - display.wheelStartX;\n          var movedY = scroll.scrollTop - display.wheelStartY;\n          var sample = (movedY && display.wheelDY && movedY / display.wheelDY) ||\n            (movedX && display.wheelDX && movedX / display.wheelDX);\n          display.wheelStartX = display.wheelStartY = null;\n          if (!sample) { return }\n          wheelPixelsPerUnit = (wheelPixelsPerUnit * wheelSamples + sample) / (wheelSamples + 1);\n          ++wheelSamples;\n        }, 200);\n      } else {\n        display.wheelDX += dx; display.wheelDY += dy;\n      }\n    }\n  }\n\n  // Selection objects are immutable. A new one is created every time\n  // the selection changes. A selection is one or more non-overlapping\n  // (and non-touching) ranges, sorted, and an integer that indicates\n  // which one is the primary selection (the one that's scrolled into\n  // view, that getCursor returns, etc).\n  var Selection = function(ranges, primIndex) {\n    this.ranges = ranges;\n    this.primIndex = primIndex;\n  };\n\n  Selection.prototype.primary = function () { return this.ranges[this.primIndex] };\n\n  Selection.prototype.equals = function (other) {\n    if (other == this) { return true }\n    if (other.primIndex != this.primIndex || other.ranges.length != this.ranges.length) { return false }\n    for (var i = 0; i < this.ranges.length; i++) {\n      var here = this.ranges[i], there = other.ranges[i];\n      if (!equalCursorPos(here.anchor, there.anchor) || !equalCursorPos(here.head, there.head)) { return false }\n    }\n    return true\n  };\n\n  Selection.prototype.deepCopy = function () {\n    var out = [];\n    for (var i = 0; i < this.ranges.length; i++)\n      { out[i] = new Range(copyPos(this.ranges[i].anchor), copyPos(this.ranges[i].head)); }\n    return new Selection(out, this.primIndex)\n  };\n\n  Selection.prototype.somethingSelected = function () {\n    for (var i = 0; i < this.ranges.length; i++)\n      { if (!this.ranges[i].empty()) { return true } }\n    return false\n  };\n\n  Selection.prototype.contains = function (pos, end) {\n    if (!end) { end = pos; }\n    for (var i = 0; i < this.ranges.length; i++) {\n      var range = this.ranges[i];\n      if (cmp(end, range.from()) >= 0 && cmp(pos, range.to()) <= 0)\n        { return i }\n    }\n    return -1\n  };\n\n  var Range = function(anchor, head) {\n    this.anchor = anchor; this.head = head;\n  };\n\n  Range.prototype.from = function () { return minPos(this.anchor, this.head) };\n  Range.prototype.to = function () { return maxPos(this.anchor, this.head) };\n  Range.prototype.empty = function () { return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch };\n\n  // Take an unsorted, potentially overlapping set of ranges, and\n  // build a selection out of it. 'Consumes' ranges array (modifying\n  // it).\n  function normalizeSelection(cm, ranges, primIndex) {\n    var mayTouch = cm && cm.options.selectionsMayTouch;\n    var prim = ranges[primIndex];\n    ranges.sort(function (a, b) { return cmp(a.from(), b.from()); });\n    primIndex = indexOf(ranges, prim);\n    for (var i = 1; i < ranges.length; i++) {\n      var cur = ranges[i], prev = ranges[i - 1];\n      var diff = cmp(prev.to(), cur.from());\n      if (mayTouch && !cur.empty() ? diff > 0 : diff >= 0) {\n        var from = minPos(prev.from(), cur.from()), to = maxPos(prev.to(), cur.to());\n        var inv = prev.empty() ? cur.from() == cur.head : prev.from() == prev.head;\n        if (i <= primIndex) { --primIndex; }\n        ranges.splice(--i, 2, new Range(inv ? to : from, inv ? from : to));\n      }\n    }\n    return new Selection(ranges, primIndex)\n  }\n\n  function simpleSelection(anchor, head) {\n    return new Selection([new Range(anchor, head || anchor)], 0)\n  }\n\n  // Compute the position of the end of a change (its 'to' property\n  // refers to the pre-change end).\n  function changeEnd(change) {\n    if (!change.text) { return change.to }\n    return Pos(change.from.line + change.text.length - 1,\n               lst(change.text).length + (change.text.length == 1 ? change.from.ch : 0))\n  }\n\n  // Adjust a position to refer to the post-change position of the\n  // same text, or the end of the change if the change covers it.\n  function adjustForChange(pos, change) {\n    if (cmp(pos, change.from) < 0) { return pos }\n    if (cmp(pos, change.to) <= 0) { return changeEnd(change) }\n\n    var line = pos.line + change.text.length - (change.to.line - change.from.line) - 1, ch = pos.ch;\n    if (pos.line == change.to.line) { ch += changeEnd(change).ch - change.to.ch; }\n    return Pos(line, ch)\n  }\n\n  function computeSelAfterChange(doc, change) {\n    var out = [];\n    for (var i = 0; i < doc.sel.ranges.length; i++) {\n      var range = doc.sel.ranges[i];\n      out.push(new Range(adjustForChange(range.anchor, change),\n                         adjustForChange(range.head, change)));\n    }\n    return normalizeSelection(doc.cm, out, doc.sel.primIndex)\n  }\n\n  function offsetPos(pos, old, nw) {\n    if (pos.line == old.line)\n      { return Pos(nw.line, pos.ch - old.ch + nw.ch) }\n    else\n      { return Pos(nw.line + (pos.line - old.line), pos.ch) }\n  }\n\n  // Used by replaceSelections to allow moving the selection to the\n  // start or around the replaced test. Hint may be \"start\" or \"around\".\n  function computeReplacedSel(doc, changes, hint) {\n    var out = [];\n    var oldPrev = Pos(doc.first, 0), newPrev = oldPrev;\n    for (var i = 0; i < changes.length; i++) {\n      var change = changes[i];\n      var from = offsetPos(change.from, oldPrev, newPrev);\n      var to = offsetPos(changeEnd(change), oldPrev, newPrev);\n      oldPrev = change.to;\n      newPrev = to;\n      if (hint == \"around\") {\n        var range = doc.sel.ranges[i], inv = cmp(range.head, range.anchor) < 0;\n        out[i] = new Range(inv ? to : from, inv ? from : to);\n      } else {\n        out[i] = new Range(from, from);\n      }\n    }\n    return new Selection(out, doc.sel.primIndex)\n  }\n\n  // Used to get the editor into a consistent state again when options change.\n\n  function loadMode(cm) {\n    cm.doc.mode = getMode(cm.options, cm.doc.modeOption);\n    resetModeState(cm);\n  }\n\n  function resetModeState(cm) {\n    cm.doc.iter(function (line) {\n      if (line.stateAfter) { line.stateAfter = null; }\n      if (line.styles) { line.styles = null; }\n    });\n    cm.doc.modeFrontier = cm.doc.highlightFrontier = cm.doc.first;\n    startWorker(cm, 100);\n    cm.state.modeGen++;\n    if (cm.curOp) { regChange(cm); }\n  }\n\n  // DOCUMENT DATA STRUCTURE\n\n  // By default, updates that start and end at the beginning of a line\n  // are treated specially, in order to make the association of line\n  // widgets and marker elements with the text behave more intuitive.\n  function isWholeLineUpdate(doc, change) {\n    return change.from.ch == 0 && change.to.ch == 0 && lst(change.text) == \"\" &&\n      (!doc.cm || doc.cm.options.wholeLineUpdateBefore)\n  }\n\n  // Perform a change on the document data structure.\n  function updateDoc(doc, change, markedSpans, estimateHeight) {\n    function spansFor(n) {return markedSpans ? markedSpans[n] : null}\n    function update(line, text, spans) {\n      updateLine(line, text, spans, estimateHeight);\n      signalLater(line, \"change\", line, change);\n    }\n    function linesFor(start, end) {\n      var result = [];\n      for (var i = start; i < end; ++i)\n        { result.push(new Line(text[i], spansFor(i), estimateHeight)); }\n      return result\n    }\n\n    var from = change.from, to = change.to, text = change.text;\n    var firstLine = getLine(doc, from.line), lastLine = getLine(doc, to.line);\n    var lastText = lst(text), lastSpans = spansFor(text.length - 1), nlines = to.line - from.line;\n\n    // Adjust the line structure\n    if (change.full) {\n      doc.insert(0, linesFor(0, text.length));\n      doc.remove(text.length, doc.size - text.length);\n    } else if (isWholeLineUpdate(doc, change)) {\n      // This is a whole-line replace. Treated specially to make\n      // sure line objects move the way they are supposed to.\n      var added = linesFor(0, text.length - 1);\n      update(lastLine, lastLine.text, lastSpans);\n      if (nlines) { doc.remove(from.line, nlines); }\n      if (added.length) { doc.insert(from.line, added); }\n    } else if (firstLine == lastLine) {\n      if (text.length == 1) {\n        update(firstLine, firstLine.text.slice(0, from.ch) + lastText + firstLine.text.slice(to.ch), lastSpans);\n      } else {\n        var added$1 = linesFor(1, text.length - 1);\n        added$1.push(new Line(lastText + firstLine.text.slice(to.ch), lastSpans, estimateHeight));\n        update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n        doc.insert(from.line + 1, added$1);\n      }\n    } else if (text.length == 1) {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0] + lastLine.text.slice(to.ch), spansFor(0));\n      doc.remove(from.line + 1, nlines);\n    } else {\n      update(firstLine, firstLine.text.slice(0, from.ch) + text[0], spansFor(0));\n      update(lastLine, lastText + lastLine.text.slice(to.ch), lastSpans);\n      var added$2 = linesFor(1, text.length - 1);\n      if (nlines > 1) { doc.remove(from.line + 1, nlines - 1); }\n      doc.insert(from.line + 1, added$2);\n    }\n\n    signalLater(doc, \"change\", doc, change);\n  }\n\n  // Call f for all linked documents.\n  function linkedDocs(doc, f, sharedHistOnly) {\n    function propagate(doc, skip, sharedHist) {\n      if (doc.linked) { for (var i = 0; i < doc.linked.length; ++i) {\n        var rel = doc.linked[i];\n        if (rel.doc == skip) { continue }\n        var shared = sharedHist && rel.sharedHist;\n        if (sharedHistOnly && !shared) { continue }\n        f(rel.doc, shared);\n        propagate(rel.doc, doc, shared);\n      } }\n    }\n    propagate(doc, null, true);\n  }\n\n  // Attach a document to an editor.\n  function attachDoc(cm, doc) {\n    if (doc.cm) { throw new Error(\"This document is already in use.\") }\n    cm.doc = doc;\n    doc.cm = cm;\n    estimateLineHeights(cm);\n    loadMode(cm);\n    setDirectionClass(cm);\n    cm.options.direction = doc.direction;\n    if (!cm.options.lineWrapping) { findMaxLine(cm); }\n    cm.options.mode = doc.modeOption;\n    regChange(cm);\n  }\n\n  function setDirectionClass(cm) {\n  (cm.doc.direction == \"rtl\" ? addClass : rmClass)(cm.display.lineDiv, \"CodeMirror-rtl\");\n  }\n\n  function directionChanged(cm) {\n    runInOp(cm, function () {\n      setDirectionClass(cm);\n      regChange(cm);\n    });\n  }\n\n  function History(prev) {\n    // Arrays of change events and selections. Doing something adds an\n    // event to done and clears undo. Undoing moves events from done\n    // to undone, redoing moves them in the other direction.\n    this.done = []; this.undone = [];\n    this.undoDepth = prev ? prev.undoDepth : Infinity;\n    // Used to track when changes can be merged into a single undo\n    // event\n    this.lastModTime = this.lastSelTime = 0;\n    this.lastOp = this.lastSelOp = null;\n    this.lastOrigin = this.lastSelOrigin = null;\n    // Used by the isClean() method\n    this.generation = this.maxGeneration = prev ? prev.maxGeneration : 1;\n  }\n\n  // Create a history change event from an updateDoc-style change\n  // object.\n  function historyChangeFromChange(doc, change) {\n    var histChange = {from: copyPos(change.from), to: changeEnd(change), text: getBetween(doc, change.from, change.to)};\n    attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1);\n    linkedDocs(doc, function (doc) { return attachLocalSpans(doc, histChange, change.from.line, change.to.line + 1); }, true);\n    return histChange\n  }\n\n  // Pop all selection events off the end of a history array. Stop at\n  // a change event.\n  function clearSelectionEvents(array) {\n    while (array.length) {\n      var last = lst(array);\n      if (last.ranges) { array.pop(); }\n      else { break }\n    }\n  }\n\n  // Find the top change event in the history. Pop off selection\n  // events that are in the way.\n  function lastChangeEvent(hist, force) {\n    if (force) {\n      clearSelectionEvents(hist.done);\n      return lst(hist.done)\n    } else if (hist.done.length && !lst(hist.done).ranges) {\n      return lst(hist.done)\n    } else if (hist.done.length > 1 && !hist.done[hist.done.length - 2].ranges) {\n      hist.done.pop();\n      return lst(hist.done)\n    }\n  }\n\n  // Register a change in the history. Merges changes that are within\n  // a single operation, or are close together with an origin that\n  // allows merging (starting with \"+\") into a single event.\n  function addChangeToHistory(doc, change, selAfter, opId) {\n    var hist = doc.history;\n    hist.undone.length = 0;\n    var time = +new Date, cur;\n    var last;\n\n    if ((hist.lastOp == opId ||\n         hist.lastOrigin == change.origin && change.origin &&\n         ((change.origin.charAt(0) == \"+\" && hist.lastModTime > time - (doc.cm ? doc.cm.options.historyEventDelay : 500)) ||\n          change.origin.charAt(0) == \"*\")) &&\n        (cur = lastChangeEvent(hist, hist.lastOp == opId))) {\n      // Merge this change into the last event\n      last = lst(cur.changes);\n      if (cmp(change.from, change.to) == 0 && cmp(change.from, last.to) == 0) {\n        // Optimized case for simple insertion -- don't want to add\n        // new changesets for every character typed\n        last.to = changeEnd(change);\n      } else {\n        // Add new sub-event\n        cur.changes.push(historyChangeFromChange(doc, change));\n      }\n    } else {\n      // Can not be merged, start a new event.\n      var before = lst(hist.done);\n      if (!before || !before.ranges)\n        { pushSelectionToHistory(doc.sel, hist.done); }\n      cur = {changes: [historyChangeFromChange(doc, change)],\n             generation: hist.generation};\n      hist.done.push(cur);\n      while (hist.done.length > hist.undoDepth) {\n        hist.done.shift();\n        if (!hist.done[0].ranges) { hist.done.shift(); }\n      }\n    }\n    hist.done.push(selAfter);\n    hist.generation = ++hist.maxGeneration;\n    hist.lastModTime = hist.lastSelTime = time;\n    hist.lastOp = hist.lastSelOp = opId;\n    hist.lastOrigin = hist.lastSelOrigin = change.origin;\n\n    if (!last) { signal(doc, \"historyAdded\"); }\n  }\n\n  function selectionEventCanBeMerged(doc, origin, prev, sel) {\n    var ch = origin.charAt(0);\n    return ch == \"*\" ||\n      ch == \"+\" &&\n      prev.ranges.length == sel.ranges.length &&\n      prev.somethingSelected() == sel.somethingSelected() &&\n      new Date - doc.history.lastSelTime <= (doc.cm ? doc.cm.options.historyEventDelay : 500)\n  }\n\n  // Called whenever the selection changes, sets the new selection as\n  // the pending selection in the history, and pushes the old pending\n  // selection into the 'done' array when it was significantly\n  // different (in number of selected ranges, emptiness, or time).\n  function addSelectionToHistory(doc, sel, opId, options) {\n    var hist = doc.history, origin = options && options.origin;\n\n    // A new event is started when the previous origin does not match\n    // the current, or the origins don't allow matching. Origins\n    // starting with * are always merged, those starting with + are\n    // merged when similar and close together in time.\n    if (opId == hist.lastSelOp ||\n        (origin && hist.lastSelOrigin == origin &&\n         (hist.lastModTime == hist.lastSelTime && hist.lastOrigin == origin ||\n          selectionEventCanBeMerged(doc, origin, lst(hist.done), sel))))\n      { hist.done[hist.done.length - 1] = sel; }\n    else\n      { pushSelectionToHistory(sel, hist.done); }\n\n    hist.lastSelTime = +new Date;\n    hist.lastSelOrigin = origin;\n    hist.lastSelOp = opId;\n    if (options && options.clearRedo !== false)\n      { clearSelectionEvents(hist.undone); }\n  }\n\n  function pushSelectionToHistory(sel, dest) {\n    var top = lst(dest);\n    if (!(top && top.ranges && top.equals(sel)))\n      { dest.push(sel); }\n  }\n\n  // Used to store marked span information in the history.\n  function attachLocalSpans(doc, change, from, to) {\n    var existing = change[\"spans_\" + doc.id], n = 0;\n    doc.iter(Math.max(doc.first, from), Math.min(doc.first + doc.size, to), function (line) {\n      if (line.markedSpans)\n        { (existing || (existing = change[\"spans_\" + doc.id] = {}))[n] = line.markedSpans; }\n      ++n;\n    });\n  }\n\n  // When un/re-doing restores text containing marked spans, those\n  // that have been explicitly cleared should not be restored.\n  function removeClearedSpans(spans) {\n    if (!spans) { return null }\n    var out;\n    for (var i = 0; i < spans.length; ++i) {\n      if (spans[i].marker.explicitlyCleared) { if (!out) { out = spans.slice(0, i); } }\n      else if (out) { out.push(spans[i]); }\n    }\n    return !out ? spans : out.length ? out : null\n  }\n\n  // Retrieve and filter the old marked spans stored in a change event.\n  function getOldSpans(doc, change) {\n    var found = change[\"spans_\" + doc.id];\n    if (!found) { return null }\n    var nw = [];\n    for (var i = 0; i < change.text.length; ++i)\n      { nw.push(removeClearedSpans(found[i])); }\n    return nw\n  }\n\n  // Used for un/re-doing changes from the history. Combines the\n  // result of computing the existing spans with the set of spans that\n  // existed in the history (so that deleting around a span and then\n  // undoing brings back the span).\n  function mergeOldSpans(doc, change) {\n    var old = getOldSpans(doc, change);\n    var stretched = stretchSpansOverChange(doc, change);\n    if (!old) { return stretched }\n    if (!stretched) { return old }\n\n    for (var i = 0; i < old.length; ++i) {\n      var oldCur = old[i], stretchCur = stretched[i];\n      if (oldCur && stretchCur) {\n        spans: for (var j = 0; j < stretchCur.length; ++j) {\n          var span = stretchCur[j];\n          for (var k = 0; k < oldCur.length; ++k)\n            { if (oldCur[k].marker == span.marker) { continue spans } }\n          oldCur.push(span);\n        }\n      } else if (stretchCur) {\n        old[i] = stretchCur;\n      }\n    }\n    return old\n  }\n\n  // Used both to provide a JSON-safe object in .getHistory, and, when\n  // detaching a document, to split the history in two\n  function copyHistoryArray(events, newGroup, instantiateSel) {\n    var copy = [];\n    for (var i = 0; i < events.length; ++i) {\n      var event = events[i];\n      if (event.ranges) {\n        copy.push(instantiateSel ? Selection.prototype.deepCopy.call(event) : event);\n        continue\n      }\n      var changes = event.changes, newChanges = [];\n      copy.push({changes: newChanges});\n      for (var j = 0; j < changes.length; ++j) {\n        var change = changes[j], m = (void 0);\n        newChanges.push({from: change.from, to: change.to, text: change.text});\n        if (newGroup) { for (var prop in change) { if (m = prop.match(/^spans_(\\d+)$/)) {\n          if (indexOf(newGroup, Number(m[1])) > -1) {\n            lst(newChanges)[prop] = change[prop];\n            delete change[prop];\n          }\n        } } }\n      }\n    }\n    return copy\n  }\n\n  // The 'scroll' parameter given to many of these indicated whether\n  // the new cursor position should be scrolled into view after\n  // modifying the selection.\n\n  // If shift is held or the extend flag is set, extends a range to\n  // include a given position (and optionally a second position).\n  // Otherwise, simply returns the range between the given positions.\n  // Used for cursor motion and such.\n  function extendRange(range, head, other, extend) {\n    if (extend) {\n      var anchor = range.anchor;\n      if (other) {\n        var posBefore = cmp(head, anchor) < 0;\n        if (posBefore != (cmp(other, anchor) < 0)) {\n          anchor = head;\n          head = other;\n        } else if (posBefore != (cmp(head, other) < 0)) {\n          head = other;\n        }\n      }\n      return new Range(anchor, head)\n    } else {\n      return new Range(other || head, head)\n    }\n  }\n\n  // Extend the primary selection range, discard the rest.\n  function extendSelection(doc, head, other, options, extend) {\n    if (extend == null) { extend = doc.cm && (doc.cm.display.shift || doc.extend); }\n    setSelection(doc, new Selection([extendRange(doc.sel.primary(), head, other, extend)], 0), options);\n  }\n\n  // Extend all selections (pos is an array of selections with length\n  // equal the number of selections)\n  function extendSelections(doc, heads, options) {\n    var out = [];\n    var extend = doc.cm && (doc.cm.display.shift || doc.extend);\n    for (var i = 0; i < doc.sel.ranges.length; i++)\n      { out[i] = extendRange(doc.sel.ranges[i], heads[i], null, extend); }\n    var newSel = normalizeSelection(doc.cm, out, doc.sel.primIndex);\n    setSelection(doc, newSel, options);\n  }\n\n  // Updates a single range in the selection.\n  function replaceOneSelection(doc, i, range, options) {\n    var ranges = doc.sel.ranges.slice(0);\n    ranges[i] = range;\n    setSelection(doc, normalizeSelection(doc.cm, ranges, doc.sel.primIndex), options);\n  }\n\n  // Reset the selection to a single range.\n  function setSimpleSelection(doc, anchor, head, options) {\n    setSelection(doc, simpleSelection(anchor, head), options);\n  }\n\n  // Give beforeSelectionChange handlers a change to influence a\n  // selection update.\n  function filterSelectionChange(doc, sel, options) {\n    var obj = {\n      ranges: sel.ranges,\n      update: function(ranges) {\n        this.ranges = [];\n        for (var i = 0; i < ranges.length; i++)\n          { this.ranges[i] = new Range(clipPos(doc, ranges[i].anchor),\n                                     clipPos(doc, ranges[i].head)); }\n      },\n      origin: options && options.origin\n    };\n    signal(doc, \"beforeSelectionChange\", doc, obj);\n    if (doc.cm) { signal(doc.cm, \"beforeSelectionChange\", doc.cm, obj); }\n    if (obj.ranges != sel.ranges) { return normalizeSelection(doc.cm, obj.ranges, obj.ranges.length - 1) }\n    else { return sel }\n  }\n\n  function setSelectionReplaceHistory(doc, sel, options) {\n    var done = doc.history.done, last = lst(done);\n    if (last && last.ranges) {\n      done[done.length - 1] = sel;\n      setSelectionNoUndo(doc, sel, options);\n    } else {\n      setSelection(doc, sel, options);\n    }\n  }\n\n  // Set a new selection.\n  function setSelection(doc, sel, options) {\n    setSelectionNoUndo(doc, sel, options);\n    addSelectionToHistory(doc, doc.sel, doc.cm ? doc.cm.curOp.id : NaN, options);\n  }\n\n  function setSelectionNoUndo(doc, sel, options) {\n    if (hasHandler(doc, \"beforeSelectionChange\") || doc.cm && hasHandler(doc.cm, \"beforeSelectionChange\"))\n      { sel = filterSelectionChange(doc, sel, options); }\n\n    var bias = options && options.bias ||\n      (cmp(sel.primary().head, doc.sel.primary().head) < 0 ? -1 : 1);\n    setSelectionInner(doc, skipAtomicInSelection(doc, sel, bias, true));\n\n    if (!(options && options.scroll === false) && doc.cm && doc.cm.getOption(\"readOnly\") != \"nocursor\")\n      { ensureCursorVisible(doc.cm); }\n  }\n\n  function setSelectionInner(doc, sel) {\n    if (sel.equals(doc.sel)) { return }\n\n    doc.sel = sel;\n\n    if (doc.cm) {\n      doc.cm.curOp.updateInput = 1;\n      doc.cm.curOp.selectionChanged = true;\n      signalCursorActivity(doc.cm);\n    }\n    signalLater(doc, \"cursorActivity\", doc);\n  }\n\n  // Verify that the selection does not partially select any atomic\n  // marked ranges.\n  function reCheckSelection(doc) {\n    setSelectionInner(doc, skipAtomicInSelection(doc, doc.sel, null, false));\n  }\n\n  // Return a selection that does not partially select any atomic\n  // ranges.\n  function skipAtomicInSelection(doc, sel, bias, mayClear) {\n    var out;\n    for (var i = 0; i < sel.ranges.length; i++) {\n      var range = sel.ranges[i];\n      var old = sel.ranges.length == doc.sel.ranges.length && doc.sel.ranges[i];\n      var newAnchor = skipAtomic(doc, range.anchor, old && old.anchor, bias, mayClear);\n      var newHead = range.head == range.anchor ? newAnchor : skipAtomic(doc, range.head, old && old.head, bias, mayClear);\n      if (out || newAnchor != range.anchor || newHead != range.head) {\n        if (!out) { out = sel.ranges.slice(0, i); }\n        out[i] = new Range(newAnchor, newHead);\n      }\n    }\n    return out ? normalizeSelection(doc.cm, out, sel.primIndex) : sel\n  }\n\n  function skipAtomicInner(doc, pos, oldPos, dir, mayClear) {\n    var line = getLine(doc, pos.line);\n    if (line.markedSpans) { for (var i = 0; i < line.markedSpans.length; ++i) {\n      var sp = line.markedSpans[i], m = sp.marker;\n\n      // Determine if we should prevent the cursor being placed to the left/right of an atomic marker\n      // Historically this was determined using the inclusiveLeft/Right option, but the new way to control it\n      // is with selectLeft/Right\n      var preventCursorLeft = (\"selectLeft\" in m) ? !m.selectLeft : m.inclusiveLeft;\n      var preventCursorRight = (\"selectRight\" in m) ? !m.selectRight : m.inclusiveRight;\n\n      if ((sp.from == null || (preventCursorLeft ? sp.from <= pos.ch : sp.from < pos.ch)) &&\n          (sp.to == null || (preventCursorRight ? sp.to >= pos.ch : sp.to > pos.ch))) {\n        if (mayClear) {\n          signal(m, \"beforeCursorEnter\");\n          if (m.explicitlyCleared) {\n            if (!line.markedSpans) { break }\n            else {--i; continue}\n          }\n        }\n        if (!m.atomic) { continue }\n\n        if (oldPos) {\n          var near = m.find(dir < 0 ? 1 : -1), diff = (void 0);\n          if (dir < 0 ? preventCursorRight : preventCursorLeft)\n            { near = movePos(doc, near, -dir, near && near.line == pos.line ? line : null); }\n          if (near && near.line == pos.line && (diff = cmp(near, oldPos)) && (dir < 0 ? diff < 0 : diff > 0))\n            { return skipAtomicInner(doc, near, pos, dir, mayClear) }\n        }\n\n        var far = m.find(dir < 0 ? -1 : 1);\n        if (dir < 0 ? preventCursorLeft : preventCursorRight)\n          { far = movePos(doc, far, dir, far.line == pos.line ? line : null); }\n        return far ? skipAtomicInner(doc, far, pos, dir, mayClear) : null\n      }\n    } }\n    return pos\n  }\n\n  // Ensure a given position is not inside an atomic range.\n  function skipAtomic(doc, pos, oldPos, bias, mayClear) {\n    var dir = bias || 1;\n    var found = skipAtomicInner(doc, pos, oldPos, dir, mayClear) ||\n        (!mayClear && skipAtomicInner(doc, pos, oldPos, dir, true)) ||\n        skipAtomicInner(doc, pos, oldPos, -dir, mayClear) ||\n        (!mayClear && skipAtomicInner(doc, pos, oldPos, -dir, true));\n    if (!found) {\n      doc.cantEdit = true;\n      return Pos(doc.first, 0)\n    }\n    return found\n  }\n\n  function movePos(doc, pos, dir, line) {\n    if (dir < 0 && pos.ch == 0) {\n      if (pos.line > doc.first) { return clipPos(doc, Pos(pos.line - 1)) }\n      else { return null }\n    } else if (dir > 0 && pos.ch == (line || getLine(doc, pos.line)).text.length) {\n      if (pos.line < doc.first + doc.size - 1) { return Pos(pos.line + 1, 0) }\n      else { return null }\n    } else {\n      return new Pos(pos.line, pos.ch + dir)\n    }\n  }\n\n  function selectAll(cm) {\n    cm.setSelection(Pos(cm.firstLine(), 0), Pos(cm.lastLine()), sel_dontScroll);\n  }\n\n  // UPDATING\n\n  // Allow \"beforeChange\" event handlers to influence a change\n  function filterChange(doc, change, update) {\n    var obj = {\n      canceled: false,\n      from: change.from,\n      to: change.to,\n      text: change.text,\n      origin: change.origin,\n      cancel: function () { return obj.canceled = true; }\n    };\n    if (update) { obj.update = function (from, to, text, origin) {\n      if (from) { obj.from = clipPos(doc, from); }\n      if (to) { obj.to = clipPos(doc, to); }\n      if (text) { obj.text = text; }\n      if (origin !== undefined) { obj.origin = origin; }\n    }; }\n    signal(doc, \"beforeChange\", doc, obj);\n    if (doc.cm) { signal(doc.cm, \"beforeChange\", doc.cm, obj); }\n\n    if (obj.canceled) {\n      if (doc.cm) { doc.cm.curOp.updateInput = 2; }\n      return null\n    }\n    return {from: obj.from, to: obj.to, text: obj.text, origin: obj.origin}\n  }\n\n  // Apply a change to a document, and add it to the document's\n  // history, and propagating it to all linked documents.\n  function makeChange(doc, change, ignoreReadOnly) {\n    if (doc.cm) {\n      if (!doc.cm.curOp) { return operation(doc.cm, makeChange)(doc, change, ignoreReadOnly) }\n      if (doc.cm.state.suppressEdits) { return }\n    }\n\n    if (hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\")) {\n      change = filterChange(doc, change, true);\n      if (!change) { return }\n    }\n\n    // Possibly split or suppress the update based on the presence\n    // of read-only spans in its range.\n    var split = sawReadOnlySpans && !ignoreReadOnly && removeReadOnlyRanges(doc, change.from, change.to);\n    if (split) {\n      for (var i = split.length - 1; i >= 0; --i)\n        { makeChangeInner(doc, {from: split[i].from, to: split[i].to, text: i ? [\"\"] : change.text, origin: change.origin}); }\n    } else {\n      makeChangeInner(doc, change);\n    }\n  }\n\n  function makeChangeInner(doc, change) {\n    if (change.text.length == 1 && change.text[0] == \"\" && cmp(change.from, change.to) == 0) { return }\n    var selAfter = computeSelAfterChange(doc, change);\n    addChangeToHistory(doc, change, selAfter, doc.cm ? doc.cm.curOp.id : NaN);\n\n    makeChangeSingleDoc(doc, change, selAfter, stretchSpansOverChange(doc, change));\n    var rebased = [];\n\n    linkedDocs(doc, function (doc, sharedHist) {\n      if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n        rebaseHist(doc.history, change);\n        rebased.push(doc.history);\n      }\n      makeChangeSingleDoc(doc, change, null, stretchSpansOverChange(doc, change));\n    });\n  }\n\n  // Revert a change stored in a document's history.\n  function makeChangeFromHistory(doc, type, allowSelectionOnly) {\n    var suppress = doc.cm && doc.cm.state.suppressEdits;\n    if (suppress && !allowSelectionOnly) { return }\n\n    var hist = doc.history, event, selAfter = doc.sel;\n    var source = type == \"undo\" ? hist.done : hist.undone, dest = type == \"undo\" ? hist.undone : hist.done;\n\n    // Verify that there is a useable event (so that ctrl-z won't\n    // needlessly clear selection events)\n    var i = 0;\n    for (; i < source.length; i++) {\n      event = source[i];\n      if (allowSelectionOnly ? event.ranges && !event.equals(doc.sel) : !event.ranges)\n        { break }\n    }\n    if (i == source.length) { return }\n    hist.lastOrigin = hist.lastSelOrigin = null;\n\n    for (;;) {\n      event = source.pop();\n      if (event.ranges) {\n        pushSelectionToHistory(event, dest);\n        if (allowSelectionOnly && !event.equals(doc.sel)) {\n          setSelection(doc, event, {clearRedo: false});\n          return\n        }\n        selAfter = event;\n      } else if (suppress) {\n        source.push(event);\n        return\n      } else { break }\n    }\n\n    // Build up a reverse change object to add to the opposite history\n    // stack (redo when undoing, and vice versa).\n    var antiChanges = [];\n    pushSelectionToHistory(selAfter, dest);\n    dest.push({changes: antiChanges, generation: hist.generation});\n    hist.generation = event.generation || ++hist.maxGeneration;\n\n    var filter = hasHandler(doc, \"beforeChange\") || doc.cm && hasHandler(doc.cm, \"beforeChange\");\n\n    var loop = function ( i ) {\n      var change = event.changes[i];\n      change.origin = type;\n      if (filter && !filterChange(doc, change, false)) {\n        source.length = 0;\n        return {}\n      }\n\n      antiChanges.push(historyChangeFromChange(doc, change));\n\n      var after = i ? computeSelAfterChange(doc, change) : lst(source);\n      makeChangeSingleDoc(doc, change, after, mergeOldSpans(doc, change));\n      if (!i && doc.cm) { doc.cm.scrollIntoView({from: change.from, to: changeEnd(change)}); }\n      var rebased = [];\n\n      // Propagate to the linked documents\n      linkedDocs(doc, function (doc, sharedHist) {\n        if (!sharedHist && indexOf(rebased, doc.history) == -1) {\n          rebaseHist(doc.history, change);\n          rebased.push(doc.history);\n        }\n        makeChangeSingleDoc(doc, change, null, mergeOldSpans(doc, change));\n      });\n    };\n\n    for (var i$1 = event.changes.length - 1; i$1 >= 0; --i$1) {\n      var returned = loop( i$1 );\n\n      if ( returned ) return returned.v;\n    }\n  }\n\n  // Sub-views need their line numbers shifted when text is added\n  // above or below them in the parent document.\n  function shiftDoc(doc, distance) {\n    if (distance == 0) { return }\n    doc.first += distance;\n    doc.sel = new Selection(map(doc.sel.ranges, function (range) { return new Range(\n      Pos(range.anchor.line + distance, range.anchor.ch),\n      Pos(range.head.line + distance, range.head.ch)\n    ); }), doc.sel.primIndex);\n    if (doc.cm) {\n      regChange(doc.cm, doc.first, doc.first - distance, distance);\n      for (var d = doc.cm.display, l = d.viewFrom; l < d.viewTo; l++)\n        { regLineChange(doc.cm, l, \"gutter\"); }\n    }\n  }\n\n  // More lower-level change function, handling only a single document\n  // (not linked ones).\n  function makeChangeSingleDoc(doc, change, selAfter, spans) {\n    if (doc.cm && !doc.cm.curOp)\n      { return operation(doc.cm, makeChangeSingleDoc)(doc, change, selAfter, spans) }\n\n    if (change.to.line < doc.first) {\n      shiftDoc(doc, change.text.length - 1 - (change.to.line - change.from.line));\n      return\n    }\n    if (change.from.line > doc.lastLine()) { return }\n\n    // Clip the change to the size of this doc\n    if (change.from.line < doc.first) {\n      var shift = change.text.length - 1 - (doc.first - change.from.line);\n      shiftDoc(doc, shift);\n      change = {from: Pos(doc.first, 0), to: Pos(change.to.line + shift, change.to.ch),\n                text: [lst(change.text)], origin: change.origin};\n    }\n    var last = doc.lastLine();\n    if (change.to.line > last) {\n      change = {from: change.from, to: Pos(last, getLine(doc, last).text.length),\n                text: [change.text[0]], origin: change.origin};\n    }\n\n    change.removed = getBetween(doc, change.from, change.to);\n\n    if (!selAfter) { selAfter = computeSelAfterChange(doc, change); }\n    if (doc.cm) { makeChangeSingleDocInEditor(doc.cm, change, spans); }\n    else { updateDoc(doc, change, spans); }\n    setSelectionNoUndo(doc, selAfter, sel_dontScroll);\n\n    if (doc.cantEdit && skipAtomic(doc, Pos(doc.firstLine(), 0)))\n      { doc.cantEdit = false; }\n  }\n\n  // Handle the interaction of a change to a document with the editor\n  // that this document is part of.\n  function makeChangeSingleDocInEditor(cm, change, spans) {\n    var doc = cm.doc, display = cm.display, from = change.from, to = change.to;\n\n    var recomputeMaxLength = false, checkWidthStart = from.line;\n    if (!cm.options.lineWrapping) {\n      checkWidthStart = lineNo(visualLine(getLine(doc, from.line)));\n      doc.iter(checkWidthStart, to.line + 1, function (line) {\n        if (line == display.maxLine) {\n          recomputeMaxLength = true;\n          return true\n        }\n      });\n    }\n\n    if (doc.sel.contains(change.from, change.to) > -1)\n      { signalCursorActivity(cm); }\n\n    updateDoc(doc, change, spans, estimateHeight(cm));\n\n    if (!cm.options.lineWrapping) {\n      doc.iter(checkWidthStart, from.line + change.text.length, function (line) {\n        var len = lineLength(line);\n        if (len > display.maxLineLength) {\n          display.maxLine = line;\n          display.maxLineLength = len;\n          display.maxLineChanged = true;\n          recomputeMaxLength = false;\n        }\n      });\n      if (recomputeMaxLength) { cm.curOp.updateMaxLine = true; }\n    }\n\n    retreatFrontier(doc, from.line);\n    startWorker(cm, 400);\n\n    var lendiff = change.text.length - (to.line - from.line) - 1;\n    // Remember that these lines changed, for updating the display\n    if (change.full)\n      { regChange(cm); }\n    else if (from.line == to.line && change.text.length == 1 && !isWholeLineUpdate(cm.doc, change))\n      { regLineChange(cm, from.line, \"text\"); }\n    else\n      { regChange(cm, from.line, to.line + 1, lendiff); }\n\n    var changesHandler = hasHandler(cm, \"changes\"), changeHandler = hasHandler(cm, \"change\");\n    if (changeHandler || changesHandler) {\n      var obj = {\n        from: from, to: to,\n        text: change.text,\n        removed: change.removed,\n        origin: change.origin\n      };\n      if (changeHandler) { signalLater(cm, \"change\", cm, obj); }\n      if (changesHandler) { (cm.curOp.changeObjs || (cm.curOp.changeObjs = [])).push(obj); }\n    }\n    cm.display.selForContextMenu = null;\n  }\n\n  function replaceRange(doc, code, from, to, origin) {\n    var assign;\n\n    if (!to) { to = from; }\n    if (cmp(to, from) < 0) { (assign = [to, from], from = assign[0], to = assign[1]); }\n    if (typeof code == \"string\") { code = doc.splitLines(code); }\n    makeChange(doc, {from: from, to: to, text: code, origin: origin});\n  }\n\n  // Rebasing/resetting history to deal with externally-sourced changes\n\n  function rebaseHistSelSingle(pos, from, to, diff) {\n    if (to < pos.line) {\n      pos.line += diff;\n    } else if (from < pos.line) {\n      pos.line = from;\n      pos.ch = 0;\n    }\n  }\n\n  // Tries to rebase an array of history events given a change in the\n  // document. If the change touches the same lines as the event, the\n  // event, and everything 'behind' it, is discarded. If the change is\n  // before the event, the event's positions are updated. Uses a\n  // copy-on-write scheme for the positions, to avoid having to\n  // reallocate them all on every rebase, but also avoid problems with\n  // shared position objects being unsafely updated.\n  function rebaseHistArray(array, from, to, diff) {\n    for (var i = 0; i < array.length; ++i) {\n      var sub = array[i], ok = true;\n      if (sub.ranges) {\n        if (!sub.copied) { sub = array[i] = sub.deepCopy(); sub.copied = true; }\n        for (var j = 0; j < sub.ranges.length; j++) {\n          rebaseHistSelSingle(sub.ranges[j].anchor, from, to, diff);\n          rebaseHistSelSingle(sub.ranges[j].head, from, to, diff);\n        }\n        continue\n      }\n      for (var j$1 = 0; j$1 < sub.changes.length; ++j$1) {\n        var cur = sub.changes[j$1];\n        if (to < cur.from.line) {\n          cur.from = Pos(cur.from.line + diff, cur.from.ch);\n          cur.to = Pos(cur.to.line + diff, cur.to.ch);\n        } else if (from <= cur.to.line) {\n          ok = false;\n          break\n        }\n      }\n      if (!ok) {\n        array.splice(0, i + 1);\n        i = 0;\n      }\n    }\n  }\n\n  function rebaseHist(hist, change) {\n    var from = change.from.line, to = change.to.line, diff = change.text.length - (to - from) - 1;\n    rebaseHistArray(hist.done, from, to, diff);\n    rebaseHistArray(hist.undone, from, to, diff);\n  }\n\n  // Utility for applying a change to a line by handle or number,\n  // returning the number and optionally registering the line as\n  // changed.\n  function changeLine(doc, handle, changeType, op) {\n    var no = handle, line = handle;\n    if (typeof handle == \"number\") { line = getLine(doc, clipLine(doc, handle)); }\n    else { no = lineNo(handle); }\n    if (no == null) { return null }\n    if (op(line, no) && doc.cm) { regLineChange(doc.cm, no, changeType); }\n    return line\n  }\n\n  // The document is represented as a BTree consisting of leaves, with\n  // chunk of lines in them, and branches, with up to ten leaves or\n  // other branch nodes below them. The top node is always a branch\n  // node, and is the document object itself (meaning it has\n  // additional methods and properties).\n  //\n  // All nodes have parent links. The tree is used both to go from\n  // line numbers to line objects, and to go from objects to numbers.\n  // It also indexes by height, and is used to convert between height\n  // and line object, and to find the total height of the document.\n  //\n  // See also http://marijnhaverbeke.nl/blog/codemirror-line-tree.html\n\n  function LeafChunk(lines) {\n    this.lines = lines;\n    this.parent = null;\n    var height = 0;\n    for (var i = 0; i < lines.length; ++i) {\n      lines[i].parent = this;\n      height += lines[i].height;\n    }\n    this.height = height;\n  }\n\n  LeafChunk.prototype = {\n    chunkSize: function() { return this.lines.length },\n\n    // Remove the n lines at offset 'at'.\n    removeInner: function(at, n) {\n      for (var i = at, e = at + n; i < e; ++i) {\n        var line = this.lines[i];\n        this.height -= line.height;\n        cleanUpLine(line);\n        signalLater(line, \"delete\");\n      }\n      this.lines.splice(at, n);\n    },\n\n    // Helper used to collapse a small branch into a single leaf.\n    collapse: function(lines) {\n      lines.push.apply(lines, this.lines);\n    },\n\n    // Insert the given array of lines at offset 'at', count them as\n    // having the given height.\n    insertInner: function(at, lines, height) {\n      this.height += height;\n      this.lines = this.lines.slice(0, at).concat(lines).concat(this.lines.slice(at));\n      for (var i = 0; i < lines.length; ++i) { lines[i].parent = this; }\n    },\n\n    // Used to iterate over a part of the tree.\n    iterN: function(at, n, op) {\n      for (var e = at + n; at < e; ++at)\n        { if (op(this.lines[at])) { return true } }\n    }\n  };\n\n  function BranchChunk(children) {\n    this.children = children;\n    var size = 0, height = 0;\n    for (var i = 0; i < children.length; ++i) {\n      var ch = children[i];\n      size += ch.chunkSize(); height += ch.height;\n      ch.parent = this;\n    }\n    this.size = size;\n    this.height = height;\n    this.parent = null;\n  }\n\n  BranchChunk.prototype = {\n    chunkSize: function() { return this.size },\n\n    removeInner: function(at, n) {\n      this.size -= n;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at < sz) {\n          var rm = Math.min(n, sz - at), oldHeight = child.height;\n          child.removeInner(at, rm);\n          this.height -= oldHeight - child.height;\n          if (sz == rm) { this.children.splice(i--, 1); child.parent = null; }\n          if ((n -= rm) == 0) { break }\n          at = 0;\n        } else { at -= sz; }\n      }\n      // If the result is smaller than 25 lines, ensure that it is a\n      // single leaf node.\n      if (this.size - n < 25 &&\n          (this.children.length > 1 || !(this.children[0] instanceof LeafChunk))) {\n        var lines = [];\n        this.collapse(lines);\n        this.children = [new LeafChunk(lines)];\n        this.children[0].parent = this;\n      }\n    },\n\n    collapse: function(lines) {\n      for (var i = 0; i < this.children.length; ++i) { this.children[i].collapse(lines); }\n    },\n\n    insertInner: function(at, lines, height) {\n      this.size += lines.length;\n      this.height += height;\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at <= sz) {\n          child.insertInner(at, lines, height);\n          if (child.lines && child.lines.length > 50) {\n            // To avoid memory thrashing when child.lines is huge (e.g. first view of a large file), it's never spliced.\n            // Instead, small slices are taken. They're taken in order because sequential memory accesses are fastest.\n            var remaining = child.lines.length % 25 + 25;\n            for (var pos = remaining; pos < child.lines.length;) {\n              var leaf = new LeafChunk(child.lines.slice(pos, pos += 25));\n              child.height -= leaf.height;\n              this.children.splice(++i, 0, leaf);\n              leaf.parent = this;\n            }\n            child.lines = child.lines.slice(0, remaining);\n            this.maybeSpill();\n          }\n          break\n        }\n        at -= sz;\n      }\n    },\n\n    // When a node has grown, check whether it should be split.\n    maybeSpill: function() {\n      if (this.children.length <= 10) { return }\n      var me = this;\n      do {\n        var spilled = me.children.splice(me.children.length - 5, 5);\n        var sibling = new BranchChunk(spilled);\n        if (!me.parent) { // Become the parent node\n          var copy = new BranchChunk(me.children);\n          copy.parent = me;\n          me.children = [copy, sibling];\n          me = copy;\n       } else {\n          me.size -= sibling.size;\n          me.height -= sibling.height;\n          var myIndex = indexOf(me.parent.children, me);\n          me.parent.children.splice(myIndex + 1, 0, sibling);\n        }\n        sibling.parent = me.parent;\n      } while (me.children.length > 10)\n      me.parent.maybeSpill();\n    },\n\n    iterN: function(at, n, op) {\n      for (var i = 0; i < this.children.length; ++i) {\n        var child = this.children[i], sz = child.chunkSize();\n        if (at < sz) {\n          var used = Math.min(n, sz - at);\n          if (child.iterN(at, used, op)) { return true }\n          if ((n -= used) == 0) { break }\n          at = 0;\n        } else { at -= sz; }\n      }\n    }\n  };\n\n  // Line widgets are block elements displayed above or below a line.\n\n  var LineWidget = function(doc, node, options) {\n    if (options) { for (var opt in options) { if (options.hasOwnProperty(opt))\n      { this[opt] = options[opt]; } } }\n    this.doc = doc;\n    this.node = node;\n  };\n\n  LineWidget.prototype.clear = function () {\n    var cm = this.doc.cm, ws = this.line.widgets, line = this.line, no = lineNo(line);\n    if (no == null || !ws) { return }\n    for (var i = 0; i < ws.length; ++i) { if (ws[i] == this) { ws.splice(i--, 1); } }\n    if (!ws.length) { line.widgets = null; }\n    var height = widgetHeight(this);\n    updateLineHeight(line, Math.max(0, line.height - height));\n    if (cm) {\n      runInOp(cm, function () {\n        adjustScrollWhenAboveVisible(cm, line, -height);\n        regLineChange(cm, no, \"widget\");\n      });\n      signalLater(cm, \"lineWidgetCleared\", cm, this, no);\n    }\n  };\n\n  LineWidget.prototype.changed = function () {\n      var this$1 = this;\n\n    var oldH = this.height, cm = this.doc.cm, line = this.line;\n    this.height = null;\n    var diff = widgetHeight(this) - oldH;\n    if (!diff) { return }\n    if (!lineIsHidden(this.doc, line)) { updateLineHeight(line, line.height + diff); }\n    if (cm) {\n      runInOp(cm, function () {\n        cm.curOp.forceUpdate = true;\n        adjustScrollWhenAboveVisible(cm, line, diff);\n        signalLater(cm, \"lineWidgetChanged\", cm, this$1, lineNo(line));\n      });\n    }\n  };\n  eventMixin(LineWidget);\n\n  function adjustScrollWhenAboveVisible(cm, line, diff) {\n    if (heightAtLine(line) < ((cm.curOp && cm.curOp.scrollTop) || cm.doc.scrollTop))\n      { addToScrollTop(cm, diff); }\n  }\n\n  function addLineWidget(doc, handle, node, options) {\n    var widget = new LineWidget(doc, node, options);\n    var cm = doc.cm;\n    if (cm && widget.noHScroll) { cm.display.alignWidgets = true; }\n    changeLine(doc, handle, \"widget\", function (line) {\n      var widgets = line.widgets || (line.widgets = []);\n      if (widget.insertAt == null) { widgets.push(widget); }\n      else { widgets.splice(Math.min(widgets.length, Math.max(0, widget.insertAt)), 0, widget); }\n      widget.line = line;\n      if (cm && !lineIsHidden(doc, line)) {\n        var aboveVisible = heightAtLine(line) < doc.scrollTop;\n        updateLineHeight(line, line.height + widgetHeight(widget));\n        if (aboveVisible) { addToScrollTop(cm, widget.height); }\n        cm.curOp.forceUpdate = true;\n      }\n      return true\n    });\n    if (cm) { signalLater(cm, \"lineWidgetAdded\", cm, widget, typeof handle == \"number\" ? handle : lineNo(handle)); }\n    return widget\n  }\n\n  // TEXTMARKERS\n\n  // Created with markText and setBookmark methods. A TextMarker is a\n  // handle that can be used to clear or find a marked position in the\n  // document. Line objects hold arrays (markedSpans) containing\n  // {from, to, marker} object pointing to such marker objects, and\n  // indicating that such a marker is present on that line. Multiple\n  // lines may point to the same marker when it spans across lines.\n  // The spans will have null for their from/to properties when the\n  // marker continues beyond the start/end of the line. Markers have\n  // links back to the lines they currently touch.\n\n  // Collapsed markers have unique ids, in order to be able to order\n  // them, which is needed for uniquely determining an outer marker\n  // when they overlap (they may nest, but not partially overlap).\n  var nextMarkerId = 0;\n\n  var TextMarker = function(doc, type) {\n    this.lines = [];\n    this.type = type;\n    this.doc = doc;\n    this.id = ++nextMarkerId;\n  };\n\n  // Clear the marker.\n  TextMarker.prototype.clear = function () {\n    if (this.explicitlyCleared) { return }\n    var cm = this.doc.cm, withOp = cm && !cm.curOp;\n    if (withOp) { startOperation(cm); }\n    if (hasHandler(this, \"clear\")) {\n      var found = this.find();\n      if (found) { signalLater(this, \"clear\", found.from, found.to); }\n    }\n    var min = null, max = null;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (cm && !this.collapsed) { regLineChange(cm, lineNo(line), \"text\"); }\n      else if (cm) {\n        if (span.to != null) { max = lineNo(line); }\n        if (span.from != null) { min = lineNo(line); }\n      }\n      line.markedSpans = removeMarkedSpan(line.markedSpans, span);\n      if (span.from == null && this.collapsed && !lineIsHidden(this.doc, line) && cm)\n        { updateLineHeight(line, textHeight(cm.display)); }\n    }\n    if (cm && this.collapsed && !cm.options.lineWrapping) { for (var i$1 = 0; i$1 < this.lines.length; ++i$1) {\n      var visual = visualLine(this.lines[i$1]), len = lineLength(visual);\n      if (len > cm.display.maxLineLength) {\n        cm.display.maxLine = visual;\n        cm.display.maxLineLength = len;\n        cm.display.maxLineChanged = true;\n      }\n    } }\n\n    if (min != null && cm && this.collapsed) { regChange(cm, min, max + 1); }\n    this.lines.length = 0;\n    this.explicitlyCleared = true;\n    if (this.atomic && this.doc.cantEdit) {\n      this.doc.cantEdit = false;\n      if (cm) { reCheckSelection(cm.doc); }\n    }\n    if (cm) { signalLater(cm, \"markerCleared\", cm, this, min, max); }\n    if (withOp) { endOperation(cm); }\n    if (this.parent) { this.parent.clear(); }\n  };\n\n  // Find the position of the marker in the document. Returns a {from,\n  // to} object by default. Side can be passed to get a specific side\n  // -- 0 (both), -1 (left), or 1 (right). When lineObj is true, the\n  // Pos objects returned contain a line object, rather than a line\n  // number (used to prevent looking up the same line twice).\n  TextMarker.prototype.find = function (side, lineObj) {\n    if (side == null && this.type == \"bookmark\") { side = 1; }\n    var from, to;\n    for (var i = 0; i < this.lines.length; ++i) {\n      var line = this.lines[i];\n      var span = getMarkedSpanFor(line.markedSpans, this);\n      if (span.from != null) {\n        from = Pos(lineObj ? line : lineNo(line), span.from);\n        if (side == -1) { return from }\n      }\n      if (span.to != null) {\n        to = Pos(lineObj ? line : lineNo(line), span.to);\n        if (side == 1) { return to }\n      }\n    }\n    return from && {from: from, to: to}\n  };\n\n  // Signals that the marker's widget changed, and surrounding layout\n  // should be recomputed.\n  TextMarker.prototype.changed = function () {\n      var this$1 = this;\n\n    var pos = this.find(-1, true), widget = this, cm = this.doc.cm;\n    if (!pos || !cm) { return }\n    runInOp(cm, function () {\n      var line = pos.line, lineN = lineNo(pos.line);\n      var view = findViewForLine(cm, lineN);\n      if (view) {\n        clearLineMeasurementCacheFor(view);\n        cm.curOp.selectionChanged = cm.curOp.forceUpdate = true;\n      }\n      cm.curOp.updateMaxLine = true;\n      if (!lineIsHidden(widget.doc, line) && widget.height != null) {\n        var oldHeight = widget.height;\n        widget.height = null;\n        var dHeight = widgetHeight(widget) - oldHeight;\n        if (dHeight)\n          { updateLineHeight(line, line.height + dHeight); }\n      }\n      signalLater(cm, \"markerChanged\", cm, this$1);\n    });\n  };\n\n  TextMarker.prototype.attachLine = function (line) {\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp;\n      if (!op.maybeHiddenMarkers || indexOf(op.maybeHiddenMarkers, this) == -1)\n        { (op.maybeUnhiddenMarkers || (op.maybeUnhiddenMarkers = [])).push(this); }\n    }\n    this.lines.push(line);\n  };\n\n  TextMarker.prototype.detachLine = function (line) {\n    this.lines.splice(indexOf(this.lines, line), 1);\n    if (!this.lines.length && this.doc.cm) {\n      var op = this.doc.cm.curOp\n      ;(op.maybeHiddenMarkers || (op.maybeHiddenMarkers = [])).push(this);\n    }\n  };\n  eventMixin(TextMarker);\n\n  // Create a marker, wire it up to the right lines, and\n  function markText(doc, from, to, options, type) {\n    // Shared markers (across linked documents) are handled separately\n    // (markTextShared will call out to this again, once per\n    // document).\n    if (options && options.shared) { return markTextShared(doc, from, to, options, type) }\n    // Ensure we are in an operation.\n    if (doc.cm && !doc.cm.curOp) { return operation(doc.cm, markText)(doc, from, to, options, type) }\n\n    var marker = new TextMarker(doc, type), diff = cmp(from, to);\n    if (options) { copyObj(options, marker, false); }\n    // Don't connect empty markers unless clearWhenEmpty is false\n    if (diff > 0 || diff == 0 && marker.clearWhenEmpty !== false)\n      { return marker }\n    if (marker.replacedWith) {\n      // Showing up as a widget implies collapsed (widget replaces text)\n      marker.collapsed = true;\n      marker.widgetNode = eltP(\"span\", [marker.replacedWith], \"CodeMirror-widget\");\n      if (!options.handleMouseEvents) { marker.widgetNode.setAttribute(\"cm-ignore-events\", \"true\"); }\n      if (options.insertLeft) { marker.widgetNode.insertLeft = true; }\n    }\n    if (marker.collapsed) {\n      if (conflictingCollapsedRange(doc, from.line, from, to, marker) ||\n          from.line != to.line && conflictingCollapsedRange(doc, to.line, from, to, marker))\n        { throw new Error(\"Inserting collapsed marker partially overlapping an existing one\") }\n      seeCollapsedSpans();\n    }\n\n    if (marker.addToHistory)\n      { addChangeToHistory(doc, {from: from, to: to, origin: \"markText\"}, doc.sel, NaN); }\n\n    var curLine = from.line, cm = doc.cm, updateMaxLine;\n    doc.iter(curLine, to.line + 1, function (line) {\n      if (cm && marker.collapsed && !cm.options.lineWrapping && visualLine(line) == cm.display.maxLine)\n        { updateMaxLine = true; }\n      if (marker.collapsed && curLine != from.line) { updateLineHeight(line, 0); }\n      addMarkedSpan(line, new MarkedSpan(marker,\n                                         curLine == from.line ? from.ch : null,\n                                         curLine == to.line ? to.ch : null), doc.cm && doc.cm.curOp);\n      ++curLine;\n    });\n    // lineIsHidden depends on the presence of the spans, so needs a second pass\n    if (marker.collapsed) { doc.iter(from.line, to.line + 1, function (line) {\n      if (lineIsHidden(doc, line)) { updateLineHeight(line, 0); }\n    }); }\n\n    if (marker.clearOnEnter) { on(marker, \"beforeCursorEnter\", function () { return marker.clear(); }); }\n\n    if (marker.readOnly) {\n      seeReadOnlySpans();\n      if (doc.history.done.length || doc.history.undone.length)\n        { doc.clearHistory(); }\n    }\n    if (marker.collapsed) {\n      marker.id = ++nextMarkerId;\n      marker.atomic = true;\n    }\n    if (cm) {\n      // Sync editor state\n      if (updateMaxLine) { cm.curOp.updateMaxLine = true; }\n      if (marker.collapsed)\n        { regChange(cm, from.line, to.line + 1); }\n      else if (marker.className || marker.startStyle || marker.endStyle || marker.css ||\n               marker.attributes || marker.title)\n        { for (var i = from.line; i <= to.line; i++) { regLineChange(cm, i, \"text\"); } }\n      if (marker.atomic) { reCheckSelection(cm.doc); }\n      signalLater(cm, \"markerAdded\", cm, marker);\n    }\n    return marker\n  }\n\n  // SHARED TEXTMARKERS\n\n  // A shared marker spans multiple linked documents. It is\n  // implemented as a meta-marker-object controlling multiple normal\n  // markers.\n  var SharedTextMarker = function(markers, primary) {\n    this.markers = markers;\n    this.primary = primary;\n    for (var i = 0; i < markers.length; ++i)\n      { markers[i].parent = this; }\n  };\n\n  SharedTextMarker.prototype.clear = function () {\n    if (this.explicitlyCleared) { return }\n    this.explicitlyCleared = true;\n    for (var i = 0; i < this.markers.length; ++i)\n      { this.markers[i].clear(); }\n    signalLater(this, \"clear\");\n  };\n\n  SharedTextMarker.prototype.find = function (side, lineObj) {\n    return this.primary.find(side, lineObj)\n  };\n  eventMixin(SharedTextMarker);\n\n  function markTextShared(doc, from, to, options, type) {\n    options = copyObj(options);\n    options.shared = false;\n    var markers = [markText(doc, from, to, options, type)], primary = markers[0];\n    var widget = options.widgetNode;\n    linkedDocs(doc, function (doc) {\n      if (widget) { options.widgetNode = widget.cloneNode(true); }\n      markers.push(markText(doc, clipPos(doc, from), clipPos(doc, to), options, type));\n      for (var i = 0; i < doc.linked.length; ++i)\n        { if (doc.linked[i].isParent) { return } }\n      primary = lst(markers);\n    });\n    return new SharedTextMarker(markers, primary)\n  }\n\n  function findSharedMarkers(doc) {\n    return doc.findMarks(Pos(doc.first, 0), doc.clipPos(Pos(doc.lastLine())), function (m) { return m.parent; })\n  }\n\n  function copySharedMarkers(doc, markers) {\n    for (var i = 0; i < markers.length; i++) {\n      var marker = markers[i], pos = marker.find();\n      var mFrom = doc.clipPos(pos.from), mTo = doc.clipPos(pos.to);\n      if (cmp(mFrom, mTo)) {\n        var subMark = markText(doc, mFrom, mTo, marker.primary, marker.primary.type);\n        marker.markers.push(subMark);\n        subMark.parent = marker;\n      }\n    }\n  }\n\n  function detachSharedMarkers(markers) {\n    var loop = function ( i ) {\n      var marker = markers[i], linked = [marker.primary.doc];\n      linkedDocs(marker.primary.doc, function (d) { return linked.push(d); });\n      for (var j = 0; j < marker.markers.length; j++) {\n        var subMarker = marker.markers[j];\n        if (indexOf(linked, subMarker.doc) == -1) {\n          subMarker.parent = null;\n          marker.markers.splice(j--, 1);\n        }\n      }\n    };\n\n    for (var i = 0; i < markers.length; i++) loop( i );\n  }\n\n  var nextDocId = 0;\n  var Doc = function(text, mode, firstLine, lineSep, direction) {\n    if (!(this instanceof Doc)) { return new Doc(text, mode, firstLine, lineSep, direction) }\n    if (firstLine == null) { firstLine = 0; }\n\n    BranchChunk.call(this, [new LeafChunk([new Line(\"\", null)])]);\n    this.first = firstLine;\n    this.scrollTop = this.scrollLeft = 0;\n    this.cantEdit = false;\n    this.cleanGeneration = 1;\n    this.modeFrontier = this.highlightFrontier = firstLine;\n    var start = Pos(firstLine, 0);\n    this.sel = simpleSelection(start);\n    this.history = new History(null);\n    this.id = ++nextDocId;\n    this.modeOption = mode;\n    this.lineSep = lineSep;\n    this.direction = (direction == \"rtl\") ? \"rtl\" : \"ltr\";\n    this.extend = false;\n\n    if (typeof text == \"string\") { text = this.splitLines(text); }\n    updateDoc(this, {from: start, to: start, text: text});\n    setSelection(this, simpleSelection(start), sel_dontScroll);\n  };\n\n  Doc.prototype = createObj(BranchChunk.prototype, {\n    constructor: Doc,\n    // Iterate over the document. Supports two forms -- with only one\n    // argument, it calls that for each line in the document. With\n    // three, it iterates over the range given by the first two (with\n    // the second being non-inclusive).\n    iter: function(from, to, op) {\n      if (op) { this.iterN(from - this.first, to - from, op); }\n      else { this.iterN(this.first, this.first + this.size, from); }\n    },\n\n    // Non-public interface for adding and removing lines.\n    insert: function(at, lines) {\n      var height = 0;\n      for (var i = 0; i < lines.length; ++i) { height += lines[i].height; }\n      this.insertInner(at - this.first, lines, height);\n    },\n    remove: function(at, n) { this.removeInner(at - this.first, n); },\n\n    // From here, the methods are part of the public interface. Most\n    // are also available from CodeMirror (editor) instances.\n\n    getValue: function(lineSep) {\n      var lines = getLines(this, this.first, this.first + this.size);\n      if (lineSep === false) { return lines }\n      return lines.join(lineSep || this.lineSeparator())\n    },\n    setValue: docMethodOp(function(code) {\n      var top = Pos(this.first, 0), last = this.first + this.size - 1;\n      makeChange(this, {from: top, to: Pos(last, getLine(this, last).text.length),\n                        text: this.splitLines(code), origin: \"setValue\", full: true}, true);\n      if (this.cm) { scrollToCoords(this.cm, 0, 0); }\n      setSelection(this, simpleSelection(top), sel_dontScroll);\n    }),\n    replaceRange: function(code, from, to, origin) {\n      from = clipPos(this, from);\n      to = to ? clipPos(this, to) : from;\n      replaceRange(this, code, from, to, origin);\n    },\n    getRange: function(from, to, lineSep) {\n      var lines = getBetween(this, clipPos(this, from), clipPos(this, to));\n      if (lineSep === false) { return lines }\n      if (lineSep === '') { return lines.join('') }\n      return lines.join(lineSep || this.lineSeparator())\n    },\n\n    getLine: function(line) {var l = this.getLineHandle(line); return l && l.text},\n\n    getLineHandle: function(line) {if (isLine(this, line)) { return getLine(this, line) }},\n    getLineNumber: function(line) {return lineNo(line)},\n\n    getLineHandleVisualStart: function(line) {\n      if (typeof line == \"number\") { line = getLine(this, line); }\n      return visualLine(line)\n    },\n\n    lineCount: function() {return this.size},\n    firstLine: function() {return this.first},\n    lastLine: function() {return this.first + this.size - 1},\n\n    clipPos: function(pos) {return clipPos(this, pos)},\n\n    getCursor: function(start) {\n      var range = this.sel.primary(), pos;\n      if (start == null || start == \"head\") { pos = range.head; }\n      else if (start == \"anchor\") { pos = range.anchor; }\n      else if (start == \"end\" || start == \"to\" || start === false) { pos = range.to(); }\n      else { pos = range.from(); }\n      return pos\n    },\n    listSelections: function() { return this.sel.ranges },\n    somethingSelected: function() {return this.sel.somethingSelected()},\n\n    setCursor: docMethodOp(function(line, ch, options) {\n      setSimpleSelection(this, clipPos(this, typeof line == \"number\" ? Pos(line, ch || 0) : line), null, options);\n    }),\n    setSelection: docMethodOp(function(anchor, head, options) {\n      setSimpleSelection(this, clipPos(this, anchor), clipPos(this, head || anchor), options);\n    }),\n    extendSelection: docMethodOp(function(head, other, options) {\n      extendSelection(this, clipPos(this, head), other && clipPos(this, other), options);\n    }),\n    extendSelections: docMethodOp(function(heads, options) {\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    extendSelectionsBy: docMethodOp(function(f, options) {\n      var heads = map(this.sel.ranges, f);\n      extendSelections(this, clipPosArray(this, heads), options);\n    }),\n    setSelections: docMethodOp(function(ranges, primary, options) {\n      if (!ranges.length) { return }\n      var out = [];\n      for (var i = 0; i < ranges.length; i++)\n        { out[i] = new Range(clipPos(this, ranges[i].anchor),\n                           clipPos(this, ranges[i].head || ranges[i].anchor)); }\n      if (primary == null) { primary = Math.min(ranges.length - 1, this.sel.primIndex); }\n      setSelection(this, normalizeSelection(this.cm, out, primary), options);\n    }),\n    addSelection: docMethodOp(function(anchor, head, options) {\n      var ranges = this.sel.ranges.slice(0);\n      ranges.push(new Range(clipPos(this, anchor), clipPos(this, head || anchor)));\n      setSelection(this, normalizeSelection(this.cm, ranges, ranges.length - 1), options);\n    }),\n\n    getSelection: function(lineSep) {\n      var ranges = this.sel.ranges, lines;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        lines = lines ? lines.concat(sel) : sel;\n      }\n      if (lineSep === false) { return lines }\n      else { return lines.join(lineSep || this.lineSeparator()) }\n    },\n    getSelections: function(lineSep) {\n      var parts = [], ranges = this.sel.ranges;\n      for (var i = 0; i < ranges.length; i++) {\n        var sel = getBetween(this, ranges[i].from(), ranges[i].to());\n        if (lineSep !== false) { sel = sel.join(lineSep || this.lineSeparator()); }\n        parts[i] = sel;\n      }\n      return parts\n    },\n    replaceSelection: function(code, collapse, origin) {\n      var dup = [];\n      for (var i = 0; i < this.sel.ranges.length; i++)\n        { dup[i] = code; }\n      this.replaceSelections(dup, collapse, origin || \"+input\");\n    },\n    replaceSelections: docMethodOp(function(code, collapse, origin) {\n      var changes = [], sel = this.sel;\n      for (var i = 0; i < sel.ranges.length; i++) {\n        var range = sel.ranges[i];\n        changes[i] = {from: range.from(), to: range.to(), text: this.splitLines(code[i]), origin: origin};\n      }\n      var newSel = collapse && collapse != \"end\" && computeReplacedSel(this, changes, collapse);\n      for (var i$1 = changes.length - 1; i$1 >= 0; i$1--)\n        { makeChange(this, changes[i$1]); }\n      if (newSel) { setSelectionReplaceHistory(this, newSel); }\n      else if (this.cm) { ensureCursorVisible(this.cm); }\n    }),\n    undo: docMethodOp(function() {makeChangeFromHistory(this, \"undo\");}),\n    redo: docMethodOp(function() {makeChangeFromHistory(this, \"redo\");}),\n    undoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"undo\", true);}),\n    redoSelection: docMethodOp(function() {makeChangeFromHistory(this, \"redo\", true);}),\n\n    setExtending: function(val) {this.extend = val;},\n    getExtending: function() {return this.extend},\n\n    historySize: function() {\n      var hist = this.history, done = 0, undone = 0;\n      for (var i = 0; i < hist.done.length; i++) { if (!hist.done[i].ranges) { ++done; } }\n      for (var i$1 = 0; i$1 < hist.undone.length; i$1++) { if (!hist.undone[i$1].ranges) { ++undone; } }\n      return {undo: done, redo: undone}\n    },\n    clearHistory: function() {\n      var this$1 = this;\n\n      this.history = new History(this.history);\n      linkedDocs(this, function (doc) { return doc.history = this$1.history; }, true);\n    },\n\n    markClean: function() {\n      this.cleanGeneration = this.changeGeneration(true);\n    },\n    changeGeneration: function(forceSplit) {\n      if (forceSplit)\n        { this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null; }\n      return this.history.generation\n    },\n    isClean: function (gen) {\n      return this.history.generation == (gen || this.cleanGeneration)\n    },\n\n    getHistory: function() {\n      return {done: copyHistoryArray(this.history.done),\n              undone: copyHistoryArray(this.history.undone)}\n    },\n    setHistory: function(histData) {\n      var hist = this.history = new History(this.history);\n      hist.done = copyHistoryArray(histData.done.slice(0), null, true);\n      hist.undone = copyHistoryArray(histData.undone.slice(0), null, true);\n    },\n\n    setGutterMarker: docMethodOp(function(line, gutterID, value) {\n      return changeLine(this, line, \"gutter\", function (line) {\n        var markers = line.gutterMarkers || (line.gutterMarkers = {});\n        markers[gutterID] = value;\n        if (!value && isEmpty(markers)) { line.gutterMarkers = null; }\n        return true\n      })\n    }),\n\n    clearGutter: docMethodOp(function(gutterID) {\n      var this$1 = this;\n\n      this.iter(function (line) {\n        if (line.gutterMarkers && line.gutterMarkers[gutterID]) {\n          changeLine(this$1, line, \"gutter\", function () {\n            line.gutterMarkers[gutterID] = null;\n            if (isEmpty(line.gutterMarkers)) { line.gutterMarkers = null; }\n            return true\n          });\n        }\n      });\n    }),\n\n    lineInfo: function(line) {\n      var n;\n      if (typeof line == \"number\") {\n        if (!isLine(this, line)) { return null }\n        n = line;\n        line = getLine(this, line);\n        if (!line) { return null }\n      } else {\n        n = lineNo(line);\n        if (n == null) { return null }\n      }\n      return {line: n, handle: line, text: line.text, gutterMarkers: line.gutterMarkers,\n              textClass: line.textClass, bgClass: line.bgClass, wrapClass: line.wrapClass,\n              widgets: line.widgets}\n    },\n\n    addLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\"\n                 : where == \"background\" ? \"bgClass\"\n                 : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        if (!line[prop]) { line[prop] = cls; }\n        else if (classTest(cls).test(line[prop])) { return false }\n        else { line[prop] += \" \" + cls; }\n        return true\n      })\n    }),\n    removeLineClass: docMethodOp(function(handle, where, cls) {\n      return changeLine(this, handle, where == \"gutter\" ? \"gutter\" : \"class\", function (line) {\n        var prop = where == \"text\" ? \"textClass\"\n                 : where == \"background\" ? \"bgClass\"\n                 : where == \"gutter\" ? \"gutterClass\" : \"wrapClass\";\n        var cur = line[prop];\n        if (!cur) { return false }\n        else if (cls == null) { line[prop] = null; }\n        else {\n          var found = cur.match(classTest(cls));\n          if (!found) { return false }\n          var end = found.index + found[0].length;\n          line[prop] = cur.slice(0, found.index) + (!found.index || end == cur.length ? \"\" : \" \") + cur.slice(end) || null;\n        }\n        return true\n      })\n    }),\n\n    addLineWidget: docMethodOp(function(handle, node, options) {\n      return addLineWidget(this, handle, node, options)\n    }),\n    removeLineWidget: function(widget) { widget.clear(); },\n\n    markText: function(from, to, options) {\n      return markText(this, clipPos(this, from), clipPos(this, to), options, options && options.type || \"range\")\n    },\n    setBookmark: function(pos, options) {\n      var realOpts = {replacedWith: options && (options.nodeType == null ? options.widget : options),\n                      insertLeft: options && options.insertLeft,\n                      clearWhenEmpty: false, shared: options && options.shared,\n                      handleMouseEvents: options && options.handleMouseEvents};\n      pos = clipPos(this, pos);\n      return markText(this, pos, pos, realOpts, \"bookmark\")\n    },\n    findMarksAt: function(pos) {\n      pos = clipPos(this, pos);\n      var markers = [], spans = getLine(this, pos.line).markedSpans;\n      if (spans) { for (var i = 0; i < spans.length; ++i) {\n        var span = spans[i];\n        if ((span.from == null || span.from <= pos.ch) &&\n            (span.to == null || span.to >= pos.ch))\n          { markers.push(span.marker.parent || span.marker); }\n      } }\n      return markers\n    },\n    findMarks: function(from, to, filter) {\n      from = clipPos(this, from); to = clipPos(this, to);\n      var found = [], lineNo = from.line;\n      this.iter(from.line, to.line + 1, function (line) {\n        var spans = line.markedSpans;\n        if (spans) { for (var i = 0; i < spans.length; i++) {\n          var span = spans[i];\n          if (!(span.to != null && lineNo == from.line && from.ch >= span.to ||\n                span.from == null && lineNo != from.line ||\n                span.from != null && lineNo == to.line && span.from >= to.ch) &&\n              (!filter || filter(span.marker)))\n            { found.push(span.marker.parent || span.marker); }\n        } }\n        ++lineNo;\n      });\n      return found\n    },\n    getAllMarks: function() {\n      var markers = [];\n      this.iter(function (line) {\n        var sps = line.markedSpans;\n        if (sps) { for (var i = 0; i < sps.length; ++i)\n          { if (sps[i].from != null) { markers.push(sps[i].marker); } } }\n      });\n      return markers\n    },\n\n    posFromIndex: function(off) {\n      var ch, lineNo = this.first, sepSize = this.lineSeparator().length;\n      this.iter(function (line) {\n        var sz = line.text.length + sepSize;\n        if (sz > off) { ch = off; return true }\n        off -= sz;\n        ++lineNo;\n      });\n      return clipPos(this, Pos(lineNo, ch))\n    },\n    indexFromPos: function (coords) {\n      coords = clipPos(this, coords);\n      var index = coords.ch;\n      if (coords.line < this.first || coords.ch < 0) { return 0 }\n      var sepSize = this.lineSeparator().length;\n      this.iter(this.first, coords.line, function (line) { // iter aborts when callback returns a truthy value\n        index += line.text.length + sepSize;\n      });\n      return index\n    },\n\n    copy: function(copyHistory) {\n      var doc = new Doc(getLines(this, this.first, this.first + this.size),\n                        this.modeOption, this.first, this.lineSep, this.direction);\n      doc.scrollTop = this.scrollTop; doc.scrollLeft = this.scrollLeft;\n      doc.sel = this.sel;\n      doc.extend = false;\n      if (copyHistory) {\n        doc.history.undoDepth = this.history.undoDepth;\n        doc.setHistory(this.getHistory());\n      }\n      return doc\n    },\n\n    linkedDoc: function(options) {\n      if (!options) { options = {}; }\n      var from = this.first, to = this.first + this.size;\n      if (options.from != null && options.from > from) { from = options.from; }\n      if (options.to != null && options.to < to) { to = options.to; }\n      var copy = new Doc(getLines(this, from, to), options.mode || this.modeOption, from, this.lineSep, this.direction);\n      if (options.sharedHist) { copy.history = this.history\n      ; }(this.linked || (this.linked = [])).push({doc: copy, sharedHist: options.sharedHist});\n      copy.linked = [{doc: this, isParent: true, sharedHist: options.sharedHist}];\n      copySharedMarkers(copy, findSharedMarkers(this));\n      return copy\n    },\n    unlinkDoc: function(other) {\n      if (other instanceof CodeMirror) { other = other.doc; }\n      if (this.linked) { for (var i = 0; i < this.linked.length; ++i) {\n        var link = this.linked[i];\n        if (link.doc != other) { continue }\n        this.linked.splice(i, 1);\n        other.unlinkDoc(this);\n        detachSharedMarkers(findSharedMarkers(this));\n        break\n      } }\n      // If the histories were shared, split them again\n      if (other.history == this.history) {\n        var splitIds = [other.id];\n        linkedDocs(other, function (doc) { return splitIds.push(doc.id); }, true);\n        other.history = new History(null);\n        other.history.done = copyHistoryArray(this.history.done, splitIds);\n        other.history.undone = copyHistoryArray(this.history.undone, splitIds);\n      }\n    },\n    iterLinkedDocs: function(f) {linkedDocs(this, f);},\n\n    getMode: function() {return this.mode},\n    getEditor: function() {return this.cm},\n\n    splitLines: function(str) {\n      if (this.lineSep) { return str.split(this.lineSep) }\n      return splitLinesAuto(str)\n    },\n    lineSeparator: function() { return this.lineSep || \"\\n\" },\n\n    setDirection: docMethodOp(function (dir) {\n      if (dir != \"rtl\") { dir = \"ltr\"; }\n      if (dir == this.direction) { return }\n      this.direction = dir;\n      this.iter(function (line) { return line.order = null; });\n      if (this.cm) { directionChanged(this.cm); }\n    })\n  });\n\n  // Public alias.\n  Doc.prototype.eachLine = Doc.prototype.iter;\n\n  // Kludge to work around strange IE behavior where it'll sometimes\n  // re-fire a series of drag-related events right after the drop (#1551)\n  var lastDrop = 0;\n\n  function onDrop(e) {\n    var cm = this;\n    clearDragCursor(cm);\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e))\n      { return }\n    e_preventDefault(e);\n    if (ie) { lastDrop = +new Date; }\n    var pos = posFromMouse(cm, e, true), files = e.dataTransfer.files;\n    if (!pos || cm.isReadOnly()) { return }\n    // Might be a file drop, in which case we simply extract the text\n    // and insert it.\n    if (files && files.length && window.FileReader && window.File) {\n      var n = files.length, text = Array(n), read = 0;\n      var markAsReadAndPasteIfAllFilesAreRead = function () {\n        if (++read == n) {\n          operation(cm, function () {\n            pos = clipPos(cm.doc, pos);\n            var change = {from: pos, to: pos,\n                          text: cm.doc.splitLines(\n                              text.filter(function (t) { return t != null; }).join(cm.doc.lineSeparator())),\n                          origin: \"paste\"};\n            makeChange(cm.doc, change);\n            setSelectionReplaceHistory(cm.doc, simpleSelection(clipPos(cm.doc, pos), clipPos(cm.doc, changeEnd(change))));\n          })();\n        }\n      };\n      var readTextFromFile = function (file, i) {\n        if (cm.options.allowDropFileTypes &&\n            indexOf(cm.options.allowDropFileTypes, file.type) == -1) {\n          markAsReadAndPasteIfAllFilesAreRead();\n          return\n        }\n        var reader = new FileReader;\n        reader.onerror = function () { return markAsReadAndPasteIfAllFilesAreRead(); };\n        reader.onload = function () {\n          var content = reader.result;\n          if (/[\\x00-\\x08\\x0e-\\x1f]{2}/.test(content)) {\n            markAsReadAndPasteIfAllFilesAreRead();\n            return\n          }\n          text[i] = content;\n          markAsReadAndPasteIfAllFilesAreRead();\n        };\n        reader.readAsText(file);\n      };\n      for (var i = 0; i < files.length; i++) { readTextFromFile(files[i], i); }\n    } else { // Normal drop\n      // Don't do a replace if the drop happened inside of the selected text.\n      if (cm.state.draggingText && cm.doc.sel.contains(pos) > -1) {\n        cm.state.draggingText(e);\n        // Ensure the editor is re-focused\n        setTimeout(function () { return cm.display.input.focus(); }, 20);\n        return\n      }\n      try {\n        var text$1 = e.dataTransfer.getData(\"Text\");\n        if (text$1) {\n          var selected;\n          if (cm.state.draggingText && !cm.state.draggingText.copy)\n            { selected = cm.listSelections(); }\n          setSelectionNoUndo(cm.doc, simpleSelection(pos, pos));\n          if (selected) { for (var i$1 = 0; i$1 < selected.length; ++i$1)\n            { replaceRange(cm.doc, \"\", selected[i$1].anchor, selected[i$1].head, \"drag\"); } }\n          cm.replaceSelection(text$1, \"around\", \"paste\");\n          cm.display.input.focus();\n        }\n      }\n      catch(e$1){}\n    }\n  }\n\n  function onDragStart(cm, e) {\n    if (ie && (!cm.state.draggingText || +new Date - lastDrop < 100)) { e_stop(e); return }\n    if (signalDOMEvent(cm, e) || eventInWidget(cm.display, e)) { return }\n\n    e.dataTransfer.setData(\"Text\", cm.getSelection());\n    e.dataTransfer.effectAllowed = \"copyMove\";\n\n    // Use dummy image instead of default browsers image.\n    // Recent Safari (~6.0.2) have a tendency to segfault when this happens, so we don't do it there.\n    if (e.dataTransfer.setDragImage && !safari) {\n      var img = elt(\"img\", null, null, \"position: fixed; left: 0; top: 0;\");\n      img.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n      if (presto) {\n        img.width = img.height = 1;\n        cm.display.wrapper.appendChild(img);\n        // Force a relayout, or Opera won't use our image for some obscure reason\n        img._top = img.offsetTop;\n      }\n      e.dataTransfer.setDragImage(img, 0, 0);\n      if (presto) { img.parentNode.removeChild(img); }\n    }\n  }\n\n  function onDragOver(cm, e) {\n    var pos = posFromMouse(cm, e);\n    if (!pos) { return }\n    var frag = document.createDocumentFragment();\n    drawSelectionCursor(cm, pos, frag);\n    if (!cm.display.dragCursor) {\n      cm.display.dragCursor = elt(\"div\", null, \"CodeMirror-cursors CodeMirror-dragcursors\");\n      cm.display.lineSpace.insertBefore(cm.display.dragCursor, cm.display.cursorDiv);\n    }\n    removeChildrenAndAdd(cm.display.dragCursor, frag);\n  }\n\n  function clearDragCursor(cm) {\n    if (cm.display.dragCursor) {\n      cm.display.lineSpace.removeChild(cm.display.dragCursor);\n      cm.display.dragCursor = null;\n    }\n  }\n\n  // These must be handled carefully, because naively registering a\n  // handler for each editor will cause the editors to never be\n  // garbage collected.\n\n  function forEachCodeMirror(f) {\n    if (!document.getElementsByClassName) { return }\n    var byClass = document.getElementsByClassName(\"CodeMirror\"), editors = [];\n    for (var i = 0; i < byClass.length; i++) {\n      var cm = byClass[i].CodeMirror;\n      if (cm) { editors.push(cm); }\n    }\n    if (editors.length) { editors[0].operation(function () {\n      for (var i = 0; i < editors.length; i++) { f(editors[i]); }\n    }); }\n  }\n\n  var globalsRegistered = false;\n  function ensureGlobalHandlers() {\n    if (globalsRegistered) { return }\n    registerGlobalHandlers();\n    globalsRegistered = true;\n  }\n  function registerGlobalHandlers() {\n    // When the window resizes, we need to refresh active editors.\n    var resizeTimer;\n    on(window, \"resize\", function () {\n      if (resizeTimer == null) { resizeTimer = setTimeout(function () {\n        resizeTimer = null;\n        forEachCodeMirror(onResize);\n      }, 100); }\n    });\n    // When the window loses focus, we want to show the editor as blurred\n    on(window, \"blur\", function () { return forEachCodeMirror(onBlur); });\n  }\n  // Called when the window resizes\n  function onResize(cm) {\n    var d = cm.display;\n    // Might be a text scaling operation, clear size caches.\n    d.cachedCharWidth = d.cachedTextHeight = d.cachedPaddingH = null;\n    d.scrollbarsClipped = false;\n    cm.setSize();\n  }\n\n  var keyNames = {\n    3: \"Pause\", 8: \"Backspace\", 9: \"Tab\", 13: \"Enter\", 16: \"Shift\", 17: \"Ctrl\", 18: \"Alt\",\n    19: \"Pause\", 20: \"CapsLock\", 27: \"Esc\", 32: \"Space\", 33: \"PageUp\", 34: \"PageDown\", 35: \"End\",\n    36: \"Home\", 37: \"Left\", 38: \"Up\", 39: \"Right\", 40: \"Down\", 44: \"PrintScrn\", 45: \"Insert\",\n    46: \"Delete\", 59: \";\", 61: \"=\", 91: \"Mod\", 92: \"Mod\", 93: \"Mod\",\n    106: \"*\", 107: \"=\", 109: \"-\", 110: \".\", 111: \"/\", 145: \"ScrollLock\",\n    173: \"-\", 186: \";\", 187: \"=\", 188: \",\", 189: \"-\", 190: \".\", 191: \"/\", 192: \"`\", 219: \"[\", 220: \"\\\\\",\n    221: \"]\", 222: \"'\", 224: \"Mod\", 63232: \"Up\", 63233: \"Down\", 63234: \"Left\", 63235: \"Right\", 63272: \"Delete\",\n    63273: \"Home\", 63275: \"End\", 63276: \"PageUp\", 63277: \"PageDown\", 63302: \"Insert\"\n  };\n\n  // Number keys\n  for (var i = 0; i < 10; i++) { keyNames[i + 48] = keyNames[i + 96] = String(i); }\n  // Alphabetic keys\n  for (var i$1 = 65; i$1 <= 90; i$1++) { keyNames[i$1] = String.fromCharCode(i$1); }\n  // Function keys\n  for (var i$2 = 1; i$2 <= 12; i$2++) { keyNames[i$2 + 111] = keyNames[i$2 + 63235] = \"F\" + i$2; }\n\n  var keyMap = {};\n\n  keyMap.basic = {\n    \"Left\": \"goCharLeft\", \"Right\": \"goCharRight\", \"Up\": \"goLineUp\", \"Down\": \"goLineDown\",\n    \"End\": \"goLineEnd\", \"Home\": \"goLineStartSmart\", \"PageUp\": \"goPageUp\", \"PageDown\": \"goPageDown\",\n    \"Delete\": \"delCharAfter\", \"Backspace\": \"delCharBefore\", \"Shift-Backspace\": \"delCharBefore\",\n    \"Tab\": \"defaultTab\", \"Shift-Tab\": \"indentAuto\",\n    \"Enter\": \"newlineAndIndent\", \"Insert\": \"toggleOverwrite\",\n    \"Esc\": \"singleSelection\"\n  };\n  // Note that the save and find-related commands aren't defined by\n  // default. User code or addons can define them. Unknown commands\n  // are simply ignored.\n  keyMap.pcDefault = {\n    \"Ctrl-A\": \"selectAll\", \"Ctrl-D\": \"deleteLine\", \"Ctrl-Z\": \"undo\", \"Shift-Ctrl-Z\": \"redo\", \"Ctrl-Y\": \"redo\",\n    \"Ctrl-Home\": \"goDocStart\", \"Ctrl-End\": \"goDocEnd\", \"Ctrl-Up\": \"goLineUp\", \"Ctrl-Down\": \"goLineDown\",\n    \"Ctrl-Left\": \"goGroupLeft\", \"Ctrl-Right\": \"goGroupRight\", \"Alt-Left\": \"goLineStart\", \"Alt-Right\": \"goLineEnd\",\n    \"Ctrl-Backspace\": \"delGroupBefore\", \"Ctrl-Delete\": \"delGroupAfter\", \"Ctrl-S\": \"save\", \"Ctrl-F\": \"find\",\n    \"Ctrl-G\": \"findNext\", \"Shift-Ctrl-G\": \"findPrev\", \"Shift-Ctrl-F\": \"replace\", \"Shift-Ctrl-R\": \"replaceAll\",\n    \"Ctrl-[\": \"indentLess\", \"Ctrl-]\": \"indentMore\",\n    \"Ctrl-U\": \"undoSelection\", \"Shift-Ctrl-U\": \"redoSelection\", \"Alt-U\": \"redoSelection\",\n    \"fallthrough\": \"basic\"\n  };\n  // Very basic readline/emacs-style bindings, which are standard on Mac.\n  keyMap.emacsy = {\n    \"Ctrl-F\": \"goCharRight\", \"Ctrl-B\": \"goCharLeft\", \"Ctrl-P\": \"goLineUp\", \"Ctrl-N\": \"goLineDown\",\n    \"Ctrl-A\": \"goLineStart\", \"Ctrl-E\": \"goLineEnd\", \"Ctrl-V\": \"goPageDown\", \"Shift-Ctrl-V\": \"goPageUp\",\n    \"Ctrl-D\": \"delCharAfter\", \"Ctrl-H\": \"delCharBefore\", \"Alt-Backspace\": \"delWordBefore\", \"Ctrl-K\": \"killLine\",\n    \"Ctrl-T\": \"transposeChars\", \"Ctrl-O\": \"openLine\"\n  };\n  keyMap.macDefault = {\n    \"Cmd-A\": \"selectAll\", \"Cmd-D\": \"deleteLine\", \"Cmd-Z\": \"undo\", \"Shift-Cmd-Z\": \"redo\", \"Cmd-Y\": \"redo\",\n    \"Cmd-Home\": \"goDocStart\", \"Cmd-Up\": \"goDocStart\", \"Cmd-End\": \"goDocEnd\", \"Cmd-Down\": \"goDocEnd\", \"Alt-Left\": \"goGroupLeft\",\n    \"Alt-Right\": \"goGroupRight\", \"Cmd-Left\": \"goLineLeft\", \"Cmd-Right\": \"goLineRight\", \"Alt-Backspace\": \"delGroupBefore\",\n    \"Ctrl-Alt-Backspace\": \"delGroupAfter\", \"Alt-Delete\": \"delGroupAfter\", \"Cmd-S\": \"save\", \"Cmd-F\": \"find\",\n    \"Cmd-G\": \"findNext\", \"Shift-Cmd-G\": \"findPrev\", \"Cmd-Alt-F\": \"replace\", \"Shift-Cmd-Alt-F\": \"replaceAll\",\n    \"Cmd-[\": \"indentLess\", \"Cmd-]\": \"indentMore\", \"Cmd-Backspace\": \"delWrappedLineLeft\", \"Cmd-Delete\": \"delWrappedLineRight\",\n    \"Cmd-U\": \"undoSelection\", \"Shift-Cmd-U\": \"redoSelection\", \"Ctrl-Up\": \"goDocStart\", \"Ctrl-Down\": \"goDocEnd\",\n    \"fallthrough\": [\"basic\", \"emacsy\"]\n  };\n  keyMap[\"default\"] = mac ? keyMap.macDefault : keyMap.pcDefault;\n\n  // KEYMAP DISPATCH\n\n  function normalizeKeyName(name) {\n    var parts = name.split(/-(?!$)/);\n    name = parts[parts.length - 1];\n    var alt, ctrl, shift, cmd;\n    for (var i = 0; i < parts.length - 1; i++) {\n      var mod = parts[i];\n      if (/^(cmd|meta|m)$/i.test(mod)) { cmd = true; }\n      else if (/^a(lt)?$/i.test(mod)) { alt = true; }\n      else if (/^(c|ctrl|control)$/i.test(mod)) { ctrl = true; }\n      else if (/^s(hift)?$/i.test(mod)) { shift = true; }\n      else { throw new Error(\"Unrecognized modifier name: \" + mod) }\n    }\n    if (alt) { name = \"Alt-\" + name; }\n    if (ctrl) { name = \"Ctrl-\" + name; }\n    if (cmd) { name = \"Cmd-\" + name; }\n    if (shift) { name = \"Shift-\" + name; }\n    return name\n  }\n\n  // This is a kludge to keep keymaps mostly working as raw objects\n  // (backwards compatibility) while at the same time support features\n  // like normalization and multi-stroke key bindings. It compiles a\n  // new normalized keymap, and then updates the old object to reflect\n  // this.\n  function normalizeKeyMap(keymap) {\n    var copy = {};\n    for (var keyname in keymap) { if (keymap.hasOwnProperty(keyname)) {\n      var value = keymap[keyname];\n      if (/^(name|fallthrough|(de|at)tach)$/.test(keyname)) { continue }\n      if (value == \"...\") { delete keymap[keyname]; continue }\n\n      var keys = map(keyname.split(\" \"), normalizeKeyName);\n      for (var i = 0; i < keys.length; i++) {\n        var val = (void 0), name = (void 0);\n        if (i == keys.length - 1) {\n          name = keys.join(\" \");\n          val = value;\n        } else {\n          name = keys.slice(0, i + 1).join(\" \");\n          val = \"...\";\n        }\n        var prev = copy[name];\n        if (!prev) { copy[name] = val; }\n        else if (prev != val) { throw new Error(\"Inconsistent bindings for \" + name) }\n      }\n      delete keymap[keyname];\n    } }\n    for (var prop in copy) { keymap[prop] = copy[prop]; }\n    return keymap\n  }\n\n  function lookupKey(key, map, handle, context) {\n    map = getKeyMap(map);\n    var found = map.call ? map.call(key, context) : map[key];\n    if (found === false) { return \"nothing\" }\n    if (found === \"...\") { return \"multi\" }\n    if (found != null && handle(found)) { return \"handled\" }\n\n    if (map.fallthrough) {\n      if (Object.prototype.toString.call(map.fallthrough) != \"[object Array]\")\n        { return lookupKey(key, map.fallthrough, handle, context) }\n      for (var i = 0; i < map.fallthrough.length; i++) {\n        var result = lookupKey(key, map.fallthrough[i], handle, context);\n        if (result) { return result }\n      }\n    }\n  }\n\n  // Modifier key presses don't count as 'real' key presses for the\n  // purpose of keymap fallthrough.\n  function isModifierKey(value) {\n    var name = typeof value == \"string\" ? value : keyNames[value.keyCode];\n    return name == \"Ctrl\" || name == \"Alt\" || name == \"Shift\" || name == \"Mod\"\n  }\n\n  function addModifierNames(name, event, noShift) {\n    var base = name;\n    if (event.altKey && base != \"Alt\") { name = \"Alt-\" + name; }\n    if ((flipCtrlCmd ? event.metaKey : event.ctrlKey) && base != \"Ctrl\") { name = \"Ctrl-\" + name; }\n    if ((flipCtrlCmd ? event.ctrlKey : event.metaKey) && base != \"Mod\") { name = \"Cmd-\" + name; }\n    if (!noShift && event.shiftKey && base != \"Shift\") { name = \"Shift-\" + name; }\n    return name\n  }\n\n  // Look up the name of a key as indicated by an event object.\n  function keyName(event, noShift) {\n    if (presto && event.keyCode == 34 && event[\"char\"]) { return false }\n    var name = keyNames[event.keyCode];\n    if (name == null || event.altGraphKey) { return false }\n    // Ctrl-ScrollLock has keyCode 3, same as Ctrl-Pause,\n    // so we'll use event.code when available (Chrome 48+, FF 38+, Safari 10.1+)\n    if (event.keyCode == 3 && event.code) { name = event.code; }\n    return addModifierNames(name, event, noShift)\n  }\n\n  function getKeyMap(val) {\n    return typeof val == \"string\" ? keyMap[val] : val\n  }\n\n  // Helper for deleting text near the selection(s), used to implement\n  // backspace, delete, and similar functionality.\n  function deleteNearSelection(cm, compute) {\n    var ranges = cm.doc.sel.ranges, kill = [];\n    // Build up a set of ranges to kill first, merging overlapping\n    // ranges.\n    for (var i = 0; i < ranges.length; i++) {\n      var toKill = compute(ranges[i]);\n      while (kill.length && cmp(toKill.from, lst(kill).to) <= 0) {\n        var replaced = kill.pop();\n        if (cmp(replaced.from, toKill.from) < 0) {\n          toKill.from = replaced.from;\n          break\n        }\n      }\n      kill.push(toKill);\n    }\n    // Next, remove those actual ranges.\n    runInOp(cm, function () {\n      for (var i = kill.length - 1; i >= 0; i--)\n        { replaceRange(cm.doc, \"\", kill[i].from, kill[i].to, \"+delete\"); }\n      ensureCursorVisible(cm);\n    });\n  }\n\n  function moveCharLogically(line, ch, dir) {\n    var target = skipExtendingChars(line.text, ch + dir, dir);\n    return target < 0 || target > line.text.length ? null : target\n  }\n\n  function moveLogically(line, start, dir) {\n    var ch = moveCharLogically(line, start.ch, dir);\n    return ch == null ? null : new Pos(start.line, ch, dir < 0 ? \"after\" : \"before\")\n  }\n\n  function endOfLine(visually, cm, lineObj, lineNo, dir) {\n    if (visually) {\n      if (cm.doc.direction == \"rtl\") { dir = -dir; }\n      var order = getOrder(lineObj, cm.doc.direction);\n      if (order) {\n        var part = dir < 0 ? lst(order) : order[0];\n        var moveInStorageOrder = (dir < 0) == (part.level == 1);\n        var sticky = moveInStorageOrder ? \"after\" : \"before\";\n        var ch;\n        // With a wrapped rtl chunk (possibly spanning multiple bidi parts),\n        // it could be that the last bidi part is not on the last visual line,\n        // since visual lines contain content order-consecutive chunks.\n        // Thus, in rtl, we are looking for the first (content-order) character\n        // in the rtl chunk that is on the last line (that is, the same line\n        // as the last (content-order) character).\n        if (part.level > 0 || cm.doc.direction == \"rtl\") {\n          var prep = prepareMeasureForLine(cm, lineObj);\n          ch = dir < 0 ? lineObj.text.length - 1 : 0;\n          var targetTop = measureCharPrepared(cm, prep, ch).top;\n          ch = findFirst(function (ch) { return measureCharPrepared(cm, prep, ch).top == targetTop; }, (dir < 0) == (part.level == 1) ? part.from : part.to - 1, ch);\n          if (sticky == \"before\") { ch = moveCharLogically(lineObj, ch, 1); }\n        } else { ch = dir < 0 ? part.to : part.from; }\n        return new Pos(lineNo, ch, sticky)\n      }\n    }\n    return new Pos(lineNo, dir < 0 ? lineObj.text.length : 0, dir < 0 ? \"before\" : \"after\")\n  }\n\n  function moveVisually(cm, line, start, dir) {\n    var bidi = getOrder(line, cm.doc.direction);\n    if (!bidi) { return moveLogically(line, start, dir) }\n    if (start.ch >= line.text.length) {\n      start.ch = line.text.length;\n      start.sticky = \"before\";\n    } else if (start.ch <= 0) {\n      start.ch = 0;\n      start.sticky = \"after\";\n    }\n    var partPos = getBidiPartAt(bidi, start.ch, start.sticky), part = bidi[partPos];\n    if (cm.doc.direction == \"ltr\" && part.level % 2 == 0 && (dir > 0 ? part.to > start.ch : part.from < start.ch)) {\n      // Case 1: We move within an ltr part in an ltr editor. Even with wrapped lines,\n      // nothing interesting happens.\n      return moveLogically(line, start, dir)\n    }\n\n    var mv = function (pos, dir) { return moveCharLogically(line, pos instanceof Pos ? pos.ch : pos, dir); };\n    var prep;\n    var getWrappedLineExtent = function (ch) {\n      if (!cm.options.lineWrapping) { return {begin: 0, end: line.text.length} }\n      prep = prep || prepareMeasureForLine(cm, line);\n      return wrappedLineExtentChar(cm, line, prep, ch)\n    };\n    var wrappedLineExtent = getWrappedLineExtent(start.sticky == \"before\" ? mv(start, -1) : start.ch);\n\n    if (cm.doc.direction == \"rtl\" || part.level == 1) {\n      var moveInStorageOrder = (part.level == 1) == (dir < 0);\n      var ch = mv(start, moveInStorageOrder ? 1 : -1);\n      if (ch != null && (!moveInStorageOrder ? ch >= part.from && ch >= wrappedLineExtent.begin : ch <= part.to && ch <= wrappedLineExtent.end)) {\n        // Case 2: We move within an rtl part or in an rtl editor on the same visual line\n        var sticky = moveInStorageOrder ? \"before\" : \"after\";\n        return new Pos(start.line, ch, sticky)\n      }\n    }\n\n    // Case 3: Could not move within this bidi part in this visual line, so leave\n    // the current bidi part\n\n    var searchInVisualLine = function (partPos, dir, wrappedLineExtent) {\n      var getRes = function (ch, moveInStorageOrder) { return moveInStorageOrder\n        ? new Pos(start.line, mv(ch, 1), \"before\")\n        : new Pos(start.line, ch, \"after\"); };\n\n      for (; partPos >= 0 && partPos < bidi.length; partPos += dir) {\n        var part = bidi[partPos];\n        var moveInStorageOrder = (dir > 0) == (part.level != 1);\n        var ch = moveInStorageOrder ? wrappedLineExtent.begin : mv(wrappedLineExtent.end, -1);\n        if (part.from <= ch && ch < part.to) { return getRes(ch, moveInStorageOrder) }\n        ch = moveInStorageOrder ? part.from : mv(part.to, -1);\n        if (wrappedLineExtent.begin <= ch && ch < wrappedLineExtent.end) { return getRes(ch, moveInStorageOrder) }\n      }\n    };\n\n    // Case 3a: Look for other bidi parts on the same visual line\n    var res = searchInVisualLine(partPos + dir, dir, wrappedLineExtent);\n    if (res) { return res }\n\n    // Case 3b: Look for other bidi parts on the next visual line\n    var nextCh = dir > 0 ? wrappedLineExtent.end : mv(wrappedLineExtent.begin, -1);\n    if (nextCh != null && !(dir > 0 && nextCh == line.text.length)) {\n      res = searchInVisualLine(dir > 0 ? 0 : bidi.length - 1, dir, getWrappedLineExtent(nextCh));\n      if (res) { return res }\n    }\n\n    // Case 4: Nowhere to move\n    return null\n  }\n\n  // Commands are parameter-less actions that can be performed on an\n  // editor, mostly used for keybindings.\n  var commands = {\n    selectAll: selectAll,\n    singleSelection: function (cm) { return cm.setSelection(cm.getCursor(\"anchor\"), cm.getCursor(\"head\"), sel_dontScroll); },\n    killLine: function (cm) { return deleteNearSelection(cm, function (range) {\n      if (range.empty()) {\n        var len = getLine(cm.doc, range.head.line).text.length;\n        if (range.head.ch == len && range.head.line < cm.lastLine())\n          { return {from: range.head, to: Pos(range.head.line + 1, 0)} }\n        else\n          { return {from: range.head, to: Pos(range.head.line, len)} }\n      } else {\n        return {from: range.from(), to: range.to()}\n      }\n    }); },\n    deleteLine: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n      from: Pos(range.from().line, 0),\n      to: clipPos(cm.doc, Pos(range.to().line + 1, 0))\n    }); }); },\n    delLineLeft: function (cm) { return deleteNearSelection(cm, function (range) { return ({\n      from: Pos(range.from().line, 0), to: range.from()\n    }); }); },\n    delWrappedLineLeft: function (cm) { return deleteNearSelection(cm, function (range) {\n      var top = cm.charCoords(range.head, \"div\").top + 5;\n      var leftPos = cm.coordsChar({left: 0, top: top}, \"div\");\n      return {from: leftPos, to: range.from()}\n    }); },\n    delWrappedLineRight: function (cm) { return deleteNearSelection(cm, function (range) {\n      var top = cm.charCoords(range.head, \"div\").top + 5;\n      var rightPos = cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\");\n      return {from: range.from(), to: rightPos }\n    }); },\n    undo: function (cm) { return cm.undo(); },\n    redo: function (cm) { return cm.redo(); },\n    undoSelection: function (cm) { return cm.undoSelection(); },\n    redoSelection: function (cm) { return cm.redoSelection(); },\n    goDocStart: function (cm) { return cm.extendSelection(Pos(cm.firstLine(), 0)); },\n    goDocEnd: function (cm) { return cm.extendSelection(Pos(cm.lastLine())); },\n    goLineStart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStart(cm, range.head.line); },\n      {origin: \"+move\", bias: 1}\n    ); },\n    goLineStartSmart: function (cm) { return cm.extendSelectionsBy(function (range) { return lineStartSmart(cm, range.head); },\n      {origin: \"+move\", bias: 1}\n    ); },\n    goLineEnd: function (cm) { return cm.extendSelectionsBy(function (range) { return lineEnd(cm, range.head.line); },\n      {origin: \"+move\", bias: -1}\n    ); },\n    goLineRight: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      return cm.coordsChar({left: cm.display.lineDiv.offsetWidth + 100, top: top}, \"div\")\n    }, sel_move); },\n    goLineLeft: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      return cm.coordsChar({left: 0, top: top}, \"div\")\n    }, sel_move); },\n    goLineLeftSmart: function (cm) { return cm.extendSelectionsBy(function (range) {\n      var top = cm.cursorCoords(range.head, \"div\").top + 5;\n      var pos = cm.coordsChar({left: 0, top: top}, \"div\");\n      if (pos.ch < cm.getLine(pos.line).search(/\\S/)) { return lineStartSmart(cm, range.head) }\n      return pos\n    }, sel_move); },\n    goLineUp: function (cm) { return cm.moveV(-1, \"line\"); },\n    goLineDown: function (cm) { return cm.moveV(1, \"line\"); },\n    goPageUp: function (cm) { return cm.moveV(-1, \"page\"); },\n    goPageDown: function (cm) { return cm.moveV(1, \"page\"); },\n    goCharLeft: function (cm) { return cm.moveH(-1, \"char\"); },\n    goCharRight: function (cm) { return cm.moveH(1, \"char\"); },\n    goColumnLeft: function (cm) { return cm.moveH(-1, \"column\"); },\n    goColumnRight: function (cm) { return cm.moveH(1, \"column\"); },\n    goWordLeft: function (cm) { return cm.moveH(-1, \"word\"); },\n    goGroupRight: function (cm) { return cm.moveH(1, \"group\"); },\n    goGroupLeft: function (cm) { return cm.moveH(-1, \"group\"); },\n    goWordRight: function (cm) { return cm.moveH(1, \"word\"); },\n    delCharBefore: function (cm) { return cm.deleteH(-1, \"codepoint\"); },\n    delCharAfter: function (cm) { return cm.deleteH(1, \"char\"); },\n    delWordBefore: function (cm) { return cm.deleteH(-1, \"word\"); },\n    delWordAfter: function (cm) { return cm.deleteH(1, \"word\"); },\n    delGroupBefore: function (cm) { return cm.deleteH(-1, \"group\"); },\n    delGroupAfter: function (cm) { return cm.deleteH(1, \"group\"); },\n    indentAuto: function (cm) { return cm.indentSelection(\"smart\"); },\n    indentMore: function (cm) { return cm.indentSelection(\"add\"); },\n    indentLess: function (cm) { return cm.indentSelection(\"subtract\"); },\n    insertTab: function (cm) { return cm.replaceSelection(\"\\t\"); },\n    insertSoftTab: function (cm) {\n      var spaces = [], ranges = cm.listSelections(), tabSize = cm.options.tabSize;\n      for (var i = 0; i < ranges.length; i++) {\n        var pos = ranges[i].from();\n        var col = countColumn(cm.getLine(pos.line), pos.ch, tabSize);\n        spaces.push(spaceStr(tabSize - col % tabSize));\n      }\n      cm.replaceSelections(spaces);\n    },\n    defaultTab: function (cm) {\n      if (cm.somethingSelected()) { cm.indentSelection(\"add\"); }\n      else { cm.execCommand(\"insertTab\"); }\n    },\n    // Swap the two chars left and right of each selection's head.\n    // Move cursor behind the two swapped characters afterwards.\n    //\n    // Doesn't consider line feeds a character.\n    // Doesn't scan more than one line above to find a character.\n    // Doesn't do anything on an empty line.\n    // Doesn't do anything with non-empty selections.\n    transposeChars: function (cm) { return runInOp(cm, function () {\n      var ranges = cm.listSelections(), newSel = [];\n      for (var i = 0; i < ranges.length; i++) {\n        if (!ranges[i].empty()) { continue }\n        var cur = ranges[i].head, line = getLine(cm.doc, cur.line).text;\n        if (line) {\n          if (cur.ch == line.length) { cur = new Pos(cur.line, cur.ch - 1); }\n          if (cur.ch > 0) {\n            cur = new Pos(cur.line, cur.ch + 1);\n            cm.replaceRange(line.charAt(cur.ch - 1) + line.charAt(cur.ch - 2),\n                            Pos(cur.line, cur.ch - 2), cur, \"+transpose\");\n          } else if (cur.line > cm.doc.first) {\n            var prev = getLine(cm.doc, cur.line - 1).text;\n            if (prev) {\n              cur = new Pos(cur.line, 1);\n              cm.replaceRange(line.charAt(0) + cm.doc.lineSeparator() +\n                              prev.charAt(prev.length - 1),\n                              Pos(cur.line - 1, prev.length - 1), cur, \"+transpose\");\n            }\n          }\n        }\n        newSel.push(new Range(cur, cur));\n      }\n      cm.setSelections(newSel);\n    }); },\n    newlineAndIndent: function (cm) { return runInOp(cm, function () {\n      var sels = cm.listSelections();\n      for (var i = sels.length - 1; i >= 0; i--)\n        { cm.replaceRange(cm.doc.lineSeparator(), sels[i].anchor, sels[i].head, \"+input\"); }\n      sels = cm.listSelections();\n      for (var i$1 = 0; i$1 < sels.length; i$1++)\n        { cm.indentLine(sels[i$1].from().line, null, true); }\n      ensureCursorVisible(cm);\n    }); },\n    openLine: function (cm) { return cm.replaceSelection(\"\\n\", \"start\"); },\n    toggleOverwrite: function (cm) { return cm.toggleOverwrite(); }\n  };\n\n\n  function lineStart(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLine(line);\n    if (visual != line) { lineN = lineNo(visual); }\n    return endOfLine(true, cm, visual, lineN, 1)\n  }\n  function lineEnd(cm, lineN) {\n    var line = getLine(cm.doc, lineN);\n    var visual = visualLineEnd(line);\n    if (visual != line) { lineN = lineNo(visual); }\n    return endOfLine(true, cm, line, lineN, -1)\n  }\n  function lineStartSmart(cm, pos) {\n    var start = lineStart(cm, pos.line);\n    var line = getLine(cm.doc, start.line);\n    var order = getOrder(line, cm.doc.direction);\n    if (!order || order[0].level == 0) {\n      var firstNonWS = Math.max(start.ch, line.text.search(/\\S/));\n      var inWS = pos.line == start.line && pos.ch <= firstNonWS && pos.ch;\n      return Pos(start.line, inWS ? 0 : firstNonWS, start.sticky)\n    }\n    return start\n  }\n\n  // Run a handler that was bound to a key.\n  function doHandleBinding(cm, bound, dropShift) {\n    if (typeof bound == \"string\") {\n      bound = commands[bound];\n      if (!bound) { return false }\n    }\n    // Ensure previous input has been read, so that the handler sees a\n    // consistent view of the document\n    cm.display.input.ensurePolled();\n    var prevShift = cm.display.shift, done = false;\n    try {\n      if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\n      if (dropShift) { cm.display.shift = false; }\n      done = bound(cm) != Pass;\n    } finally {\n      cm.display.shift = prevShift;\n      cm.state.suppressEdits = false;\n    }\n    return done\n  }\n\n  function lookupKeyForEditor(cm, name, handle) {\n    for (var i = 0; i < cm.state.keyMaps.length; i++) {\n      var result = lookupKey(name, cm.state.keyMaps[i], handle, cm);\n      if (result) { return result }\n    }\n    return (cm.options.extraKeys && lookupKey(name, cm.options.extraKeys, handle, cm))\n      || lookupKey(name, cm.options.keyMap, handle, cm)\n  }\n\n  // Note that, despite the name, this function is also used to check\n  // for bound mouse clicks.\n\n  var stopSeq = new Delayed;\n\n  function dispatchKey(cm, name, e, handle) {\n    var seq = cm.state.keySeq;\n    if (seq) {\n      if (isModifierKey(name)) { return \"handled\" }\n      if (/\\'$/.test(name))\n        { cm.state.keySeq = null; }\n      else\n        { stopSeq.set(50, function () {\n          if (cm.state.keySeq == seq) {\n            cm.state.keySeq = null;\n            cm.display.input.reset();\n          }\n        }); }\n      if (dispatchKeyInner(cm, seq + \" \" + name, e, handle)) { return true }\n    }\n    return dispatchKeyInner(cm, name, e, handle)\n  }\n\n  function dispatchKeyInner(cm, name, e, handle) {\n    var result = lookupKeyForEditor(cm, name, handle);\n\n    if (result == \"multi\")\n      { cm.state.keySeq = name; }\n    if (result == \"handled\")\n      { signalLater(cm, \"keyHandled\", cm, name, e); }\n\n    if (result == \"handled\" || result == \"multi\") {\n      e_preventDefault(e);\n      restartBlink(cm);\n    }\n\n    return !!result\n  }\n\n  // Handle a key from the keydown event.\n  function handleKeyBinding(cm, e) {\n    var name = keyName(e, true);\n    if (!name) { return false }\n\n    if (e.shiftKey && !cm.state.keySeq) {\n      // First try to resolve full name (including 'Shift-'). Failing\n      // that, see if there is a cursor-motion command (starting with\n      // 'go') bound to the keyname without 'Shift-'.\n      return dispatchKey(cm, \"Shift-\" + name, e, function (b) { return doHandleBinding(cm, b, true); })\n          || dispatchKey(cm, name, e, function (b) {\n               if (typeof b == \"string\" ? /^go[A-Z]/.test(b) : b.motion)\n                 { return doHandleBinding(cm, b) }\n             })\n    } else {\n      return dispatchKey(cm, name, e, function (b) { return doHandleBinding(cm, b); })\n    }\n  }\n\n  // Handle a key from the keypress event\n  function handleCharBinding(cm, e, ch) {\n    return dispatchKey(cm, \"'\" + ch + \"'\", e, function (b) { return doHandleBinding(cm, b, true); })\n  }\n\n  var lastStoppedKey = null;\n  function onKeyDown(e) {\n    var cm = this;\n    if (e.target && e.target != cm.display.input.getField()) { return }\n    cm.curOp.focus = activeElt(doc(cm));\n    if (signalDOMEvent(cm, e)) { return }\n    // IE does strange things with escape.\n    if (ie && ie_version < 11 && e.keyCode == 27) { e.returnValue = false; }\n    var code = e.keyCode;\n    cm.display.shift = code == 16 || e.shiftKey;\n    var handled = handleKeyBinding(cm, e);\n    if (presto) {\n      lastStoppedKey = handled ? code : null;\n      // Opera has no cut event... we try to at least catch the key combo\n      if (!handled && code == 88 && !hasCopyEvent && (mac ? e.metaKey : e.ctrlKey))\n        { cm.replaceSelection(\"\", null, \"cut\"); }\n    }\n    if (gecko && !mac && !handled && code == 46 && e.shiftKey && !e.ctrlKey && document.execCommand)\n      { document.execCommand(\"cut\"); }\n\n    // Turn mouse into crosshair when Alt is held on Mac.\n    if (code == 18 && !/\\bCodeMirror-crosshair\\b/.test(cm.display.lineDiv.className))\n      { showCrossHair(cm); }\n  }\n\n  function showCrossHair(cm) {\n    var lineDiv = cm.display.lineDiv;\n    addClass(lineDiv, \"CodeMirror-crosshair\");\n\n    function up(e) {\n      if (e.keyCode == 18 || !e.altKey) {\n        rmClass(lineDiv, \"CodeMirror-crosshair\");\n        off(document, \"keyup\", up);\n        off(document, \"mouseover\", up);\n      }\n    }\n    on(document, \"keyup\", up);\n    on(document, \"mouseover\", up);\n  }\n\n  function onKeyUp(e) {\n    if (e.keyCode == 16) { this.doc.sel.shift = false; }\n    signalDOMEvent(this, e);\n  }\n\n  function onKeyPress(e) {\n    var cm = this;\n    if (e.target && e.target != cm.display.input.getField()) { return }\n    if (eventInWidget(cm.display, e) || signalDOMEvent(cm, e) || e.ctrlKey && !e.altKey || mac && e.metaKey) { return }\n    var keyCode = e.keyCode, charCode = e.charCode;\n    if (presto && keyCode == lastStoppedKey) {lastStoppedKey = null; e_preventDefault(e); return}\n    if ((presto && (!e.which || e.which < 10)) && handleKeyBinding(cm, e)) { return }\n    var ch = String.fromCharCode(charCode == null ? keyCode : charCode);\n    // Some browsers fire keypress events for backspace\n    if (ch == \"\\x08\") { return }\n    if (handleCharBinding(cm, e, ch)) { return }\n    cm.display.input.onKeyPress(e);\n  }\n\n  var DOUBLECLICK_DELAY = 400;\n\n  var PastClick = function(time, pos, button) {\n    this.time = time;\n    this.pos = pos;\n    this.button = button;\n  };\n\n  PastClick.prototype.compare = function (time, pos, button) {\n    return this.time + DOUBLECLICK_DELAY > time &&\n      cmp(pos, this.pos) == 0 && button == this.button\n  };\n\n  var lastClick, lastDoubleClick;\n  function clickRepeat(pos, button) {\n    var now = +new Date;\n    if (lastDoubleClick && lastDoubleClick.compare(now, pos, button)) {\n      lastClick = lastDoubleClick = null;\n      return \"triple\"\n    } else if (lastClick && lastClick.compare(now, pos, button)) {\n      lastDoubleClick = new PastClick(now, pos, button);\n      lastClick = null;\n      return \"double\"\n    } else {\n      lastClick = new PastClick(now, pos, button);\n      lastDoubleClick = null;\n      return \"single\"\n    }\n  }\n\n  // A mouse down can be a single click, double click, triple click,\n  // start of selection drag, start of text drag, new cursor\n  // (ctrl-click), rectangle drag (alt-drag), or xwin\n  // middle-click-paste. Or it might be a click on something we should\n  // not interfere with, such as a scrollbar or widget.\n  function onMouseDown(e) {\n    var cm = this, display = cm.display;\n    if (signalDOMEvent(cm, e) || display.activeTouch && display.input.supportsTouch()) { return }\n    display.input.ensurePolled();\n    display.shift = e.shiftKey;\n\n    if (eventInWidget(display, e)) {\n      if (!webkit) {\n        // Briefly turn off draggability, to allow widgets to do\n        // normal dragging things.\n        display.scroller.draggable = false;\n        setTimeout(function () { return display.scroller.draggable = true; }, 100);\n      }\n      return\n    }\n    if (clickInGutter(cm, e)) { return }\n    var pos = posFromMouse(cm, e), button = e_button(e), repeat = pos ? clickRepeat(pos, button) : \"single\";\n    win(cm).focus();\n\n    // #3261: make sure, that we're not starting a second selection\n    if (button == 1 && cm.state.selectingText)\n      { cm.state.selectingText(e); }\n\n    if (pos && handleMappedButton(cm, button, pos, repeat, e)) { return }\n\n    if (button == 1) {\n      if (pos) { leftButtonDown(cm, pos, repeat, e); }\n      else if (e_target(e) == display.scroller) { e_preventDefault(e); }\n    } else if (button == 2) {\n      if (pos) { extendSelection(cm.doc, pos); }\n      setTimeout(function () { return display.input.focus(); }, 20);\n    } else if (button == 3) {\n      if (captureRightClick) { cm.display.input.onContextMenu(e); }\n      else { delayBlurEvent(cm); }\n    }\n  }\n\n  function handleMappedButton(cm, button, pos, repeat, event) {\n    var name = \"Click\";\n    if (repeat == \"double\") { name = \"Double\" + name; }\n    else if (repeat == \"triple\") { name = \"Triple\" + name; }\n    name = (button == 1 ? \"Left\" : button == 2 ? \"Middle\" : \"Right\") + name;\n\n    return dispatchKey(cm,  addModifierNames(name, event), event, function (bound) {\n      if (typeof bound == \"string\") { bound = commands[bound]; }\n      if (!bound) { return false }\n      var done = false;\n      try {\n        if (cm.isReadOnly()) { cm.state.suppressEdits = true; }\n        done = bound(cm, pos) != Pass;\n      } finally {\n        cm.state.suppressEdits = false;\n      }\n      return done\n    })\n  }\n\n  function configureMouse(cm, repeat, event) {\n    var option = cm.getOption(\"configureMouse\");\n    var value = option ? option(cm, repeat, event) : {};\n    if (value.unit == null) {\n      var rect = chromeOS ? event.shiftKey && event.metaKey : event.altKey;\n      value.unit = rect ? \"rectangle\" : repeat == \"single\" ? \"char\" : repeat == \"double\" ? \"word\" : \"line\";\n    }\n    if (value.extend == null || cm.doc.extend) { value.extend = cm.doc.extend || event.shiftKey; }\n    if (value.addNew == null) { value.addNew = mac ? event.metaKey : event.ctrlKey; }\n    if (value.moveOnDrag == null) { value.moveOnDrag = !(mac ? event.altKey : event.ctrlKey); }\n    return value\n  }\n\n  function leftButtonDown(cm, pos, repeat, event) {\n    if (ie) { setTimeout(bind(ensureFocus, cm), 0); }\n    else { cm.curOp.focus = activeElt(doc(cm)); }\n\n    var behavior = configureMouse(cm, repeat, event);\n\n    var sel = cm.doc.sel, contained;\n    if (cm.options.dragDrop && dragAndDrop && !cm.isReadOnly() &&\n        repeat == \"single\" && (contained = sel.contains(pos)) > -1 &&\n        (cmp((contained = sel.ranges[contained]).from(), pos) < 0 || pos.xRel > 0) &&\n        (cmp(contained.to(), pos) > 0 || pos.xRel < 0))\n      { leftButtonStartDrag(cm, event, pos, behavior); }\n    else\n      { leftButtonSelect(cm, event, pos, behavior); }\n  }\n\n  // Start a text drag. When it ends, see if any dragging actually\n  // happen, and treat as a click if it didn't.\n  function leftButtonStartDrag(cm, event, pos, behavior) {\n    var display = cm.display, moved = false;\n    var dragEnd = operation(cm, function (e) {\n      if (webkit) { display.scroller.draggable = false; }\n      cm.state.draggingText = false;\n      if (cm.state.delayingBlurEvent) {\n        if (cm.hasFocus()) { cm.state.delayingBlurEvent = false; }\n        else { delayBlurEvent(cm); }\n      }\n      off(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n      off(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n      off(display.scroller, \"dragstart\", dragStart);\n      off(display.scroller, \"drop\", dragEnd);\n      if (!moved) {\n        e_preventDefault(e);\n        if (!behavior.addNew)\n          { extendSelection(cm.doc, pos, null, null, behavior.extend); }\n        // Work around unexplainable focus problem in IE9 (#2127) and Chrome (#3081)\n        if ((webkit && !safari) || ie && ie_version == 9)\n          { setTimeout(function () {display.wrapper.ownerDocument.body.focus({preventScroll: true}); display.input.focus();}, 20); }\n        else\n          { display.input.focus(); }\n      }\n    });\n    var mouseMove = function(e2) {\n      moved = moved || Math.abs(event.clientX - e2.clientX) + Math.abs(event.clientY - e2.clientY) >= 10;\n    };\n    var dragStart = function () { return moved = true; };\n    // Let the drag handler handle this.\n    if (webkit) { display.scroller.draggable = true; }\n    cm.state.draggingText = dragEnd;\n    dragEnd.copy = !behavior.moveOnDrag;\n    on(display.wrapper.ownerDocument, \"mouseup\", dragEnd);\n    on(display.wrapper.ownerDocument, \"mousemove\", mouseMove);\n    on(display.scroller, \"dragstart\", dragStart);\n    on(display.scroller, \"drop\", dragEnd);\n\n    cm.state.delayingBlurEvent = true;\n    setTimeout(function () { return display.input.focus(); }, 20);\n    // IE's approach to draggable\n    if (display.scroller.dragDrop) { display.scroller.dragDrop(); }\n  }\n\n  function rangeForUnit(cm, pos, unit) {\n    if (unit == \"char\") { return new Range(pos, pos) }\n    if (unit == \"word\") { return cm.findWordAt(pos) }\n    if (unit == \"line\") { return new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))) }\n    var result = unit(cm, pos);\n    return new Range(result.from, result.to)\n  }\n\n  // Normal selection, as opposed to text dragging.\n  function leftButtonSelect(cm, event, start, behavior) {\n    if (ie) { delayBlurEvent(cm); }\n    var display = cm.display, doc$1 = cm.doc;\n    e_preventDefault(event);\n\n    var ourRange, ourIndex, startSel = doc$1.sel, ranges = startSel.ranges;\n    if (behavior.addNew && !behavior.extend) {\n      ourIndex = doc$1.sel.contains(start);\n      if (ourIndex > -1)\n        { ourRange = ranges[ourIndex]; }\n      else\n        { ourRange = new Range(start, start); }\n    } else {\n      ourRange = doc$1.sel.primary();\n      ourIndex = doc$1.sel.primIndex;\n    }\n\n    if (behavior.unit == \"rectangle\") {\n      if (!behavior.addNew) { ourRange = new Range(start, start); }\n      start = posFromMouse(cm, event, true, true);\n      ourIndex = -1;\n    } else {\n      var range = rangeForUnit(cm, start, behavior.unit);\n      if (behavior.extend)\n        { ourRange = extendRange(ourRange, range.anchor, range.head, behavior.extend); }\n      else\n        { ourRange = range; }\n    }\n\n    if (!behavior.addNew) {\n      ourIndex = 0;\n      setSelection(doc$1, new Selection([ourRange], 0), sel_mouse);\n      startSel = doc$1.sel;\n    } else if (ourIndex == -1) {\n      ourIndex = ranges.length;\n      setSelection(doc$1, normalizeSelection(cm, ranges.concat([ourRange]), ourIndex),\n                   {scroll: false, origin: \"*mouse\"});\n    } else if (ranges.length > 1 && ranges[ourIndex].empty() && behavior.unit == \"char\" && !behavior.extend) {\n      setSelection(doc$1, normalizeSelection(cm, ranges.slice(0, ourIndex).concat(ranges.slice(ourIndex + 1)), 0),\n                   {scroll: false, origin: \"*mouse\"});\n      startSel = doc$1.sel;\n    } else {\n      replaceOneSelection(doc$1, ourIndex, ourRange, sel_mouse);\n    }\n\n    var lastPos = start;\n    function extendTo(pos) {\n      if (cmp(lastPos, pos) == 0) { return }\n      lastPos = pos;\n\n      if (behavior.unit == \"rectangle\") {\n        var ranges = [], tabSize = cm.options.tabSize;\n        var startCol = countColumn(getLine(doc$1, start.line).text, start.ch, tabSize);\n        var posCol = countColumn(getLine(doc$1, pos.line).text, pos.ch, tabSize);\n        var left = Math.min(startCol, posCol), right = Math.max(startCol, posCol);\n        for (var line = Math.min(start.line, pos.line), end = Math.min(cm.lastLine(), Math.max(start.line, pos.line));\n             line <= end; line++) {\n          var text = getLine(doc$1, line).text, leftPos = findColumn(text, left, tabSize);\n          if (left == right)\n            { ranges.push(new Range(Pos(line, leftPos), Pos(line, leftPos))); }\n          else if (text.length > leftPos)\n            { ranges.push(new Range(Pos(line, leftPos), Pos(line, findColumn(text, right, tabSize)))); }\n        }\n        if (!ranges.length) { ranges.push(new Range(start, start)); }\n        setSelection(doc$1, normalizeSelection(cm, startSel.ranges.slice(0, ourIndex).concat(ranges), ourIndex),\n                     {origin: \"*mouse\", scroll: false});\n        cm.scrollIntoView(pos);\n      } else {\n        var oldRange = ourRange;\n        var range = rangeForUnit(cm, pos, behavior.unit);\n        var anchor = oldRange.anchor, head;\n        if (cmp(range.anchor, anchor) > 0) {\n          head = range.head;\n          anchor = minPos(oldRange.from(), range.anchor);\n        } else {\n          head = range.anchor;\n          anchor = maxPos(oldRange.to(), range.head);\n        }\n        var ranges$1 = startSel.ranges.slice(0);\n        ranges$1[ourIndex] = bidiSimplify(cm, new Range(clipPos(doc$1, anchor), head));\n        setSelection(doc$1, normalizeSelection(cm, ranges$1, ourIndex), sel_mouse);\n      }\n    }\n\n    var editorSize = display.wrapper.getBoundingClientRect();\n    // Used to ensure timeout re-tries don't fire when another extend\n    // happened in the meantime (clearTimeout isn't reliable -- at\n    // least on Chrome, the timeouts still happen even when cleared,\n    // if the clear happens after their scheduled firing time).\n    var counter = 0;\n\n    function extend(e) {\n      var curCount = ++counter;\n      var cur = posFromMouse(cm, e, true, behavior.unit == \"rectangle\");\n      if (!cur) { return }\n      if (cmp(cur, lastPos) != 0) {\n        cm.curOp.focus = activeElt(doc(cm));\n        extendTo(cur);\n        var visible = visibleLines(display, doc$1);\n        if (cur.line >= visible.to || cur.line < visible.from)\n          { setTimeout(operation(cm, function () {if (counter == curCount) { extend(e); }}), 150); }\n      } else {\n        var outside = e.clientY < editorSize.top ? -20 : e.clientY > editorSize.bottom ? 20 : 0;\n        if (outside) { setTimeout(operation(cm, function () {\n          if (counter != curCount) { return }\n          display.scroller.scrollTop += outside;\n          extend(e);\n        }), 50); }\n      }\n    }\n\n    function done(e) {\n      cm.state.selectingText = false;\n      counter = Infinity;\n      // If e is null or undefined we interpret this as someone trying\n      // to explicitly cancel the selection rather than the user\n      // letting go of the mouse button.\n      if (e) {\n        e_preventDefault(e);\n        display.input.focus();\n      }\n      off(display.wrapper.ownerDocument, \"mousemove\", move);\n      off(display.wrapper.ownerDocument, \"mouseup\", up);\n      doc$1.history.lastSelOrigin = null;\n    }\n\n    var move = operation(cm, function (e) {\n      if (e.buttons === 0 || !e_button(e)) { done(e); }\n      else { extend(e); }\n    });\n    var up = operation(cm, done);\n    cm.state.selectingText = up;\n    on(display.wrapper.ownerDocument, \"mousemove\", move);\n    on(display.wrapper.ownerDocument, \"mouseup\", up);\n  }\n\n  // Used when mouse-selecting to adjust the anchor to the proper side\n  // of a bidi jump depending on the visual position of the head.\n  function bidiSimplify(cm, range) {\n    var anchor = range.anchor;\n    var head = range.head;\n    var anchorLine = getLine(cm.doc, anchor.line);\n    if (cmp(anchor, head) == 0 && anchor.sticky == head.sticky) { return range }\n    var order = getOrder(anchorLine);\n    if (!order) { return range }\n    var index = getBidiPartAt(order, anchor.ch, anchor.sticky), part = order[index];\n    if (part.from != anchor.ch && part.to != anchor.ch) { return range }\n    var boundary = index + ((part.from == anchor.ch) == (part.level != 1) ? 0 : 1);\n    if (boundary == 0 || boundary == order.length) { return range }\n\n    // Compute the relative visual position of the head compared to the\n    // anchor (<0 is to the left, >0 to the right)\n    var leftSide;\n    if (head.line != anchor.line) {\n      leftSide = (head.line - anchor.line) * (cm.doc.direction == \"ltr\" ? 1 : -1) > 0;\n    } else {\n      var headIndex = getBidiPartAt(order, head.ch, head.sticky);\n      var dir = headIndex - index || (head.ch - anchor.ch) * (part.level == 1 ? -1 : 1);\n      if (headIndex == boundary - 1 || headIndex == boundary)\n        { leftSide = dir < 0; }\n      else\n        { leftSide = dir > 0; }\n    }\n\n    var usePart = order[boundary + (leftSide ? -1 : 0)];\n    var from = leftSide == (usePart.level == 1);\n    var ch = from ? usePart.from : usePart.to, sticky = from ? \"after\" : \"before\";\n    return anchor.ch == ch && anchor.sticky == sticky ? range : new Range(new Pos(anchor.line, ch, sticky), head)\n  }\n\n\n  // Determines whether an event happened in the gutter, and fires the\n  // handlers for the corresponding event.\n  function gutterEvent(cm, e, type, prevent) {\n    var mX, mY;\n    if (e.touches) {\n      mX = e.touches[0].clientX;\n      mY = e.touches[0].clientY;\n    } else {\n      try { mX = e.clientX; mY = e.clientY; }\n      catch(e$1) { return false }\n    }\n    if (mX >= Math.floor(cm.display.gutters.getBoundingClientRect().right)) { return false }\n    if (prevent) { e_preventDefault(e); }\n\n    var display = cm.display;\n    var lineBox = display.lineDiv.getBoundingClientRect();\n\n    if (mY > lineBox.bottom || !hasHandler(cm, type)) { return e_defaultPrevented(e) }\n    mY -= lineBox.top - display.viewOffset;\n\n    for (var i = 0; i < cm.display.gutterSpecs.length; ++i) {\n      var g = display.gutters.childNodes[i];\n      if (g && g.getBoundingClientRect().right >= mX) {\n        var line = lineAtHeight(cm.doc, mY);\n        var gutter = cm.display.gutterSpecs[i];\n        signal(cm, type, cm, line, gutter.className, e);\n        return e_defaultPrevented(e)\n      }\n    }\n  }\n\n  function clickInGutter(cm, e) {\n    return gutterEvent(cm, e, \"gutterClick\", true)\n  }\n\n  // CONTEXT MENU HANDLING\n\n  // To make the context menu work, we need to briefly unhide the\n  // textarea (making it as unobtrusive as possible) to let the\n  // right-click take effect on it.\n  function onContextMenu(cm, e) {\n    if (eventInWidget(cm.display, e) || contextMenuInGutter(cm, e)) { return }\n    if (signalDOMEvent(cm, e, \"contextmenu\")) { return }\n    if (!captureRightClick) { cm.display.input.onContextMenu(e); }\n  }\n\n  function contextMenuInGutter(cm, e) {\n    if (!hasHandler(cm, \"gutterContextMenu\")) { return false }\n    return gutterEvent(cm, e, \"gutterContextMenu\", false)\n  }\n\n  function themeChanged(cm) {\n    cm.display.wrapper.className = cm.display.wrapper.className.replace(/\\s*cm-s-\\S+/g, \"\") +\n      cm.options.theme.replace(/(^|\\s)\\s*/g, \" cm-s-\");\n    clearCaches(cm);\n  }\n\n  var Init = {toString: function(){return \"CodeMirror.Init\"}};\n\n  var defaults = {};\n  var optionHandlers = {};\n\n  function defineOptions(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n\n    function option(name, deflt, handle, notOnInit) {\n      CodeMirror.defaults[name] = deflt;\n      if (handle) { optionHandlers[name] =\n        notOnInit ? function (cm, val, old) {if (old != Init) { handle(cm, val, old); }} : handle; }\n    }\n\n    CodeMirror.defineOption = option;\n\n    // Passed to option handlers when there is no old value.\n    CodeMirror.Init = Init;\n\n    // These two are, on init, called from the constructor because they\n    // have to be initialized before the editor can start at all.\n    option(\"value\", \"\", function (cm, val) { return cm.setValue(val); }, true);\n    option(\"mode\", null, function (cm, val) {\n      cm.doc.modeOption = val;\n      loadMode(cm);\n    }, true);\n\n    option(\"indentUnit\", 2, loadMode, true);\n    option(\"indentWithTabs\", false);\n    option(\"smartIndent\", true);\n    option(\"tabSize\", 4, function (cm) {\n      resetModeState(cm);\n      clearCaches(cm);\n      regChange(cm);\n    }, true);\n\n    option(\"lineSeparator\", null, function (cm, val) {\n      cm.doc.lineSep = val;\n      if (!val) { return }\n      var newBreaks = [], lineNo = cm.doc.first;\n      cm.doc.iter(function (line) {\n        for (var pos = 0;;) {\n          var found = line.text.indexOf(val, pos);\n          if (found == -1) { break }\n          pos = found + val.length;\n          newBreaks.push(Pos(lineNo, found));\n        }\n        lineNo++;\n      });\n      for (var i = newBreaks.length - 1; i >= 0; i--)\n        { replaceRange(cm.doc, val, newBreaks[i], Pos(newBreaks[i].line, newBreaks[i].ch + val.length)); }\n    });\n    option(\"specialChars\", /[\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u061c\\u200b\\u200e\\u200f\\u2028\\u2029\\u202d\\u202e\\u2066\\u2067\\u2069\\ufeff\\ufff9-\\ufffc]/g, function (cm, val, old) {\n      cm.state.specialChars = new RegExp(val.source + (val.test(\"\\t\") ? \"\" : \"|\\t\"), \"g\");\n      if (old != Init) { cm.refresh(); }\n    });\n    option(\"specialCharPlaceholder\", defaultSpecialCharPlaceholder, function (cm) { return cm.refresh(); }, true);\n    option(\"electricChars\", true);\n    option(\"inputStyle\", mobile ? \"contenteditable\" : \"textarea\", function () {\n      throw new Error(\"inputStyle can not (yet) be changed in a running editor\") // FIXME\n    }, true);\n    option(\"spellcheck\", false, function (cm, val) { return cm.getInputField().spellcheck = val; }, true);\n    option(\"autocorrect\", false, function (cm, val) { return cm.getInputField().autocorrect = val; }, true);\n    option(\"autocapitalize\", false, function (cm, val) { return cm.getInputField().autocapitalize = val; }, true);\n    option(\"rtlMoveVisually\", !windows);\n    option(\"wholeLineUpdateBefore\", true);\n\n    option(\"theme\", \"default\", function (cm) {\n      themeChanged(cm);\n      updateGutters(cm);\n    }, true);\n    option(\"keyMap\", \"default\", function (cm, val, old) {\n      var next = getKeyMap(val);\n      var prev = old != Init && getKeyMap(old);\n      if (prev && prev.detach) { prev.detach(cm, next); }\n      if (next.attach) { next.attach(cm, prev || null); }\n    });\n    option(\"extraKeys\", null);\n    option(\"configureMouse\", null);\n\n    option(\"lineWrapping\", false, wrappingChanged, true);\n    option(\"gutters\", [], function (cm, val) {\n      cm.display.gutterSpecs = getGutters(val, cm.options.lineNumbers);\n      updateGutters(cm);\n    }, true);\n    option(\"fixedGutter\", true, function (cm, val) {\n      cm.display.gutters.style.left = val ? compensateForHScroll(cm.display) + \"px\" : \"0\";\n      cm.refresh();\n    }, true);\n    option(\"coverGutterNextToScrollbar\", false, function (cm) { return updateScrollbars(cm); }, true);\n    option(\"scrollbarStyle\", \"native\", function (cm) {\n      initScrollbars(cm);\n      updateScrollbars(cm);\n      cm.display.scrollbars.setScrollTop(cm.doc.scrollTop);\n      cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft);\n    }, true);\n    option(\"lineNumbers\", false, function (cm, val) {\n      cm.display.gutterSpecs = getGutters(cm.options.gutters, val);\n      updateGutters(cm);\n    }, true);\n    option(\"firstLineNumber\", 1, updateGutters, true);\n    option(\"lineNumberFormatter\", function (integer) { return integer; }, updateGutters, true);\n    option(\"showCursorWhenSelecting\", false, updateSelection, true);\n\n    option(\"resetSelectionOnContextMenu\", true);\n    option(\"lineWiseCopyCut\", true);\n    option(\"pasteLinesPerSelection\", true);\n    option(\"selectionsMayTouch\", false);\n\n    option(\"readOnly\", false, function (cm, val) {\n      if (val == \"nocursor\") {\n        onBlur(cm);\n        cm.display.input.blur();\n      }\n      cm.display.input.readOnlyChanged(val);\n    });\n\n    option(\"screenReaderLabel\", null, function (cm, val) {\n      val = (val === '') ? null : val;\n      cm.display.input.screenReaderLabelChanged(val);\n    });\n\n    option(\"disableInput\", false, function (cm, val) {if (!val) { cm.display.input.reset(); }}, true);\n    option(\"dragDrop\", true, dragDropChanged);\n    option(\"allowDropFileTypes\", null);\n\n    option(\"cursorBlinkRate\", 530);\n    option(\"cursorScrollMargin\", 0);\n    option(\"cursorHeight\", 1, updateSelection, true);\n    option(\"singleCursorHeightPerLine\", true, updateSelection, true);\n    option(\"workTime\", 100);\n    option(\"workDelay\", 100);\n    option(\"flattenSpans\", true, resetModeState, true);\n    option(\"addModeClass\", false, resetModeState, true);\n    option(\"pollInterval\", 100);\n    option(\"undoDepth\", 200, function (cm, val) { return cm.doc.history.undoDepth = val; });\n    option(\"historyEventDelay\", 1250);\n    option(\"viewportMargin\", 10, function (cm) { return cm.refresh(); }, true);\n    option(\"maxHighlightLength\", 10000, resetModeState, true);\n    option(\"moveInputWithCursor\", true, function (cm, val) {\n      if (!val) { cm.display.input.resetPosition(); }\n    });\n\n    option(\"tabindex\", null, function (cm, val) { return cm.display.input.getField().tabIndex = val || \"\"; });\n    option(\"autofocus\", null);\n    option(\"direction\", \"ltr\", function (cm, val) { return cm.doc.setDirection(val); }, true);\n    option(\"phrases\", null);\n  }\n\n  function dragDropChanged(cm, value, old) {\n    var wasOn = old && old != Init;\n    if (!value != !wasOn) {\n      var funcs = cm.display.dragFunctions;\n      var toggle = value ? on : off;\n      toggle(cm.display.scroller, \"dragstart\", funcs.start);\n      toggle(cm.display.scroller, \"dragenter\", funcs.enter);\n      toggle(cm.display.scroller, \"dragover\", funcs.over);\n      toggle(cm.display.scroller, \"dragleave\", funcs.leave);\n      toggle(cm.display.scroller, \"drop\", funcs.drop);\n    }\n  }\n\n  function wrappingChanged(cm) {\n    if (cm.options.lineWrapping) {\n      addClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      cm.display.sizer.style.minWidth = \"\";\n      cm.display.sizerWidth = null;\n    } else {\n      rmClass(cm.display.wrapper, \"CodeMirror-wrap\");\n      findMaxLine(cm);\n    }\n    estimateLineHeights(cm);\n    regChange(cm);\n    clearCaches(cm);\n    setTimeout(function () { return updateScrollbars(cm); }, 100);\n  }\n\n  // A CodeMirror instance represents an editor. This is the object\n  // that user code is usually dealing with.\n\n  function CodeMirror(place, options) {\n    var this$1 = this;\n\n    if (!(this instanceof CodeMirror)) { return new CodeMirror(place, options) }\n\n    this.options = options = options ? copyObj(options) : {};\n    // Determine effective options based on given values and defaults.\n    copyObj(defaults, options, false);\n\n    var doc = options.value;\n    if (typeof doc == \"string\") { doc = new Doc(doc, options.mode, null, options.lineSeparator, options.direction); }\n    else if (options.mode) { doc.modeOption = options.mode; }\n    this.doc = doc;\n\n    var input = new CodeMirror.inputStyles[options.inputStyle](this);\n    var display = this.display = new Display(place, doc, input, options);\n    display.wrapper.CodeMirror = this;\n    themeChanged(this);\n    if (options.lineWrapping)\n      { this.display.wrapper.className += \" CodeMirror-wrap\"; }\n    initScrollbars(this);\n\n    this.state = {\n      keyMaps: [],  // stores maps added by addKeyMap\n      overlays: [], // highlighting overlays, as added by addOverlay\n      modeGen: 0,   // bumped when mode/overlay changes, used to invalidate highlighting info\n      overwrite: false,\n      delayingBlurEvent: false,\n      focused: false,\n      suppressEdits: false, // used to disable editing during key handlers when in readOnly mode\n      pasteIncoming: -1, cutIncoming: -1, // help recognize paste/cut edits in input.poll\n      selectingText: false,\n      draggingText: false,\n      highlight: new Delayed(), // stores highlight worker timeout\n      keySeq: null,  // Unfinished key sequence\n      specialChars: null\n    };\n\n    if (options.autofocus && !mobile) { display.input.focus(); }\n\n    // Override magic textarea content restore that IE sometimes does\n    // on our hidden textarea on reload\n    if (ie && ie_version < 11) { setTimeout(function () { return this$1.display.input.reset(true); }, 20); }\n\n    registerEventHandlers(this);\n    ensureGlobalHandlers();\n\n    startOperation(this);\n    this.curOp.forceUpdate = true;\n    attachDoc(this, doc);\n\n    if ((options.autofocus && !mobile) || this.hasFocus())\n      { setTimeout(function () {\n        if (this$1.hasFocus() && !this$1.state.focused) { onFocus(this$1); }\n      }, 20); }\n    else\n      { onBlur(this); }\n\n    for (var opt in optionHandlers) { if (optionHandlers.hasOwnProperty(opt))\n      { optionHandlers[opt](this, options[opt], Init); } }\n    maybeUpdateLineNumberWidth(this);\n    if (options.finishInit) { options.finishInit(this); }\n    for (var i = 0; i < initHooks.length; ++i) { initHooks[i](this); }\n    endOperation(this);\n    // Suppress optimizelegibility in Webkit, since it breaks text\n    // measuring on line wrapping boundaries.\n    if (webkit && options.lineWrapping &&\n        getComputedStyle(display.lineDiv).textRendering == \"optimizelegibility\")\n      { display.lineDiv.style.textRendering = \"auto\"; }\n  }\n\n  // The default configuration options.\n  CodeMirror.defaults = defaults;\n  // Functions to run when options are changed.\n  CodeMirror.optionHandlers = optionHandlers;\n\n  // Attach the necessary event handlers when initializing the editor\n  function registerEventHandlers(cm) {\n    var d = cm.display;\n    on(d.scroller, \"mousedown\", operation(cm, onMouseDown));\n    // Older IE's will not fire a second mousedown for a double click\n    if (ie && ie_version < 11)\n      { on(d.scroller, \"dblclick\", operation(cm, function (e) {\n        if (signalDOMEvent(cm, e)) { return }\n        var pos = posFromMouse(cm, e);\n        if (!pos || clickInGutter(cm, e) || eventInWidget(cm.display, e)) { return }\n        e_preventDefault(e);\n        var word = cm.findWordAt(pos);\n        extendSelection(cm.doc, word.anchor, word.head);\n      })); }\n    else\n      { on(d.scroller, \"dblclick\", function (e) { return signalDOMEvent(cm, e) || e_preventDefault(e); }); }\n    // Some browsers fire contextmenu *after* opening the menu, at\n    // which point we can't mess with it anymore. Context menu is\n    // handled in onMouseDown for these browsers.\n    on(d.scroller, \"contextmenu\", function (e) { return onContextMenu(cm, e); });\n    on(d.input.getField(), \"contextmenu\", function (e) {\n      if (!d.scroller.contains(e.target)) { onContextMenu(cm, e); }\n    });\n\n    // Used to suppress mouse event handling when a touch happens\n    var touchFinished, prevTouch = {end: 0};\n    function finishTouch() {\n      if (d.activeTouch) {\n        touchFinished = setTimeout(function () { return d.activeTouch = null; }, 1000);\n        prevTouch = d.activeTouch;\n        prevTouch.end = +new Date;\n      }\n    }\n    function isMouseLikeTouchEvent(e) {\n      if (e.touches.length != 1) { return false }\n      var touch = e.touches[0];\n      return touch.radiusX <= 1 && touch.radiusY <= 1\n    }\n    function farAway(touch, other) {\n      if (other.left == null) { return true }\n      var dx = other.left - touch.left, dy = other.top - touch.top;\n      return dx * dx + dy * dy > 20 * 20\n    }\n    on(d.scroller, \"touchstart\", function (e) {\n      if (!signalDOMEvent(cm, e) && !isMouseLikeTouchEvent(e) && !clickInGutter(cm, e)) {\n        d.input.ensurePolled();\n        clearTimeout(touchFinished);\n        var now = +new Date;\n        d.activeTouch = {start: now, moved: false,\n                         prev: now - prevTouch.end <= 300 ? prevTouch : null};\n        if (e.touches.length == 1) {\n          d.activeTouch.left = e.touches[0].pageX;\n          d.activeTouch.top = e.touches[0].pageY;\n        }\n      }\n    });\n    on(d.scroller, \"touchmove\", function () {\n      if (d.activeTouch) { d.activeTouch.moved = true; }\n    });\n    on(d.scroller, \"touchend\", function (e) {\n      var touch = d.activeTouch;\n      if (touch && !eventInWidget(d, e) && touch.left != null &&\n          !touch.moved && new Date - touch.start < 300) {\n        var pos = cm.coordsChar(d.activeTouch, \"page\"), range;\n        if (!touch.prev || farAway(touch, touch.prev)) // Single tap\n          { range = new Range(pos, pos); }\n        else if (!touch.prev.prev || farAway(touch, touch.prev.prev)) // Double tap\n          { range = cm.findWordAt(pos); }\n        else // Triple tap\n          { range = new Range(Pos(pos.line, 0), clipPos(cm.doc, Pos(pos.line + 1, 0))); }\n        cm.setSelection(range.anchor, range.head);\n        cm.focus();\n        e_preventDefault(e);\n      }\n      finishTouch();\n    });\n    on(d.scroller, \"touchcancel\", finishTouch);\n\n    // Sync scrolling between fake scrollbars and real scrollable\n    // area, ensure viewport is updated when scrolling.\n    on(d.scroller, \"scroll\", function () {\n      if (d.scroller.clientHeight) {\n        updateScrollTop(cm, d.scroller.scrollTop);\n        setScrollLeft(cm, d.scroller.scrollLeft, true);\n        signal(cm, \"scroll\", cm);\n      }\n    });\n\n    // Listen to wheel events in order to try and update the viewport on time.\n    on(d.scroller, \"mousewheel\", function (e) { return onScrollWheel(cm, e); });\n    on(d.scroller, \"DOMMouseScroll\", function (e) { return onScrollWheel(cm, e); });\n\n    // Prevent wrapper from ever scrolling\n    on(d.wrapper, \"scroll\", function () { return d.wrapper.scrollTop = d.wrapper.scrollLeft = 0; });\n\n    d.dragFunctions = {\n      enter: function (e) {if (!signalDOMEvent(cm, e)) { e_stop(e); }},\n      over: function (e) {if (!signalDOMEvent(cm, e)) { onDragOver(cm, e); e_stop(e); }},\n      start: function (e) { return onDragStart(cm, e); },\n      drop: operation(cm, onDrop),\n      leave: function (e) {if (!signalDOMEvent(cm, e)) { clearDragCursor(cm); }}\n    };\n\n    var inp = d.input.getField();\n    on(inp, \"keyup\", function (e) { return onKeyUp.call(cm, e); });\n    on(inp, \"keydown\", operation(cm, onKeyDown));\n    on(inp, \"keypress\", operation(cm, onKeyPress));\n    on(inp, \"focus\", function (e) { return onFocus(cm, e); });\n    on(inp, \"blur\", function (e) { return onBlur(cm, e); });\n  }\n\n  var initHooks = [];\n  CodeMirror.defineInitHook = function (f) { return initHooks.push(f); };\n\n  // Indent the given line. The how parameter can be \"smart\",\n  // \"add\"/null, \"subtract\", or \"prev\". When aggressive is false\n  // (typically set to true for forced single-line indents), empty\n  // lines are not indented, and places where the mode returns Pass\n  // are left alone.\n  function indentLine(cm, n, how, aggressive) {\n    var doc = cm.doc, state;\n    if (how == null) { how = \"add\"; }\n    if (how == \"smart\") {\n      // Fall back to \"prev\" when the mode doesn't have an indentation\n      // method.\n      if (!doc.mode.indent) { how = \"prev\"; }\n      else { state = getContextBefore(cm, n).state; }\n    }\n\n    var tabSize = cm.options.tabSize;\n    var line = getLine(doc, n), curSpace = countColumn(line.text, null, tabSize);\n    if (line.stateAfter) { line.stateAfter = null; }\n    var curSpaceString = line.text.match(/^\\s*/)[0], indentation;\n    if (!aggressive && !/\\S/.test(line.text)) {\n      indentation = 0;\n      how = \"not\";\n    } else if (how == \"smart\") {\n      indentation = doc.mode.indent(state, line.text.slice(curSpaceString.length), line.text);\n      if (indentation == Pass || indentation > 150) {\n        if (!aggressive) { return }\n        how = \"prev\";\n      }\n    }\n    if (how == \"prev\") {\n      if (n > doc.first) { indentation = countColumn(getLine(doc, n-1).text, null, tabSize); }\n      else { indentation = 0; }\n    } else if (how == \"add\") {\n      indentation = curSpace + cm.options.indentUnit;\n    } else if (how == \"subtract\") {\n      indentation = curSpace - cm.options.indentUnit;\n    } else if (typeof how == \"number\") {\n      indentation = curSpace + how;\n    }\n    indentation = Math.max(0, indentation);\n\n    var indentString = \"\", pos = 0;\n    if (cm.options.indentWithTabs)\n      { for (var i = Math.floor(indentation / tabSize); i; --i) {pos += tabSize; indentString += \"\\t\";} }\n    if (pos < indentation) { indentString += spaceStr(indentation - pos); }\n\n    if (indentString != curSpaceString) {\n      replaceRange(doc, indentString, Pos(n, 0), Pos(n, curSpaceString.length), \"+input\");\n      line.stateAfter = null;\n      return true\n    } else {\n      // Ensure that, if the cursor was in the whitespace at the start\n      // of the line, it is moved to the end of that space.\n      for (var i$1 = 0; i$1 < doc.sel.ranges.length; i$1++) {\n        var range = doc.sel.ranges[i$1];\n        if (range.head.line == n && range.head.ch < curSpaceString.length) {\n          var pos$1 = Pos(n, curSpaceString.length);\n          replaceOneSelection(doc, i$1, new Range(pos$1, pos$1));\n          break\n        }\n      }\n    }\n  }\n\n  // This will be set to a {lineWise: bool, text: [string]} object, so\n  // that, when pasting, we know what kind of selections the copied\n  // text was made out of.\n  var lastCopied = null;\n\n  function setLastCopied(newLastCopied) {\n    lastCopied = newLastCopied;\n  }\n\n  function applyTextInput(cm, inserted, deleted, sel, origin) {\n    var doc = cm.doc;\n    cm.display.shift = false;\n    if (!sel) { sel = doc.sel; }\n\n    var recent = +new Date - 200;\n    var paste = origin == \"paste\" || cm.state.pasteIncoming > recent;\n    var textLines = splitLinesAuto(inserted), multiPaste = null;\n    // When pasting N lines into N selections, insert one line per selection\n    if (paste && sel.ranges.length > 1) {\n      if (lastCopied && lastCopied.text.join(\"\\n\") == inserted) {\n        if (sel.ranges.length % lastCopied.text.length == 0) {\n          multiPaste = [];\n          for (var i = 0; i < lastCopied.text.length; i++)\n            { multiPaste.push(doc.splitLines(lastCopied.text[i])); }\n        }\n      } else if (textLines.length == sel.ranges.length && cm.options.pasteLinesPerSelection) {\n        multiPaste = map(textLines, function (l) { return [l]; });\n      }\n    }\n\n    var updateInput = cm.curOp.updateInput;\n    // Normal behavior is to insert the new text into every selection\n    for (var i$1 = sel.ranges.length - 1; i$1 >= 0; i$1--) {\n      var range = sel.ranges[i$1];\n      var from = range.from(), to = range.to();\n      if (range.empty()) {\n        if (deleted && deleted > 0) // Handle deletion\n          { from = Pos(from.line, from.ch - deleted); }\n        else if (cm.state.overwrite && !paste) // Handle overwrite\n          { to = Pos(to.line, Math.min(getLine(doc, to.line).text.length, to.ch + lst(textLines).length)); }\n        else if (paste && lastCopied && lastCopied.lineWise && lastCopied.text.join(\"\\n\") == textLines.join(\"\\n\"))\n          { from = to = Pos(from.line, 0); }\n      }\n      var changeEvent = {from: from, to: to, text: multiPaste ? multiPaste[i$1 % multiPaste.length] : textLines,\n                         origin: origin || (paste ? \"paste\" : cm.state.cutIncoming > recent ? \"cut\" : \"+input\")};\n      makeChange(cm.doc, changeEvent);\n      signalLater(cm, \"inputRead\", cm, changeEvent);\n    }\n    if (inserted && !paste)\n      { triggerElectric(cm, inserted); }\n\n    ensureCursorVisible(cm);\n    if (cm.curOp.updateInput < 2) { cm.curOp.updateInput = updateInput; }\n    cm.curOp.typing = true;\n    cm.state.pasteIncoming = cm.state.cutIncoming = -1;\n  }\n\n  function handlePaste(e, cm) {\n    var pasted = e.clipboardData && e.clipboardData.getData(\"Text\");\n    if (pasted) {\n      e.preventDefault();\n      if (!cm.isReadOnly() && !cm.options.disableInput && cm.hasFocus())\n        { runInOp(cm, function () { return applyTextInput(cm, pasted, 0, null, \"paste\"); }); }\n      return true\n    }\n  }\n\n  function triggerElectric(cm, inserted) {\n    // When an 'electric' character is inserted, immediately trigger a reindent\n    if (!cm.options.electricChars || !cm.options.smartIndent) { return }\n    var sel = cm.doc.sel;\n\n    for (var i = sel.ranges.length - 1; i >= 0; i--) {\n      var range = sel.ranges[i];\n      if (range.head.ch > 100 || (i && sel.ranges[i - 1].head.line == range.head.line)) { continue }\n      var mode = cm.getModeAt(range.head);\n      var indented = false;\n      if (mode.electricChars) {\n        for (var j = 0; j < mode.electricChars.length; j++)\n          { if (inserted.indexOf(mode.electricChars.charAt(j)) > -1) {\n            indented = indentLine(cm, range.head.line, \"smart\");\n            break\n          } }\n      } else if (mode.electricInput) {\n        if (mode.electricInput.test(getLine(cm.doc, range.head.line).text.slice(0, range.head.ch)))\n          { indented = indentLine(cm, range.head.line, \"smart\"); }\n      }\n      if (indented) { signalLater(cm, \"electricInput\", cm, range.head.line); }\n    }\n  }\n\n  function copyableRanges(cm) {\n    var text = [], ranges = [];\n    for (var i = 0; i < cm.doc.sel.ranges.length; i++) {\n      var line = cm.doc.sel.ranges[i].head.line;\n      var lineRange = {anchor: Pos(line, 0), head: Pos(line + 1, 0)};\n      ranges.push(lineRange);\n      text.push(cm.getRange(lineRange.anchor, lineRange.head));\n    }\n    return {text: text, ranges: ranges}\n  }\n\n  function disableBrowserMagic(field, spellcheck, autocorrect, autocapitalize) {\n    field.setAttribute(\"autocorrect\", autocorrect ? \"on\" : \"off\");\n    field.setAttribute(\"autocapitalize\", autocapitalize ? \"on\" : \"off\");\n    field.setAttribute(\"spellcheck\", !!spellcheck);\n  }\n\n  function hiddenTextarea() {\n    var te = elt(\"textarea\", null, null, \"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none\");\n    var div = elt(\"div\", [te], null, \"overflow: hidden; position: relative; width: 3px; height: 0px;\");\n    // The textarea is kept positioned near the cursor to prevent the\n    // fact that it'll be scrolled into view on input from scrolling\n    // our fake cursor out of view. On webkit, when wrap=off, paste is\n    // very slow. So make the area wide instead.\n    if (webkit) { te.style.width = \"1000px\"; }\n    else { te.setAttribute(\"wrap\", \"off\"); }\n    // If border: 0; -- iOS fails to open keyboard (issue #1287)\n    if (ios) { te.style.border = \"1px solid black\"; }\n    return div\n  }\n\n  // The publicly visible API. Note that methodOp(f) means\n  // 'wrap f in an operation, performed on its `this` parameter'.\n\n  // This is not the complete set of editor methods. Most of the\n  // methods defined on the Doc type are also injected into\n  // CodeMirror.prototype, for backwards compatibility and\n  // convenience.\n\n  function addEditorMethods(CodeMirror) {\n    var optionHandlers = CodeMirror.optionHandlers;\n\n    var helpers = CodeMirror.helpers = {};\n\n    CodeMirror.prototype = {\n      constructor: CodeMirror,\n      focus: function(){win(this).focus(); this.display.input.focus();},\n\n      setOption: function(option, value) {\n        var options = this.options, old = options[option];\n        if (options[option] == value && option != \"mode\") { return }\n        options[option] = value;\n        if (optionHandlers.hasOwnProperty(option))\n          { operation(this, optionHandlers[option])(this, value, old); }\n        signal(this, \"optionChange\", this, option);\n      },\n\n      getOption: function(option) {return this.options[option]},\n      getDoc: function() {return this.doc},\n\n      addKeyMap: function(map, bottom) {\n        this.state.keyMaps[bottom ? \"push\" : \"unshift\"](getKeyMap(map));\n      },\n      removeKeyMap: function(map) {\n        var maps = this.state.keyMaps;\n        for (var i = 0; i < maps.length; ++i)\n          { if (maps[i] == map || maps[i].name == map) {\n            maps.splice(i, 1);\n            return true\n          } }\n      },\n\n      addOverlay: methodOp(function(spec, options) {\n        var mode = spec.token ? spec : CodeMirror.getMode(this.options, spec);\n        if (mode.startState) { throw new Error(\"Overlays may not be stateful.\") }\n        insertSorted(this.state.overlays,\n                     {mode: mode, modeSpec: spec, opaque: options && options.opaque,\n                      priority: (options && options.priority) || 0},\n                     function (overlay) { return overlay.priority; });\n        this.state.modeGen++;\n        regChange(this);\n      }),\n      removeOverlay: methodOp(function(spec) {\n        var overlays = this.state.overlays;\n        for (var i = 0; i < overlays.length; ++i) {\n          var cur = overlays[i].modeSpec;\n          if (cur == spec || typeof spec == \"string\" && cur.name == spec) {\n            overlays.splice(i, 1);\n            this.state.modeGen++;\n            regChange(this);\n            return\n          }\n        }\n      }),\n\n      indentLine: methodOp(function(n, dir, aggressive) {\n        if (typeof dir != \"string\" && typeof dir != \"number\") {\n          if (dir == null) { dir = this.options.smartIndent ? \"smart\" : \"prev\"; }\n          else { dir = dir ? \"add\" : \"subtract\"; }\n        }\n        if (isLine(this.doc, n)) { indentLine(this, n, dir, aggressive); }\n      }),\n      indentSelection: methodOp(function(how) {\n        var ranges = this.doc.sel.ranges, end = -1;\n        for (var i = 0; i < ranges.length; i++) {\n          var range = ranges[i];\n          if (!range.empty()) {\n            var from = range.from(), to = range.to();\n            var start = Math.max(end, from.line);\n            end = Math.min(this.lastLine(), to.line - (to.ch ? 0 : 1)) + 1;\n            for (var j = start; j < end; ++j)\n              { indentLine(this, j, how); }\n            var newRanges = this.doc.sel.ranges;\n            if (from.ch == 0 && ranges.length == newRanges.length && newRanges[i].from().ch > 0)\n              { replaceOneSelection(this.doc, i, new Range(from, newRanges[i].to()), sel_dontScroll); }\n          } else if (range.head.line > end) {\n            indentLine(this, range.head.line, how, true);\n            end = range.head.line;\n            if (i == this.doc.sel.primIndex) { ensureCursorVisible(this); }\n          }\n        }\n      }),\n\n      // Fetch the parser token for a given character. Useful for hacks\n      // that want to inspect the mode state (say, for completion).\n      getTokenAt: function(pos, precise) {\n        return takeToken(this, pos, precise)\n      },\n\n      getLineTokens: function(line, precise) {\n        return takeToken(this, Pos(line), precise, true)\n      },\n\n      getTokenTypeAt: function(pos) {\n        pos = clipPos(this.doc, pos);\n        var styles = getLineStyles(this, getLine(this.doc, pos.line));\n        var before = 0, after = (styles.length - 1) / 2, ch = pos.ch;\n        var type;\n        if (ch == 0) { type = styles[2]; }\n        else { for (;;) {\n          var mid = (before + after) >> 1;\n          if ((mid ? styles[mid * 2 - 1] : 0) >= ch) { after = mid; }\n          else if (styles[mid * 2 + 1] < ch) { before = mid + 1; }\n          else { type = styles[mid * 2 + 2]; break }\n        } }\n        var cut = type ? type.indexOf(\"overlay \") : -1;\n        return cut < 0 ? type : cut == 0 ? null : type.slice(0, cut - 1)\n      },\n\n      getModeAt: function(pos) {\n        var mode = this.doc.mode;\n        if (!mode.innerMode) { return mode }\n        return CodeMirror.innerMode(mode, this.getTokenAt(pos).state).mode\n      },\n\n      getHelper: function(pos, type) {\n        return this.getHelpers(pos, type)[0]\n      },\n\n      getHelpers: function(pos, type) {\n        var found = [];\n        if (!helpers.hasOwnProperty(type)) { return found }\n        var help = helpers[type], mode = this.getModeAt(pos);\n        if (typeof mode[type] == \"string\") {\n          if (help[mode[type]]) { found.push(help[mode[type]]); }\n        } else if (mode[type]) {\n          for (var i = 0; i < mode[type].length; i++) {\n            var val = help[mode[type][i]];\n            if (val) { found.push(val); }\n          }\n        } else if (mode.helperType && help[mode.helperType]) {\n          found.push(help[mode.helperType]);\n        } else if (help[mode.name]) {\n          found.push(help[mode.name]);\n        }\n        for (var i$1 = 0; i$1 < help._global.length; i$1++) {\n          var cur = help._global[i$1];\n          if (cur.pred(mode, this) && indexOf(found, cur.val) == -1)\n            { found.push(cur.val); }\n        }\n        return found\n      },\n\n      getStateAfter: function(line, precise) {\n        var doc = this.doc;\n        line = clipLine(doc, line == null ? doc.first + doc.size - 1: line);\n        return getContextBefore(this, line + 1, precise).state\n      },\n\n      cursorCoords: function(start, mode) {\n        var pos, range = this.doc.sel.primary();\n        if (start == null) { pos = range.head; }\n        else if (typeof start == \"object\") { pos = clipPos(this.doc, start); }\n        else { pos = start ? range.from() : range.to(); }\n        return cursorCoords(this, pos, mode || \"page\")\n      },\n\n      charCoords: function(pos, mode) {\n        return charCoords(this, clipPos(this.doc, pos), mode || \"page\")\n      },\n\n      coordsChar: function(coords, mode) {\n        coords = fromCoordSystem(this, coords, mode || \"page\");\n        return coordsChar(this, coords.left, coords.top)\n      },\n\n      lineAtHeight: function(height, mode) {\n        height = fromCoordSystem(this, {top: height, left: 0}, mode || \"page\").top;\n        return lineAtHeight(this.doc, height + this.display.viewOffset)\n      },\n      heightAtLine: function(line, mode, includeWidgets) {\n        var end = false, lineObj;\n        if (typeof line == \"number\") {\n          var last = this.doc.first + this.doc.size - 1;\n          if (line < this.doc.first) { line = this.doc.first; }\n          else if (line > last) { line = last; end = true; }\n          lineObj = getLine(this.doc, line);\n        } else {\n          lineObj = line;\n        }\n        return intoCoordSystem(this, lineObj, {top: 0, left: 0}, mode || \"page\", includeWidgets || end).top +\n          (end ? this.doc.height - heightAtLine(lineObj) : 0)\n      },\n\n      defaultTextHeight: function() { return textHeight(this.display) },\n      defaultCharWidth: function() { return charWidth(this.display) },\n\n      getViewport: function() { return {from: this.display.viewFrom, to: this.display.viewTo}},\n\n      addWidget: function(pos, node, scroll, vert, horiz) {\n        var display = this.display;\n        pos = cursorCoords(this, clipPos(this.doc, pos));\n        var top = pos.bottom, left = pos.left;\n        node.style.position = \"absolute\";\n        node.setAttribute(\"cm-ignore-events\", \"true\");\n        this.display.input.setUneditable(node);\n        display.sizer.appendChild(node);\n        if (vert == \"over\") {\n          top = pos.top;\n        } else if (vert == \"above\" || vert == \"near\") {\n          var vspace = Math.max(display.wrapper.clientHeight, this.doc.height),\n          hspace = Math.max(display.sizer.clientWidth, display.lineSpace.clientWidth);\n          // Default to positioning above (if specified and possible); otherwise default to positioning below\n          if ((vert == 'above' || pos.bottom + node.offsetHeight > vspace) && pos.top > node.offsetHeight)\n            { top = pos.top - node.offsetHeight; }\n          else if (pos.bottom + node.offsetHeight <= vspace)\n            { top = pos.bottom; }\n          if (left + node.offsetWidth > hspace)\n            { left = hspace - node.offsetWidth; }\n        }\n        node.style.top = top + \"px\";\n        node.style.left = node.style.right = \"\";\n        if (horiz == \"right\") {\n          left = display.sizer.clientWidth - node.offsetWidth;\n          node.style.right = \"0px\";\n        } else {\n          if (horiz == \"left\") { left = 0; }\n          else if (horiz == \"middle\") { left = (display.sizer.clientWidth - node.offsetWidth) / 2; }\n          node.style.left = left + \"px\";\n        }\n        if (scroll)\n          { scrollIntoView(this, {left: left, top: top, right: left + node.offsetWidth, bottom: top + node.offsetHeight}); }\n      },\n\n      triggerOnKeyDown: methodOp(onKeyDown),\n      triggerOnKeyPress: methodOp(onKeyPress),\n      triggerOnKeyUp: onKeyUp,\n      triggerOnMouseDown: methodOp(onMouseDown),\n\n      execCommand: function(cmd) {\n        if (commands.hasOwnProperty(cmd))\n          { return commands[cmd].call(null, this) }\n      },\n\n      triggerElectric: methodOp(function(text) { triggerElectric(this, text); }),\n\n      findPosH: function(from, amount, unit, visually) {\n        var dir = 1;\n        if (amount < 0) { dir = -1; amount = -amount; }\n        var cur = clipPos(this.doc, from);\n        for (var i = 0; i < amount; ++i) {\n          cur = findPosH(this.doc, cur, dir, unit, visually);\n          if (cur.hitSide) { break }\n        }\n        return cur\n      },\n\n      moveH: methodOp(function(dir, unit) {\n        var this$1 = this;\n\n        this.extendSelectionsBy(function (range) {\n          if (this$1.display.shift || this$1.doc.extend || range.empty())\n            { return findPosH(this$1.doc, range.head, dir, unit, this$1.options.rtlMoveVisually) }\n          else\n            { return dir < 0 ? range.from() : range.to() }\n        }, sel_move);\n      }),\n\n      deleteH: methodOp(function(dir, unit) {\n        var sel = this.doc.sel, doc = this.doc;\n        if (sel.somethingSelected())\n          { doc.replaceSelection(\"\", null, \"+delete\"); }\n        else\n          { deleteNearSelection(this, function (range) {\n            var other = findPosH(doc, range.head, dir, unit, false);\n            return dir < 0 ? {from: other, to: range.head} : {from: range.head, to: other}\n          }); }\n      }),\n\n      findPosV: function(from, amount, unit, goalColumn) {\n        var dir = 1, x = goalColumn;\n        if (amount < 0) { dir = -1; amount = -amount; }\n        var cur = clipPos(this.doc, from);\n        for (var i = 0; i < amount; ++i) {\n          var coords = cursorCoords(this, cur, \"div\");\n          if (x == null) { x = coords.left; }\n          else { coords.left = x; }\n          cur = findPosV(this, coords, dir, unit);\n          if (cur.hitSide) { break }\n        }\n        return cur\n      },\n\n      moveV: methodOp(function(dir, unit) {\n        var this$1 = this;\n\n        var doc = this.doc, goals = [];\n        var collapse = !this.display.shift && !doc.extend && doc.sel.somethingSelected();\n        doc.extendSelectionsBy(function (range) {\n          if (collapse)\n            { return dir < 0 ? range.from() : range.to() }\n          var headPos = cursorCoords(this$1, range.head, \"div\");\n          if (range.goalColumn != null) { headPos.left = range.goalColumn; }\n          goals.push(headPos.left);\n          var pos = findPosV(this$1, headPos, dir, unit);\n          if (unit == \"page\" && range == doc.sel.primary())\n            { addToScrollTop(this$1, charCoords(this$1, pos, \"div\").top - headPos.top); }\n          return pos\n        }, sel_move);\n        if (goals.length) { for (var i = 0; i < doc.sel.ranges.length; i++)\n          { doc.sel.ranges[i].goalColumn = goals[i]; } }\n      }),\n\n      // Find the word at the given position (as returned by coordsChar).\n      findWordAt: function(pos) {\n        var doc = this.doc, line = getLine(doc, pos.line).text;\n        var start = pos.ch, end = pos.ch;\n        if (line) {\n          var helper = this.getHelper(pos, \"wordChars\");\n          if ((pos.sticky == \"before\" || end == line.length) && start) { --start; } else { ++end; }\n          var startChar = line.charAt(start);\n          var check = isWordChar(startChar, helper)\n            ? function (ch) { return isWordChar(ch, helper); }\n            : /\\s/.test(startChar) ? function (ch) { return /\\s/.test(ch); }\n            : function (ch) { return (!/\\s/.test(ch) && !isWordChar(ch)); };\n          while (start > 0 && check(line.charAt(start - 1))) { --start; }\n          while (end < line.length && check(line.charAt(end))) { ++end; }\n        }\n        return new Range(Pos(pos.line, start), Pos(pos.line, end))\n      },\n\n      toggleOverwrite: function(value) {\n        if (value != null && value == this.state.overwrite) { return }\n        if (this.state.overwrite = !this.state.overwrite)\n          { addClass(this.display.cursorDiv, \"CodeMirror-overwrite\"); }\n        else\n          { rmClass(this.display.cursorDiv, \"CodeMirror-overwrite\"); }\n\n        signal(this, \"overwriteToggle\", this, this.state.overwrite);\n      },\n      hasFocus: function() { return this.display.input.getField() == activeElt(doc(this)) },\n      isReadOnly: function() { return !!(this.options.readOnly || this.doc.cantEdit) },\n\n      scrollTo: methodOp(function (x, y) { scrollToCoords(this, x, y); }),\n      getScrollInfo: function() {\n        var scroller = this.display.scroller;\n        return {left: scroller.scrollLeft, top: scroller.scrollTop,\n                height: scroller.scrollHeight - scrollGap(this) - this.display.barHeight,\n                width: scroller.scrollWidth - scrollGap(this) - this.display.barWidth,\n                clientHeight: displayHeight(this), clientWidth: displayWidth(this)}\n      },\n\n      scrollIntoView: methodOp(function(range, margin) {\n        if (range == null) {\n          range = {from: this.doc.sel.primary().head, to: null};\n          if (margin == null) { margin = this.options.cursorScrollMargin; }\n        } else if (typeof range == \"number\") {\n          range = {from: Pos(range, 0), to: null};\n        } else if (range.from == null) {\n          range = {from: range, to: null};\n        }\n        if (!range.to) { range.to = range.from; }\n        range.margin = margin || 0;\n\n        if (range.from.line != null) {\n          scrollToRange(this, range);\n        } else {\n          scrollToCoordsRange(this, range.from, range.to, range.margin);\n        }\n      }),\n\n      setSize: methodOp(function(width, height) {\n        var this$1 = this;\n\n        var interpret = function (val) { return typeof val == \"number\" || /^\\d+$/.test(String(val)) ? val + \"px\" : val; };\n        if (width != null) { this.display.wrapper.style.width = interpret(width); }\n        if (height != null) { this.display.wrapper.style.height = interpret(height); }\n        if (this.options.lineWrapping) { clearLineMeasurementCache(this); }\n        var lineNo = this.display.viewFrom;\n        this.doc.iter(lineNo, this.display.viewTo, function (line) {\n          if (line.widgets) { for (var i = 0; i < line.widgets.length; i++)\n            { if (line.widgets[i].noHScroll) { regLineChange(this$1, lineNo, \"widget\"); break } } }\n          ++lineNo;\n        });\n        this.curOp.forceUpdate = true;\n        signal(this, \"refresh\", this);\n      }),\n\n      operation: function(f){return runInOp(this, f)},\n      startOperation: function(){return startOperation(this)},\n      endOperation: function(){return endOperation(this)},\n\n      refresh: methodOp(function() {\n        var oldHeight = this.display.cachedTextHeight;\n        regChange(this);\n        this.curOp.forceUpdate = true;\n        clearCaches(this);\n        scrollToCoords(this, this.doc.scrollLeft, this.doc.scrollTop);\n        updateGutterSpace(this.display);\n        if (oldHeight == null || Math.abs(oldHeight - textHeight(this.display)) > .5 || this.options.lineWrapping)\n          { estimateLineHeights(this); }\n        signal(this, \"refresh\", this);\n      }),\n\n      swapDoc: methodOp(function(doc) {\n        var old = this.doc;\n        old.cm = null;\n        // Cancel the current text selection if any (#5821)\n        if (this.state.selectingText) { this.state.selectingText(); }\n        attachDoc(this, doc);\n        clearCaches(this);\n        this.display.input.reset();\n        scrollToCoords(this, doc.scrollLeft, doc.scrollTop);\n        this.curOp.forceScroll = true;\n        signalLater(this, \"swapDoc\", this, old);\n        return old\n      }),\n\n      phrase: function(phraseText) {\n        var phrases = this.options.phrases;\n        return phrases && Object.prototype.hasOwnProperty.call(phrases, phraseText) ? phrases[phraseText] : phraseText\n      },\n\n      getInputField: function(){return this.display.input.getField()},\n      getWrapperElement: function(){return this.display.wrapper},\n      getScrollerElement: function(){return this.display.scroller},\n      getGutterElement: function(){return this.display.gutters}\n    };\n    eventMixin(CodeMirror);\n\n    CodeMirror.registerHelper = function(type, name, value) {\n      if (!helpers.hasOwnProperty(type)) { helpers[type] = CodeMirror[type] = {_global: []}; }\n      helpers[type][name] = value;\n    };\n    CodeMirror.registerGlobalHelper = function(type, name, predicate, value) {\n      CodeMirror.registerHelper(type, name, value);\n      helpers[type]._global.push({pred: predicate, val: value});\n    };\n  }\n\n  // Used for horizontal relative motion. Dir is -1 or 1 (left or\n  // right), unit can be \"codepoint\", \"char\", \"column\" (like char, but\n  // doesn't cross line boundaries), \"word\" (across next word), or\n  // \"group\" (to the start of next group of word or\n  // non-word-non-whitespace chars). The visually param controls\n  // whether, in right-to-left text, direction 1 means to move towards\n  // the next index in the string, or towards the character to the right\n  // of the current position. The resulting position will have a\n  // hitSide=true property if it reached the end of the document.\n  function findPosH(doc, pos, dir, unit, visually) {\n    var oldPos = pos;\n    var origDir = dir;\n    var lineObj = getLine(doc, pos.line);\n    var lineDir = visually && doc.direction == \"rtl\" ? -dir : dir;\n    function findNextLine() {\n      var l = pos.line + lineDir;\n      if (l < doc.first || l >= doc.first + doc.size) { return false }\n      pos = new Pos(l, pos.ch, pos.sticky);\n      return lineObj = getLine(doc, l)\n    }\n    function moveOnce(boundToLine) {\n      var next;\n      if (unit == \"codepoint\") {\n        var ch = lineObj.text.charCodeAt(pos.ch + (dir > 0 ? 0 : -1));\n        if (isNaN(ch)) {\n          next = null;\n        } else {\n          var astral = dir > 0 ? ch >= 0xD800 && ch < 0xDC00 : ch >= 0xDC00 && ch < 0xDFFF;\n          next = new Pos(pos.line, Math.max(0, Math.min(lineObj.text.length, pos.ch + dir * (astral ? 2 : 1))), -dir);\n        }\n      } else if (visually) {\n        next = moveVisually(doc.cm, lineObj, pos, dir);\n      } else {\n        next = moveLogically(lineObj, pos, dir);\n      }\n      if (next == null) {\n        if (!boundToLine && findNextLine())\n          { pos = endOfLine(visually, doc.cm, lineObj, pos.line, lineDir); }\n        else\n          { return false }\n      } else {\n        pos = next;\n      }\n      return true\n    }\n\n    if (unit == \"char\" || unit == \"codepoint\") {\n      moveOnce();\n    } else if (unit == \"column\") {\n      moveOnce(true);\n    } else if (unit == \"word\" || unit == \"group\") {\n      var sawType = null, group = unit == \"group\";\n      var helper = doc.cm && doc.cm.getHelper(pos, \"wordChars\");\n      for (var first = true;; first = false) {\n        if (dir < 0 && !moveOnce(!first)) { break }\n        var cur = lineObj.text.charAt(pos.ch) || \"\\n\";\n        var type = isWordChar(cur, helper) ? \"w\"\n          : group && cur == \"\\n\" ? \"n\"\n          : !group || /\\s/.test(cur) ? null\n          : \"p\";\n        if (group && !first && !type) { type = \"s\"; }\n        if (sawType && sawType != type) {\n          if (dir < 0) {dir = 1; moveOnce(); pos.sticky = \"after\";}\n          break\n        }\n\n        if (type) { sawType = type; }\n        if (dir > 0 && !moveOnce(!first)) { break }\n      }\n    }\n    var result = skipAtomic(doc, pos, oldPos, origDir, true);\n    if (equalCursorPos(oldPos, result)) { result.hitSide = true; }\n    return result\n  }\n\n  // For relative vertical movement. Dir may be -1 or 1. Unit can be\n  // \"page\" or \"line\". The resulting position will have a hitSide=true\n  // property if it reached the end of the document.\n  function findPosV(cm, pos, dir, unit) {\n    var doc = cm.doc, x = pos.left, y;\n    if (unit == \"page\") {\n      var pageSize = Math.min(cm.display.wrapper.clientHeight, win(cm).innerHeight || doc(cm).documentElement.clientHeight);\n      var moveAmount = Math.max(pageSize - .5 * textHeight(cm.display), 3);\n      y = (dir > 0 ? pos.bottom : pos.top) + dir * moveAmount;\n\n    } else if (unit == \"line\") {\n      y = dir > 0 ? pos.bottom + 3 : pos.top - 3;\n    }\n    var target;\n    for (;;) {\n      target = coordsChar(cm, x, y);\n      if (!target.outside) { break }\n      if (dir < 0 ? y <= 0 : y >= doc.height) { target.hitSide = true; break }\n      y += dir * 5;\n    }\n    return target\n  }\n\n  // CONTENTEDITABLE INPUT STYLE\n\n  var ContentEditableInput = function(cm) {\n    this.cm = cm;\n    this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null;\n    this.polling = new Delayed();\n    this.composing = null;\n    this.gracePeriod = false;\n    this.readDOMTimeout = null;\n  };\n\n  ContentEditableInput.prototype.init = function (display) {\n      var this$1 = this;\n\n    var input = this, cm = input.cm;\n    var div = input.div = display.lineDiv;\n    div.contentEditable = true;\n    disableBrowserMagic(div, cm.options.spellcheck, cm.options.autocorrect, cm.options.autocapitalize);\n\n    function belongsToInput(e) {\n      for (var t = e.target; t; t = t.parentNode) {\n        if (t == div) { return true }\n        if (/\\bCodeMirror-(?:line)?widget\\b/.test(t.className)) { break }\n      }\n      return false\n    }\n\n    on(div, \"paste\", function (e) {\n      if (!belongsToInput(e) || signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n      // IE doesn't fire input events, so we schedule a read for the pasted content in this way\n      if (ie_version <= 11) { setTimeout(operation(cm, function () { return this$1.updateFromDOM(); }), 20); }\n    });\n\n    on(div, \"compositionstart\", function (e) {\n      this$1.composing = {data: e.data, done: false};\n    });\n    on(div, \"compositionupdate\", function (e) {\n      if (!this$1.composing) { this$1.composing = {data: e.data, done: false}; }\n    });\n    on(div, \"compositionend\", function (e) {\n      if (this$1.composing) {\n        if (e.data != this$1.composing.data) { this$1.readFromDOMSoon(); }\n        this$1.composing.done = true;\n      }\n    });\n\n    on(div, \"touchstart\", function () { return input.forceCompositionEnd(); });\n\n    on(div, \"input\", function () {\n      if (!this$1.composing) { this$1.readFromDOMSoon(); }\n    });\n\n    function onCopyCut(e) {\n      if (!belongsToInput(e) || signalDOMEvent(cm, e)) { return }\n      if (cm.somethingSelected()) {\n        setLastCopied({lineWise: false, text: cm.getSelections()});\n        if (e.type == \"cut\") { cm.replaceSelection(\"\", null, \"cut\"); }\n      } else if (!cm.options.lineWiseCopyCut) {\n        return\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({lineWise: true, text: ranges.text});\n        if (e.type == \"cut\") {\n          cm.operation(function () {\n            cm.setSelections(ranges.ranges, 0, sel_dontScroll);\n            cm.replaceSelection(\"\", null, \"cut\");\n          });\n        }\n      }\n      if (e.clipboardData) {\n        e.clipboardData.clearData();\n        var content = lastCopied.text.join(\"\\n\");\n        // iOS exposes the clipboard API, but seems to discard content inserted into it\n        e.clipboardData.setData(\"Text\", content);\n        if (e.clipboardData.getData(\"Text\") == content) {\n          e.preventDefault();\n          return\n        }\n      }\n      // Old-fashioned briefly-focus-a-textarea hack\n      var kludge = hiddenTextarea(), te = kludge.firstChild;\n      disableBrowserMagic(te);\n      cm.display.lineSpace.insertBefore(kludge, cm.display.lineSpace.firstChild);\n      te.value = lastCopied.text.join(\"\\n\");\n      var hadFocus = activeElt(div.ownerDocument);\n      selectInput(te);\n      setTimeout(function () {\n        cm.display.lineSpace.removeChild(kludge);\n        hadFocus.focus();\n        if (hadFocus == div) { input.showPrimarySelection(); }\n      }, 50);\n    }\n    on(div, \"copy\", onCopyCut);\n    on(div, \"cut\", onCopyCut);\n  };\n\n  ContentEditableInput.prototype.screenReaderLabelChanged = function (label) {\n    // Label for screenreaders, accessibility\n    if(label) {\n      this.div.setAttribute('aria-label', label);\n    } else {\n      this.div.removeAttribute('aria-label');\n    }\n  };\n\n  ContentEditableInput.prototype.prepareSelection = function () {\n    var result = prepareSelection(this.cm, false);\n    result.focus = activeElt(this.div.ownerDocument) == this.div;\n    return result\n  };\n\n  ContentEditableInput.prototype.showSelection = function (info, takeFocus) {\n    if (!info || !this.cm.display.view.length) { return }\n    if (info.focus || takeFocus) { this.showPrimarySelection(); }\n    this.showMultipleSelections(info);\n  };\n\n  ContentEditableInput.prototype.getSelection = function () {\n    return this.cm.display.wrapper.ownerDocument.getSelection()\n  };\n\n  ContentEditableInput.prototype.showPrimarySelection = function () {\n    var sel = this.getSelection(), cm = this.cm, prim = cm.doc.sel.primary();\n    var from = prim.from(), to = prim.to();\n\n    if (cm.display.viewTo == cm.display.viewFrom || from.line >= cm.display.viewTo || to.line < cm.display.viewFrom) {\n      sel.removeAllRanges();\n      return\n    }\n\n    var curAnchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var curFocus = domToPos(cm, sel.focusNode, sel.focusOffset);\n    if (curAnchor && !curAnchor.bad && curFocus && !curFocus.bad &&\n        cmp(minPos(curAnchor, curFocus), from) == 0 &&\n        cmp(maxPos(curAnchor, curFocus), to) == 0)\n      { return }\n\n    var view = cm.display.view;\n    var start = (from.line >= cm.display.viewFrom && posToDOM(cm, from)) ||\n        {node: view[0].measure.map[2], offset: 0};\n    var end = to.line < cm.display.viewTo && posToDOM(cm, to);\n    if (!end) {\n      var measure = view[view.length - 1].measure;\n      var map = measure.maps ? measure.maps[measure.maps.length - 1] : measure.map;\n      end = {node: map[map.length - 1], offset: map[map.length - 2] - map[map.length - 3]};\n    }\n\n    if (!start || !end) {\n      sel.removeAllRanges();\n      return\n    }\n\n    var old = sel.rangeCount && sel.getRangeAt(0), rng;\n    try { rng = range(start.node, start.offset, end.offset, end.node); }\n    catch(e) {} // Our model of the DOM might be outdated, in which case the range we try to set can be impossible\n    if (rng) {\n      if (!gecko && cm.state.focused) {\n        sel.collapse(start.node, start.offset);\n        if (!rng.collapsed) {\n          sel.removeAllRanges();\n          sel.addRange(rng);\n        }\n      } else {\n        sel.removeAllRanges();\n        sel.addRange(rng);\n      }\n      if (old && sel.anchorNode == null) { sel.addRange(old); }\n      else if (gecko) { this.startGracePeriod(); }\n    }\n    this.rememberSelection();\n  };\n\n  ContentEditableInput.prototype.startGracePeriod = function () {\n      var this$1 = this;\n\n    clearTimeout(this.gracePeriod);\n    this.gracePeriod = setTimeout(function () {\n      this$1.gracePeriod = false;\n      if (this$1.selectionChanged())\n        { this$1.cm.operation(function () { return this$1.cm.curOp.selectionChanged = true; }); }\n    }, 20);\n  };\n\n  ContentEditableInput.prototype.showMultipleSelections = function (info) {\n    removeChildrenAndAdd(this.cm.display.cursorDiv, info.cursors);\n    removeChildrenAndAdd(this.cm.display.selectionDiv, info.selection);\n  };\n\n  ContentEditableInput.prototype.rememberSelection = function () {\n    var sel = this.getSelection();\n    this.lastAnchorNode = sel.anchorNode; this.lastAnchorOffset = sel.anchorOffset;\n    this.lastFocusNode = sel.focusNode; this.lastFocusOffset = sel.focusOffset;\n  };\n\n  ContentEditableInput.prototype.selectionInEditor = function () {\n    var sel = this.getSelection();\n    if (!sel.rangeCount) { return false }\n    var node = sel.getRangeAt(0).commonAncestorContainer;\n    return contains(this.div, node)\n  };\n\n  ContentEditableInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\") {\n      if (!this.selectionInEditor() || activeElt(this.div.ownerDocument) != this.div)\n        { this.showSelection(this.prepareSelection(), true); }\n      this.div.focus();\n    }\n  };\n  ContentEditableInput.prototype.blur = function () { this.div.blur(); };\n  ContentEditableInput.prototype.getField = function () { return this.div };\n\n  ContentEditableInput.prototype.supportsTouch = function () { return true };\n\n  ContentEditableInput.prototype.receivedFocus = function () {\n      var this$1 = this;\n\n    var input = this;\n    if (this.selectionInEditor())\n      { setTimeout(function () { return this$1.pollSelection(); }, 20); }\n    else\n      { runInOp(this.cm, function () { return input.cm.curOp.selectionChanged = true; }); }\n\n    function poll() {\n      if (input.cm.state.focused) {\n        input.pollSelection();\n        input.polling.set(input.cm.options.pollInterval, poll);\n      }\n    }\n    this.polling.set(this.cm.options.pollInterval, poll);\n  };\n\n  ContentEditableInput.prototype.selectionChanged = function () {\n    var sel = this.getSelection();\n    return sel.anchorNode != this.lastAnchorNode || sel.anchorOffset != this.lastAnchorOffset ||\n      sel.focusNode != this.lastFocusNode || sel.focusOffset != this.lastFocusOffset\n  };\n\n  ContentEditableInput.prototype.pollSelection = function () {\n    if (this.readDOMTimeout != null || this.gracePeriod || !this.selectionChanged()) { return }\n    var sel = this.getSelection(), cm = this.cm;\n    // On Android Chrome (version 56, at least), backspacing into an\n    // uneditable block element will put the cursor in that element,\n    // and then, because it's not editable, hide the virtual keyboard.\n    // Because Android doesn't allow us to actually detect backspace\n    // presses in a sane way, this code checks for when that happens\n    // and simulates a backspace press in this case.\n    if (android && chrome && this.cm.display.gutterSpecs.length && isInGutter(sel.anchorNode)) {\n      this.cm.triggerOnKeyDown({type: \"keydown\", keyCode: 8, preventDefault: Math.abs});\n      this.blur();\n      this.focus();\n      return\n    }\n    if (this.composing) { return }\n    this.rememberSelection();\n    var anchor = domToPos(cm, sel.anchorNode, sel.anchorOffset);\n    var head = domToPos(cm, sel.focusNode, sel.focusOffset);\n    if (anchor && head) { runInOp(cm, function () {\n      setSelection(cm.doc, simpleSelection(anchor, head), sel_dontScroll);\n      if (anchor.bad || head.bad) { cm.curOp.selectionChanged = true; }\n    }); }\n  };\n\n  ContentEditableInput.prototype.pollContent = function () {\n    if (this.readDOMTimeout != null) {\n      clearTimeout(this.readDOMTimeout);\n      this.readDOMTimeout = null;\n    }\n\n    var cm = this.cm, display = cm.display, sel = cm.doc.sel.primary();\n    var from = sel.from(), to = sel.to();\n    if (from.ch == 0 && from.line > cm.firstLine())\n      { from = Pos(from.line - 1, getLine(cm.doc, from.line - 1).length); }\n    if (to.ch == getLine(cm.doc, to.line).text.length && to.line < cm.lastLine())\n      { to = Pos(to.line + 1, 0); }\n    if (from.line < display.viewFrom || to.line > display.viewTo - 1) { return false }\n\n    var fromIndex, fromLine, fromNode;\n    if (from.line == display.viewFrom || (fromIndex = findViewIndex(cm, from.line)) == 0) {\n      fromLine = lineNo(display.view[0].line);\n      fromNode = display.view[0].node;\n    } else {\n      fromLine = lineNo(display.view[fromIndex].line);\n      fromNode = display.view[fromIndex - 1].node.nextSibling;\n    }\n    var toIndex = findViewIndex(cm, to.line);\n    var toLine, toNode;\n    if (toIndex == display.view.length - 1) {\n      toLine = display.viewTo - 1;\n      toNode = display.lineDiv.lastChild;\n    } else {\n      toLine = lineNo(display.view[toIndex + 1].line) - 1;\n      toNode = display.view[toIndex + 1].node.previousSibling;\n    }\n\n    if (!fromNode) { return false }\n    var newText = cm.doc.splitLines(domTextBetween(cm, fromNode, toNode, fromLine, toLine));\n    var oldText = getBetween(cm.doc, Pos(fromLine, 0), Pos(toLine, getLine(cm.doc, toLine).text.length));\n    while (newText.length > 1 && oldText.length > 1) {\n      if (lst(newText) == lst(oldText)) { newText.pop(); oldText.pop(); toLine--; }\n      else if (newText[0] == oldText[0]) { newText.shift(); oldText.shift(); fromLine++; }\n      else { break }\n    }\n\n    var cutFront = 0, cutEnd = 0;\n    var newTop = newText[0], oldTop = oldText[0], maxCutFront = Math.min(newTop.length, oldTop.length);\n    while (cutFront < maxCutFront && newTop.charCodeAt(cutFront) == oldTop.charCodeAt(cutFront))\n      { ++cutFront; }\n    var newBot = lst(newText), oldBot = lst(oldText);\n    var maxCutEnd = Math.min(newBot.length - (newText.length == 1 ? cutFront : 0),\n                             oldBot.length - (oldText.length == 1 ? cutFront : 0));\n    while (cutEnd < maxCutEnd &&\n           newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1))\n      { ++cutEnd; }\n    // Try to move start of change to start of selection if ambiguous\n    if (newText.length == 1 && oldText.length == 1 && fromLine == from.line) {\n      while (cutFront && cutFront > from.ch &&\n             newBot.charCodeAt(newBot.length - cutEnd - 1) == oldBot.charCodeAt(oldBot.length - cutEnd - 1)) {\n        cutFront--;\n        cutEnd++;\n      }\n    }\n\n    newText[newText.length - 1] = newBot.slice(0, newBot.length - cutEnd).replace(/^\\u200b+/, \"\");\n    newText[0] = newText[0].slice(cutFront).replace(/\\u200b+$/, \"\");\n\n    var chFrom = Pos(fromLine, cutFront);\n    var chTo = Pos(toLine, oldText.length ? lst(oldText).length - cutEnd : 0);\n    if (newText.length > 1 || newText[0] || cmp(chFrom, chTo)) {\n      replaceRange(cm.doc, newText, chFrom, chTo, \"+input\");\n      return true\n    }\n  };\n\n  ContentEditableInput.prototype.ensurePolled = function () {\n    this.forceCompositionEnd();\n  };\n  ContentEditableInput.prototype.reset = function () {\n    this.forceCompositionEnd();\n  };\n  ContentEditableInput.prototype.forceCompositionEnd = function () {\n    if (!this.composing) { return }\n    clearTimeout(this.readDOMTimeout);\n    this.composing = null;\n    this.updateFromDOM();\n    this.div.blur();\n    this.div.focus();\n  };\n  ContentEditableInput.prototype.readFromDOMSoon = function () {\n      var this$1 = this;\n\n    if (this.readDOMTimeout != null) { return }\n    this.readDOMTimeout = setTimeout(function () {\n      this$1.readDOMTimeout = null;\n      if (this$1.composing) {\n        if (this$1.composing.done) { this$1.composing = null; }\n        else { return }\n      }\n      this$1.updateFromDOM();\n    }, 80);\n  };\n\n  ContentEditableInput.prototype.updateFromDOM = function () {\n      var this$1 = this;\n\n    if (this.cm.isReadOnly() || !this.pollContent())\n      { runInOp(this.cm, function () { return regChange(this$1.cm); }); }\n  };\n\n  ContentEditableInput.prototype.setUneditable = function (node) {\n    node.contentEditable = \"false\";\n  };\n\n  ContentEditableInput.prototype.onKeyPress = function (e) {\n    if (e.charCode == 0 || this.composing) { return }\n    e.preventDefault();\n    if (!this.cm.isReadOnly())\n      { operation(this.cm, applyTextInput)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0); }\n  };\n\n  ContentEditableInput.prototype.readOnlyChanged = function (val) {\n    this.div.contentEditable = String(val != \"nocursor\");\n  };\n\n  ContentEditableInput.prototype.onContextMenu = function () {};\n  ContentEditableInput.prototype.resetPosition = function () {};\n\n  ContentEditableInput.prototype.needsContentAttribute = true;\n\n  function posToDOM(cm, pos) {\n    var view = findViewForLine(cm, pos.line);\n    if (!view || view.hidden) { return null }\n    var line = getLine(cm.doc, pos.line);\n    var info = mapFromLineView(view, line, pos.line);\n\n    var order = getOrder(line, cm.doc.direction), side = \"left\";\n    if (order) {\n      var partPos = getBidiPartAt(order, pos.ch);\n      side = partPos % 2 ? \"right\" : \"left\";\n    }\n    var result = nodeAndOffsetInLineMap(info.map, pos.ch, side);\n    result.offset = result.collapse == \"right\" ? result.end : result.start;\n    return result\n  }\n\n  function isInGutter(node) {\n    for (var scan = node; scan; scan = scan.parentNode)\n      { if (/CodeMirror-gutter-wrapper/.test(scan.className)) { return true } }\n    return false\n  }\n\n  function badPos(pos, bad) { if (bad) { pos.bad = true; } return pos }\n\n  function domTextBetween(cm, from, to, fromLine, toLine) {\n    var text = \"\", closing = false, lineSep = cm.doc.lineSeparator(), extraLinebreak = false;\n    function recognizeMarker(id) { return function (marker) { return marker.id == id; } }\n    function close() {\n      if (closing) {\n        text += lineSep;\n        if (extraLinebreak) { text += lineSep; }\n        closing = extraLinebreak = false;\n      }\n    }\n    function addText(str) {\n      if (str) {\n        close();\n        text += str;\n      }\n    }\n    function walk(node) {\n      if (node.nodeType == 1) {\n        var cmText = node.getAttribute(\"cm-text\");\n        if (cmText) {\n          addText(cmText);\n          return\n        }\n        var markerID = node.getAttribute(\"cm-marker\"), range;\n        if (markerID) {\n          var found = cm.findMarks(Pos(fromLine, 0), Pos(toLine + 1, 0), recognizeMarker(+markerID));\n          if (found.length && (range = found[0].find(0)))\n            { addText(getBetween(cm.doc, range.from, range.to).join(lineSep)); }\n          return\n        }\n        if (node.getAttribute(\"contenteditable\") == \"false\") { return }\n        var isBlock = /^(pre|div|p|li|table|br)$/i.test(node.nodeName);\n        if (!/^br$/i.test(node.nodeName) && node.textContent.length == 0) { return }\n\n        if (isBlock) { close(); }\n        for (var i = 0; i < node.childNodes.length; i++)\n          { walk(node.childNodes[i]); }\n\n        if (/^(pre|p)$/i.test(node.nodeName)) { extraLinebreak = true; }\n        if (isBlock) { closing = true; }\n      } else if (node.nodeType == 3) {\n        addText(node.nodeValue.replace(/\\u200b/g, \"\").replace(/\\u00a0/g, \" \"));\n      }\n    }\n    for (;;) {\n      walk(from);\n      if (from == to) { break }\n      from = from.nextSibling;\n      extraLinebreak = false;\n    }\n    return text\n  }\n\n  function domToPos(cm, node, offset) {\n    var lineNode;\n    if (node == cm.display.lineDiv) {\n      lineNode = cm.display.lineDiv.childNodes[offset];\n      if (!lineNode) { return badPos(cm.clipPos(Pos(cm.display.viewTo - 1)), true) }\n      node = null; offset = 0;\n    } else {\n      for (lineNode = node;; lineNode = lineNode.parentNode) {\n        if (!lineNode || lineNode == cm.display.lineDiv) { return null }\n        if (lineNode.parentNode && lineNode.parentNode == cm.display.lineDiv) { break }\n      }\n    }\n    for (var i = 0; i < cm.display.view.length; i++) {\n      var lineView = cm.display.view[i];\n      if (lineView.node == lineNode)\n        { return locateNodeInLineView(lineView, node, offset) }\n    }\n  }\n\n  function locateNodeInLineView(lineView, node, offset) {\n    var wrapper = lineView.text.firstChild, bad = false;\n    if (!node || !contains(wrapper, node)) { return badPos(Pos(lineNo(lineView.line), 0), true) }\n    if (node == wrapper) {\n      bad = true;\n      node = wrapper.childNodes[offset];\n      offset = 0;\n      if (!node) {\n        var line = lineView.rest ? lst(lineView.rest) : lineView.line;\n        return badPos(Pos(lineNo(line), line.text.length), bad)\n      }\n    }\n\n    var textNode = node.nodeType == 3 ? node : null, topNode = node;\n    if (!textNode && node.childNodes.length == 1 && node.firstChild.nodeType == 3) {\n      textNode = node.firstChild;\n      if (offset) { offset = textNode.nodeValue.length; }\n    }\n    while (topNode.parentNode != wrapper) { topNode = topNode.parentNode; }\n    var measure = lineView.measure, maps = measure.maps;\n\n    function find(textNode, topNode, offset) {\n      for (var i = -1; i < (maps ? maps.length : 0); i++) {\n        var map = i < 0 ? measure.map : maps[i];\n        for (var j = 0; j < map.length; j += 3) {\n          var curNode = map[j + 2];\n          if (curNode == textNode || curNode == topNode) {\n            var line = lineNo(i < 0 ? lineView.line : lineView.rest[i]);\n            var ch = map[j] + offset;\n            if (offset < 0 || curNode != textNode) { ch = map[j + (offset ? 1 : 0)]; }\n            return Pos(line, ch)\n          }\n        }\n      }\n    }\n    var found = find(textNode, topNode, offset);\n    if (found) { return badPos(found, bad) }\n\n    // FIXME this is all really shaky. might handle the few cases it needs to handle, but likely to cause problems\n    for (var after = topNode.nextSibling, dist = textNode ? textNode.nodeValue.length - offset : 0; after; after = after.nextSibling) {\n      found = find(after, after.firstChild, 0);\n      if (found)\n        { return badPos(Pos(found.line, found.ch - dist), bad) }\n      else\n        { dist += after.textContent.length; }\n    }\n    for (var before = topNode.previousSibling, dist$1 = offset; before; before = before.previousSibling) {\n      found = find(before, before.firstChild, -1);\n      if (found)\n        { return badPos(Pos(found.line, found.ch + dist$1), bad) }\n      else\n        { dist$1 += before.textContent.length; }\n    }\n  }\n\n  // TEXTAREA INPUT STYLE\n\n  var TextareaInput = function(cm) {\n    this.cm = cm;\n    // See input.poll and input.reset\n    this.prevInput = \"\";\n\n    // Flag that indicates whether we expect input to appear real soon\n    // now (after some event like 'keypress' or 'input') and are\n    // polling intensively.\n    this.pollingFast = false;\n    // Self-resetting timeout for the poller\n    this.polling = new Delayed();\n    // Used to work around IE issue with selection being forgotten when focus moves away from textarea\n    this.hasSelection = false;\n    this.composing = null;\n    this.resetting = false;\n  };\n\n  TextareaInput.prototype.init = function (display) {\n      var this$1 = this;\n\n    var input = this, cm = this.cm;\n    this.createField(display);\n    var te = this.textarea;\n\n    display.wrapper.insertBefore(this.wrapper, display.wrapper.firstChild);\n\n    // Needed to hide big blue blinking cursor on Mobile Safari (doesn't seem to work in iOS 8 anymore)\n    if (ios) { te.style.width = \"0px\"; }\n\n    on(te, \"input\", function () {\n      if (ie && ie_version >= 9 && this$1.hasSelection) { this$1.hasSelection = null; }\n      input.poll();\n    });\n\n    on(te, \"paste\", function (e) {\n      if (signalDOMEvent(cm, e) || handlePaste(e, cm)) { return }\n\n      cm.state.pasteIncoming = +new Date;\n      input.fastPoll();\n    });\n\n    function prepareCopyCut(e) {\n      if (signalDOMEvent(cm, e)) { return }\n      if (cm.somethingSelected()) {\n        setLastCopied({lineWise: false, text: cm.getSelections()});\n      } else if (!cm.options.lineWiseCopyCut) {\n        return\n      } else {\n        var ranges = copyableRanges(cm);\n        setLastCopied({lineWise: true, text: ranges.text});\n        if (e.type == \"cut\") {\n          cm.setSelections(ranges.ranges, null, sel_dontScroll);\n        } else {\n          input.prevInput = \"\";\n          te.value = ranges.text.join(\"\\n\");\n          selectInput(te);\n        }\n      }\n      if (e.type == \"cut\") { cm.state.cutIncoming = +new Date; }\n    }\n    on(te, \"cut\", prepareCopyCut);\n    on(te, \"copy\", prepareCopyCut);\n\n    on(display.scroller, \"paste\", function (e) {\n      if (eventInWidget(display, e) || signalDOMEvent(cm, e)) { return }\n      if (!te.dispatchEvent) {\n        cm.state.pasteIncoming = +new Date;\n        input.focus();\n        return\n      }\n\n      // Pass the `paste` event to the textarea so it's handled by its event listener.\n      var event = new Event(\"paste\");\n      event.clipboardData = e.clipboardData;\n      te.dispatchEvent(event);\n    });\n\n    // Prevent normal selection in the editor (we handle our own)\n    on(display.lineSpace, \"selectstart\", function (e) {\n      if (!eventInWidget(display, e)) { e_preventDefault(e); }\n    });\n\n    on(te, \"compositionstart\", function () {\n      var start = cm.getCursor(\"from\");\n      if (input.composing) { input.composing.range.clear(); }\n      input.composing = {\n        start: start,\n        range: cm.markText(start, cm.getCursor(\"to\"), {className: \"CodeMirror-composing\"})\n      };\n    });\n    on(te, \"compositionend\", function () {\n      if (input.composing) {\n        input.poll();\n        input.composing.range.clear();\n        input.composing = null;\n      }\n    });\n  };\n\n  TextareaInput.prototype.createField = function (_display) {\n    // Wraps and hides input textarea\n    this.wrapper = hiddenTextarea();\n    // The semihidden textarea that is focused when the editor is\n    // focused, and receives input.\n    this.textarea = this.wrapper.firstChild;\n    var opts = this.cm.options;\n    disableBrowserMagic(this.textarea, opts.spellcheck, opts.autocorrect, opts.autocapitalize);\n  };\n\n  TextareaInput.prototype.screenReaderLabelChanged = function (label) {\n    // Label for screenreaders, accessibility\n    if(label) {\n      this.textarea.setAttribute('aria-label', label);\n    } else {\n      this.textarea.removeAttribute('aria-label');\n    }\n  };\n\n  TextareaInput.prototype.prepareSelection = function () {\n    // Redraw the selection and/or cursor\n    var cm = this.cm, display = cm.display, doc = cm.doc;\n    var result = prepareSelection(cm);\n\n    // Move the hidden textarea near the cursor to prevent scrolling artifacts\n    if (cm.options.moveInputWithCursor) {\n      var headPos = cursorCoords(cm, doc.sel.primary().head, \"div\");\n      var wrapOff = display.wrapper.getBoundingClientRect(), lineOff = display.lineDiv.getBoundingClientRect();\n      result.teTop = Math.max(0, Math.min(display.wrapper.clientHeight - 10,\n                                          headPos.top + lineOff.top - wrapOff.top));\n      result.teLeft = Math.max(0, Math.min(display.wrapper.clientWidth - 10,\n                                           headPos.left + lineOff.left - wrapOff.left));\n    }\n\n    return result\n  };\n\n  TextareaInput.prototype.showSelection = function (drawn) {\n    var cm = this.cm, display = cm.display;\n    removeChildrenAndAdd(display.cursorDiv, drawn.cursors);\n    removeChildrenAndAdd(display.selectionDiv, drawn.selection);\n    if (drawn.teTop != null) {\n      this.wrapper.style.top = drawn.teTop + \"px\";\n      this.wrapper.style.left = drawn.teLeft + \"px\";\n    }\n  };\n\n  // Reset the input to correspond to the selection (or to be empty,\n  // when not typing and nothing is selected)\n  TextareaInput.prototype.reset = function (typing) {\n    if (this.contextMenuPending || this.composing && typing) { return }\n    var cm = this.cm;\n    this.resetting = true;\n    if (cm.somethingSelected()) {\n      this.prevInput = \"\";\n      var content = cm.getSelection();\n      this.textarea.value = content;\n      if (cm.state.focused) { selectInput(this.textarea); }\n      if (ie && ie_version >= 9) { this.hasSelection = content; }\n    } else if (!typing) {\n      this.prevInput = this.textarea.value = \"\";\n      if (ie && ie_version >= 9) { this.hasSelection = null; }\n    }\n    this.resetting = false;\n  };\n\n  TextareaInput.prototype.getField = function () { return this.textarea };\n\n  TextareaInput.prototype.supportsTouch = function () { return false };\n\n  TextareaInput.prototype.focus = function () {\n    if (this.cm.options.readOnly != \"nocursor\" && (!mobile || activeElt(this.textarea.ownerDocument) != this.textarea)) {\n      try { this.textarea.focus(); }\n      catch (e) {} // IE8 will throw if the textarea is display: none or not in DOM\n    }\n  };\n\n  TextareaInput.prototype.blur = function () { this.textarea.blur(); };\n\n  TextareaInput.prototype.resetPosition = function () {\n    this.wrapper.style.top = this.wrapper.style.left = 0;\n  };\n\n  TextareaInput.prototype.receivedFocus = function () { this.slowPoll(); };\n\n  // Poll for input changes, using the normal rate of polling. This\n  // runs as long as the editor is focused.\n  TextareaInput.prototype.slowPoll = function () {\n      var this$1 = this;\n\n    if (this.pollingFast) { return }\n    this.polling.set(this.cm.options.pollInterval, function () {\n      this$1.poll();\n      if (this$1.cm.state.focused) { this$1.slowPoll(); }\n    });\n  };\n\n  // When an event has just come in that is likely to add or change\n  // something in the input textarea, we poll faster, to ensure that\n  // the change appears on the screen quickly.\n  TextareaInput.prototype.fastPoll = function () {\n    var missed = false, input = this;\n    input.pollingFast = true;\n    function p() {\n      var changed = input.poll();\n      if (!changed && !missed) {missed = true; input.polling.set(60, p);}\n      else {input.pollingFast = false; input.slowPoll();}\n    }\n    input.polling.set(20, p);\n  };\n\n  // Read input from the textarea, and update the document to match.\n  // When something is selected, it is present in the textarea, and\n  // selected (unless it is huge, in which case a placeholder is\n  // used). When nothing is selected, the cursor sits after previously\n  // seen text (can be empty), which is stored in prevInput (we must\n  // not reset the textarea when typing, because that breaks IME).\n  TextareaInput.prototype.poll = function () {\n      var this$1 = this;\n\n    var cm = this.cm, input = this.textarea, prevInput = this.prevInput;\n    // Since this is called a *lot*, try to bail out as cheaply as\n    // possible when it is clear that nothing happened. hasSelection\n    // will be the case when there is a lot of text in the textarea,\n    // in which case reading its value would be expensive.\n    if (this.contextMenuPending || this.resetting || !cm.state.focused ||\n        (hasSelection(input) && !prevInput && !this.composing) ||\n        cm.isReadOnly() || cm.options.disableInput || cm.state.keySeq)\n      { return false }\n\n    var text = input.value;\n    // If nothing changed, bail.\n    if (text == prevInput && !cm.somethingSelected()) { return false }\n    // Work around nonsensical selection resetting in IE9/10, and\n    // inexplicable appearance of private area unicode characters on\n    // some key combos in Mac (#2689).\n    if (ie && ie_version >= 9 && this.hasSelection === text ||\n        mac && /[\\uf700-\\uf7ff]/.test(text)) {\n      cm.display.input.reset();\n      return false\n    }\n\n    if (cm.doc.sel == cm.display.selForContextMenu) {\n      var first = text.charCodeAt(0);\n      if (first == 0x200b && !prevInput) { prevInput = \"\\u200b\"; }\n      if (first == 0x21da) { this.reset(); return this.cm.execCommand(\"undo\") }\n    }\n    // Find the part of the input that is actually new\n    var same = 0, l = Math.min(prevInput.length, text.length);\n    while (same < l && prevInput.charCodeAt(same) == text.charCodeAt(same)) { ++same; }\n\n    runInOp(cm, function () {\n      applyTextInput(cm, text.slice(same), prevInput.length - same,\n                     null, this$1.composing ? \"*compose\" : null);\n\n      // Don't leave long text in the textarea, since it makes further polling slow\n      if (text.length > 1000 || text.indexOf(\"\\n\") > -1) { input.value = this$1.prevInput = \"\"; }\n      else { this$1.prevInput = text; }\n\n      if (this$1.composing) {\n        this$1.composing.range.clear();\n        this$1.composing.range = cm.markText(this$1.composing.start, cm.getCursor(\"to\"),\n                                           {className: \"CodeMirror-composing\"});\n      }\n    });\n    return true\n  };\n\n  TextareaInput.prototype.ensurePolled = function () {\n    if (this.pollingFast && this.poll()) { this.pollingFast = false; }\n  };\n\n  TextareaInput.prototype.onKeyPress = function () {\n    if (ie && ie_version >= 9) { this.hasSelection = null; }\n    this.fastPoll();\n  };\n\n  TextareaInput.prototype.onContextMenu = function (e) {\n    var input = this, cm = input.cm, display = cm.display, te = input.textarea;\n    if (input.contextMenuPending) { input.contextMenuPending(); }\n    var pos = posFromMouse(cm, e), scrollPos = display.scroller.scrollTop;\n    if (!pos || presto) { return } // Opera is difficult.\n\n    // Reset the current text selection only if the click is done outside of the selection\n    // and 'resetSelectionOnContextMenu' option is true.\n    var reset = cm.options.resetSelectionOnContextMenu;\n    if (reset && cm.doc.sel.contains(pos) == -1)\n      { operation(cm, setSelection)(cm.doc, simpleSelection(pos), sel_dontScroll); }\n\n    var oldCSS = te.style.cssText, oldWrapperCSS = input.wrapper.style.cssText;\n    var wrapperBox = input.wrapper.offsetParent.getBoundingClientRect();\n    input.wrapper.style.cssText = \"position: static\";\n    te.style.cssText = \"position: absolute; width: 30px; height: 30px;\\n      top: \" + (e.clientY - wrapperBox.top - 5) + \"px; left: \" + (e.clientX - wrapperBox.left - 5) + \"px;\\n      z-index: 1000; background: \" + (ie ? \"rgba(255, 255, 255, .05)\" : \"transparent\") + \";\\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);\";\n    var oldScrollY;\n    if (webkit) { oldScrollY = te.ownerDocument.defaultView.scrollY; } // Work around Chrome issue (#2712)\n    display.input.focus();\n    if (webkit) { te.ownerDocument.defaultView.scrollTo(null, oldScrollY); }\n    display.input.reset();\n    // Adds \"Select all\" to context menu in FF\n    if (!cm.somethingSelected()) { te.value = input.prevInput = \" \"; }\n    input.contextMenuPending = rehide;\n    display.selForContextMenu = cm.doc.sel;\n    clearTimeout(display.detectingSelectAll);\n\n    // Select-all will be greyed out if there's nothing to select, so\n    // this adds a zero-width space so that we can later check whether\n    // it got selected.\n    function prepareSelectAllHack() {\n      if (te.selectionStart != null) {\n        var selected = cm.somethingSelected();\n        var extval = \"\\u200b\" + (selected ? te.value : \"\");\n        te.value = \"\\u21da\"; // Used to catch context-menu undo\n        te.value = extval;\n        input.prevInput = selected ? \"\" : \"\\u200b\";\n        te.selectionStart = 1; te.selectionEnd = extval.length;\n        // Re-set this, in case some other handler touched the\n        // selection in the meantime.\n        display.selForContextMenu = cm.doc.sel;\n      }\n    }\n    function rehide() {\n      if (input.contextMenuPending != rehide) { return }\n      input.contextMenuPending = false;\n      input.wrapper.style.cssText = oldWrapperCSS;\n      te.style.cssText = oldCSS;\n      if (ie && ie_version < 9) { display.scrollbars.setScrollTop(display.scroller.scrollTop = scrollPos); }\n\n      // Try to detect the user choosing select-all\n      if (te.selectionStart != null) {\n        if (!ie || (ie && ie_version < 9)) { prepareSelectAllHack(); }\n        var i = 0, poll = function () {\n          if (display.selForContextMenu == cm.doc.sel && te.selectionStart == 0 &&\n              te.selectionEnd > 0 && input.prevInput == \"\\u200b\") {\n            operation(cm, selectAll)(cm);\n          } else if (i++ < 10) {\n            display.detectingSelectAll = setTimeout(poll, 500);\n          } else {\n            display.selForContextMenu = null;\n            display.input.reset();\n          }\n        };\n        display.detectingSelectAll = setTimeout(poll, 200);\n      }\n    }\n\n    if (ie && ie_version >= 9) { prepareSelectAllHack(); }\n    if (captureRightClick) {\n      e_stop(e);\n      var mouseup = function () {\n        off(window, \"mouseup\", mouseup);\n        setTimeout(rehide, 20);\n      };\n      on(window, \"mouseup\", mouseup);\n    } else {\n      setTimeout(rehide, 50);\n    }\n  };\n\n  TextareaInput.prototype.readOnlyChanged = function (val) {\n    if (!val) { this.reset(); }\n    this.textarea.disabled = val == \"nocursor\";\n    this.textarea.readOnly = !!val;\n  };\n\n  TextareaInput.prototype.setUneditable = function () {};\n\n  TextareaInput.prototype.needsContentAttribute = false;\n\n  function fromTextArea(textarea, options) {\n    options = options ? copyObj(options) : {};\n    options.value = textarea.value;\n    if (!options.tabindex && textarea.tabIndex)\n      { options.tabindex = textarea.tabIndex; }\n    if (!options.placeholder && textarea.placeholder)\n      { options.placeholder = textarea.placeholder; }\n    // Set autofocus to true if this textarea is focused, or if it has\n    // autofocus and no other element is focused.\n    if (options.autofocus == null) {\n      var hasFocus = activeElt(textarea.ownerDocument);\n      options.autofocus = hasFocus == textarea ||\n        textarea.getAttribute(\"autofocus\") != null && hasFocus == document.body;\n    }\n\n    function save() {textarea.value = cm.getValue();}\n\n    var realSubmit;\n    if (textarea.form) {\n      on(textarea.form, \"submit\", save);\n      // Deplorable hack to make the submit method do the right thing.\n      if (!options.leaveSubmitMethodAlone) {\n        var form = textarea.form;\n        realSubmit = form.submit;\n        try {\n          var wrappedSubmit = form.submit = function () {\n            save();\n            form.submit = realSubmit;\n            form.submit();\n            form.submit = wrappedSubmit;\n          };\n        } catch(e) {}\n      }\n    }\n\n    options.finishInit = function (cm) {\n      cm.save = save;\n      cm.getTextArea = function () { return textarea; };\n      cm.toTextArea = function () {\n        cm.toTextArea = isNaN; // Prevent this from being ran twice\n        save();\n        textarea.parentNode.removeChild(cm.getWrapperElement());\n        textarea.style.display = \"\";\n        if (textarea.form) {\n          off(textarea.form, \"submit\", save);\n          if (!options.leaveSubmitMethodAlone && typeof textarea.form.submit == \"function\")\n            { textarea.form.submit = realSubmit; }\n        }\n      };\n    };\n\n    textarea.style.display = \"none\";\n    var cm = CodeMirror(function (node) { return textarea.parentNode.insertBefore(node, textarea.nextSibling); },\n      options);\n    return cm\n  }\n\n  function addLegacyProps(CodeMirror) {\n    CodeMirror.off = off;\n    CodeMirror.on = on;\n    CodeMirror.wheelEventPixels = wheelEventPixels;\n    CodeMirror.Doc = Doc;\n    CodeMirror.splitLines = splitLinesAuto;\n    CodeMirror.countColumn = countColumn;\n    CodeMirror.findColumn = findColumn;\n    CodeMirror.isWordChar = isWordCharBasic;\n    CodeMirror.Pass = Pass;\n    CodeMirror.signal = signal;\n    CodeMirror.Line = Line;\n    CodeMirror.changeEnd = changeEnd;\n    CodeMirror.scrollbarModel = scrollbarModel;\n    CodeMirror.Pos = Pos;\n    CodeMirror.cmpPos = cmp;\n    CodeMirror.modes = modes;\n    CodeMirror.mimeModes = mimeModes;\n    CodeMirror.resolveMode = resolveMode;\n    CodeMirror.getMode = getMode;\n    CodeMirror.modeExtensions = modeExtensions;\n    CodeMirror.extendMode = extendMode;\n    CodeMirror.copyState = copyState;\n    CodeMirror.startState = startState;\n    CodeMirror.innerMode = innerMode;\n    CodeMirror.commands = commands;\n    CodeMirror.keyMap = keyMap;\n    CodeMirror.keyName = keyName;\n    CodeMirror.isModifierKey = isModifierKey;\n    CodeMirror.lookupKey = lookupKey;\n    CodeMirror.normalizeKeyMap = normalizeKeyMap;\n    CodeMirror.StringStream = StringStream;\n    CodeMirror.SharedTextMarker = SharedTextMarker;\n    CodeMirror.TextMarker = TextMarker;\n    CodeMirror.LineWidget = LineWidget;\n    CodeMirror.e_preventDefault = e_preventDefault;\n    CodeMirror.e_stopPropagation = e_stopPropagation;\n    CodeMirror.e_stop = e_stop;\n    CodeMirror.addClass = addClass;\n    CodeMirror.contains = contains;\n    CodeMirror.rmClass = rmClass;\n    CodeMirror.keyNames = keyNames;\n  }\n\n  // EDITOR CONSTRUCTOR\n\n  defineOptions(CodeMirror);\n\n  addEditorMethods(CodeMirror);\n\n  // Set up methods on CodeMirror's prototype to redirect to the editor's document.\n  var dontDelegate = \"iter insert remove copy getEditor constructor\".split(\" \");\n  for (var prop in Doc.prototype) { if (Doc.prototype.hasOwnProperty(prop) && indexOf(dontDelegate, prop) < 0)\n    { CodeMirror.prototype[prop] = (function(method) {\n      return function() {return method.apply(this.doc, arguments)}\n    })(Doc.prototype[prop]); } }\n\n  eventMixin(Doc);\n  CodeMirror.inputStyles = {\"textarea\": TextareaInput, \"contenteditable\": ContentEditableInput};\n\n  // Extra arguments are stored as the mode's dependencies, which is\n  // used by (legacy) mechanisms like loadmode.js to automatically\n  // load a mode. (Preferred mechanism is the require/define calls.)\n  CodeMirror.defineMode = function(name/*, mode, */) {\n    if (!CodeMirror.defaults.mode && name != \"null\") { CodeMirror.defaults.mode = name; }\n    defineMode.apply(this, arguments);\n  };\n\n  CodeMirror.defineMIME = defineMIME;\n\n  // Minimal default mode.\n  CodeMirror.defineMode(\"null\", function () { return ({token: function (stream) { return stream.skipToEnd(); }}); });\n  CodeMirror.defineMIME(\"text/plain\", \"null\");\n\n  // EXTENSIONS\n\n  CodeMirror.defineExtension = function (name, func) {\n    CodeMirror.prototype[name] = func;\n  };\n  CodeMirror.defineDocExtension = function (name, func) {\n    Doc.prototype[name] = func;\n  };\n\n  CodeMirror.fromTextArea = fromTextArea;\n\n  addLegacyProps(CodeMirror);\n\n  CodeMirror.version = \"5.65.12\";\n\n  return CodeMirror;\n\n})));\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-3-1!../../../postcss-loader/src/index.js??ref--7-oneOf-3-2!../../../postcss-loader/src/index.js??ref--7-oneOf-3-3!./foldgutter.css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"6f3ab9d8\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","(function(mod) {\n    if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n      mod(require(\"../lib/codemirror\"), require(\"../addon/search/searchcursor\"), require(\"../addon/dialog/dialog\"), require(\"../addon/edit/matchbrackets.js\"));\n    else if (typeof define == \"function\" && define.amd) // AMD\n      define([\"../lib/codemirror\", \"../addon/search/searchcursor\", \"../addon/dialog/dialog\", \"../addon/edit/matchbrackets\"], mod);\n    else // Plain browser env\n      mod(CodeMirror);\n  })(function(CodeMirror) {\n    'use strict';\n  // CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n\n/**\n * Supported keybindings:\n *   Too many to list. Refer to defaultKeymap below.\n *\n * Supported Ex commands:\n *   Refer to defaultExCommandMap below.\n *\n * Registers: unnamed, -, ., :, /, _, a-z, A-Z, 0-9\n *   (Does not respect the special case for number registers when delete\n *    operator is made with these commands: %, (, ),  , /, ?, n, N, {, } )\n *   TODO: Implement the remaining registers.\n *\n * Marks: a-z, A-Z, and 0-9\n *   TODO: Implement the remaining special marks. They have more complex\n *       behavior.\n *\n * Events:\n *  'vim-mode-change' - raised on the editor anytime the current mode changes,\n *                      Event object: {mode: \"visual\", subMode: \"linewise\"}\n *\n * Code structure:\n *  1. Default keymap\n *  2. Variable declarations and short basic helpers\n *  3. Instance (External API) implementation\n *  4. Internal state tracking objects (input state, counter) implementation\n *     and instantiation\n *  5. Key handler (the main command dispatcher) implementation\n *  6. Motion, operator, and action implementations\n *  7. Helper functions for the key handler, motions, operators, and actions\n *  8. Set up Vim to work as a keymap for CodeMirror.\n *  9. Ex command implementations.\n */\n\nfunction initVim$1(CodeMirror) {\n\n  var Pos = CodeMirror.Pos;\n\n  function transformCursor(cm, range) {\n    var vim = cm.state.vim;\n    if (!vim || vim.insertMode) return range.head;\n    var head = vim.sel.head;\n    if (!head)  return range.head;\n\n    if (vim.visualBlock) {\n      if (range.head.line != head.line) {\n        return;\n      }\n    }\n    if (range.from() == range.anchor && !range.empty()) {\n      if (range.head.line == head.line && range.head.ch != head.ch)\n        return new Pos(range.head.line, range.head.ch - 1);\n    }\n\n    return range.head;\n  }\n\n  var defaultKeymap = [\n    // Key to key mapping. This goes first to make it possible to override\n    // existing mappings.\n    { keys: '<Left>', type: 'keyToKey', toKeys: 'h' },\n    { keys: '<Right>', type: 'keyToKey', toKeys: 'l' },\n    { keys: '<Up>', type: 'keyToKey', toKeys: 'k' },\n    { keys: '<Down>', type: 'keyToKey', toKeys: 'j' },\n    { keys: 'g<Up>', type: 'keyToKey', toKeys: 'gk' },\n    { keys: 'g<Down>', type: 'keyToKey', toKeys: 'gj' },\n    { keys: '<Space>', type: 'keyToKey', toKeys: 'l' },\n    { keys: '<BS>', type: 'keyToKey', toKeys: 'h', context: 'normal'},\n    { keys: '<Del>', type: 'keyToKey', toKeys: 'x', context: 'normal'},\n    { keys: '<C-Space>', type: 'keyToKey', toKeys: 'W' },\n    { keys: '<C-BS>', type: 'keyToKey', toKeys: 'B', context: 'normal' },\n    { keys: '<S-Space>', type: 'keyToKey', toKeys: 'w' },\n    { keys: '<S-BS>', type: 'keyToKey', toKeys: 'b', context: 'normal' },\n    { keys: '<C-n>', type: 'keyToKey', toKeys: 'j' },\n    { keys: '<C-p>', type: 'keyToKey', toKeys: 'k' },\n    { keys: '<C-[>', type: 'keyToKey', toKeys: '<Esc>' },\n    { keys: '<C-c>', type: 'keyToKey', toKeys: '<Esc>' },\n    { keys: '<C-[>', type: 'keyToKey', toKeys: '<Esc>', context: 'insert' },\n    { keys: '<C-c>', type: 'keyToKey', toKeys: '<Esc>', context: 'insert' },\n    { keys: '<C-Esc>', type: 'keyToKey', toKeys: '<Esc>' }, // ipad keyboard sends C-Esc instead of C-[\n    { keys: '<C-Esc>', type: 'keyToKey', toKeys: '<Esc>', context: 'insert' },\n    { keys: 's', type: 'keyToKey', toKeys: 'cl', context: 'normal' },\n    { keys: 's', type: 'keyToKey', toKeys: 'c', context: 'visual'},\n    { keys: 'S', type: 'keyToKey', toKeys: 'cc', context: 'normal' },\n    { keys: 'S', type: 'keyToKey', toKeys: 'VdO', context: 'visual' },\n    { keys: '<Home>', type: 'keyToKey', toKeys: '0' },\n    { keys: '<End>', type: 'keyToKey', toKeys: '$' },\n    { keys: '<PageUp>', type: 'keyToKey', toKeys: '<C-b>' },\n    { keys: '<PageDown>', type: 'keyToKey', toKeys: '<C-f>' },\n    { keys: '<CR>', type: 'keyToKey', toKeys: 'j^', context: 'normal' },\n    { keys: '<Ins>', type: 'keyToKey', toKeys: 'i', context: 'normal'},\n    { keys: '<Ins>', type: 'action', action: 'toggleOverwrite', context: 'insert' },\n    // Motions\n    { keys: 'H', type: 'motion', motion: 'moveToTopLine', motionArgs: { linewise: true, toJumplist: true }},\n    { keys: 'M', type: 'motion', motion: 'moveToMiddleLine', motionArgs: { linewise: true, toJumplist: true }},\n    { keys: 'L', type: 'motion', motion: 'moveToBottomLine', motionArgs: { linewise: true, toJumplist: true }},\n    { keys: 'h', type: 'motion', motion: 'moveByCharacters', motionArgs: { forward: false }},\n    { keys: 'l', type: 'motion', motion: 'moveByCharacters', motionArgs: { forward: true }},\n    { keys: 'j', type: 'motion', motion: 'moveByLines', motionArgs: { forward: true, linewise: true }},\n    { keys: 'k', type: 'motion', motion: 'moveByLines', motionArgs: { forward: false, linewise: true }},\n    { keys: 'gj', type: 'motion', motion: 'moveByDisplayLines', motionArgs: { forward: true }},\n    { keys: 'gk', type: 'motion', motion: 'moveByDisplayLines', motionArgs: { forward: false }},\n    { keys: 'w', type: 'motion', motion: 'moveByWords', motionArgs: { forward: true, wordEnd: false }},\n    { keys: 'W', type: 'motion', motion: 'moveByWords', motionArgs: { forward: true, wordEnd: false, bigWord: true }},\n    { keys: 'e', type: 'motion', motion: 'moveByWords', motionArgs: { forward: true, wordEnd: true, inclusive: true }},\n    { keys: 'E', type: 'motion', motion: 'moveByWords', motionArgs: { forward: true, wordEnd: true, bigWord: true, inclusive: true }},\n    { keys: 'b', type: 'motion', motion: 'moveByWords', motionArgs: { forward: false, wordEnd: false }},\n    { keys: 'B', type: 'motion', motion: 'moveByWords', motionArgs: { forward: false, wordEnd: false, bigWord: true }},\n    { keys: 'ge', type: 'motion', motion: 'moveByWords', motionArgs: { forward: false, wordEnd: true, inclusive: true }},\n    { keys: 'gE', type: 'motion', motion: 'moveByWords', motionArgs: { forward: false, wordEnd: true, bigWord: true, inclusive: true }},\n    { keys: '{', type: 'motion', motion: 'moveByParagraph', motionArgs: { forward: false, toJumplist: true }},\n    { keys: '}', type: 'motion', motion: 'moveByParagraph', motionArgs: { forward: true, toJumplist: true }},\n    { keys: '(', type: 'motion', motion: 'moveBySentence', motionArgs: { forward: false }},\n    { keys: ')', type: 'motion', motion: 'moveBySentence', motionArgs: { forward: true }},\n    { keys: '<C-f>', type: 'motion', motion: 'moveByPage', motionArgs: { forward: true }},\n    { keys: '<C-b>', type: 'motion', motion: 'moveByPage', motionArgs: { forward: false }},\n    { keys: '<C-d>', type: 'motion', motion: 'moveByScroll', motionArgs: { forward: true, explicitRepeat: true }},\n    { keys: '<C-u>', type: 'motion', motion: 'moveByScroll', motionArgs: { forward: false, explicitRepeat: true }},\n    { keys: 'gg', type: 'motion', motion: 'moveToLineOrEdgeOfDocument', motionArgs: { forward: false, explicitRepeat: true, linewise: true, toJumplist: true }},\n    { keys: 'G', type: 'motion', motion: 'moveToLineOrEdgeOfDocument', motionArgs: { forward: true, explicitRepeat: true, linewise: true, toJumplist: true }},\n    {keys: \"g$\", type: \"motion\", motion: \"moveToEndOfDisplayLine\"},\n    {keys: \"g^\", type: \"motion\", motion: \"moveToStartOfDisplayLine\"},\n    {keys: \"g0\", type: \"motion\", motion: \"moveToStartOfDisplayLine\"},\n    { keys: '0', type: 'motion', motion: 'moveToStartOfLine' },\n    { keys: '^', type: 'motion', motion: 'moveToFirstNonWhiteSpaceCharacter' },\n    { keys: '+', type: 'motion', motion: 'moveByLines', motionArgs: { forward: true, toFirstChar:true }},\n    { keys: '-', type: 'motion', motion: 'moveByLines', motionArgs: { forward: false, toFirstChar:true }},\n    { keys: '_', type: 'motion', motion: 'moveByLines', motionArgs: { forward: true, toFirstChar:true, repeatOffset:-1 }},\n    { keys: '$', type: 'motion', motion: 'moveToEol', motionArgs: { inclusive: true }},\n    { keys: '%', type: 'motion', motion: 'moveToMatchedSymbol', motionArgs: { inclusive: true, toJumplist: true }},\n    { keys: 'f<character>', type: 'motion', motion: 'moveToCharacter', motionArgs: { forward: true , inclusive: true }},\n    { keys: 'F<character>', type: 'motion', motion: 'moveToCharacter', motionArgs: { forward: false }},\n    { keys: 't<character>', type: 'motion', motion: 'moveTillCharacter', motionArgs: { forward: true, inclusive: true }},\n    { keys: 'T<character>', type: 'motion', motion: 'moveTillCharacter', motionArgs: { forward: false }},\n    { keys: ';', type: 'motion', motion: 'repeatLastCharacterSearch', motionArgs: { forward: true }},\n    { keys: ',', type: 'motion', motion: 'repeatLastCharacterSearch', motionArgs: { forward: false }},\n    { keys: '\\'<character>', type: 'motion', motion: 'goToMark', motionArgs: {toJumplist: true, linewise: true}},\n    { keys: '`<character>', type: 'motion', motion: 'goToMark', motionArgs: {toJumplist: true}},\n    { keys: ']`', type: 'motion', motion: 'jumpToMark', motionArgs: { forward: true } },\n    { keys: '[`', type: 'motion', motion: 'jumpToMark', motionArgs: { forward: false } },\n    { keys: ']\\'', type: 'motion', motion: 'jumpToMark', motionArgs: { forward: true, linewise: true } },\n    { keys: '[\\'', type: 'motion', motion: 'jumpToMark', motionArgs: { forward: false, linewise: true } },\n    // the next two aren't motions but must come before more general motion declarations\n    { keys: ']p', type: 'action', action: 'paste', isEdit: true, actionArgs: { after: true, isEdit: true, matchIndent: true}},\n    { keys: '[p', type: 'action', action: 'paste', isEdit: true, actionArgs: { after: false, isEdit: true, matchIndent: true}},\n    { keys: ']<character>', type: 'motion', motion: 'moveToSymbol', motionArgs: { forward: true, toJumplist: true}},\n    { keys: '[<character>', type: 'motion', motion: 'moveToSymbol', motionArgs: { forward: false, toJumplist: true}},\n    { keys: '|', type: 'motion', motion: 'moveToColumn'},\n    { keys: 'o', type: 'motion', motion: 'moveToOtherHighlightedEnd', context:'visual'},\n    { keys: 'O', type: 'motion', motion: 'moveToOtherHighlightedEnd', motionArgs: {sameLine: true}, context:'visual'},\n    // Operators\n    { keys: 'd', type: 'operator', operator: 'delete' },\n    { keys: 'y', type: 'operator', operator: 'yank' },\n    { keys: 'c', type: 'operator', operator: 'change' },\n    { keys: '=', type: 'operator', operator: 'indentAuto' },\n    { keys: '>', type: 'operator', operator: 'indent', operatorArgs: { indentRight: true }},\n    { keys: '<', type: 'operator', operator: 'indent', operatorArgs: { indentRight: false }},\n    { keys: 'g~', type: 'operator', operator: 'changeCase' },\n    { keys: 'gu', type: 'operator', operator: 'changeCase', operatorArgs: {toLower: true}, isEdit: true },\n    { keys: 'gU', type: 'operator', operator: 'changeCase', operatorArgs: {toLower: false}, isEdit: true },\n    { keys: 'n', type: 'motion', motion: 'findNext', motionArgs: { forward: true, toJumplist: true }},\n    { keys: 'N', type: 'motion', motion: 'findNext', motionArgs: { forward: false, toJumplist: true }},\n    { keys: 'gn', type: 'motion', motion: 'findAndSelectNextInclusive', motionArgs: { forward: true }},\n    { keys: 'gN', type: 'motion', motion: 'findAndSelectNextInclusive', motionArgs: { forward: false }},\n    // Operator-Motion dual commands\n    { keys: 'x', type: 'operatorMotion', operator: 'delete', motion: 'moveByCharacters', motionArgs: { forward: true }, operatorMotionArgs: { visualLine: false }},\n    { keys: 'X', type: 'operatorMotion', operator: 'delete', motion: 'moveByCharacters', motionArgs: { forward: false }, operatorMotionArgs: { visualLine: true }},\n    { keys: 'D', type: 'operatorMotion', operator: 'delete', motion: 'moveToEol', motionArgs: { inclusive: true }, context: 'normal'},\n    { keys: 'D', type: 'operator', operator: 'delete', operatorArgs: { linewise: true }, context: 'visual'},\n    { keys: 'Y', type: 'operatorMotion', operator: 'yank', motion: 'expandToLine', motionArgs: { linewise: true }, context: 'normal'},\n    { keys: 'Y', type: 'operator', operator: 'yank', operatorArgs: { linewise: true }, context: 'visual'},\n    { keys: 'C', type: 'operatorMotion', operator: 'change', motion: 'moveToEol', motionArgs: { inclusive: true }, context: 'normal'},\n    { keys: 'C', type: 'operator', operator: 'change', operatorArgs: { linewise: true }, context: 'visual'},\n    { keys: '~', type: 'operatorMotion', operator: 'changeCase', motion: 'moveByCharacters', motionArgs: { forward: true }, operatorArgs: { shouldMoveCursor: true }, context: 'normal'},\n    { keys: '~', type: 'operator', operator: 'changeCase', context: 'visual'},\n    { keys: '<C-u>', type: 'operatorMotion', operator: 'delete', motion: 'moveToStartOfLine', context: 'insert' },\n    { keys: '<C-w>', type: 'operatorMotion', operator: 'delete', motion: 'moveByWords', motionArgs: { forward: false, wordEnd: false }, context: 'insert' },\n    //ignore C-w in normal mode\n    { keys: '<C-w>', type: 'idle', context: 'normal' },\n    // Actions\n    { keys: '<C-i>', type: 'action', action: 'jumpListWalk', actionArgs: { forward: true }},\n    { keys: '<C-o>', type: 'action', action: 'jumpListWalk', actionArgs: { forward: false }},\n    { keys: '<C-e>', type: 'action', action: 'scroll', actionArgs: { forward: true, linewise: true }},\n    { keys: '<C-y>', type: 'action', action: 'scroll', actionArgs: { forward: false, linewise: true }},\n    { keys: 'a', type: 'action', action: 'enterInsertMode', isEdit: true, actionArgs: { insertAt: 'charAfter' }, context: 'normal' },\n    { keys: 'A', type: 'action', action: 'enterInsertMode', isEdit: true, actionArgs: { insertAt: 'eol' }, context: 'normal' },\n    { keys: 'A', type: 'action', action: 'enterInsertMode', isEdit: true, actionArgs: { insertAt: 'endOfSelectedArea' }, context: 'visual' },\n    { keys: 'i', type: 'action', action: 'enterInsertMode', isEdit: true, actionArgs: { insertAt: 'inplace' }, context: 'normal' },\n    { keys: 'gi', type: 'action', action: 'enterInsertMode', isEdit: true, actionArgs: { insertAt: 'lastEdit' }, context: 'normal' },\n    { keys: 'I', type: 'action', action: 'enterInsertMode', isEdit: true, actionArgs: { insertAt: 'firstNonBlank'}, context: 'normal' },\n    { keys: 'gI', type: 'action', action: 'enterInsertMode', isEdit: true, actionArgs: { insertAt: 'bol'}, context: 'normal' },\n    { keys: 'I', type: 'action', action: 'enterInsertMode', isEdit: true, actionArgs: { insertAt: 'startOfSelectedArea' }, context: 'visual' },\n    { keys: 'o', type: 'action', action: 'newLineAndEnterInsertMode', isEdit: true, interlaceInsertRepeat: true, actionArgs: { after: true }, context: 'normal' },\n    { keys: 'O', type: 'action', action: 'newLineAndEnterInsertMode', isEdit: true, interlaceInsertRepeat: true, actionArgs: { after: false }, context: 'normal' },\n    { keys: 'v', type: 'action', action: 'toggleVisualMode' },\n    { keys: 'V', type: 'action', action: 'toggleVisualMode', actionArgs: { linewise: true }},\n    { keys: '<C-v>', type: 'action', action: 'toggleVisualMode', actionArgs: { blockwise: true }},\n    { keys: '<C-q>', type: 'action', action: 'toggleVisualMode', actionArgs: { blockwise: true }},\n    { keys: 'gv', type: 'action', action: 'reselectLastSelection' },\n    { keys: 'J', type: 'action', action: 'joinLines', isEdit: true },\n    { keys: 'gJ', type: 'action', action: 'joinLines', actionArgs: { keepSpaces: true }, isEdit: true },\n    { keys: 'p', type: 'action', action: 'paste', isEdit: true, actionArgs: { after: true, isEdit: true }},\n    { keys: 'P', type: 'action', action: 'paste', isEdit: true, actionArgs: { after: false, isEdit: true }},\n    { keys: 'r<character>', type: 'action', action: 'replace', isEdit: true },\n    { keys: '@<character>', type: 'action', action: 'replayMacro' },\n    { keys: 'q<character>', type: 'action', action: 'enterMacroRecordMode' },\n    // Handle Replace-mode as a special case of insert mode.\n    { keys: 'R', type: 'action', action: 'enterInsertMode', isEdit: true, actionArgs: { replace: true }, context: 'normal'},\n    { keys: 'R', type: 'operator', operator: 'change', operatorArgs: { linewise: true, fullLine: true }, context: 'visual', exitVisualBlock: true},\n    { keys: 'u', type: 'action', action: 'undo', context: 'normal' },\n    { keys: 'u', type: 'operator', operator: 'changeCase', operatorArgs: {toLower: true}, context: 'visual', isEdit: true },\n    { keys: 'U', type: 'operator', operator: 'changeCase', operatorArgs: {toLower: false}, context: 'visual', isEdit: true },\n    { keys: '<C-r>', type: 'action', action: 'redo' },\n    { keys: 'm<character>', type: 'action', action: 'setMark' },\n    { keys: '\"<character>', type: 'action', action: 'setRegister' },\n    { keys: 'zz', type: 'action', action: 'scrollToCursor', actionArgs: { position: 'center' }},\n    { keys: 'z.', type: 'action', action: 'scrollToCursor', actionArgs: { position: 'center' }, motion: 'moveToFirstNonWhiteSpaceCharacter' },\n    { keys: 'zt', type: 'action', action: 'scrollToCursor', actionArgs: { position: 'top' }},\n    { keys: 'z<CR>', type: 'action', action: 'scrollToCursor', actionArgs: { position: 'top' }, motion: 'moveToFirstNonWhiteSpaceCharacter' },\n    { keys: 'zb', type: 'action', action: 'scrollToCursor', actionArgs: { position: 'bottom' }},\n    { keys: 'z-', type: 'action', action: 'scrollToCursor', actionArgs: { position: 'bottom' }, motion: 'moveToFirstNonWhiteSpaceCharacter' },\n    { keys: '.', type: 'action', action: 'repeatLastEdit' },\n    { keys: '<C-a>', type: 'action', action: 'incrementNumberToken', isEdit: true, actionArgs: {increase: true, backtrack: false}},\n    { keys: '<C-x>', type: 'action', action: 'incrementNumberToken', isEdit: true, actionArgs: {increase: false, backtrack: false}},\n    { keys: '<C-t>', type: 'action', action: 'indent', actionArgs: { indentRight: true }, context: 'insert' },\n    { keys: '<C-d>', type: 'action', action: 'indent', actionArgs: { indentRight: false }, context: 'insert' },\n    // Text object motions\n    { keys: 'a<character>', type: 'motion', motion: 'textObjectManipulation' },\n    { keys: 'i<character>', type: 'motion', motion: 'textObjectManipulation', motionArgs: { textObjectInner: true }},\n    // Search\n    { keys: '/', type: 'search', searchArgs: { forward: true, querySrc: 'prompt', toJumplist: true }},\n    { keys: '?', type: 'search', searchArgs: { forward: false, querySrc: 'prompt', toJumplist: true }},\n    { keys: '*', type: 'search', searchArgs: { forward: true, querySrc: 'wordUnderCursor', wholeWordOnly: true, toJumplist: true }},\n    { keys: '#', type: 'search', searchArgs: { forward: false, querySrc: 'wordUnderCursor', wholeWordOnly: true, toJumplist: true }},\n    { keys: 'g*', type: 'search', searchArgs: { forward: true, querySrc: 'wordUnderCursor', toJumplist: true }},\n    { keys: 'g#', type: 'search', searchArgs: { forward: false, querySrc: 'wordUnderCursor', toJumplist: true }},\n    // Ex command\n    { keys: ':', type: 'ex' }\n  ];\n  var defaultKeymapLength = defaultKeymap.length;\n\n  /**\n   * Ex commands\n   * Care must be taken when adding to the default Ex command map. For any\n   * pair of commands that have a shared prefix, at least one of their\n   * shortNames must not match the prefix of the other command.\n   */\n  var defaultExCommandMap = [\n    { name: 'colorscheme', shortName: 'colo' },\n    { name: 'map' },\n    { name: 'imap', shortName: 'im' },\n    { name: 'nmap', shortName: 'nm' },\n    { name: 'vmap', shortName: 'vm' },\n    { name: 'unmap' },\n    { name: 'write', shortName: 'w' },\n    { name: 'undo', shortName: 'u' },\n    { name: 'redo', shortName: 'red' },\n    { name: 'set', shortName: 'se' },\n    { name: 'setlocal', shortName: 'setl' },\n    { name: 'setglobal', shortName: 'setg' },\n    { name: 'sort', shortName: 'sor' },\n    { name: 'substitute', shortName: 's', possiblyAsync: true },\n    { name: 'nohlsearch', shortName: 'noh' },\n    { name: 'yank', shortName: 'y' },\n    { name: 'delmarks', shortName: 'delm' },\n    { name: 'registers', shortName: 'reg', excludeFromCommandHistory: true },\n    { name: 'vglobal', shortName: 'v' },\n    { name: 'global', shortName: 'g' }\n  ];\n\n    function enterVimMode(cm) {\n      cm.setOption('disableInput', true);\n      cm.setOption('showCursorWhenSelecting', false);\n      CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"normal\"});\n      cm.on('cursorActivity', onCursorActivity);\n      maybeInitVimState(cm);\n      CodeMirror.on(cm.getInputField(), 'paste', getOnPasteFn(cm));\n    }\n\n    function leaveVimMode(cm) {\n      cm.setOption('disableInput', false);\n      cm.off('cursorActivity', onCursorActivity);\n      CodeMirror.off(cm.getInputField(), 'paste', getOnPasteFn(cm));\n      cm.state.vim = null;\n      if (highlightTimeout) clearTimeout(highlightTimeout);\n    }\n\n    function detachVimMap(cm, next) {\n      if (this == CodeMirror.keyMap.vim) {\n        cm.options.$customCursor = null;\n        CodeMirror.rmClass(cm.getWrapperElement(), \"cm-fat-cursor\");\n      }\n\n      if (!next || next.attach != attachVimMap)\n        leaveVimMode(cm);\n    }\n    function attachVimMap(cm, prev) {\n      if (this == CodeMirror.keyMap.vim) {\n        if (cm.curOp) cm.curOp.selectionChanged = true;\n        cm.options.$customCursor = transformCursor;\n        CodeMirror.addClass(cm.getWrapperElement(), \"cm-fat-cursor\");\n      }\n\n      if (!prev || prev.attach != attachVimMap)\n        enterVimMode(cm);\n    }\n\n    // Deprecated, simply setting the keymap works again.\n    CodeMirror.defineOption('vimMode', false, function(cm, val, prev) {\n      if (val && cm.getOption(\"keyMap\") != \"vim\")\n        cm.setOption(\"keyMap\", \"vim\");\n      else if (!val && prev != CodeMirror.Init && /^vim/.test(cm.getOption(\"keyMap\")))\n        cm.setOption(\"keyMap\", \"default\");\n    });\n\n    function cmKey(key, cm) {\n      if (!cm) { return undefined; }\n      if (this[key]) { return this[key]; }\n      var vimKey = cmKeyToVimKey(key);\n      if (!vimKey) {\n        return false;\n      }\n      var cmd = vimApi.findKey(cm, vimKey);\n      if (typeof cmd == 'function') {\n        CodeMirror.signal(cm, 'vim-keypress', vimKey);\n      }\n      return cmd;\n    }\n\n    var modifiers = {Shift:'S',Ctrl:'C',Alt:'A',Cmd:'D',Mod:'A',CapsLock:''};\n    var specialKeys = {Enter:'CR',Backspace:'BS',Delete:'Del',Insert:'Ins'};\n    function cmKeyToVimKey(key) {\n      if (key.charAt(0) == '\\'') {\n        // Keypress character binding of format \"'a'\"\n        return key.charAt(1);\n      }\n      var pieces = key.split(/-(?!$)/);\n      var lastPiece = pieces[pieces.length - 1];\n      if (pieces.length == 1 && pieces[0].length == 1) {\n        // No-modifier bindings use literal character bindings above. Skip.\n        return false;\n      } else if (pieces.length == 2 && pieces[0] == 'Shift' && lastPiece.length == 1) {\n        // Ignore Shift+char bindings as they should be handled by literal character.\n        return false;\n      }\n      var hasCharacter = false;\n      for (var i = 0; i < pieces.length; i++) {\n        var piece = pieces[i];\n        if (piece in modifiers) { pieces[i] = modifiers[piece]; }\n        else { hasCharacter = true; }\n        if (piece in specialKeys) { pieces[i] = specialKeys[piece]; }\n      }\n      if (!hasCharacter) {\n        // Vim does not support modifier only keys.\n        return false;\n      }\n      // TODO: Current bindings expect the character to be lower case, but\n      // it looks like vim key notation uses upper case.\n      if (isUpperCase(lastPiece)) {\n        pieces[pieces.length - 1] = lastPiece.toLowerCase();\n      }\n      return '<' + pieces.join('-') + '>';\n    }\n\n    function getOnPasteFn(cm) {\n      var vim = cm.state.vim;\n      if (!vim.onPasteFn) {\n        vim.onPasteFn = function() {\n          if (!vim.insertMode) {\n            cm.setCursor(offsetCursor(cm.getCursor(), 0, 1));\n            actions.enterInsertMode(cm, {}, vim);\n          }\n        };\n      }\n      return vim.onPasteFn;\n    }\n\n    var numberRegex = /[\\d]/;\n    var wordCharTest = [CodeMirror.isWordChar, function(ch) {\n      return ch && !CodeMirror.isWordChar(ch) && !/\\s/.test(ch);\n    }], bigWordCharTest = [function(ch) {\n      return /\\S/.test(ch);\n    }];\n    function makeKeyRange(start, size) {\n      var keys = [];\n      for (var i = start; i < start + size; i++) {\n        keys.push(String.fromCharCode(i));\n      }\n      return keys;\n    }\n    var upperCaseAlphabet = makeKeyRange(65, 26);\n    var lowerCaseAlphabet = makeKeyRange(97, 26);\n    var numbers = makeKeyRange(48, 10);\n    var validMarks = [].concat(upperCaseAlphabet, lowerCaseAlphabet, numbers, ['<', '>']);\n    var validRegisters = [].concat(upperCaseAlphabet, lowerCaseAlphabet, numbers, ['-', '\"', '.', ':', '_', '/']);\n    var upperCaseChars;\n    try { upperCaseChars = new RegExp(\"^[\\\\p{Lu}]$\", \"u\"); }\n    catch (_) { upperCaseChars = /^[A-Z]$/; }\n\n    function isLine(cm, line) {\n      return line >= cm.firstLine() && line <= cm.lastLine();\n    }\n    function isLowerCase(k) {\n      return (/^[a-z]$/).test(k);\n    }\n    function isMatchableSymbol(k) {\n      return '()[]{}'.indexOf(k) != -1;\n    }\n    function isNumber(k) {\n      return numberRegex.test(k);\n    }\n    function isUpperCase(k) {\n      return upperCaseChars.test(k);\n    }\n    function isWhiteSpaceString(k) {\n      return (/^\\s*$/).test(k);\n    }\n    function isEndOfSentenceSymbol(k) {\n      return '.?!'.indexOf(k) != -1;\n    }\n    function inArray(val, arr) {\n      for (var i = 0; i < arr.length; i++) {\n        if (arr[i] == val) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    var options = {};\n    function defineOption(name, defaultValue, type, aliases, callback) {\n      if (defaultValue === undefined && !callback) {\n        throw Error('defaultValue is required unless callback is provided');\n      }\n      if (!type) { type = 'string'; }\n      options[name] = {\n        type: type,\n        defaultValue: defaultValue,\n        callback: callback\n      };\n      if (aliases) {\n        for (var i = 0; i < aliases.length; i++) {\n          options[aliases[i]] = options[name];\n        }\n      }\n      if (defaultValue) {\n        setOption(name, defaultValue);\n      }\n    }\n\n    function setOption(name, value, cm, cfg) {\n      var option = options[name];\n      cfg = cfg || {};\n      var scope = cfg.scope;\n      if (!option) {\n        return new Error('Unknown option: ' + name);\n      }\n      if (option.type == 'boolean') {\n        if (value && value !== true) {\n          return new Error('Invalid argument: ' + name + '=' + value);\n        } else if (value !== false) {\n          // Boolean options are set to true if value is not defined.\n          value = true;\n        }\n      }\n      if (option.callback) {\n        if (scope !== 'local') {\n          option.callback(value, undefined);\n        }\n        if (scope !== 'global' && cm) {\n          option.callback(value, cm);\n        }\n      } else {\n        if (scope !== 'local') {\n          option.value = option.type == 'boolean' ? !!value : value;\n        }\n        if (scope !== 'global' && cm) {\n          cm.state.vim.options[name] = {value: value};\n        }\n      }\n    }\n\n    function getOption(name, cm, cfg) {\n      var option = options[name];\n      cfg = cfg || {};\n      var scope = cfg.scope;\n      if (!option) {\n        return new Error('Unknown option: ' + name);\n      }\n      if (option.callback) {\n        var local = cm && option.callback(undefined, cm);\n        if (scope !== 'global' && local !== undefined) {\n          return local;\n        }\n        if (scope !== 'local') {\n          return option.callback();\n        }\n        return;\n      } else {\n        var local = (scope !== 'global') && (cm && cm.state.vim.options[name]);\n        return (local || (scope !== 'local') && option || {}).value;\n      }\n    }\n\n    defineOption('filetype', undefined, 'string', ['ft'], function(name, cm) {\n      // Option is local. Do nothing for global.\n      if (cm === undefined) {\n        return;\n      }\n      // The 'filetype' option proxies to the CodeMirror 'mode' option.\n      if (name === undefined) {\n        var mode = cm.getOption('mode');\n        return mode == 'null' ? '' : mode;\n      } else {\n        var mode = name == '' ? 'null' : name;\n        cm.setOption('mode', mode);\n      }\n    });\n\n    var createCircularJumpList = function() {\n      var size = 100;\n      var pointer = -1;\n      var head = 0;\n      var tail = 0;\n      var buffer = new Array(size);\n      function add(cm, oldCur, newCur) {\n        var current = pointer % size;\n        var curMark = buffer[current];\n        function useNextSlot(cursor) {\n          var next = ++pointer % size;\n          var trashMark = buffer[next];\n          if (trashMark) {\n            trashMark.clear();\n          }\n          buffer[next] = cm.setBookmark(cursor);\n        }\n        if (curMark) {\n          var markPos = curMark.find();\n          // avoid recording redundant cursor position\n          if (markPos && !cursorEqual(markPos, oldCur)) {\n            useNextSlot(oldCur);\n          }\n        } else {\n          useNextSlot(oldCur);\n        }\n        useNextSlot(newCur);\n        head = pointer;\n        tail = pointer - size + 1;\n        if (tail < 0) {\n          tail = 0;\n        }\n      }\n      function move(cm, offset) {\n        pointer += offset;\n        if (pointer > head) {\n          pointer = head;\n        } else if (pointer < tail) {\n          pointer = tail;\n        }\n        var mark = buffer[(size + pointer) % size];\n        // skip marks that are temporarily removed from text buffer\n        if (mark && !mark.find()) {\n          var inc = offset > 0 ? 1 : -1;\n          var newCur;\n          var oldCur = cm.getCursor();\n          do {\n            pointer += inc;\n            mark = buffer[(size + pointer) % size];\n            // skip marks that are the same as current position\n            if (mark &&\n                (newCur = mark.find()) &&\n                !cursorEqual(oldCur, newCur)) {\n              break;\n            }\n          } while (pointer < head && pointer > tail);\n        }\n        return mark;\n      }\n      function find(cm, offset) {\n        var oldPointer = pointer;\n        var mark = move(cm, offset);\n        pointer = oldPointer;\n        return mark && mark.find();\n      }\n      return {\n        cachedCursor: undefined, //used for # and * jumps\n        add: add,\n        find: find,\n        move: move\n      };\n    };\n\n    // Returns an object to track the changes associated insert mode.  It\n    // clones the object that is passed in, or creates an empty object one if\n    // none is provided.\n    var createInsertModeChanges = function(c) {\n      if (c) {\n        // Copy construction\n        return {\n          changes: c.changes,\n          expectCursorActivityForChange: c.expectCursorActivityForChange\n        };\n      }\n      return {\n        // Change list\n        changes: [],\n        // Set to true on change, false on cursorActivity.\n        expectCursorActivityForChange: false\n      };\n    };\n\n    function MacroModeState() {\n      this.latestRegister = undefined;\n      this.isPlaying = false;\n      this.isRecording = false;\n      this.replaySearchQueries = [];\n      this.onRecordingDone = undefined;\n      this.lastInsertModeChanges = createInsertModeChanges();\n    }\n    MacroModeState.prototype = {\n      exitMacroRecordMode: function() {\n        var macroModeState = vimGlobalState.macroModeState;\n        if (macroModeState.onRecordingDone) {\n          macroModeState.onRecordingDone(); // close dialog\n        }\n        macroModeState.onRecordingDone = undefined;\n        macroModeState.isRecording = false;\n      },\n      enterMacroRecordMode: function(cm, registerName) {\n        var register =\n            vimGlobalState.registerController.getRegister(registerName);\n        if (register) {\n          register.clear();\n          this.latestRegister = registerName;\n          if (cm.openDialog) {\n            var template = dom('span', {class: 'cm-vim-message'}, 'recording @' + registerName);\n            this.onRecordingDone = cm.openDialog(template, null, {bottom:true});\n          }\n          this.isRecording = true;\n        }\n      }\n    };\n\n    function maybeInitVimState(cm) {\n      if (!cm.state.vim) {\n        // Store instance state in the CodeMirror object.\n        cm.state.vim = {\n          inputState: new InputState(),\n          // Vim's input state that triggered the last edit, used to repeat\n          // motions and operators with '.'.\n          lastEditInputState: undefined,\n          // Vim's action command before the last edit, used to repeat actions\n          // with '.' and insert mode repeat.\n          lastEditActionCommand: undefined,\n          // When using jk for navigation, if you move from a longer line to a\n          // shorter line, the cursor may clip to the end of the shorter line.\n          // If j is pressed again and cursor goes to the next line, the\n          // cursor should go back to its horizontal position on the longer\n          // line if it can. This is to keep track of the horizontal position.\n          lastHPos: -1,\n          // Doing the same with screen-position for gj/gk\n          lastHSPos: -1,\n          // The last motion command run. Cleared if a non-motion command gets\n          // executed in between.\n          lastMotion: null,\n          marks: {},\n          insertMode: false,\n          // Repeat count for changes made in insert mode, triggered by key\n          // sequences like 3,i. Only exists when insertMode is true.\n          insertModeRepeat: undefined,\n          visualMode: false,\n          // If we are in visual line mode. No effect if visualMode is false.\n          visualLine: false,\n          visualBlock: false,\n          lastSelection: null,\n          lastPastedText: null,\n          sel: {},\n          // Buffer-local/window-local values of vim options.\n          options: {}\n        };\n      }\n      return cm.state.vim;\n    }\n    var vimGlobalState;\n    function resetVimGlobalState() {\n      vimGlobalState = {\n        // The current search query.\n        searchQuery: null,\n        // Whether we are searching backwards.\n        searchIsReversed: false,\n        // Replace part of the last substituted pattern\n        lastSubstituteReplacePart: undefined,\n        jumpList: createCircularJumpList(),\n        macroModeState: new MacroModeState,\n        // Recording latest f, t, F or T motion command.\n        lastCharacterSearch: {increment:0, forward:true, selectedCharacter:''},\n        registerController: new RegisterController({}),\n        // search history buffer\n        searchHistoryController: new HistoryController(),\n        // ex Command history buffer\n        exCommandHistoryController : new HistoryController()\n      };\n      for (var optionName in options) {\n        var option = options[optionName];\n        option.value = option.defaultValue;\n      }\n    }\n\n    var lastInsertModeKeyTimer;\n    var vimApi = {\n      enterVimMode: enterVimMode,\n      buildKeyMap: function() {\n        // TODO: Convert keymap into dictionary format for fast lookup.\n      },\n      // Testing hook, though it might be useful to expose the register\n      // controller anyway.\n      getRegisterController: function() {\n        return vimGlobalState.registerController;\n      },\n      // Testing hook.\n      resetVimGlobalState_: resetVimGlobalState,\n\n      // Testing hook.\n      getVimGlobalState_: function() {\n        return vimGlobalState;\n      },\n\n      // Testing hook.\n      maybeInitVimState_: maybeInitVimState,\n\n      suppressErrorLogging: false,\n\n      InsertModeKey: InsertModeKey,\n      map: function(lhs, rhs, ctx) {\n        // Add user defined key bindings.\n        exCommandDispatcher.map(lhs, rhs, ctx);\n      },\n      unmap: function(lhs, ctx) {\n        return exCommandDispatcher.unmap(lhs, ctx);\n      },\n      // Non-recursive map function.\n      // NOTE: This will not create mappings to key maps that aren't present\n      // in the default key map. See TODO at bottom of function.\n      noremap: function(lhs, rhs, ctx) {\n        function toCtxArray(ctx) {\n          return ctx ? [ctx] : ['normal', 'insert', 'visual'];\n        }\n        var ctxsToMap = toCtxArray(ctx);\n        // Look through all actual defaults to find a map candidate.\n        var actualLength = defaultKeymap.length, origLength = defaultKeymapLength;\n        for (var i = actualLength - origLength;\n             i < actualLength && ctxsToMap.length;\n             i++) {\n          var mapping = defaultKeymap[i];\n          // Omit mappings that operate in the wrong context(s) and those of invalid type.\n          if (mapping.keys == rhs &&\n              (!ctx || !mapping.context || mapping.context === ctx) &&\n              mapping.type.substr(0, 2) !== 'ex' &&\n              mapping.type.substr(0, 3) !== 'key') {\n            // Make a shallow copy of the original keymap entry.\n            var newMapping = {};\n            for (var key in mapping) {\n              newMapping[key] = mapping[key];\n            }\n            // Modify it point to the new mapping with the proper context.\n            newMapping.keys = lhs;\n            if (ctx && !newMapping.context) {\n              newMapping.context = ctx;\n            }\n            // Add it to the keymap with a higher priority than the original.\n            this._mapCommand(newMapping);\n            // Record the mapped contexts as complete.\n            var mappedCtxs = toCtxArray(mapping.context);\n            ctxsToMap = ctxsToMap.filter(function(el) { return mappedCtxs.indexOf(el) === -1; });\n          }\n        }\n        // TODO: Create non-recursive keyToKey mappings for the unmapped contexts once those exist.\n      },\n      // Remove all user-defined mappings for the provided context.\n      mapclear: function(ctx) {\n        // Partition the existing keymap into user-defined and true defaults.\n        var actualLength = defaultKeymap.length,\n            origLength = defaultKeymapLength;\n        var userKeymap = defaultKeymap.slice(0, actualLength - origLength);\n        defaultKeymap = defaultKeymap.slice(actualLength - origLength);\n        if (ctx) {\n          // If a specific context is being cleared, we need to keep mappings\n          // from all other contexts.\n          for (var i = userKeymap.length - 1; i >= 0; i--) {\n            var mapping = userKeymap[i];\n            if (ctx !== mapping.context) {\n              if (mapping.context) {\n                this._mapCommand(mapping);\n              } else {\n                // `mapping` applies to all contexts so create keymap copies\n                // for each context except the one being cleared.\n                var contexts = ['normal', 'insert', 'visual'];\n                for (var j in contexts) {\n                  if (contexts[j] !== ctx) {\n                    var newMapping = {};\n                    for (var key in mapping) {\n                      newMapping[key] = mapping[key];\n                    }\n                    newMapping.context = contexts[j];\n                    this._mapCommand(newMapping);\n                  }\n                }\n              }\n            }\n          }\n        }\n      },\n      // TODO: Expose setOption and getOption as instance methods. Need to decide how to namespace\n      // them, or somehow make them work with the existing CodeMirror setOption/getOption API.\n      setOption: setOption,\n      getOption: getOption,\n      defineOption: defineOption,\n      defineEx: function(name, prefix, func){\n        if (!prefix) {\n          prefix = name;\n        } else if (name.indexOf(prefix) !== 0) {\n          throw new Error('(Vim.defineEx) \"'+prefix+'\" is not a prefix of \"'+name+'\", command not registered');\n        }\n        exCommands[name]=func;\n        exCommandDispatcher.commandMap_[prefix]={name:name, shortName:prefix, type:'api'};\n      },\n      handleKey: function (cm, key, origin) {\n        var command = this.findKey(cm, key, origin);\n        if (typeof command === 'function') {\n          return command();\n        }\n      },\n      multiSelectHandleKey: multiSelectHandleKey,\n\n      /**\n       * This is the outermost function called by CodeMirror, after keys have\n       * been mapped to their Vim equivalents.\n       *\n       * Finds a command based on the key (and cached keys if there is a\n       * multi-key sequence). Returns `undefined` if no key is matched, a noop\n       * function if a partial match is found (multi-key), and a function to\n       * execute the bound command if a a key is matched. The function always\n       * returns true.\n       */\n      findKey: function(cm, key, origin) {\n        var vim = maybeInitVimState(cm);\n        function handleMacroRecording() {\n          var macroModeState = vimGlobalState.macroModeState;\n          if (macroModeState.isRecording) {\n            if (key == 'q') {\n              macroModeState.exitMacroRecordMode();\n              clearInputState(cm);\n              return true;\n            }\n            if (origin != 'mapping') {\n              logKey(macroModeState, key);\n            }\n          }\n        }\n        function handleEsc() {\n          if (key == '<Esc>') {\n            if (vim.visualMode) {\n              // Get back to normal mode.\n              exitVisualMode(cm);\n            } else if (vim.insertMode) {\n              // Get back to normal mode.\n              exitInsertMode(cm);\n            } else {\n              // We're already in normal mode. Let '<Esc>' be handled normally.\n              return;\n            }\n            clearInputState(cm);\n            return true;\n          }\n        }\n        function doKeyToKey(keys) {\n          // TODO: prevent infinite recursion.\n          var match;\n          while (keys) {\n            // Pull off one command key, which is either a single character\n            // or a special sequence wrapped in '<' and '>', e.g. '<Space>'.\n            match = (/<\\w+-.+?>|<\\w+>|./).exec(keys);\n            key = match[0];\n            keys = keys.substring(match.index + key.length);\n            vimApi.handleKey(cm, key, 'mapping');\n          }\n        }\n\n        function handleKeyInsertMode() {\n          if (handleEsc()) { return true; }\n          var keys = vim.inputState.keyBuffer = vim.inputState.keyBuffer + key;\n          var keysAreChars = key.length == 1;\n          var match = commandDispatcher.matchCommand(keys, defaultKeymap, vim.inputState, 'insert');\n          // Need to check all key substrings in insert mode.\n          while (keys.length > 1 && match.type != 'full') {\n            var keys = vim.inputState.keyBuffer = keys.slice(1);\n            var thisMatch = commandDispatcher.matchCommand(keys, defaultKeymap, vim.inputState, 'insert');\n            if (thisMatch.type != 'none') { match = thisMatch; }\n          }\n          if (match.type == 'none') { clearInputState(cm); return false; }\n          else if (match.type == 'partial') {\n            if (lastInsertModeKeyTimer) { window.clearTimeout(lastInsertModeKeyTimer); }\n            lastInsertModeKeyTimer = window.setTimeout(\n              function() { if (vim.insertMode && vim.inputState.keyBuffer) { clearInputState(cm); } },\n              getOption('insertModeEscKeysTimeout'));\n            return !keysAreChars;\n          }\n\n          if (lastInsertModeKeyTimer) { window.clearTimeout(lastInsertModeKeyTimer); }\n          if (keysAreChars) {\n            var selections = cm.listSelections();\n            for (var i = 0; i < selections.length; i++) {\n              var here = selections[i].head;\n              cm.replaceRange('', offsetCursor(here, 0, -(keys.length - 1)), here, '+input');\n            }\n            vimGlobalState.macroModeState.lastInsertModeChanges.changes.pop();\n          }\n          clearInputState(cm);\n          return match.command;\n        }\n\n        function handleKeyNonInsertMode() {\n          if (handleMacroRecording() || handleEsc()) { return true; }\n\n          var keys = vim.inputState.keyBuffer = vim.inputState.keyBuffer + key;\n          if (/^[1-9]\\d*$/.test(keys)) { return true; }\n\n          var keysMatcher = /^(\\d*)(.*)$/.exec(keys);\n          if (!keysMatcher) { clearInputState(cm); return false; }\n          var context = vim.visualMode ? 'visual' :\n                                         'normal';\n          var mainKey = keysMatcher[2] || keysMatcher[1];\n          if (vim.inputState.operatorShortcut && vim.inputState.operatorShortcut.slice(-1) == mainKey) {\n            // multikey operators act linewise by repeating only the last character\n            mainKey = vim.inputState.operatorShortcut;\n          }\n          var match = commandDispatcher.matchCommand(mainKey, defaultKeymap, vim.inputState, context);\n          if (match.type == 'none') { clearInputState(cm); return false; }\n          else if (match.type == 'partial') { return true; }\n          else if (match.type == 'clear') { clearInputState(cm); return true; }\n\n          vim.inputState.keyBuffer = '';\n          keysMatcher = /^(\\d*)(.*)$/.exec(keys);\n          if (keysMatcher[1] && keysMatcher[1] != '0') {\n            vim.inputState.pushRepeatDigit(keysMatcher[1]);\n          }\n          return match.command;\n        }\n\n        var command;\n        if (vim.insertMode) { command = handleKeyInsertMode(); }\n        else { command = handleKeyNonInsertMode(); }\n        if (command === false) {\n          return !vim.insertMode && key.length === 1 ? function() { return true; } : undefined;\n        } else if (command === true) {\n          // TODO: Look into using CodeMirror's multi-key handling.\n          // Return no-op since we are caching the key. Counts as handled, but\n          // don't want act on it just yet.\n          return function() { return true; };\n        } else {\n          return function() {\n            return cm.operation(function() {\n              cm.curOp.isVimOp = true;\n              try {\n                if (command.type == 'keyToKey') {\n                  doKeyToKey(command.toKeys);\n                } else {\n                  commandDispatcher.processCommand(cm, vim, command);\n                }\n              } catch (e) {\n                // clear VIM state in case it's in a bad state.\n                cm.state.vim = undefined;\n                maybeInitVimState(cm);\n                if (!vimApi.suppressErrorLogging) {\n                  console['log'](e);\n                }\n                throw e;\n              }\n              return true;\n            });\n          };\n        }\n      },\n      handleEx: function(cm, input) {\n        exCommandDispatcher.processCommand(cm, input);\n      },\n\n      defineMotion: defineMotion,\n      defineAction: defineAction,\n      defineOperator: defineOperator,\n      mapCommand: mapCommand,\n      _mapCommand: _mapCommand,\n\n      defineRegister: defineRegister,\n\n      exitVisualMode: exitVisualMode,\n      exitInsertMode: exitInsertMode\n    };\n\n    // Represents the current input state.\n    function InputState() {\n      this.prefixRepeat = [];\n      this.motionRepeat = [];\n\n      this.operator = null;\n      this.operatorArgs = null;\n      this.motion = null;\n      this.motionArgs = null;\n      this.keyBuffer = []; // For matching multi-key commands.\n      this.registerName = null; // Defaults to the unnamed register.\n    }\n    InputState.prototype.pushRepeatDigit = function(n) {\n      if (!this.operator) {\n        this.prefixRepeat = this.prefixRepeat.concat(n);\n      } else {\n        this.motionRepeat = this.motionRepeat.concat(n);\n      }\n    };\n    InputState.prototype.getRepeat = function() {\n      var repeat = 0;\n      if (this.prefixRepeat.length > 0 || this.motionRepeat.length > 0) {\n        repeat = 1;\n        if (this.prefixRepeat.length > 0) {\n          repeat *= parseInt(this.prefixRepeat.join(''), 10);\n        }\n        if (this.motionRepeat.length > 0) {\n          repeat *= parseInt(this.motionRepeat.join(''), 10);\n        }\n      }\n      return repeat;\n    };\n\n    function clearInputState(cm, reason) {\n      cm.state.vim.inputState = new InputState();\n      CodeMirror.signal(cm, 'vim-command-done', reason);\n    }\n\n    /*\n     * Register stores information about copy and paste registers.  Besides\n     * text, a register must store whether it is linewise (i.e., when it is\n     * pasted, should it insert itself into a new line, or should the text be\n     * inserted at the cursor position.)\n     */\n    function Register(text, linewise, blockwise) {\n      this.clear();\n      this.keyBuffer = [text || ''];\n      this.insertModeChanges = [];\n      this.searchQueries = [];\n      this.linewise = !!linewise;\n      this.blockwise = !!blockwise;\n    }\n    Register.prototype = {\n      setText: function(text, linewise, blockwise) {\n        this.keyBuffer = [text || ''];\n        this.linewise = !!linewise;\n        this.blockwise = !!blockwise;\n      },\n      pushText: function(text, linewise) {\n        // if this register has ever been set to linewise, use linewise.\n        if (linewise) {\n          if (!this.linewise) {\n            this.keyBuffer.push('\\n');\n          }\n          this.linewise = true;\n        }\n        this.keyBuffer.push(text);\n      },\n      pushInsertModeChanges: function(changes) {\n        this.insertModeChanges.push(createInsertModeChanges(changes));\n      },\n      pushSearchQuery: function(query) {\n        this.searchQueries.push(query);\n      },\n      clear: function() {\n        this.keyBuffer = [];\n        this.insertModeChanges = [];\n        this.searchQueries = [];\n        this.linewise = false;\n      },\n      toString: function() {\n        return this.keyBuffer.join('');\n      }\n    };\n\n    /**\n     * Defines an external register.\n     *\n     * The name should be a single character that will be used to reference the register.\n     * The register should support setText, pushText, clear, and toString(). See Register\n     * for a reference implementation.\n     */\n    function defineRegister(name, register) {\n      var registers = vimGlobalState.registerController.registers;\n      if (!name || name.length != 1) {\n        throw Error('Register name must be 1 character');\n      }\n      if (registers[name]) {\n        throw Error('Register already defined ' + name);\n      }\n      registers[name] = register;\n      validRegisters.push(name);\n    }\n\n    /*\n     * vim registers allow you to keep many independent copy and paste buffers.\n     * See http://usevim.com/2012/04/13/registers/ for an introduction.\n     *\n     * RegisterController keeps the state of all the registers.  An initial\n     * state may be passed in.  The unnamed register '\"' will always be\n     * overridden.\n     */\n    function RegisterController(registers) {\n      this.registers = registers;\n      this.unnamedRegister = registers['\"'] = new Register();\n      registers['.'] = new Register();\n      registers[':'] = new Register();\n      registers['/'] = new Register();\n    }\n    RegisterController.prototype = {\n      pushText: function(registerName, operator, text, linewise, blockwise) {\n        // The black hole register, \"_, means delete/yank to nowhere.\n        if (registerName === '_') return;\n        if (linewise && text.charAt(text.length - 1) !== '\\n'){\n          text += '\\n';\n        }\n        // Lowercase and uppercase registers refer to the same register.\n        // Uppercase just means append.\n        var register = this.isValidRegister(registerName) ?\n            this.getRegister(registerName) : null;\n        // if no register/an invalid register was specified, things go to the\n        // default registers\n        if (!register) {\n          switch (operator) {\n            case 'yank':\n              // The 0 register contains the text from the most recent yank.\n              this.registers['0'] = new Register(text, linewise, blockwise);\n              break;\n            case 'delete':\n            case 'change':\n              if (text.indexOf('\\n') == -1) {\n                // Delete less than 1 line. Update the small delete register.\n                this.registers['-'] = new Register(text, linewise);\n              } else {\n                // Shift down the contents of the numbered registers and put the\n                // deleted text into register 1.\n                this.shiftNumericRegisters_();\n                this.registers['1'] = new Register(text, linewise);\n              }\n              break;\n          }\n          // Make sure the unnamed register is set to what just happened\n          this.unnamedRegister.setText(text, linewise, blockwise);\n          return;\n        }\n\n        // If we've gotten to this point, we've actually specified a register\n        var append = isUpperCase(registerName);\n        if (append) {\n          register.pushText(text, linewise);\n        } else {\n          register.setText(text, linewise, blockwise);\n        }\n        // The unnamed register always has the same value as the last used\n        // register.\n        this.unnamedRegister.setText(register.toString(), linewise);\n      },\n      // Gets the register named @name.  If one of @name doesn't already exist,\n      // create it.  If @name is invalid, return the unnamedRegister.\n      getRegister: function(name) {\n        if (!this.isValidRegister(name)) {\n          return this.unnamedRegister;\n        }\n        name = name.toLowerCase();\n        if (!this.registers[name]) {\n          this.registers[name] = new Register();\n        }\n        return this.registers[name];\n      },\n      isValidRegister: function(name) {\n        return name && inArray(name, validRegisters);\n      },\n      shiftNumericRegisters_: function() {\n        for (var i = 9; i >= 2; i--) {\n          this.registers[i] = this.getRegister('' + (i - 1));\n        }\n      }\n    };\n    function HistoryController() {\n        this.historyBuffer = [];\n        this.iterator = 0;\n        this.initialPrefix = null;\n    }\n    HistoryController.prototype = {\n      // the input argument here acts a user entered prefix for a small time\n      // until we start autocompletion in which case it is the autocompleted.\n      nextMatch: function (input, up) {\n        var historyBuffer = this.historyBuffer;\n        var dir = up ? -1 : 1;\n        if (this.initialPrefix === null) this.initialPrefix = input;\n        for (var i = this.iterator + dir; up ? i >= 0 : i < historyBuffer.length; i+= dir) {\n          var element = historyBuffer[i];\n          for (var j = 0; j <= element.length; j++) {\n            if (this.initialPrefix == element.substring(0, j)) {\n              this.iterator = i;\n              return element;\n            }\n          }\n        }\n        // should return the user input in case we reach the end of buffer.\n        if (i >= historyBuffer.length) {\n          this.iterator = historyBuffer.length;\n          return this.initialPrefix;\n        }\n        // return the last autocompleted query or exCommand as it is.\n        if (i < 0 ) return input;\n      },\n      pushInput: function(input) {\n        var index = this.historyBuffer.indexOf(input);\n        if (index > -1) this.historyBuffer.splice(index, 1);\n        if (input.length) this.historyBuffer.push(input);\n      },\n      reset: function() {\n        this.initialPrefix = null;\n        this.iterator = this.historyBuffer.length;\n      }\n    };\n    var commandDispatcher = {\n      matchCommand: function(keys, keyMap, inputState, context) {\n        var matches = commandMatches(keys, keyMap, context, inputState);\n        if (!matches.full && !matches.partial) {\n          return {type: 'none'};\n        } else if (!matches.full && matches.partial) {\n          return {type: 'partial'};\n        }\n\n        var bestMatch;\n        for (var i = 0; i < matches.full.length; i++) {\n          var match = matches.full[i];\n          if (!bestMatch) {\n            bestMatch = match;\n          }\n        }\n        if (bestMatch.keys.slice(-11) == '<character>') {\n          var character = lastChar(keys);\n          if (!character || character.length > 1) return {type: 'clear'};\n          inputState.selectedCharacter = character;\n        }\n        return {type: 'full', command: bestMatch};\n      },\n      processCommand: function(cm, vim, command) {\n        vim.inputState.repeatOverride = command.repeatOverride;\n        switch (command.type) {\n          case 'motion':\n            this.processMotion(cm, vim, command);\n            break;\n          case 'operator':\n            this.processOperator(cm, vim, command);\n            break;\n          case 'operatorMotion':\n            this.processOperatorMotion(cm, vim, command);\n            break;\n          case 'action':\n            this.processAction(cm, vim, command);\n            break;\n          case 'search':\n            this.processSearch(cm, vim, command);\n            break;\n          case 'ex':\n          case 'keyToEx':\n            this.processEx(cm, vim, command);\n            break;\n        }\n      },\n      processMotion: function(cm, vim, command) {\n        vim.inputState.motion = command.motion;\n        vim.inputState.motionArgs = copyArgs(command.motionArgs);\n        this.evalInput(cm, vim);\n      },\n      processOperator: function(cm, vim, command) {\n        var inputState = vim.inputState;\n        if (inputState.operator) {\n          if (inputState.operator == command.operator) {\n            // Typing an operator twice like 'dd' makes the operator operate\n            // linewise\n            inputState.motion = 'expandToLine';\n            inputState.motionArgs = { linewise: true };\n            this.evalInput(cm, vim);\n            return;\n          } else {\n            // 2 different operators in a row doesn't make sense.\n            clearInputState(cm);\n          }\n        }\n        inputState.operator = command.operator;\n        inputState.operatorArgs = copyArgs(command.operatorArgs);\n        if (command.keys.length > 1) {\n          inputState.operatorShortcut = command.keys;\n        }\n        if (command.exitVisualBlock) {\n            vim.visualBlock = false;\n            updateCmSelection(cm);\n        }\n        if (vim.visualMode) {\n          // Operating on a selection in visual mode. We don't need a motion.\n          this.evalInput(cm, vim);\n        }\n      },\n      processOperatorMotion: function(cm, vim, command) {\n        var visualMode = vim.visualMode;\n        var operatorMotionArgs = copyArgs(command.operatorMotionArgs);\n        if (operatorMotionArgs) {\n          // Operator motions may have special behavior in visual mode.\n          if (visualMode && operatorMotionArgs.visualLine) {\n            vim.visualLine = true;\n          }\n        }\n        this.processOperator(cm, vim, command);\n        if (!visualMode) {\n          this.processMotion(cm, vim, command);\n        }\n      },\n      processAction: function(cm, vim, command) {\n        var inputState = vim.inputState;\n        var repeat = inputState.getRepeat();\n        var repeatIsExplicit = !!repeat;\n        var actionArgs = copyArgs(command.actionArgs) || {};\n        if (inputState.selectedCharacter) {\n          actionArgs.selectedCharacter = inputState.selectedCharacter;\n        }\n        // Actions may or may not have motions and operators. Do these first.\n        if (command.operator) {\n          this.processOperator(cm, vim, command);\n        }\n        if (command.motion) {\n          this.processMotion(cm, vim, command);\n        }\n        if (command.motion || command.operator) {\n          this.evalInput(cm, vim);\n        }\n        actionArgs.repeat = repeat || 1;\n        actionArgs.repeatIsExplicit = repeatIsExplicit;\n        actionArgs.registerName = inputState.registerName;\n        clearInputState(cm);\n        vim.lastMotion = null;\n        if (command.isEdit) {\n          this.recordLastEdit(vim, inputState, command);\n        }\n        actions[command.action](cm, actionArgs, vim);\n      },\n      processSearch: function(cm, vim, command) {\n        if (!cm.getSearchCursor) {\n          // Search depends on SearchCursor.\n          return;\n        }\n        var forward = command.searchArgs.forward;\n        var wholeWordOnly = command.searchArgs.wholeWordOnly;\n        getSearchState(cm).setReversed(!forward);\n        var promptPrefix = (forward) ? '/' : '?';\n        var originalQuery = getSearchState(cm).getQuery();\n        var originalScrollPos = cm.getScrollInfo();\n        function handleQuery(query, ignoreCase, smartCase) {\n          vimGlobalState.searchHistoryController.pushInput(query);\n          vimGlobalState.searchHistoryController.reset();\n          try {\n            updateSearchQuery(cm, query, ignoreCase, smartCase);\n          } catch (e) {\n            showConfirm(cm, 'Invalid regex: ' + query);\n            clearInputState(cm);\n            return;\n          }\n          commandDispatcher.processMotion(cm, vim, {\n            type: 'motion',\n            motion: 'findNext',\n            motionArgs: { forward: true, toJumplist: command.searchArgs.toJumplist }\n          });\n        }\n        function onPromptClose(query) {\n          cm.scrollTo(originalScrollPos.left, originalScrollPos.top);\n          handleQuery(query, true /** ignoreCase */, true /** smartCase */);\n          var macroModeState = vimGlobalState.macroModeState;\n          if (macroModeState.isRecording) {\n            logSearchQuery(macroModeState, query);\n          }\n        }\n        function onPromptKeyUp(e, query, close) {\n          var keyName = CodeMirror.keyName(e), up, offset;\n          if (keyName == 'Up' || keyName == 'Down') {\n            up = keyName == 'Up' ? true : false;\n            offset = e.target ? e.target.selectionEnd : 0;\n            query = vimGlobalState.searchHistoryController.nextMatch(query, up) || '';\n            close(query);\n            if (offset && e.target) e.target.selectionEnd = e.target.selectionStart = Math.min(offset, e.target.value.length);\n          } else {\n            if ( keyName != 'Left' && keyName != 'Right' && keyName != 'Ctrl' && keyName != 'Alt' && keyName != 'Shift')\n              vimGlobalState.searchHistoryController.reset();\n          }\n          var parsedQuery;\n          try {\n            parsedQuery = updateSearchQuery(cm, query,\n                true /** ignoreCase */, true /** smartCase */);\n          } catch (e) {\n            // Swallow bad regexes for incremental search.\n          }\n          if (parsedQuery) {\n            cm.scrollIntoView(findNext(cm, !forward, parsedQuery), 30);\n          } else {\n            clearSearchHighlight(cm);\n            cm.scrollTo(originalScrollPos.left, originalScrollPos.top);\n          }\n        }\n        function onPromptKeyDown(e, query, close) {\n          var keyName = CodeMirror.keyName(e);\n          if (keyName == 'Esc' || keyName == 'Ctrl-C' || keyName == 'Ctrl-[' ||\n              (keyName == 'Backspace' && query == '')) {\n            vimGlobalState.searchHistoryController.pushInput(query);\n            vimGlobalState.searchHistoryController.reset();\n            updateSearchQuery(cm, originalQuery);\n            clearSearchHighlight(cm);\n            cm.scrollTo(originalScrollPos.left, originalScrollPos.top);\n            CodeMirror.e_stop(e);\n            clearInputState(cm);\n            close();\n            cm.focus();\n          } else if (keyName == 'Up' || keyName == 'Down') {\n            CodeMirror.e_stop(e);\n          } else if (keyName == 'Ctrl-U') {\n            // Ctrl-U clears input.\n            CodeMirror.e_stop(e);\n            close('');\n          }\n        }\n        switch (command.searchArgs.querySrc) {\n          case 'prompt':\n            var macroModeState = vimGlobalState.macroModeState;\n            if (macroModeState.isPlaying) {\n              var query = macroModeState.replaySearchQueries.shift();\n              handleQuery(query, true /** ignoreCase */, false /** smartCase */);\n            } else {\n              showPrompt(cm, {\n                  onClose: onPromptClose,\n                  prefix: promptPrefix,\n                  desc: '(JavaScript regexp)',\n                  onKeyUp: onPromptKeyUp,\n                  onKeyDown: onPromptKeyDown\n              });\n            }\n            break;\n          case 'wordUnderCursor':\n            var word = expandWordUnderCursor(cm, false /** inclusive */,\n                true /** forward */, false /** bigWord */,\n                true /** noSymbol */);\n            var isKeyword = true;\n            if (!word) {\n              word = expandWordUnderCursor(cm, false /** inclusive */,\n                  true /** forward */, false /** bigWord */,\n                  false /** noSymbol */);\n              isKeyword = false;\n            }\n            if (!word) {\n              return;\n            }\n            var query = cm.getLine(word.start.line).substring(word.start.ch,\n                word.end.ch);\n            if (isKeyword && wholeWordOnly) {\n                query = '\\\\b' + query + '\\\\b';\n            } else {\n              query = escapeRegex(query);\n            }\n\n            // cachedCursor is used to save the old position of the cursor\n            // when * or # causes vim to seek for the nearest word and shift\n            // the cursor before entering the motion.\n            vimGlobalState.jumpList.cachedCursor = cm.getCursor();\n            cm.setCursor(word.start);\n\n            handleQuery(query, true /** ignoreCase */, false /** smartCase */);\n            break;\n        }\n      },\n      processEx: function(cm, vim, command) {\n        function onPromptClose(input) {\n          // Give the prompt some time to close so that if processCommand shows\n          // an error, the elements don't overlap.\n          vimGlobalState.exCommandHistoryController.pushInput(input);\n          vimGlobalState.exCommandHistoryController.reset();\n          exCommandDispatcher.processCommand(cm, input);\n          clearInputState(cm);\n        }\n        function onPromptKeyDown(e, input, close) {\n          var keyName = CodeMirror.keyName(e), up, offset;\n          if (keyName == 'Esc' || keyName == 'Ctrl-C' || keyName == 'Ctrl-[' ||\n              (keyName == 'Backspace' && input == '')) {\n            vimGlobalState.exCommandHistoryController.pushInput(input);\n            vimGlobalState.exCommandHistoryController.reset();\n            CodeMirror.e_stop(e);\n            clearInputState(cm);\n            close();\n            cm.focus();\n          }\n          if (keyName == 'Up' || keyName == 'Down') {\n            CodeMirror.e_stop(e);\n            up = keyName == 'Up' ? true : false;\n            offset = e.target ? e.target.selectionEnd : 0;\n            input = vimGlobalState.exCommandHistoryController.nextMatch(input, up) || '';\n            close(input);\n            if (offset && e.target) e.target.selectionEnd = e.target.selectionStart = Math.min(offset, e.target.value.length);\n          } else if (keyName == 'Ctrl-U') {\n            // Ctrl-U clears input.\n            CodeMirror.e_stop(e);\n            close('');\n          } else {\n            if ( keyName != 'Left' && keyName != 'Right' && keyName != 'Ctrl' && keyName != 'Alt' && keyName != 'Shift')\n              vimGlobalState.exCommandHistoryController.reset();\n          }\n        }\n        if (command.type == 'keyToEx') {\n          // Handle user defined Ex to Ex mappings\n          exCommandDispatcher.processCommand(cm, command.exArgs.input);\n        } else {\n          if (vim.visualMode) {\n            showPrompt(cm, { onClose: onPromptClose, prefix: ':', value: '\\'<,\\'>',\n                onKeyDown: onPromptKeyDown, selectValueOnOpen: false});\n          } else {\n            showPrompt(cm, { onClose: onPromptClose, prefix: ':',\n                onKeyDown: onPromptKeyDown});\n          }\n        }\n      },\n      evalInput: function(cm, vim) {\n        // If the motion command is set, execute both the operator and motion.\n        // Otherwise return.\n        var inputState = vim.inputState;\n        var motion = inputState.motion;\n        var motionArgs = inputState.motionArgs || {};\n        var operator = inputState.operator;\n        var operatorArgs = inputState.operatorArgs || {};\n        var registerName = inputState.registerName;\n        var sel = vim.sel;\n        // TODO: Make sure cm and vim selections are identical outside visual mode.\n        var origHead = copyCursor(vim.visualMode ? clipCursorToContent(cm, sel.head): cm.getCursor('head'));\n        var origAnchor = copyCursor(vim.visualMode ? clipCursorToContent(cm, sel.anchor) : cm.getCursor('anchor'));\n        var oldHead = copyCursor(origHead);\n        var oldAnchor = copyCursor(origAnchor);\n        var newHead, newAnchor;\n        var repeat;\n        if (operator) {\n          this.recordLastEdit(vim, inputState);\n        }\n        if (inputState.repeatOverride !== undefined) {\n          // If repeatOverride is specified, that takes precedence over the\n          // input state's repeat. Used by Ex mode and can be user defined.\n          repeat = inputState.repeatOverride;\n        } else {\n          repeat = inputState.getRepeat();\n        }\n        if (repeat > 0 && motionArgs.explicitRepeat) {\n          motionArgs.repeatIsExplicit = true;\n        } else if (motionArgs.noRepeat ||\n            (!motionArgs.explicitRepeat && repeat === 0)) {\n          repeat = 1;\n          motionArgs.repeatIsExplicit = false;\n        }\n        if (inputState.selectedCharacter) {\n          // If there is a character input, stick it in all of the arg arrays.\n          motionArgs.selectedCharacter = operatorArgs.selectedCharacter =\n              inputState.selectedCharacter;\n        }\n        motionArgs.repeat = repeat;\n        clearInputState(cm);\n        if (motion) {\n          var motionResult = motions[motion](cm, origHead, motionArgs, vim, inputState);\n          vim.lastMotion = motions[motion];\n          if (!motionResult) {\n            return;\n          }\n          if (motionArgs.toJumplist) {\n            var jumpList = vimGlobalState.jumpList;\n            // if the current motion is # or *, use cachedCursor\n            var cachedCursor = jumpList.cachedCursor;\n            if (cachedCursor) {\n              recordJumpPosition(cm, cachedCursor, motionResult);\n              delete jumpList.cachedCursor;\n            } else {\n              recordJumpPosition(cm, origHead, motionResult);\n            }\n          }\n          if (motionResult instanceof Array) {\n            newAnchor = motionResult[0];\n            newHead = motionResult[1];\n          } else {\n            newHead = motionResult;\n          }\n          // TODO: Handle null returns from motion commands better.\n          if (!newHead) {\n            newHead = copyCursor(origHead);\n          }\n          if (vim.visualMode) {\n            if (!(vim.visualBlock && newHead.ch === Infinity)) {\n              newHead = clipCursorToContent(cm, newHead);\n            }\n            if (newAnchor) {\n              newAnchor = clipCursorToContent(cm, newAnchor);\n            }\n            newAnchor = newAnchor || oldAnchor;\n            sel.anchor = newAnchor;\n            sel.head = newHead;\n            updateCmSelection(cm);\n            updateMark(cm, vim, '<',\n                cursorIsBefore(newAnchor, newHead) ? newAnchor\n                    : newHead);\n            updateMark(cm, vim, '>',\n                cursorIsBefore(newAnchor, newHead) ? newHead\n                    : newAnchor);\n          } else if (!operator) {\n            newHead = clipCursorToContent(cm, newHead);\n            cm.setCursor(newHead.line, newHead.ch);\n          }\n        }\n        if (operator) {\n          if (operatorArgs.lastSel) {\n            // Replaying a visual mode operation\n            newAnchor = oldAnchor;\n            var lastSel = operatorArgs.lastSel;\n            var lineOffset = Math.abs(lastSel.head.line - lastSel.anchor.line);\n            var chOffset = Math.abs(lastSel.head.ch - lastSel.anchor.ch);\n            if (lastSel.visualLine) {\n              // Linewise Visual mode: The same number of lines.\n              newHead = new Pos(oldAnchor.line + lineOffset, oldAnchor.ch);\n            } else if (lastSel.visualBlock) {\n              // Blockwise Visual mode: The same number of lines and columns.\n              newHead = new Pos(oldAnchor.line + lineOffset, oldAnchor.ch + chOffset);\n            } else if (lastSel.head.line == lastSel.anchor.line) {\n              // Normal Visual mode within one line: The same number of characters.\n              newHead = new Pos(oldAnchor.line, oldAnchor.ch + chOffset);\n            } else {\n              // Normal Visual mode with several lines: The same number of lines, in the\n              // last line the same number of characters as in the last line the last time.\n              newHead = new Pos(oldAnchor.line + lineOffset, oldAnchor.ch);\n            }\n            vim.visualMode = true;\n            vim.visualLine = lastSel.visualLine;\n            vim.visualBlock = lastSel.visualBlock;\n            sel = vim.sel = {\n              anchor: newAnchor,\n              head: newHead\n            };\n            updateCmSelection(cm);\n          } else if (vim.visualMode) {\n            operatorArgs.lastSel = {\n              anchor: copyCursor(sel.anchor),\n              head: copyCursor(sel.head),\n              visualBlock: vim.visualBlock,\n              visualLine: vim.visualLine\n            };\n          }\n          var curStart, curEnd, linewise, mode;\n          var cmSel;\n          if (vim.visualMode) {\n            // Init visual op\n            curStart = cursorMin(sel.head, sel.anchor);\n            curEnd = cursorMax(sel.head, sel.anchor);\n            linewise = vim.visualLine || operatorArgs.linewise;\n            mode = vim.visualBlock ? 'block' :\n                   linewise ? 'line' :\n                   'char';\n            cmSel = makeCmSelection(cm, {\n              anchor: curStart,\n              head: curEnd\n            }, mode);\n            if (linewise) {\n              var ranges = cmSel.ranges;\n              if (mode == 'block') {\n                // Linewise operators in visual block mode extend to end of line\n                for (var i = 0; i < ranges.length; i++) {\n                  ranges[i].head.ch = lineLength(cm, ranges[i].head.line);\n                }\n              } else if (mode == 'line') {\n                ranges[0].head = new Pos(ranges[0].head.line + 1, 0);\n              }\n            }\n          } else {\n            // Init motion op\n            curStart = copyCursor(newAnchor || oldAnchor);\n            curEnd = copyCursor(newHead || oldHead);\n            if (cursorIsBefore(curEnd, curStart)) {\n              var tmp = curStart;\n              curStart = curEnd;\n              curEnd = tmp;\n            }\n            linewise = motionArgs.linewise || operatorArgs.linewise;\n            if (linewise) {\n              // Expand selection to entire line.\n              expandSelectionToLine(cm, curStart, curEnd);\n            } else if (motionArgs.forward) {\n              // Clip to trailing newlines only if the motion goes forward.\n              clipToLine(cm, curStart, curEnd);\n            }\n            mode = 'char';\n            var exclusive = !motionArgs.inclusive || linewise;\n            cmSel = makeCmSelection(cm, {\n              anchor: curStart,\n              head: curEnd\n            }, mode, exclusive);\n          }\n          cm.setSelections(cmSel.ranges, cmSel.primary);\n          vim.lastMotion = null;\n          operatorArgs.repeat = repeat; // For indent in visual mode.\n          operatorArgs.registerName = registerName;\n          // Keep track of linewise as it affects how paste and change behave.\n          operatorArgs.linewise = linewise;\n          var operatorMoveTo = operators[operator](\n            cm, operatorArgs, cmSel.ranges, oldAnchor, newHead);\n          if (vim.visualMode) {\n            exitVisualMode(cm, operatorMoveTo != null);\n          }\n          if (operatorMoveTo) {\n            cm.setCursor(operatorMoveTo);\n          }\n        }\n      },\n      recordLastEdit: function(vim, inputState, actionCommand) {\n        var macroModeState = vimGlobalState.macroModeState;\n        if (macroModeState.isPlaying) { return; }\n        vim.lastEditInputState = inputState;\n        vim.lastEditActionCommand = actionCommand;\n        macroModeState.lastInsertModeChanges.changes = [];\n        macroModeState.lastInsertModeChanges.expectCursorActivityForChange = false;\n        macroModeState.lastInsertModeChanges.visualBlock = vim.visualBlock ? vim.sel.head.line - vim.sel.anchor.line : 0;\n      }\n    };\n\n    /**\n     * typedef {Object{line:number,ch:number}} Cursor An object containing the\n     *     position of the cursor.\n     */\n    // All of the functions below return Cursor objects.\n    var motions = {\n      moveToTopLine: function(cm, _head, motionArgs) {\n        var line = getUserVisibleLines(cm).top + motionArgs.repeat -1;\n        return new Pos(line, findFirstNonWhiteSpaceCharacter(cm.getLine(line)));\n      },\n      moveToMiddleLine: function(cm) {\n        var range = getUserVisibleLines(cm);\n        var line = Math.floor((range.top + range.bottom) * 0.5);\n        return new Pos(line, findFirstNonWhiteSpaceCharacter(cm.getLine(line)));\n      },\n      moveToBottomLine: function(cm, _head, motionArgs) {\n        var line = getUserVisibleLines(cm).bottom - motionArgs.repeat +1;\n        return new Pos(line, findFirstNonWhiteSpaceCharacter(cm.getLine(line)));\n      },\n      expandToLine: function(_cm, head, motionArgs) {\n        // Expands forward to end of line, and then to next line if repeat is\n        // >1. Does not handle backward motion!\n        var cur = head;\n        return new Pos(cur.line + motionArgs.repeat - 1, Infinity);\n      },\n      findNext: function(cm, _head, motionArgs) {\n        var state = getSearchState(cm);\n        var query = state.getQuery();\n        if (!query) {\n          return;\n        }\n        var prev = !motionArgs.forward;\n        // If search is initiated with ? instead of /, negate direction.\n        prev = (state.isReversed()) ? !prev : prev;\n        highlightSearchMatches(cm, query);\n        return findNext(cm, prev/** prev */, query, motionArgs.repeat);\n      },\n      /**\n       * Find and select the next occurrence of the search query. If the cursor is currently\n       * within a match, then find and select the current match. Otherwise, find the next occurrence in the\n       * appropriate direction.\n       *\n       * This differs from `findNext` in the following ways:\n       *\n       * 1. Instead of only returning the \"from\", this returns a \"from\", \"to\" range.\n       * 2. If the cursor is currently inside a search match, this selects the current match\n       *    instead of the next match.\n       * 3. If there is no associated operator, this will turn on visual mode.\n       */\n      findAndSelectNextInclusive: function(cm, _head, motionArgs, vim, prevInputState) {\n        var state = getSearchState(cm);\n        var query = state.getQuery();\n\n        if (!query) {\n          return;\n        }\n\n        var prev = !motionArgs.forward;\n        prev = (state.isReversed()) ? !prev : prev;\n\n        // next: [from, to] | null\n        var next = findNextFromAndToInclusive(cm, prev, query, motionArgs.repeat, vim);\n\n        // No matches.\n        if (!next) {\n          return;\n        }\n\n        // If there's an operator that will be executed, return the selection.\n        if (prevInputState.operator) {\n          return next;\n        }\n\n        // At this point, we know that there is no accompanying operator -- let's\n        // deal with visual mode in order to select an appropriate match.\n\n        var from = next[0];\n        // For whatever reason, when we use the \"to\" as returned by searchcursor.js directly,\n        // the resulting selection is extended by 1 char. Let's shrink it so that only the\n        // match is selected.\n        var to = new Pos(next[1].line, next[1].ch - 1);\n\n        if (vim.visualMode) {\n          // If we were in visualLine or visualBlock mode, get out of it.\n          if (vim.visualLine || vim.visualBlock) {\n            vim.visualLine = false;\n            vim.visualBlock = false;\n            CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"visual\", subMode: \"\"});\n          }\n\n          // If we're currently in visual mode, we should extend the selection to include\n          // the search result.\n          var anchor = vim.sel.anchor;\n          if (anchor) {\n            if (state.isReversed()) {\n              if (motionArgs.forward) {\n                return [anchor, from];\n              }\n\n              return [anchor, to];\n            } else {\n              if (motionArgs.forward) {\n                return [anchor, to];\n              }\n\n              return [anchor, from];\n            }\n          }\n        } else {\n          // Let's turn visual mode on.\n          vim.visualMode = true;\n          vim.visualLine = false;\n          vim.visualBlock = false;\n          CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"visual\", subMode: \"\"});\n        }\n\n        return prev ? [to, from] : [from, to];\n      },\n      goToMark: function(cm, _head, motionArgs, vim) {\n        var pos = getMarkPos(cm, vim, motionArgs.selectedCharacter);\n        if (pos) {\n          return motionArgs.linewise ? { line: pos.line, ch: findFirstNonWhiteSpaceCharacter(cm.getLine(pos.line)) } : pos;\n        }\n        return null;\n      },\n      moveToOtherHighlightedEnd: function(cm, _head, motionArgs, vim) {\n        if (vim.visualBlock && motionArgs.sameLine) {\n          var sel = vim.sel;\n          return [\n            clipCursorToContent(cm, new Pos(sel.anchor.line, sel.head.ch)),\n            clipCursorToContent(cm, new Pos(sel.head.line, sel.anchor.ch))\n          ];\n        } else {\n          return ([vim.sel.head, vim.sel.anchor]);\n        }\n      },\n      jumpToMark: function(cm, head, motionArgs, vim) {\n        var best = head;\n        for (var i = 0; i < motionArgs.repeat; i++) {\n          var cursor = best;\n          for (var key in vim.marks) {\n            if (!isLowerCase(key)) {\n              continue;\n            }\n            var mark = vim.marks[key].find();\n            var isWrongDirection = (motionArgs.forward) ?\n              cursorIsBefore(mark, cursor) : cursorIsBefore(cursor, mark);\n\n            if (isWrongDirection) {\n              continue;\n            }\n            if (motionArgs.linewise && (mark.line == cursor.line)) {\n              continue;\n            }\n\n            var equal = cursorEqual(cursor, best);\n            var between = (motionArgs.forward) ?\n              cursorIsBetween(cursor, mark, best) :\n              cursorIsBetween(best, mark, cursor);\n\n            if (equal || between) {\n              best = mark;\n            }\n          }\n        }\n\n        if (motionArgs.linewise) {\n          // Vim places the cursor on the first non-whitespace character of\n          // the line if there is one, else it places the cursor at the end\n          // of the line, regardless of whether a mark was found.\n          best = new Pos(best.line, findFirstNonWhiteSpaceCharacter(cm.getLine(best.line)));\n        }\n        return best;\n      },\n      moveByCharacters: function(_cm, head, motionArgs) {\n        var cur = head;\n        var repeat = motionArgs.repeat;\n        var ch = motionArgs.forward ? cur.ch + repeat : cur.ch - repeat;\n        return new Pos(cur.line, ch);\n      },\n      moveByLines: function(cm, head, motionArgs, vim) {\n        var cur = head;\n        var endCh = cur.ch;\n        // Depending what our last motion was, we may want to do different\n        // things. If our last motion was moving vertically, we want to\n        // preserve the HPos from our last horizontal move.  If our last motion\n        // was going to the end of a line, moving vertically we should go to\n        // the end of the line, etc.\n        switch (vim.lastMotion) {\n          case this.moveByLines:\n          case this.moveByDisplayLines:\n          case this.moveByScroll:\n          case this.moveToColumn:\n          case this.moveToEol:\n            endCh = vim.lastHPos;\n            break;\n          default:\n            vim.lastHPos = endCh;\n        }\n        var repeat = motionArgs.repeat+(motionArgs.repeatOffset||0);\n        var line = motionArgs.forward ? cur.line + repeat : cur.line - repeat;\n        var first = cm.firstLine();\n        var last = cm.lastLine();\n        var posV = cm.findPosV(cur, (motionArgs.forward ? repeat : -repeat), 'line', vim.lastHSPos);\n        var hasMarkedText = motionArgs.forward ? posV.line > line : posV.line < line;\n        if (hasMarkedText) {\n          line = posV.line;\n          endCh = posV.ch;\n        }\n        // Vim go to line begin or line end when cursor at first/last line and\n        // move to previous/next line is triggered.\n        if (line < first && cur.line == first){\n          return this.moveToStartOfLine(cm, head, motionArgs, vim);\n        } else if (line > last && cur.line == last){\n            return moveToEol(cm, head, motionArgs, vim, true);\n        }\n        if (motionArgs.toFirstChar){\n          endCh=findFirstNonWhiteSpaceCharacter(cm.getLine(line));\n          vim.lastHPos = endCh;\n        }\n        vim.lastHSPos = cm.charCoords(new Pos(line, endCh),'div').left;\n        return new Pos(line, endCh);\n      },\n      moveByDisplayLines: function(cm, head, motionArgs, vim) {\n        var cur = head;\n        switch (vim.lastMotion) {\n          case this.moveByDisplayLines:\n          case this.moveByScroll:\n          case this.moveByLines:\n          case this.moveToColumn:\n          case this.moveToEol:\n            break;\n          default:\n            vim.lastHSPos = cm.charCoords(cur,'div').left;\n        }\n        var repeat = motionArgs.repeat;\n        var res=cm.findPosV(cur,(motionArgs.forward ? repeat : -repeat),'line',vim.lastHSPos);\n        if (res.hitSide) {\n          if (motionArgs.forward) {\n            var lastCharCoords = cm.charCoords(res, 'div');\n            var goalCoords = { top: lastCharCoords.top + 8, left: vim.lastHSPos };\n            var res = cm.coordsChar(goalCoords, 'div');\n          } else {\n            var resCoords = cm.charCoords(new Pos(cm.firstLine(), 0), 'div');\n            resCoords.left = vim.lastHSPos;\n            res = cm.coordsChar(resCoords, 'div');\n          }\n        }\n        vim.lastHPos = res.ch;\n        return res;\n      },\n      moveByPage: function(cm, head, motionArgs) {\n        // CodeMirror only exposes functions that move the cursor page down, so\n        // doing this bad hack to move the cursor and move it back. evalInput\n        // will move the cursor to where it should be in the end.\n        var curStart = head;\n        var repeat = motionArgs.repeat;\n        return cm.findPosV(curStart, (motionArgs.forward ? repeat : -repeat), 'page');\n      },\n      moveByParagraph: function(cm, head, motionArgs) {\n        var dir = motionArgs.forward ? 1 : -1;\n        return findParagraph(cm, head, motionArgs.repeat, dir);\n      },\n      moveBySentence: function(cm, head, motionArgs) {\n        var dir = motionArgs.forward ? 1 : -1;\n        return findSentence(cm, head, motionArgs.repeat, dir);\n      },\n      moveByScroll: function(cm, head, motionArgs, vim) {\n        var scrollbox = cm.getScrollInfo();\n        var curEnd = null;\n        var repeat = motionArgs.repeat;\n        if (!repeat) {\n          repeat = scrollbox.clientHeight / (2 * cm.defaultTextHeight());\n        }\n        var orig = cm.charCoords(head, 'local');\n        motionArgs.repeat = repeat;\n        curEnd = motions.moveByDisplayLines(cm, head, motionArgs, vim);\n        if (!curEnd) {\n          return null;\n        }\n        var dest = cm.charCoords(curEnd, 'local');\n        cm.scrollTo(null, scrollbox.top + dest.top - orig.top);\n        return curEnd;\n      },\n      moveByWords: function(cm, head, motionArgs) {\n        return moveToWord(cm, head, motionArgs.repeat, !!motionArgs.forward,\n            !!motionArgs.wordEnd, !!motionArgs.bigWord);\n      },\n      moveTillCharacter: function(cm, _head, motionArgs) {\n        var repeat = motionArgs.repeat;\n        var curEnd = moveToCharacter(cm, repeat, motionArgs.forward,\n            motionArgs.selectedCharacter);\n        var increment = motionArgs.forward ? -1 : 1;\n        recordLastCharacterSearch(increment, motionArgs);\n        if (!curEnd) return null;\n        curEnd.ch += increment;\n        return curEnd;\n      },\n      moveToCharacter: function(cm, head, motionArgs) {\n        var repeat = motionArgs.repeat;\n        recordLastCharacterSearch(0, motionArgs);\n        return moveToCharacter(cm, repeat, motionArgs.forward,\n            motionArgs.selectedCharacter) || head;\n      },\n      moveToSymbol: function(cm, head, motionArgs) {\n        var repeat = motionArgs.repeat;\n        return findSymbol(cm, repeat, motionArgs.forward,\n            motionArgs.selectedCharacter) || head;\n      },\n      moveToColumn: function(cm, head, motionArgs, vim) {\n        var repeat = motionArgs.repeat;\n        // repeat is equivalent to which column we want to move to!\n        vim.lastHPos = repeat - 1;\n        vim.lastHSPos = cm.charCoords(head,'div').left;\n        return moveToColumn(cm, repeat);\n      },\n      moveToEol: function(cm, head, motionArgs, vim) {\n        return moveToEol(cm, head, motionArgs, vim, false);\n      },\n      moveToFirstNonWhiteSpaceCharacter: function(cm, head) {\n        // Go to the start of the line where the text begins, or the end for\n        // whitespace-only lines\n        var cursor = head;\n        return new Pos(cursor.line,\n                   findFirstNonWhiteSpaceCharacter(cm.getLine(cursor.line)));\n      },\n      moveToMatchedSymbol: function(cm, head) {\n        var cursor = head;\n        var line = cursor.line;\n        var ch = cursor.ch;\n        var lineText = cm.getLine(line);\n        var symbol;\n        for (; ch < lineText.length; ch++) {\n          symbol = lineText.charAt(ch);\n          if (symbol && isMatchableSymbol(symbol)) {\n            var style = cm.getTokenTypeAt(new Pos(line, ch + 1));\n            if (style !== \"string\" && style !== \"comment\") {\n              break;\n            }\n          }\n        }\n        if (ch < lineText.length) {\n          // Only include angle brackets in analysis if they are being matched.\n          var re = (ch === '<' || ch === '>') ? /[(){}[\\]<>]/ : /[(){}[\\]]/;\n          var matched = cm.findMatchingBracket(new Pos(line, ch), {bracketRegex: re});\n          return matched.to;\n        } else {\n          return cursor;\n        }\n      },\n      moveToStartOfLine: function(_cm, head) {\n        return new Pos(head.line, 0);\n      },\n      moveToLineOrEdgeOfDocument: function(cm, _head, motionArgs) {\n        var lineNum = motionArgs.forward ? cm.lastLine() : cm.firstLine();\n        if (motionArgs.repeatIsExplicit) {\n          lineNum = motionArgs.repeat - cm.getOption('firstLineNumber');\n        }\n        return new Pos(lineNum,\n                   findFirstNonWhiteSpaceCharacter(cm.getLine(lineNum)));\n      },\n      moveToStartOfDisplayLine: function(cm) {\n        cm.execCommand(\"goLineLeft\");\n        return cm.getCursor();\n      },\n      moveToEndOfDisplayLine: function(cm) {\n        cm.execCommand(\"goLineRight\");\n        var head = cm.getCursor();\n        if (head.sticky == \"before\") head.ch--;\n        return head;\n      },\n      textObjectManipulation: function(cm, head, motionArgs, vim) {\n        // TODO: lots of possible exceptions that can be thrown here. Try da(\n        //     outside of a () block.\n        var mirroredPairs = {'(': ')', ')': '(',\n                             '{': '}', '}': '{',\n                             '[': ']', ']': '[',\n                             '<': '>', '>': '<'};\n        var selfPaired = {'\\'': true, '\"': true, '`': true};\n\n        var character = motionArgs.selectedCharacter;\n        // 'b' refers to  '()' block.\n        // 'B' refers to  '{}' block.\n        if (character == 'b') {\n          character = '(';\n        } else if (character == 'B') {\n          character = '{';\n        }\n\n        // Inclusive is the difference between a and i\n        // TODO: Instead of using the additional text object map to perform text\n        //     object operations, merge the map into the defaultKeyMap and use\n        //     motionArgs to define behavior. Define separate entries for 'aw',\n        //     'iw', 'a[', 'i[', etc.\n        var inclusive = !motionArgs.textObjectInner;\n\n        var tmp;\n        if (mirroredPairs[character]) {\n          tmp = selectCompanionObject(cm, head, character, inclusive);\n        } else if (selfPaired[character]) {\n          tmp = findBeginningAndEnd(cm, head, character, inclusive);\n        } else if (character === 'W') {\n          tmp = expandWordUnderCursor(cm, inclusive, true /** forward */,\n                                                     true /** bigWord */);\n        } else if (character === 'w') {\n          tmp = expandWordUnderCursor(cm, inclusive, true /** forward */,\n                                                     false /** bigWord */);\n        } else if (character === 'p') {\n          tmp = findParagraph(cm, head, motionArgs.repeat, 0, inclusive);\n          motionArgs.linewise = true;\n          if (vim.visualMode) {\n            if (!vim.visualLine) { vim.visualLine = true; }\n          } else {\n            var operatorArgs = vim.inputState.operatorArgs;\n            if (operatorArgs) { operatorArgs.linewise = true; }\n            tmp.end.line--;\n          }\n        } else if (character === 't') {\n          tmp = expandTagUnderCursor(cm, head, inclusive);\n        } else if (character === 's') {\n          // account for cursor on end of sentence symbol\n          var content = cm.getLine(head.line);\n          if (head.ch > 0 && isEndOfSentenceSymbol(content[head.ch])) {\n            head.ch -= 1;\n          }\n          var end = getSentence(cm, head, motionArgs.repeat, 1, inclusive);\n          var start = getSentence(cm, head, motionArgs.repeat, -1, inclusive);\n          // closer vim behaviour, 'a' only takes the space after the sentence if there is one before and after\n          if (isWhiteSpaceString(cm.getLine(start.line)[start.ch])\n              && isWhiteSpaceString(cm.getLine(end.line)[end.ch -1])) {\n            start = {line: start.line, ch: start.ch + 1};\n          }\n          tmp = {start: start, end: end};\n        } else {\n          // No text object defined for this, don't move.\n          return null;\n        }\n\n        if (!cm.state.vim.visualMode) {\n          return [tmp.start, tmp.end];\n        } else {\n          return expandSelection(cm, tmp.start, tmp.end);\n        }\n      },\n\n      repeatLastCharacterSearch: function(cm, head, motionArgs) {\n        var lastSearch = vimGlobalState.lastCharacterSearch;\n        var repeat = motionArgs.repeat;\n        var forward = motionArgs.forward === lastSearch.forward;\n        var increment = (lastSearch.increment ? 1 : 0) * (forward ? -1 : 1);\n        cm.moveH(-increment, 'char');\n        motionArgs.inclusive = forward ? true : false;\n        var curEnd = moveToCharacter(cm, repeat, forward, lastSearch.selectedCharacter);\n        if (!curEnd) {\n          cm.moveH(increment, 'char');\n          return head;\n        }\n        curEnd.ch += increment;\n        return curEnd;\n      }\n    };\n\n    function defineMotion(name, fn) {\n      motions[name] = fn;\n    }\n\n    function fillArray(val, times) {\n      var arr = [];\n      for (var i = 0; i < times; i++) {\n        arr.push(val);\n      }\n      return arr;\n    }\n    /**\n     * An operator acts on a text selection. It receives the list of selections\n     * as input. The corresponding CodeMirror selection is guaranteed to\n    * match the input selection.\n     */\n    var operators = {\n      change: function(cm, args, ranges) {\n        var finalHead, text;\n        var vim = cm.state.vim;\n        var anchor = ranges[0].anchor,\n            head = ranges[0].head;\n        if (!vim.visualMode) {\n          text = cm.getRange(anchor, head);\n          var lastState = vim.lastEditInputState || {};\n          if (lastState.motion == \"moveByWords\" && !isWhiteSpaceString(text)) {\n            // Exclude trailing whitespace if the range is not all whitespace.\n            var match = (/\\s+$/).exec(text);\n            if (match && lastState.motionArgs && lastState.motionArgs.forward) {\n              head = offsetCursor(head, 0, - match[0].length);\n              text = text.slice(0, - match[0].length);\n            }\n          }\n          var prevLineEnd = new Pos(anchor.line - 1, Number.MAX_VALUE);\n          var wasLastLine = cm.firstLine() == cm.lastLine();\n          if (head.line > cm.lastLine() && args.linewise && !wasLastLine) {\n            cm.replaceRange('', prevLineEnd, head);\n          } else {\n            cm.replaceRange('', anchor, head);\n          }\n          if (args.linewise) {\n            // Push the next line back down, if there is a next line.\n            if (!wasLastLine) {\n              cm.setCursor(prevLineEnd);\n              CodeMirror.commands.newlineAndIndent(cm);\n            }\n            // make sure cursor ends up at the end of the line.\n            anchor.ch = Number.MAX_VALUE;\n          }\n          finalHead = anchor;\n        } else if (args.fullLine) {\n            head.ch = Number.MAX_VALUE;\n            head.line--;\n            cm.setSelection(anchor, head);\n            text = cm.getSelection();\n            cm.replaceSelection(\"\");\n            finalHead = anchor;\n        } else {\n          text = cm.getSelection();\n          var replacement = fillArray('', ranges.length);\n          cm.replaceSelections(replacement);\n          finalHead = cursorMin(ranges[0].head, ranges[0].anchor);\n        }\n        vimGlobalState.registerController.pushText(\n            args.registerName, 'change', text,\n            args.linewise, ranges.length > 1);\n        actions.enterInsertMode(cm, {head: finalHead}, cm.state.vim);\n      },\n      // delete is a javascript keyword.\n      'delete': function(cm, args, ranges) {\n        var finalHead, text;\n        var vim = cm.state.vim;\n        if (!vim.visualBlock) {\n          var anchor = ranges[0].anchor,\n              head = ranges[0].head;\n          if (args.linewise &&\n              head.line != cm.firstLine() &&\n              anchor.line == cm.lastLine() &&\n              anchor.line == head.line - 1) {\n            // Special case for dd on last line (and first line).\n            if (anchor.line == cm.firstLine()) {\n              anchor.ch = 0;\n            } else {\n              anchor = new Pos(anchor.line - 1, lineLength(cm, anchor.line - 1));\n            }\n          }\n          text = cm.getRange(anchor, head);\n          cm.replaceRange('', anchor, head);\n          finalHead = anchor;\n          if (args.linewise) {\n            finalHead = motions.moveToFirstNonWhiteSpaceCharacter(cm, anchor);\n          }\n        } else {\n          text = cm.getSelection();\n          var replacement = fillArray('', ranges.length);\n          cm.replaceSelections(replacement);\n          finalHead = cursorMin(ranges[0].head, ranges[0].anchor);\n        }\n        vimGlobalState.registerController.pushText(\n            args.registerName, 'delete', text,\n            args.linewise, vim.visualBlock);\n        return clipCursorToContent(cm, finalHead);\n      },\n      indent: function(cm, args, ranges) {\n        var vim = cm.state.vim;\n        if (cm.indentMore) {\n          var repeat = (vim.visualMode) ? args.repeat : 1;\n          for (var j = 0; j < repeat; j++) {\n            if (args.indentRight) cm.indentMore();\n            else cm.indentLess();\n          }\n        } else {\n          var startLine = ranges[0].anchor.line;\n          var endLine = vim.visualBlock ?\n            ranges[ranges.length - 1].anchor.line :\n            ranges[0].head.line;\n          // In visual mode, n> shifts the selection right n times, instead of\n          // shifting n lines right once.\n          var repeat = (vim.visualMode) ? args.repeat : 1;\n          if (args.linewise) {\n            // The only way to delete a newline is to delete until the start of\n            // the next line, so in linewise mode evalInput will include the next\n            // line. We don't want this in indent, so we go back a line.\n            endLine--;\n          }\n          for (var i = startLine; i <= endLine; i++) {\n            for (var j = 0; j < repeat; j++) {\n              cm.indentLine(i, args.indentRight);\n            }\n          }\n        }\n        return motions.moveToFirstNonWhiteSpaceCharacter(cm, ranges[0].anchor);\n      },\n      indentAuto: function(cm, _args, ranges) {\n        cm.execCommand(\"indentAuto\");\n        return motions.moveToFirstNonWhiteSpaceCharacter(cm, ranges[0].anchor);\n      },\n      changeCase: function(cm, args, ranges, oldAnchor, newHead) {\n        var selections = cm.getSelections();\n        var swapped = [];\n        var toLower = args.toLower;\n        for (var j = 0; j < selections.length; j++) {\n          var toSwap = selections[j];\n          var text = '';\n          if (toLower === true) {\n            text = toSwap.toLowerCase();\n          } else if (toLower === false) {\n            text = toSwap.toUpperCase();\n          } else {\n            for (var i = 0; i < toSwap.length; i++) {\n              var character = toSwap.charAt(i);\n              text += isUpperCase(character) ? character.toLowerCase() :\n                  character.toUpperCase();\n            }\n          }\n          swapped.push(text);\n        }\n        cm.replaceSelections(swapped);\n        if (args.shouldMoveCursor){\n          return newHead;\n        } else if (!cm.state.vim.visualMode && args.linewise && ranges[0].anchor.line + 1 == ranges[0].head.line) {\n          return motions.moveToFirstNonWhiteSpaceCharacter(cm, oldAnchor);\n        } else if (args.linewise){\n          return oldAnchor;\n        } else {\n          return cursorMin(ranges[0].anchor, ranges[0].head);\n        }\n      },\n      yank: function(cm, args, ranges, oldAnchor) {\n        var vim = cm.state.vim;\n        var text = cm.getSelection();\n        var endPos = vim.visualMode\n          ? cursorMin(vim.sel.anchor, vim.sel.head, ranges[0].head, ranges[0].anchor)\n          : oldAnchor;\n        vimGlobalState.registerController.pushText(\n            args.registerName, 'yank',\n            text, args.linewise, vim.visualBlock);\n        return endPos;\n      }\n    };\n\n    function defineOperator(name, fn) {\n      operators[name] = fn;\n    }\n\n    var actions = {\n      jumpListWalk: function(cm, actionArgs, vim) {\n        if (vim.visualMode) {\n          return;\n        }\n        var repeat = actionArgs.repeat;\n        var forward = actionArgs.forward;\n        var jumpList = vimGlobalState.jumpList;\n\n        var mark = jumpList.move(cm, forward ? repeat : -repeat);\n        var markPos = mark ? mark.find() : undefined;\n        markPos = markPos ? markPos : cm.getCursor();\n        cm.setCursor(markPos);\n      },\n      scroll: function(cm, actionArgs, vim) {\n        if (vim.visualMode) {\n          return;\n        }\n        var repeat = actionArgs.repeat || 1;\n        var lineHeight = cm.defaultTextHeight();\n        var top = cm.getScrollInfo().top;\n        var delta = lineHeight * repeat;\n        var newPos = actionArgs.forward ? top + delta : top - delta;\n        var cursor = copyCursor(cm.getCursor());\n        var cursorCoords = cm.charCoords(cursor, 'local');\n        if (actionArgs.forward) {\n          if (newPos > cursorCoords.top) {\n             cursor.line += (newPos - cursorCoords.top) / lineHeight;\n             cursor.line = Math.ceil(cursor.line);\n             cm.setCursor(cursor);\n             cursorCoords = cm.charCoords(cursor, 'local');\n             cm.scrollTo(null, cursorCoords.top);\n          } else {\n             // Cursor stays within bounds.  Just reposition the scroll window.\n             cm.scrollTo(null, newPos);\n          }\n        } else {\n          var newBottom = newPos + cm.getScrollInfo().clientHeight;\n          if (newBottom < cursorCoords.bottom) {\n             cursor.line -= (cursorCoords.bottom - newBottom) / lineHeight;\n             cursor.line = Math.floor(cursor.line);\n             cm.setCursor(cursor);\n             cursorCoords = cm.charCoords(cursor, 'local');\n             cm.scrollTo(\n                 null, cursorCoords.bottom - cm.getScrollInfo().clientHeight);\n          } else {\n             // Cursor stays within bounds.  Just reposition the scroll window.\n             cm.scrollTo(null, newPos);\n          }\n        }\n      },\n      scrollToCursor: function(cm, actionArgs) {\n        var lineNum = cm.getCursor().line;\n        var charCoords = cm.charCoords(new Pos(lineNum, 0), 'local');\n        var height = cm.getScrollInfo().clientHeight;\n        var y = charCoords.top;\n        switch (actionArgs.position) {\n          case 'center': y = charCoords.bottom - height / 2;\n            break;\n          case 'bottom':\n            var lineLastCharPos = new Pos(lineNum, cm.getLine(lineNum).length - 1);\n            var lineLastCharCoords = cm.charCoords(lineLastCharPos, 'local');\n            var lineHeight = lineLastCharCoords.bottom - y;\n            y = y - height + lineHeight;\n            break;\n        }\n        cm.scrollTo(null, y);\n      },\n      replayMacro: function(cm, actionArgs, vim) {\n        var registerName = actionArgs.selectedCharacter;\n        var repeat = actionArgs.repeat;\n        var macroModeState = vimGlobalState.macroModeState;\n        if (registerName == '@') {\n          registerName = macroModeState.latestRegister;\n        } else {\n          macroModeState.latestRegister = registerName;\n        }\n        while(repeat--){\n          executeMacroRegister(cm, vim, macroModeState, registerName);\n        }\n      },\n      enterMacroRecordMode: function(cm, actionArgs) {\n        var macroModeState = vimGlobalState.macroModeState;\n        var registerName = actionArgs.selectedCharacter;\n        if (vimGlobalState.registerController.isValidRegister(registerName)) {\n          macroModeState.enterMacroRecordMode(cm, registerName);\n        }\n      },\n      toggleOverwrite: function(cm) {\n        if (!cm.state.overwrite) {\n          cm.toggleOverwrite(true);\n          cm.setOption('keyMap', 'vim-replace');\n          CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"replace\"});\n        } else {\n          cm.toggleOverwrite(false);\n          cm.setOption('keyMap', 'vim-insert');\n          CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"insert\"});\n        }\n      },\n      enterInsertMode: function(cm, actionArgs, vim) {\n        if (cm.getOption('readOnly')) { return; }\n        vim.insertMode = true;\n        vim.insertModeRepeat = actionArgs && actionArgs.repeat || 1;\n        var insertAt = (actionArgs) ? actionArgs.insertAt : null;\n        var sel = vim.sel;\n        var head = actionArgs.head || cm.getCursor('head');\n        var height = cm.listSelections().length;\n        if (insertAt == 'eol') {\n          head = new Pos(head.line, lineLength(cm, head.line));\n        } else if (insertAt == 'bol') {\n          head = new Pos(head.line, 0);\n        } else if (insertAt == 'charAfter') {\n          head = offsetCursor(head, 0, 1);\n        } else if (insertAt == 'firstNonBlank') {\n          head = motions.moveToFirstNonWhiteSpaceCharacter(cm, head);\n        } else if (insertAt == 'startOfSelectedArea') {\n          if (!vim.visualMode)\n              return;\n          if (!vim.visualBlock) {\n            if (sel.head.line < sel.anchor.line) {\n              head = sel.head;\n            } else {\n              head = new Pos(sel.anchor.line, 0);\n            }\n          } else {\n            head = new Pos(\n                Math.min(sel.head.line, sel.anchor.line),\n                Math.min(sel.head.ch, sel.anchor.ch));\n            height = Math.abs(sel.head.line - sel.anchor.line) + 1;\n          }\n        } else if (insertAt == 'endOfSelectedArea') {\n            if (!vim.visualMode)\n              return;\n          if (!vim.visualBlock) {\n            if (sel.head.line >= sel.anchor.line) {\n              head = offsetCursor(sel.head, 0, 1);\n            } else {\n              head = new Pos(sel.anchor.line, 0);\n            }\n          } else {\n            head = new Pos(\n                Math.min(sel.head.line, sel.anchor.line),\n                Math.max(sel.head.ch, sel.anchor.ch) + 1);\n            height = Math.abs(sel.head.line - sel.anchor.line) + 1;\n          }\n        } else if (insertAt == 'inplace') {\n          if (vim.visualMode){\n            return;\n          }\n        } else if (insertAt == 'lastEdit') {\n          head = getLastEditPos(cm) || head;\n        }\n        cm.setOption('disableInput', false);\n        if (actionArgs && actionArgs.replace) {\n          // Handle Replace-mode as a special case of insert mode.\n          cm.toggleOverwrite(true);\n          cm.setOption('keyMap', 'vim-replace');\n          CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"replace\"});\n        } else {\n          cm.toggleOverwrite(false);\n          cm.setOption('keyMap', 'vim-insert');\n          CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"insert\"});\n        }\n        if (!vimGlobalState.macroModeState.isPlaying) {\n          // Only record if not replaying.\n          cm.on('change', onChange);\n          CodeMirror.on(cm.getInputField(), 'keydown', onKeyEventTargetKeyDown);\n        }\n        if (vim.visualMode) {\n          exitVisualMode(cm);\n        }\n        selectForInsert(cm, head, height);\n      },\n      toggleVisualMode: function(cm, actionArgs, vim) {\n        var repeat = actionArgs.repeat;\n        var anchor = cm.getCursor();\n        var head;\n        // TODO: The repeat should actually select number of characters/lines\n        //     equal to the repeat times the size of the previous visual\n        //     operation.\n        if (!vim.visualMode) {\n          // Entering visual mode\n          vim.visualMode = true;\n          vim.visualLine = !!actionArgs.linewise;\n          vim.visualBlock = !!actionArgs.blockwise;\n          head = clipCursorToContent(\n              cm, new Pos(anchor.line, anchor.ch + repeat - 1));\n          vim.sel = {\n            anchor: anchor,\n            head: head\n          };\n          CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"visual\", subMode: vim.visualLine ? \"linewise\" : vim.visualBlock ? \"blockwise\" : \"\"});\n          updateCmSelection(cm);\n          updateMark(cm, vim, '<', cursorMin(anchor, head));\n          updateMark(cm, vim, '>', cursorMax(anchor, head));\n        } else if (vim.visualLine ^ actionArgs.linewise ||\n            vim.visualBlock ^ actionArgs.blockwise) {\n          // Toggling between modes\n          vim.visualLine = !!actionArgs.linewise;\n          vim.visualBlock = !!actionArgs.blockwise;\n          CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"visual\", subMode: vim.visualLine ? \"linewise\" : vim.visualBlock ? \"blockwise\" : \"\"});\n          updateCmSelection(cm);\n        } else {\n          exitVisualMode(cm);\n        }\n      },\n      reselectLastSelection: function(cm, _actionArgs, vim) {\n        var lastSelection = vim.lastSelection;\n        if (vim.visualMode) {\n          updateLastSelection(cm, vim);\n        }\n        if (lastSelection) {\n          var anchor = lastSelection.anchorMark.find();\n          var head = lastSelection.headMark.find();\n          if (!anchor || !head) {\n            // If the marks have been destroyed due to edits, do nothing.\n            return;\n          }\n          vim.sel = {\n            anchor: anchor,\n            head: head\n          };\n          vim.visualMode = true;\n          vim.visualLine = lastSelection.visualLine;\n          vim.visualBlock = lastSelection.visualBlock;\n          updateCmSelection(cm);\n          updateMark(cm, vim, '<', cursorMin(anchor, head));\n          updateMark(cm, vim, '>', cursorMax(anchor, head));\n          CodeMirror.signal(cm, 'vim-mode-change', {\n            mode: 'visual',\n            subMode: vim.visualLine ? 'linewise' :\n                     vim.visualBlock ? 'blockwise' : ''});\n        }\n      },\n      joinLines: function(cm, actionArgs, vim) {\n        var curStart, curEnd;\n        if (vim.visualMode) {\n          curStart = cm.getCursor('anchor');\n          curEnd = cm.getCursor('head');\n          if (cursorIsBefore(curEnd, curStart)) {\n            var tmp = curEnd;\n            curEnd = curStart;\n            curStart = tmp;\n          }\n          curEnd.ch = lineLength(cm, curEnd.line) - 1;\n        } else {\n          // Repeat is the number of lines to join. Minimum 2 lines.\n          var repeat = Math.max(actionArgs.repeat, 2);\n          curStart = cm.getCursor();\n          curEnd = clipCursorToContent(cm, new Pos(curStart.line + repeat - 1,\n                                               Infinity));\n        }\n        var finalCh = 0;\n        for (var i = curStart.line; i < curEnd.line; i++) {\n          finalCh = lineLength(cm, curStart.line);\n          var tmp = new Pos(curStart.line + 1,\n                        lineLength(cm, curStart.line + 1));\n          var text = cm.getRange(curStart, tmp);\n          text = actionArgs.keepSpaces\n            ? text.replace(/\\n\\r?/g, '')\n            : text.replace(/\\n\\s*/g, ' ');\n          cm.replaceRange(text, curStart, tmp);\n        }\n        var curFinalPos = new Pos(curStart.line, finalCh);\n        if (vim.visualMode) {\n          exitVisualMode(cm, false);\n        }\n        cm.setCursor(curFinalPos);\n      },\n      newLineAndEnterInsertMode: function(cm, actionArgs, vim) {\n        vim.insertMode = true;\n        var insertAt = copyCursor(cm.getCursor());\n        if (insertAt.line === cm.firstLine() && !actionArgs.after) {\n          // Special case for inserting newline before start of document.\n          cm.replaceRange('\\n', new Pos(cm.firstLine(), 0));\n          cm.setCursor(cm.firstLine(), 0);\n        } else {\n          insertAt.line = (actionArgs.after) ? insertAt.line :\n              insertAt.line - 1;\n          insertAt.ch = lineLength(cm, insertAt.line);\n          cm.setCursor(insertAt);\n          var newlineFn = CodeMirror.commands.newlineAndIndentContinueComment ||\n              CodeMirror.commands.newlineAndIndent;\n          newlineFn(cm);\n        }\n        this.enterInsertMode(cm, { repeat: actionArgs.repeat }, vim);\n      },\n      paste: function(cm, actionArgs, vim) {\n        var cur = copyCursor(cm.getCursor());\n        var register = vimGlobalState.registerController.getRegister(\n            actionArgs.registerName);\n        var text = register.toString();\n        if (!text) {\n          return;\n        }\n        if (actionArgs.matchIndent) {\n          var tabSize = cm.getOption(\"tabSize\");\n          // length that considers tabs and tabSize\n          var whitespaceLength = function(str) {\n            var tabs = (str.split(\"\\t\").length - 1);\n            var spaces = (str.split(\" \").length - 1);\n            return tabs * tabSize + spaces * 1;\n          };\n          var currentLine = cm.getLine(cm.getCursor().line);\n          var indent = whitespaceLength(currentLine.match(/^\\s*/)[0]);\n          // chomp last newline b/c don't want it to match /^\\s*/gm\n          var chompedText = text.replace(/\\n$/, '');\n          var wasChomped = text !== chompedText;\n          var firstIndent = whitespaceLength(text.match(/^\\s*/)[0]);\n          var text = chompedText.replace(/^\\s*/gm, function(wspace) {\n            var newIndent = indent + (whitespaceLength(wspace) - firstIndent);\n            if (newIndent < 0) {\n              return \"\";\n            }\n            else if (cm.getOption(\"indentWithTabs\")) {\n              var quotient = Math.floor(newIndent / tabSize);\n              return Array(quotient + 1).join('\\t');\n            }\n            else {\n              return Array(newIndent + 1).join(' ');\n            }\n          });\n          text += wasChomped ? \"\\n\" : \"\";\n        }\n        if (actionArgs.repeat > 1) {\n          var text = Array(actionArgs.repeat + 1).join(text);\n        }\n        var linewise = register.linewise;\n        var blockwise = register.blockwise;\n        if (blockwise) {\n          text = text.split('\\n');\n          if (linewise) {\n              text.pop();\n          }\n          for (var i = 0; i < text.length; i++) {\n            text[i] = (text[i] == '') ? ' ' : text[i];\n          }\n          cur.ch += actionArgs.after ? 1 : 0;\n          cur.ch = Math.min(lineLength(cm, cur.line), cur.ch);\n        } else if (linewise) {\n          if(vim.visualMode) {\n            text = vim.visualLine ? text.slice(0, -1) : '\\n' + text.slice(0, text.length - 1) + '\\n';\n          } else if (actionArgs.after) {\n            // Move the newline at the end to the start instead, and paste just\n            // before the newline character of the line we are on right now.\n            text = '\\n' + text.slice(0, text.length - 1);\n            cur.ch = lineLength(cm, cur.line);\n          } else {\n            cur.ch = 0;\n          }\n        } else {\n          cur.ch += actionArgs.after ? 1 : 0;\n        }\n        var curPosFinal;\n        var idx;\n        if (vim.visualMode) {\n          //  save the pasted text for reselection if the need arises\n          vim.lastPastedText = text;\n          var lastSelectionCurEnd;\n          var selectedArea = getSelectedAreaRange(cm, vim);\n          var selectionStart = selectedArea[0];\n          var selectionEnd = selectedArea[1];\n          var selectedText = cm.getSelection();\n          var selections = cm.listSelections();\n          var emptyStrings = new Array(selections.length).join('1').split('1');\n          // save the curEnd marker before it get cleared due to cm.replaceRange.\n          if (vim.lastSelection) {\n            lastSelectionCurEnd = vim.lastSelection.headMark.find();\n          }\n          // push the previously selected text to unnamed register\n          vimGlobalState.registerController.unnamedRegister.setText(selectedText);\n          if (blockwise) {\n            // first delete the selected text\n            cm.replaceSelections(emptyStrings);\n            // Set new selections as per the block length of the yanked text\n            selectionEnd = new Pos(selectionStart.line + text.length-1, selectionStart.ch);\n            cm.setCursor(selectionStart);\n            selectBlock(cm, selectionEnd);\n            cm.replaceSelections(text);\n            curPosFinal = selectionStart;\n          } else if (vim.visualBlock) {\n            cm.replaceSelections(emptyStrings);\n            cm.setCursor(selectionStart);\n            cm.replaceRange(text, selectionStart, selectionStart);\n            curPosFinal = selectionStart;\n          } else {\n            cm.replaceRange(text, selectionStart, selectionEnd);\n            curPosFinal = cm.posFromIndex(cm.indexFromPos(selectionStart) + text.length - 1);\n          }\n          // restore the the curEnd marker\n          if(lastSelectionCurEnd) {\n            vim.lastSelection.headMark = cm.setBookmark(lastSelectionCurEnd);\n          }\n          if (linewise) {\n            curPosFinal.ch=0;\n          }\n        } else {\n          if (blockwise) {\n            cm.setCursor(cur);\n            for (var i = 0; i < text.length; i++) {\n              var line = cur.line+i;\n              if (line > cm.lastLine()) {\n                cm.replaceRange('\\n',  new Pos(line, 0));\n              }\n              var lastCh = lineLength(cm, line);\n              if (lastCh < cur.ch) {\n                extendLineToColumn(cm, line, cur.ch);\n              }\n            }\n            cm.setCursor(cur);\n            selectBlock(cm, new Pos(cur.line + text.length-1, cur.ch));\n            cm.replaceSelections(text);\n            curPosFinal = cur;\n          } else {\n            cm.replaceRange(text, cur);\n            // Now fine tune the cursor to where we want it.\n            if (linewise && actionArgs.after) {\n              curPosFinal = new Pos(\n              cur.line + 1,\n              findFirstNonWhiteSpaceCharacter(cm.getLine(cur.line + 1)));\n            } else if (linewise && !actionArgs.after) {\n              curPosFinal = new Pos(\n                cur.line,\n                findFirstNonWhiteSpaceCharacter(cm.getLine(cur.line)));\n            } else if (!linewise && actionArgs.after) {\n              idx = cm.indexFromPos(cur);\n              curPosFinal = cm.posFromIndex(idx + text.length - 1);\n            } else {\n              idx = cm.indexFromPos(cur);\n              curPosFinal = cm.posFromIndex(idx + text.length);\n            }\n          }\n        }\n        if (vim.visualMode) {\n          exitVisualMode(cm, false);\n        }\n        cm.setCursor(curPosFinal);\n      },\n      undo: function(cm, actionArgs) {\n        cm.operation(function() {\n          repeatFn(cm, CodeMirror.commands.undo, actionArgs.repeat)();\n          cm.setCursor(cm.getCursor('anchor'));\n        });\n      },\n      redo: function(cm, actionArgs) {\n        repeatFn(cm, CodeMirror.commands.redo, actionArgs.repeat)();\n      },\n      setRegister: function(_cm, actionArgs, vim) {\n        vim.inputState.registerName = actionArgs.selectedCharacter;\n      },\n      setMark: function(cm, actionArgs, vim) {\n        var markName = actionArgs.selectedCharacter;\n        updateMark(cm, vim, markName, cm.getCursor());\n      },\n      replace: function(cm, actionArgs, vim) {\n        var replaceWith = actionArgs.selectedCharacter;\n        var curStart = cm.getCursor();\n        var replaceTo;\n        var curEnd;\n        var selections = cm.listSelections();\n        if (vim.visualMode) {\n          curStart = cm.getCursor('start');\n          curEnd = cm.getCursor('end');\n        } else {\n          var line = cm.getLine(curStart.line);\n          replaceTo = curStart.ch + actionArgs.repeat;\n          if (replaceTo > line.length) {\n            replaceTo=line.length;\n          }\n          curEnd = new Pos(curStart.line, replaceTo);\n        }\n        if (replaceWith=='\\n') {\n          if (!vim.visualMode) cm.replaceRange('', curStart, curEnd);\n          // special case, where vim help says to replace by just one line-break\n          (CodeMirror.commands.newlineAndIndentContinueComment || CodeMirror.commands.newlineAndIndent)(cm);\n        } else {\n          var replaceWithStr = cm.getRange(curStart, curEnd);\n          //replace all characters in range by selected, but keep linebreaks\n          replaceWithStr = replaceWithStr.replace(/[^\\n]/g, replaceWith);\n          if (vim.visualBlock) {\n            // Tabs are split in visua block before replacing\n            var spaces = new Array(cm.getOption(\"tabSize\")+1).join(' ');\n            replaceWithStr = cm.getSelection();\n            replaceWithStr = replaceWithStr.replace(/\\t/g, spaces).replace(/[^\\n]/g, replaceWith).split('\\n');\n            cm.replaceSelections(replaceWithStr);\n          } else {\n            cm.replaceRange(replaceWithStr, curStart, curEnd);\n          }\n          if (vim.visualMode) {\n            curStart = cursorIsBefore(selections[0].anchor, selections[0].head) ?\n                         selections[0].anchor : selections[0].head;\n            cm.setCursor(curStart);\n            exitVisualMode(cm, false);\n          } else {\n            cm.setCursor(offsetCursor(curEnd, 0, -1));\n          }\n        }\n      },\n      incrementNumberToken: function(cm, actionArgs) {\n        var cur = cm.getCursor();\n        var lineStr = cm.getLine(cur.line);\n        var re = /(-?)(?:(0x)([\\da-f]+)|(0b|0|)(\\d+))/gi;\n        var match;\n        var start;\n        var end;\n        var numberStr;\n        while ((match = re.exec(lineStr)) !== null) {\n          start = match.index;\n          end = start + match[0].length;\n          if (cur.ch < end)break;\n        }\n        if (!actionArgs.backtrack && (end <= cur.ch))return;\n        if (match) {\n          var baseStr = match[2] || match[4];\n          var digits = match[3] || match[5];\n          var increment = actionArgs.increase ? 1 : -1;\n          var base = {'0b': 2, '0': 8, '': 10, '0x': 16}[baseStr.toLowerCase()];\n          var number = parseInt(match[1] + digits, base) + (increment * actionArgs.repeat);\n          numberStr = number.toString(base);\n          var zeroPadding = baseStr ? new Array(digits.length - numberStr.length + 1 + match[1].length).join('0') : '';\n          if (numberStr.charAt(0) === '-') {\n            numberStr = '-' + baseStr + zeroPadding + numberStr.substr(1);\n          } else {\n            numberStr = baseStr + zeroPadding + numberStr;\n          }\n          var from = new Pos(cur.line, start);\n          var to = new Pos(cur.line, end);\n          cm.replaceRange(numberStr, from, to);\n        } else {\n          return;\n        }\n        cm.setCursor(new Pos(cur.line, start + numberStr.length - 1));\n      },\n      repeatLastEdit: function(cm, actionArgs, vim) {\n        var lastEditInputState = vim.lastEditInputState;\n        if (!lastEditInputState) { return; }\n        var repeat = actionArgs.repeat;\n        if (repeat && actionArgs.repeatIsExplicit) {\n          vim.lastEditInputState.repeatOverride = repeat;\n        } else {\n          repeat = vim.lastEditInputState.repeatOverride || repeat;\n        }\n        repeatLastEdit(cm, vim, repeat, false /** repeatForInsert */);\n      },\n      indent: function(cm, actionArgs) {\n        cm.indentLine(cm.getCursor().line, actionArgs.indentRight);\n      },\n      exitInsertMode: exitInsertMode\n    };\n\n    function defineAction(name, fn) {\n      actions[name] = fn;\n    }\n\n    /*\n     * Below are miscellaneous utility functions used by vim.js\n     */\n\n    /**\n     * Clips cursor to ensure that line is within the buffer's range\n     * If includeLineBreak is true, then allow cur.ch == lineLength.\n     */\n    function clipCursorToContent(cm, cur) {\n      var vim = cm.state.vim;\n      var includeLineBreak = vim.insertMode || vim.visualMode;\n      var line = Math.min(Math.max(cm.firstLine(), cur.line), cm.lastLine() );\n      var maxCh = lineLength(cm, line) - 1 + !!includeLineBreak;\n      var ch = Math.min(Math.max(0, cur.ch), maxCh);\n      return new Pos(line, ch);\n    }\n    function copyArgs(args) {\n      var ret = {};\n      for (var prop in args) {\n        if (args.hasOwnProperty(prop)) {\n          ret[prop] = args[prop];\n        }\n      }\n      return ret;\n    }\n    function offsetCursor(cur, offsetLine, offsetCh) {\n      if (typeof offsetLine === 'object') {\n        offsetCh = offsetLine.ch;\n        offsetLine = offsetLine.line;\n      }\n      return new Pos(cur.line + offsetLine, cur.ch + offsetCh);\n    }\n    function commandMatches(keys, keyMap, context, inputState) {\n      // Partial matches are not applied. They inform the key handler\n      // that the current key sequence is a subsequence of a valid key\n      // sequence, so that the key buffer is not cleared.\n      var match, partial = [], full = [];\n      for (var i = 0; i < keyMap.length; i++) {\n        var command = keyMap[i];\n        if (context == 'insert' && command.context != 'insert' ||\n            command.context && command.context != context ||\n            inputState.operator && command.type == 'action' ||\n            !(match = commandMatch(keys, command.keys))) { continue; }\n        if (match == 'partial') { partial.push(command); }\n        if (match == 'full') { full.push(command); }\n      }\n      return {\n        partial: partial.length && partial,\n        full: full.length && full\n      };\n    }\n    function commandMatch(pressed, mapped) {\n      if (mapped.slice(-11) == '<character>') {\n        // Last character matches anything.\n        var prefixLen = mapped.length - 11;\n        var pressedPrefix = pressed.slice(0, prefixLen);\n        var mappedPrefix = mapped.slice(0, prefixLen);\n        return pressedPrefix == mappedPrefix && pressed.length > prefixLen ? 'full' :\n               mappedPrefix.indexOf(pressedPrefix) == 0 ? 'partial' : false;\n      } else {\n        return pressed == mapped ? 'full' :\n               mapped.indexOf(pressed) == 0 ? 'partial' : false;\n      }\n    }\n    function lastChar(keys) {\n      var match = /^.*(<[^>]+>)$/.exec(keys);\n      var selectedCharacter = match ? match[1] : keys.slice(-1);\n      if (selectedCharacter.length > 1){\n        switch(selectedCharacter){\n          case '<CR>':\n            selectedCharacter='\\n';\n            break;\n          case '<Space>':\n            selectedCharacter=' ';\n            break;\n          default:\n            selectedCharacter='';\n            break;\n        }\n      }\n      return selectedCharacter;\n    }\n    function repeatFn(cm, fn, repeat) {\n      return function() {\n        for (var i = 0; i < repeat; i++) {\n          fn(cm);\n        }\n      };\n    }\n    function copyCursor(cur) {\n      return new Pos(cur.line, cur.ch);\n    }\n    function cursorEqual(cur1, cur2) {\n      return cur1.ch == cur2.ch && cur1.line == cur2.line;\n    }\n    function cursorIsBefore(cur1, cur2) {\n      if (cur1.line < cur2.line) {\n        return true;\n      }\n      if (cur1.line == cur2.line && cur1.ch < cur2.ch) {\n        return true;\n      }\n      return false;\n    }\n    function cursorMin(cur1, cur2) {\n      if (arguments.length > 2) {\n        cur2 = cursorMin.apply(undefined, Array.prototype.slice.call(arguments, 1));\n      }\n      return cursorIsBefore(cur1, cur2) ? cur1 : cur2;\n    }\n    function cursorMax(cur1, cur2) {\n      if (arguments.length > 2) {\n        cur2 = cursorMax.apply(undefined, Array.prototype.slice.call(arguments, 1));\n      }\n      return cursorIsBefore(cur1, cur2) ? cur2 : cur1;\n    }\n    function cursorIsBetween(cur1, cur2, cur3) {\n      // returns true if cur2 is between cur1 and cur3.\n      var cur1before2 = cursorIsBefore(cur1, cur2);\n      var cur2before3 = cursorIsBefore(cur2, cur3);\n      return cur1before2 && cur2before3;\n    }\n    function lineLength(cm, lineNum) {\n      return cm.getLine(lineNum).length;\n    }\n    function trim(s) {\n      if (s.trim) {\n        return s.trim();\n      }\n      return s.replace(/^\\s+|\\s+$/g, '');\n    }\n    function escapeRegex(s) {\n      return s.replace(/([.?*+$\\[\\]\\/\\\\(){}|\\-])/g, '\\\\$1');\n    }\n    function extendLineToColumn(cm, lineNum, column) {\n      var endCh = lineLength(cm, lineNum);\n      var spaces = new Array(column-endCh+1).join(' ');\n      cm.setCursor(new Pos(lineNum, endCh));\n      cm.replaceRange(spaces, cm.getCursor());\n    }\n    // This functions selects a rectangular block\n    // of text with selectionEnd as any of its corner\n    // Height of block:\n    // Difference in selectionEnd.line and first/last selection.line\n    // Width of the block:\n    // Distance between selectionEnd.ch and any(first considered here) selection.ch\n    function selectBlock(cm, selectionEnd) {\n      var selections = [], ranges = cm.listSelections();\n      var head = copyCursor(cm.clipPos(selectionEnd));\n      var isClipped = !cursorEqual(selectionEnd, head);\n      var curHead = cm.getCursor('head');\n      var primIndex = getIndex(ranges, curHead);\n      var wasClipped = cursorEqual(ranges[primIndex].head, ranges[primIndex].anchor);\n      var max = ranges.length - 1;\n      var index = max - primIndex > primIndex ? max : 0;\n      var base = ranges[index].anchor;\n\n      var firstLine = Math.min(base.line, head.line);\n      var lastLine = Math.max(base.line, head.line);\n      var baseCh = base.ch, headCh = head.ch;\n\n      var dir = ranges[index].head.ch - baseCh;\n      var newDir = headCh - baseCh;\n      if (dir > 0 && newDir <= 0) {\n        baseCh++;\n        if (!isClipped) { headCh--; }\n      } else if (dir < 0 && newDir >= 0) {\n        baseCh--;\n        if (!wasClipped) { headCh++; }\n      } else if (dir < 0 && newDir == -1) {\n        baseCh--;\n        headCh++;\n      }\n      for (var line = firstLine; line <= lastLine; line++) {\n        var range = {anchor: new Pos(line, baseCh), head: new Pos(line, headCh)};\n        selections.push(range);\n      }\n      cm.setSelections(selections);\n      selectionEnd.ch = headCh;\n      base.ch = baseCh;\n      return base;\n    }\n    function selectForInsert(cm, head, height) {\n      var sel = [];\n      for (var i = 0; i < height; i++) {\n        var lineHead = offsetCursor(head, i, 0);\n        sel.push({anchor: lineHead, head: lineHead});\n      }\n      cm.setSelections(sel, 0);\n    }\n    // getIndex returns the index of the cursor in the selections.\n    function getIndex(ranges, cursor, end) {\n      for (var i = 0; i < ranges.length; i++) {\n        var atAnchor = end != 'head' && cursorEqual(ranges[i].anchor, cursor);\n        var atHead = end != 'anchor' && cursorEqual(ranges[i].head, cursor);\n        if (atAnchor || atHead) {\n          return i;\n        }\n      }\n      return -1;\n    }\n    function getSelectedAreaRange(cm, vim) {\n      var lastSelection = vim.lastSelection;\n      var getCurrentSelectedAreaRange = function() {\n        var selections = cm.listSelections();\n        var start =  selections[0];\n        var end = selections[selections.length-1];\n        var selectionStart = cursorIsBefore(start.anchor, start.head) ? start.anchor : start.head;\n        var selectionEnd = cursorIsBefore(end.anchor, end.head) ? end.head : end.anchor;\n        return [selectionStart, selectionEnd];\n      };\n      var getLastSelectedAreaRange = function() {\n        var selectionStart = cm.getCursor();\n        var selectionEnd = cm.getCursor();\n        var block = lastSelection.visualBlock;\n        if (block) {\n          var width = block.width;\n          var height = block.height;\n          selectionEnd = new Pos(selectionStart.line + height, selectionStart.ch + width);\n          var selections = [];\n          // selectBlock creates a 'proper' rectangular block.\n          // We do not want that in all cases, so we manually set selections.\n          for (var i = selectionStart.line; i < selectionEnd.line; i++) {\n            var anchor = new Pos(i, selectionStart.ch);\n            var head = new Pos(i, selectionEnd.ch);\n            var range = {anchor: anchor, head: head};\n            selections.push(range);\n          }\n          cm.setSelections(selections);\n        } else {\n          var start = lastSelection.anchorMark.find();\n          var end = lastSelection.headMark.find();\n          var line = end.line - start.line;\n          var ch = end.ch - start.ch;\n          selectionEnd = {line: selectionEnd.line + line, ch: line ? selectionEnd.ch : ch + selectionEnd.ch};\n          if (lastSelection.visualLine) {\n            selectionStart = new Pos(selectionStart.line, 0);\n            selectionEnd = new Pos(selectionEnd.line, lineLength(cm, selectionEnd.line));\n          }\n          cm.setSelection(selectionStart, selectionEnd);\n        }\n        return [selectionStart, selectionEnd];\n      };\n      if (!vim.visualMode) {\n      // In case of replaying the action.\n        return getLastSelectedAreaRange();\n      } else {\n        return getCurrentSelectedAreaRange();\n      }\n    }\n    // Updates the previous selection with the current selection's values. This\n    // should only be called in visual mode.\n    function updateLastSelection(cm, vim) {\n      var anchor = vim.sel.anchor;\n      var head = vim.sel.head;\n      // To accommodate the effect of lastPastedText in the last selection\n      if (vim.lastPastedText) {\n        head = cm.posFromIndex(cm.indexFromPos(anchor) + vim.lastPastedText.length);\n        vim.lastPastedText = null;\n      }\n      vim.lastSelection = {'anchorMark': cm.setBookmark(anchor),\n                           'headMark': cm.setBookmark(head),\n                           'anchor': copyCursor(anchor),\n                           'head': copyCursor(head),\n                           'visualMode': vim.visualMode,\n                           'visualLine': vim.visualLine,\n                           'visualBlock': vim.visualBlock};\n    }\n    function expandSelection(cm, start, end) {\n      var sel = cm.state.vim.sel;\n      var head = sel.head;\n      var anchor = sel.anchor;\n      var tmp;\n      if (cursorIsBefore(end, start)) {\n        tmp = end;\n        end = start;\n        start = tmp;\n      }\n      if (cursorIsBefore(head, anchor)) {\n        head = cursorMin(start, head);\n        anchor = cursorMax(anchor, end);\n      } else {\n        anchor = cursorMin(start, anchor);\n        head = cursorMax(head, end);\n        head = offsetCursor(head, 0, -1);\n        if (head.ch == -1 && head.line != cm.firstLine()) {\n          head = new Pos(head.line - 1, lineLength(cm, head.line - 1));\n        }\n      }\n      return [anchor, head];\n    }\n    /**\n     * Updates the CodeMirror selection to match the provided vim selection.\n     * If no arguments are given, it uses the current vim selection state.\n     */\n    function updateCmSelection(cm, sel, mode) {\n      var vim = cm.state.vim;\n      sel = sel || vim.sel;\n      var mode = mode ||\n        vim.visualLine ? 'line' : vim.visualBlock ? 'block' : 'char';\n      var cmSel = makeCmSelection(cm, sel, mode);\n      cm.setSelections(cmSel.ranges, cmSel.primary);\n    }\n    function makeCmSelection(cm, sel, mode, exclusive) {\n      var head = copyCursor(sel.head);\n      var anchor = copyCursor(sel.anchor);\n      if (mode == 'char') {\n        var headOffset = !exclusive && !cursorIsBefore(sel.head, sel.anchor) ? 1 : 0;\n        var anchorOffset = cursorIsBefore(sel.head, sel.anchor) ? 1 : 0;\n        head = offsetCursor(sel.head, 0, headOffset);\n        anchor = offsetCursor(sel.anchor, 0, anchorOffset);\n        return {\n          ranges: [{anchor: anchor, head: head}],\n          primary: 0\n        };\n      } else if (mode == 'line') {\n        if (!cursorIsBefore(sel.head, sel.anchor)) {\n          anchor.ch = 0;\n\n          var lastLine = cm.lastLine();\n          if (head.line > lastLine) {\n            head.line = lastLine;\n          }\n          head.ch = lineLength(cm, head.line);\n        } else {\n          head.ch = 0;\n          anchor.ch = lineLength(cm, anchor.line);\n        }\n        return {\n          ranges: [{anchor: anchor, head: head}],\n          primary: 0\n        };\n      } else if (mode == 'block') {\n        var top = Math.min(anchor.line, head.line),\n            fromCh = anchor.ch,\n            bottom = Math.max(anchor.line, head.line),\n            toCh = head.ch;\n        if (fromCh < toCh) { toCh += 1; }\n        else { fromCh += 1; }        var height = bottom - top + 1;\n        var primary = head.line == top ? 0 : height - 1;\n        var ranges = [];\n        for (var i = 0; i < height; i++) {\n          ranges.push({\n            anchor: new Pos(top + i, fromCh),\n            head: new Pos(top + i, toCh)\n          });\n        }\n        return {\n          ranges: ranges,\n          primary: primary\n        };\n      }\n    }\n    function getHead(cm) {\n      var cur = cm.getCursor('head');\n      if (cm.getSelection().length == 1) {\n        // Small corner case when only 1 character is selected. The \"real\"\n        // head is the left of head and anchor.\n        cur = cursorMin(cur, cm.getCursor('anchor'));\n      }\n      return cur;\n    }\n\n    /**\n     * If moveHead is set to false, the CodeMirror selection will not be\n     * touched. The caller assumes the responsibility of putting the cursor\n    * in the right place.\n     */\n    function exitVisualMode(cm, moveHead) {\n      var vim = cm.state.vim;\n      if (moveHead !== false) {\n        cm.setCursor(clipCursorToContent(cm, vim.sel.head));\n      }\n      updateLastSelection(cm, vim);\n      vim.visualMode = false;\n      vim.visualLine = false;\n      vim.visualBlock = false;\n      if (!vim.insertMode) CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"normal\"});\n    }\n\n    // Remove any trailing newlines from the selection. For\n    // example, with the caret at the start of the last word on the line,\n    // 'dw' should word, but not the newline, while 'w' should advance the\n    // caret to the first character of the next line.\n    function clipToLine(cm, curStart, curEnd) {\n      var selection = cm.getRange(curStart, curEnd);\n      // Only clip if the selection ends with trailing newline + whitespace\n      if (/\\n\\s*$/.test(selection)) {\n        var lines = selection.split('\\n');\n        // We know this is all whitespace.\n        lines.pop();\n\n        // Cases:\n        // 1. Last word is an empty line - do not clip the trailing '\\n'\n        // 2. Last word is not an empty line - clip the trailing '\\n'\n        var line;\n        // Find the line containing the last word, and clip all whitespace up\n        // to it.\n        for (var line = lines.pop(); lines.length > 0 && line && isWhiteSpaceString(line); line = lines.pop()) {\n          curEnd.line--;\n          curEnd.ch = 0;\n        }\n        // If the last word is not an empty line, clip an additional newline\n        if (line) {\n          curEnd.line--;\n          curEnd.ch = lineLength(cm, curEnd.line);\n        } else {\n          curEnd.ch = 0;\n        }\n      }\n    }\n\n    // Expand the selection to line ends.\n    function expandSelectionToLine(_cm, curStart, curEnd) {\n      curStart.ch = 0;\n      curEnd.ch = 0;\n      curEnd.line++;\n    }\n\n    function findFirstNonWhiteSpaceCharacter(text) {\n      if (!text) {\n        return 0;\n      }\n      var firstNonWS = text.search(/\\S/);\n      return firstNonWS == -1 ? text.length : firstNonWS;\n    }\n\n    function expandWordUnderCursor(cm, inclusive, _forward, bigWord, noSymbol) {\n      var cur = getHead(cm);\n      var line = cm.getLine(cur.line);\n      var idx = cur.ch;\n\n      // Seek to first word or non-whitespace character, depending on if\n      // noSymbol is true.\n      var test = noSymbol ? wordCharTest[0] : bigWordCharTest [0];\n      while (!test(line.charAt(idx))) {\n        idx++;\n        if (idx >= line.length) { return null; }\n      }\n\n      if (bigWord) {\n        test = bigWordCharTest[0];\n      } else {\n        test = wordCharTest[0];\n        if (!test(line.charAt(idx))) {\n          test = wordCharTest[1];\n        }\n      }\n\n      var end = idx, start = idx;\n      while (test(line.charAt(end)) && end < line.length) { end++; }\n      while (test(line.charAt(start)) && start >= 0) { start--; }\n      start++;\n\n      if (inclusive) {\n        // If present, include all whitespace after word.\n        // Otherwise, include all whitespace before word, except indentation.\n        var wordEnd = end;\n        while (/\\s/.test(line.charAt(end)) && end < line.length) { end++; }\n        if (wordEnd == end) {\n          var wordStart = start;\n          while (/\\s/.test(line.charAt(start - 1)) && start > 0) { start--; }\n          if (!start) { start = wordStart; }\n        }\n      }\n      return { start: new Pos(cur.line, start), end: new Pos(cur.line, end) };\n    }\n\n    /**\n     * Depends on the following:\n     *\n     * - editor mode should be htmlmixedmode / xml\n     * - mode/xml/xml.js should be loaded\n     * - addon/fold/xml-fold.js should be loaded\n     *\n     * If any of the above requirements are not true, this function noops.\n     *\n     * This is _NOT_ a 100% accurate implementation of vim tag text objects.\n     * The following caveats apply (based off cursory testing, I'm sure there\n     * are other discrepancies):\n     *\n     * - Does not work inside comments:\n     *   ```\n     *   <!-- <div>broken</div> -->\n     *   ```\n     * - Does not work when tags have different cases:\n     *   ```\n     *   <div>broken</DIV>\n     *   ```\n     * - Does not work when cursor is inside a broken tag:\n     *   ```\n     *   <div><brok><en></div>\n     *   ```\n     */\n    function expandTagUnderCursor(cm, head, inclusive) {\n      var cur = head;\n      if (!CodeMirror.findMatchingTag || !CodeMirror.findEnclosingTag) {\n        return { start: cur, end: cur };\n      }\n\n      var tags = CodeMirror.findMatchingTag(cm, head) || CodeMirror.findEnclosingTag(cm, head);\n      if (!tags || !tags.open || !tags.close) {\n        return { start: cur, end: cur };\n      }\n\n      if (inclusive) {\n        return { start: tags.open.from, end: tags.close.to };\n      }\n      return { start: tags.open.to, end: tags.close.from };\n    }\n\n    function recordJumpPosition(cm, oldCur, newCur) {\n      if (!cursorEqual(oldCur, newCur)) {\n        vimGlobalState.jumpList.add(cm, oldCur, newCur);\n      }\n    }\n\n    function recordLastCharacterSearch(increment, args) {\n        vimGlobalState.lastCharacterSearch.increment = increment;\n        vimGlobalState.lastCharacterSearch.forward = args.forward;\n        vimGlobalState.lastCharacterSearch.selectedCharacter = args.selectedCharacter;\n    }\n\n    var symbolToMode = {\n        '(': 'bracket', ')': 'bracket', '{': 'bracket', '}': 'bracket',\n        '[': 'section', ']': 'section',\n        '*': 'comment', '/': 'comment',\n        'm': 'method', 'M': 'method',\n        '#': 'preprocess'\n    };\n    var findSymbolModes = {\n      bracket: {\n        isComplete: function(state) {\n          if (state.nextCh === state.symb) {\n            state.depth++;\n            if (state.depth >= 1)return true;\n          } else if (state.nextCh === state.reverseSymb) {\n            state.depth--;\n          }\n          return false;\n        }\n      },\n      section: {\n        init: function(state) {\n          state.curMoveThrough = true;\n          state.symb = (state.forward ? ']' : '[') === state.symb ? '{' : '}';\n        },\n        isComplete: function(state) {\n          return state.index === 0 && state.nextCh === state.symb;\n        }\n      },\n      comment: {\n        isComplete: function(state) {\n          var found = state.lastCh === '*' && state.nextCh === '/';\n          state.lastCh = state.nextCh;\n          return found;\n        }\n      },\n      // TODO: The original Vim implementation only operates on level 1 and 2.\n      // The current implementation doesn't check for code block level and\n      // therefore it operates on any levels.\n      method: {\n        init: function(state) {\n          state.symb = (state.symb === 'm' ? '{' : '}');\n          state.reverseSymb = state.symb === '{' ? '}' : '{';\n        },\n        isComplete: function(state) {\n          if (state.nextCh === state.symb)return true;\n          return false;\n        }\n      },\n      preprocess: {\n        init: function(state) {\n          state.index = 0;\n        },\n        isComplete: function(state) {\n          if (state.nextCh === '#') {\n            var token = state.lineText.match(/^#(\\w+)/)[1];\n            if (token === 'endif') {\n              if (state.forward && state.depth === 0) {\n                return true;\n              }\n              state.depth++;\n            } else if (token === 'if') {\n              if (!state.forward && state.depth === 0) {\n                return true;\n              }\n              state.depth--;\n            }\n            if (token === 'else' && state.depth === 0)return true;\n          }\n          return false;\n        }\n      }\n    };\n    function findSymbol(cm, repeat, forward, symb) {\n      var cur = copyCursor(cm.getCursor());\n      var increment = forward ? 1 : -1;\n      var endLine = forward ? cm.lineCount() : -1;\n      var curCh = cur.ch;\n      var line = cur.line;\n      var lineText = cm.getLine(line);\n      var state = {\n        lineText: lineText,\n        nextCh: lineText.charAt(curCh),\n        lastCh: null,\n        index: curCh,\n        symb: symb,\n        reverseSymb: (forward ?  { ')': '(', '}': '{' } : { '(': ')', '{': '}' })[symb],\n        forward: forward,\n        depth: 0,\n        curMoveThrough: false\n      };\n      var mode = symbolToMode[symb];\n      if (!mode)return cur;\n      var init = findSymbolModes[mode].init;\n      var isComplete = findSymbolModes[mode].isComplete;\n      if (init) { init(state); }\n      while (line !== endLine && repeat) {\n        state.index += increment;\n        state.nextCh = state.lineText.charAt(state.index);\n        if (!state.nextCh) {\n          line += increment;\n          state.lineText = cm.getLine(line) || '';\n          if (increment > 0) {\n            state.index = 0;\n          } else {\n            var lineLen = state.lineText.length;\n            state.index = (lineLen > 0) ? (lineLen-1) : 0;\n          }\n          state.nextCh = state.lineText.charAt(state.index);\n        }\n        if (isComplete(state)) {\n          cur.line = line;\n          cur.ch = state.index;\n          repeat--;\n        }\n      }\n      if (state.nextCh || state.curMoveThrough) {\n        return new Pos(line, state.index);\n      }\n      return cur;\n    }\n\n    /*\n     * Returns the boundaries of the next word. If the cursor in the middle of\n     * the word, then returns the boundaries of the current word, starting at\n     * the cursor. If the cursor is at the start/end of a word, and we are going\n     * forward/backward, respectively, find the boundaries of the next word.\n     *\n     * @param {CodeMirror} cm CodeMirror object.\n     * @param {Cursor} cur The cursor position.\n     * @param {boolean} forward True to search forward. False to search\n     *     backward.\n     * @param {boolean} bigWord True if punctuation count as part of the word.\n     *     False if only [a-zA-Z0-9] characters count as part of the word.\n     * @param {boolean} emptyLineIsWord True if empty lines should be treated\n     *     as words.\n     * @return {Object{from:number, to:number, line: number}} The boundaries of\n     *     the word, or null if there are no more words.\n     */\n    function findWord(cm, cur, forward, bigWord, emptyLineIsWord) {\n      var lineNum = cur.line;\n      var pos = cur.ch;\n      var line = cm.getLine(lineNum);\n      var dir = forward ? 1 : -1;\n      var charTests = bigWord ? bigWordCharTest: wordCharTest;\n\n      if (emptyLineIsWord && line == '') {\n        lineNum += dir;\n        line = cm.getLine(lineNum);\n        if (!isLine(cm, lineNum)) {\n          return null;\n        }\n        pos = (forward) ? 0 : line.length;\n      }\n\n      while (true) {\n        if (emptyLineIsWord && line == '') {\n          return { from: 0, to: 0, line: lineNum };\n        }\n        var stop = (dir > 0) ? line.length : -1;\n        var wordStart = stop, wordEnd = stop;\n        // Find bounds of next word.\n        while (pos != stop) {\n          var foundWord = false;\n          for (var i = 0; i < charTests.length && !foundWord; ++i) {\n            if (charTests[i](line.charAt(pos))) {\n              wordStart = pos;\n              // Advance to end of word.\n              while (pos != stop && charTests[i](line.charAt(pos))) {\n                pos += dir;\n              }\n              wordEnd = pos;\n              foundWord = wordStart != wordEnd;\n              if (wordStart == cur.ch && lineNum == cur.line &&\n                  wordEnd == wordStart + dir) {\n                // We started at the end of a word. Find the next one.\n                continue;\n              } else {\n                return {\n                  from: Math.min(wordStart, wordEnd + 1),\n                  to: Math.max(wordStart, wordEnd),\n                  line: lineNum };\n              }\n            }\n          }\n          if (!foundWord) {\n            pos += dir;\n          }\n        }\n        // Advance to next/prev line.\n        lineNum += dir;\n        if (!isLine(cm, lineNum)) {\n          return null;\n        }\n        line = cm.getLine(lineNum);\n        pos = (dir > 0) ? 0 : line.length;\n      }\n    }\n\n    /**\n     * @param {CodeMirror} cm CodeMirror object.\n     * @param {Pos} cur The position to start from.\n     * @param {int} repeat Number of words to move past.\n     * @param {boolean} forward True to search forward. False to search\n     *     backward.\n     * @param {boolean} wordEnd True to move to end of word. False to move to\n     *     beginning of word.\n     * @param {boolean} bigWord True if punctuation count as part of the word.\n     *     False if only alphabet characters count as part of the word.\n     * @return {Cursor} The position the cursor should move to.\n     */\n    function moveToWord(cm, cur, repeat, forward, wordEnd, bigWord) {\n      var curStart = copyCursor(cur);\n      var words = [];\n      if (forward && !wordEnd || !forward && wordEnd) {\n        repeat++;\n      }\n      // For 'e', empty lines are not considered words, go figure.\n      var emptyLineIsWord = !(forward && wordEnd);\n      for (var i = 0; i < repeat; i++) {\n        var word = findWord(cm, cur, forward, bigWord, emptyLineIsWord);\n        if (!word) {\n          var eodCh = lineLength(cm, cm.lastLine());\n          words.push(forward\n              ? {line: cm.lastLine(), from: eodCh, to: eodCh}\n              : {line: 0, from: 0, to: 0});\n          break;\n        }\n        words.push(word);\n        cur = new Pos(word.line, forward ? (word.to - 1) : word.from);\n      }\n      var shortCircuit = words.length != repeat;\n      var firstWord = words[0];\n      var lastWord = words.pop();\n      if (forward && !wordEnd) {\n        // w\n        if (!shortCircuit && (firstWord.from != curStart.ch || firstWord.line != curStart.line)) {\n          // We did not start in the middle of a word. Discard the extra word at the end.\n          lastWord = words.pop();\n        }\n        return new Pos(lastWord.line, lastWord.from);\n      } else if (forward && wordEnd) {\n        return new Pos(lastWord.line, lastWord.to - 1);\n      } else if (!forward && wordEnd) {\n        // ge\n        if (!shortCircuit && (firstWord.to != curStart.ch || firstWord.line != curStart.line)) {\n          // We did not start in the middle of a word. Discard the extra word at the end.\n          lastWord = words.pop();\n        }\n        return new Pos(lastWord.line, lastWord.to);\n      } else {\n        // b\n        return new Pos(lastWord.line, lastWord.from);\n      }\n    }\n\n    function moveToEol(cm, head, motionArgs, vim, keepHPos) {\n      var cur = head;\n      var retval= new Pos(cur.line + motionArgs.repeat - 1, Infinity);\n      var end=cm.clipPos(retval);\n      end.ch--;\n      if (!keepHPos) {\n        vim.lastHPos = Infinity;\n        vim.lastHSPos = cm.charCoords(end,'div').left;\n      }\n      return retval;\n    }\n\n    function moveToCharacter(cm, repeat, forward, character) {\n      var cur = cm.getCursor();\n      var start = cur.ch;\n      var idx;\n      for (var i = 0; i < repeat; i ++) {\n        var line = cm.getLine(cur.line);\n        idx = charIdxInLine(start, line, character, forward, true);\n        if (idx == -1) {\n          return null;\n        }\n        start = idx;\n      }\n      return new Pos(cm.getCursor().line, idx);\n    }\n\n    function moveToColumn(cm, repeat) {\n      // repeat is always >= 1, so repeat - 1 always corresponds\n      // to the column we want to go to.\n      var line = cm.getCursor().line;\n      return clipCursorToContent(cm, new Pos(line, repeat - 1));\n    }\n\n    function updateMark(cm, vim, markName, pos) {\n      if (!inArray(markName, validMarks)) {\n        return;\n      }\n      if (vim.marks[markName]) {\n        vim.marks[markName].clear();\n      }\n      vim.marks[markName] = cm.setBookmark(pos);\n    }\n\n    function charIdxInLine(start, line, character, forward, includeChar) {\n      // Search for char in line.\n      // motion_options: {forward, includeChar}\n      // If includeChar = true, include it too.\n      // If forward = true, search forward, else search backwards.\n      // If char is not found on this line, do nothing\n      var idx;\n      if (forward) {\n        idx = line.indexOf(character, start + 1);\n        if (idx != -1 && !includeChar) {\n          idx -= 1;\n        }\n      } else {\n        idx = line.lastIndexOf(character, start - 1);\n        if (idx != -1 && !includeChar) {\n          idx += 1;\n        }\n      }\n      return idx;\n    }\n\n    function findParagraph(cm, head, repeat, dir, inclusive) {\n      var line = head.line;\n      var min = cm.firstLine();\n      var max = cm.lastLine();\n      var start, end, i = line;\n      function isEmpty(i) { return !cm.getLine(i); }\n      function isBoundary(i, dir, any) {\n        if (any) { return isEmpty(i) != isEmpty(i + dir); }\n        return !isEmpty(i) && isEmpty(i + dir);\n      }\n      if (dir) {\n        while (min <= i && i <= max && repeat > 0) {\n          if (isBoundary(i, dir)) { repeat--; }\n          i += dir;\n        }\n        return new Pos(i, 0);\n      }\n\n      var vim = cm.state.vim;\n      if (vim.visualLine && isBoundary(line, 1, true)) {\n        var anchor = vim.sel.anchor;\n        if (isBoundary(anchor.line, -1, true)) {\n          if (!inclusive || anchor.line != line) {\n            line += 1;\n          }\n        }\n      }\n      var startState = isEmpty(line);\n      for (i = line; i <= max && repeat; i++) {\n        if (isBoundary(i, 1, true)) {\n          if (!inclusive || isEmpty(i) != startState) {\n            repeat--;\n          }\n        }\n      }\n      end = new Pos(i, 0);\n      // select boundary before paragraph for the last one\n      if (i > max && !startState) { startState = true; }\n      else { inclusive = false; }\n      for (i = line; i > min; i--) {\n        if (!inclusive || isEmpty(i) == startState || i == line) {\n          if (isBoundary(i, -1, true)) { break; }\n        }\n      }\n      start = new Pos(i, 0);\n      return { start: start, end: end };\n    }\n  function getSentence(cm, cur, repeat, dir, inclusive /*includes whitespace*/) {\n    /*\n    Takes an index object\n    {\n    line: the line string,\n    ln: line number,\n    pos: index in line,\n    dir: direction of traversal (-1 or 1)\n    }\n    and modifies the pos member to represent the\n    next valid position or sets the line to null if there are\n    no more valid positions.\n   */\n    function nextChar(curr) {\n      if (curr.pos + curr.dir < 0 || curr.pos + curr.dir >= curr.line.length) {\n          curr.line = null;\n        }\n      else {\n        curr.pos += curr.dir;\n      }\n    }\n    /*\n    Performs one iteration of traversal in forward direction\n    Returns an index object of the new location\n   */\n    function forward(cm, ln, pos, dir) {\n      var line = cm.getLine(ln);\n\n      var curr = {\n        line: line,\n        ln: ln,\n        pos: pos,\n        dir: dir,\n      };\n\n      if (curr.line === \"\") {\n        return { ln: curr.ln, pos: curr.pos };\n      }\n\n      var lastSentencePos = curr.pos;\n\n      // Move one step to skip character we start on\n      nextChar(curr);\n\n      while (curr.line !== null) {\n        lastSentencePos = curr.pos;\n        if (isEndOfSentenceSymbol(curr.line[curr.pos])) {\n          if (!inclusive) {\n            return { ln: curr.ln, pos: curr.pos + 1 };\n          } else {\n            nextChar(curr);\n            while (curr.line !== null ) {\n              if (isWhiteSpaceString(curr.line[curr.pos])) {\n                lastSentencePos = curr.pos;\n                nextChar(curr);\n              } else {\n                break;\n              }\n            }\n            return { ln: curr.ln, pos: lastSentencePos + 1, };\n          }\n        }\n        nextChar(curr);\n      }\n      return { ln: curr.ln, pos: lastSentencePos + 1 };\n    }\n\n    /*\n    Performs one iteration of traversal in reverse direction\n    Returns an index object of the new location\n   */\n    function reverse(cm, ln, pos, dir) {\n      var line = cm.getLine(ln);\n\n      var curr = {\n        line: line,\n        ln: ln,\n        pos: pos,\n        dir: dir,\n      };\n\n      if (curr.line === \"\") {\n        return { ln: curr.ln, pos: curr.pos };\n      }\n\n      var lastSentencePos = curr.pos;\n\n      // Move one step to skip character we start on\n      nextChar(curr);\n\n      while (curr.line !== null) {\n        if (!isWhiteSpaceString(curr.line[curr.pos]) && !isEndOfSentenceSymbol(curr.line[curr.pos])) {\n          lastSentencePos = curr.pos;\n        }\n\n        else if (isEndOfSentenceSymbol(curr.line[curr.pos]) ) {\n          if (!inclusive) {\n            return { ln: curr.ln, pos: lastSentencePos };\n          } else {\n              if (isWhiteSpaceString(curr.line[curr.pos + 1])) {\n                return { ln: curr.ln, pos: curr.pos + 1, };\n              } else {\n                return {ln: curr.ln, pos: lastSentencePos};\n              }\n          }\n        }\n\n        nextChar(curr);\n      }\n      curr.line = line;\n      if (inclusive && isWhiteSpaceString(curr.line[curr.pos])) {\n        return { ln: curr.ln, pos: curr.pos };\n      } else {\n        return { ln: curr.ln, pos: lastSentencePos };\n      }\n\n    }\n\n    var curr_index = {\n      ln: cur.line,\n      pos: cur.ch,\n    };\n\n    while (repeat > 0) {\n      if (dir < 0) {\n        curr_index = reverse(cm, curr_index.ln, curr_index.pos, dir);\n      }\n      else {\n        curr_index = forward(cm, curr_index.ln, curr_index.pos, dir);\n      }\n      repeat--;\n    }\n\n    return new Pos(curr_index.ln, curr_index.pos);\n  }\n\n  function findSentence(cm, cur, repeat, dir) {\n\n    /*\n    Takes an index object\n    {\n    line: the line string,\n    ln: line number,\n    pos: index in line,\n    dir: direction of traversal (-1 or 1)\n    }\n    and modifies the line, ln, and pos members to represent the\n    next valid position or sets them to null if there are\n    no more valid positions.\n   */\n      function nextChar(cm, idx) {\n        if (idx.pos + idx.dir < 0 || idx.pos + idx.dir >= idx.line.length) {\n          idx.ln += idx.dir;\n          if (!isLine(cm, idx.ln)) {\n            idx.line = null;\n            idx.ln = null;\n            idx.pos = null;\n            return;\n          }\n          idx.line = cm.getLine(idx.ln);\n          idx.pos = (idx.dir > 0) ? 0 : idx.line.length - 1;\n        }\n        else {\n          idx.pos += idx.dir;\n        }\n      }\n\n      /*\n        Performs one iteration of traversal in forward direction\n        Returns an index object of the new location\n       */\n      function forward(cm, ln, pos, dir) {\n        var line = cm.getLine(ln);\n        var stop = (line === \"\");\n\n        var curr = {\n          line: line,\n          ln: ln,\n          pos: pos,\n          dir: dir,\n        };\n\n        var last_valid = {\n          ln: curr.ln,\n          pos: curr.pos,\n        };\n\n        var skip_empty_lines = (curr.line === \"\");\n\n        // Move one step to skip character we start on\n        nextChar(cm, curr);\n\n        while (curr.line !== null) {\n          last_valid.ln = curr.ln;\n          last_valid.pos = curr.pos;\n\n          if (curr.line === \"\" && !skip_empty_lines) {\n            return { ln: curr.ln, pos: curr.pos, };\n          }\n          else if (stop && curr.line !== \"\" && !isWhiteSpaceString(curr.line[curr.pos])) {\n            return { ln: curr.ln, pos: curr.pos, };\n          }\n          else if (isEndOfSentenceSymbol(curr.line[curr.pos])\n            && !stop\n            && (curr.pos === curr.line.length - 1\n              || isWhiteSpaceString(curr.line[curr.pos + 1]))) {\n            stop = true;\n          }\n\n          nextChar(cm, curr);\n        }\n\n        /*\n          Set the position to the last non whitespace character on the last\n          valid line in the case that we reach the end of the document.\n        */\n        var line = cm.getLine(last_valid.ln);\n        last_valid.pos = 0;\n        for(var i = line.length - 1; i >= 0; --i) {\n          if (!isWhiteSpaceString(line[i])) {\n            last_valid.pos = i;\n            break;\n          }\n        }\n\n        return last_valid;\n\n      }\n\n      /*\n        Performs one iteration of traversal in reverse direction\n        Returns an index object of the new location\n       */\n      function reverse(cm, ln, pos, dir) {\n        var line = cm.getLine(ln);\n\n        var curr = {\n          line: line,\n          ln: ln,\n          pos: pos,\n          dir: dir,\n        };\n\n        var last_valid = {\n          ln: curr.ln,\n          pos: null,\n        };\n\n        var skip_empty_lines = (curr.line === \"\");\n\n        // Move one step to skip character we start on\n        nextChar(cm, curr);\n\n        while (curr.line !== null) {\n\n          if (curr.line === \"\" && !skip_empty_lines) {\n            if (last_valid.pos !== null) {\n              return last_valid;\n            }\n            else {\n              return { ln: curr.ln, pos: curr.pos };\n            }\n          }\n          else if (isEndOfSentenceSymbol(curr.line[curr.pos])\n              && last_valid.pos !== null\n              && !(curr.ln === last_valid.ln && curr.pos + 1 === last_valid.pos)) {\n            return last_valid;\n          }\n          else if (curr.line !== \"\" && !isWhiteSpaceString(curr.line[curr.pos])) {\n            skip_empty_lines = false;\n            last_valid = { ln: curr.ln, pos: curr.pos };\n          }\n\n          nextChar(cm, curr);\n        }\n\n        /*\n          Set the position to the first non whitespace character on the last\n          valid line in the case that we reach the beginning of the document.\n        */\n        var line = cm.getLine(last_valid.ln);\n        last_valid.pos = 0;\n        for(var i = 0; i < line.length; ++i) {\n          if (!isWhiteSpaceString(line[i])) {\n            last_valid.pos = i;\n            break;\n          }\n        }\n        return last_valid;\n      }\n\n      var curr_index = {\n        ln: cur.line,\n        pos: cur.ch,\n      };\n\n      while (repeat > 0) {\n        if (dir < 0) {\n          curr_index = reverse(cm, curr_index.ln, curr_index.pos, dir);\n        }\n        else {\n          curr_index = forward(cm, curr_index.ln, curr_index.pos, dir);\n        }\n        repeat--;\n      }\n\n      return new Pos(curr_index.ln, curr_index.pos);\n    }\n\n    // TODO: perhaps this finagling of start and end positions belongs\n    // in codemirror/replaceRange?\n    function selectCompanionObject(cm, head, symb, inclusive) {\n      var cur = head, start, end;\n\n      var bracketRegexp = ({\n        '(': /[()]/, ')': /[()]/,\n        '[': /[[\\]]/, ']': /[[\\]]/,\n        '{': /[{}]/, '}': /[{}]/,\n        '<': /[<>]/, '>': /[<>]/})[symb];\n      var openSym = ({\n        '(': '(', ')': '(',\n        '[': '[', ']': '[',\n        '{': '{', '}': '{',\n        '<': '<', '>': '<'})[symb];\n      var curChar = cm.getLine(cur.line).charAt(cur.ch);\n      // Due to the behavior of scanForBracket, we need to add an offset if the\n      // cursor is on a matching open bracket.\n      var offset = curChar === openSym ? 1 : 0;\n\n      start = cm.scanForBracket(new Pos(cur.line, cur.ch + offset), -1, undefined, {'bracketRegex': bracketRegexp});\n      end = cm.scanForBracket(new Pos(cur.line, cur.ch + offset), 1, undefined, {'bracketRegex': bracketRegexp});\n\n      if (!start || !end) {\n        return { start: cur, end: cur };\n      }\n\n      start = start.pos;\n      end = end.pos;\n\n      if ((start.line == end.line && start.ch > end.ch)\n          || (start.line > end.line)) {\n        var tmp = start;\n        start = end;\n        end = tmp;\n      }\n\n      if (inclusive) {\n        end.ch += 1;\n      } else {\n        start.ch += 1;\n      }\n\n      return { start: start, end: end };\n    }\n\n    // Takes in a symbol and a cursor and tries to simulate text objects that\n    // have identical opening and closing symbols\n    // TODO support across multiple lines\n    function findBeginningAndEnd(cm, head, symb, inclusive) {\n      var cur = copyCursor(head);\n      var line = cm.getLine(cur.line);\n      var chars = line.split('');\n      var start, end, i, len;\n      var firstIndex = chars.indexOf(symb);\n\n      // the decision tree is to always look backwards for the beginning first,\n      // but if the cursor is in front of the first instance of the symb,\n      // then move the cursor forward\n      if (cur.ch < firstIndex) {\n        cur.ch = firstIndex;\n        // Why is this line even here???\n        // cm.setCursor(cur.line, firstIndex+1);\n      }\n      // otherwise if the cursor is currently on the closing symbol\n      else if (firstIndex < cur.ch && chars[cur.ch] == symb) {\n        end = cur.ch; // assign end to the current cursor\n        --cur.ch; // make sure to look backwards\n      }\n\n      // if we're currently on the symbol, we've got a start\n      if (chars[cur.ch] == symb && !end) {\n        start = cur.ch + 1; // assign start to ahead of the cursor\n      } else {\n        // go backwards to find the start\n        for (i = cur.ch; i > -1 && !start; i--) {\n          if (chars[i] == symb) {\n            start = i + 1;\n          }\n        }\n      }\n\n      // look forwards for the end symbol\n      if (start && !end) {\n        for (i = start, len = chars.length; i < len && !end; i++) {\n          if (chars[i] == symb) {\n            end = i;\n          }\n        }\n      }\n\n      // nothing found\n      if (!start || !end) {\n        return { start: cur, end: cur };\n      }\n\n      // include the symbols\n      if (inclusive) {\n        --start; ++end;\n      }\n\n      return {\n        start: new Pos(cur.line, start),\n        end: new Pos(cur.line, end)\n      };\n    }\n\n    // Search functions\n    defineOption('pcre', true, 'boolean');\n    function SearchState() {}\n    SearchState.prototype = {\n      getQuery: function() {\n        return vimGlobalState.query;\n      },\n      setQuery: function(query) {\n        vimGlobalState.query = query;\n      },\n      getOverlay: function() {\n        return this.searchOverlay;\n      },\n      setOverlay: function(overlay) {\n        this.searchOverlay = overlay;\n      },\n      isReversed: function() {\n        return vimGlobalState.isReversed;\n      },\n      setReversed: function(reversed) {\n        vimGlobalState.isReversed = reversed;\n      },\n      getScrollbarAnnotate: function() {\n        return this.annotate;\n      },\n      setScrollbarAnnotate: function(annotate) {\n        this.annotate = annotate;\n      }\n    };\n    function getSearchState(cm) {\n      var vim = cm.state.vim;\n      return vim.searchState_ || (vim.searchState_ = new SearchState());\n    }\n    function splitBySlash(argString) {\n      return splitBySeparator(argString, '/');\n    }\n\n    function findUnescapedSlashes(argString) {\n      return findUnescapedSeparators(argString, '/');\n    }\n\n    function splitBySeparator(argString, separator) {\n      var slashes = findUnescapedSeparators(argString, separator) || [];\n      if (!slashes.length) return [];\n      var tokens = [];\n      // in case of strings like foo/bar\n      if (slashes[0] !== 0) return;\n      for (var i = 0; i < slashes.length; i++) {\n        if (typeof slashes[i] == 'number')\n          tokens.push(argString.substring(slashes[i] + 1, slashes[i+1]));\n      }\n      return tokens;\n    }\n\n    function findUnescapedSeparators(str, separator) {\n      if (!separator)\n        separator = '/';\n\n      var escapeNextChar = false;\n      var slashes = [];\n      for (var i = 0; i < str.length; i++) {\n        var c = str.charAt(i);\n        if (!escapeNextChar && c == separator) {\n          slashes.push(i);\n        }\n        escapeNextChar = !escapeNextChar && (c == '\\\\');\n      }\n      return slashes;\n    }\n\n    // Translates a search string from ex (vim) syntax into javascript form.\n    function translateRegex(str) {\n      // When these match, add a '\\' if unescaped or remove one if escaped.\n      var specials = '|(){';\n      // Remove, but never add, a '\\' for these.\n      var unescape = '}';\n      var escapeNextChar = false;\n      var out = [];\n      for (var i = -1; i < str.length; i++) {\n        var c = str.charAt(i) || '';\n        var n = str.charAt(i+1) || '';\n        var specialComesNext = (n && specials.indexOf(n) != -1);\n        if (escapeNextChar) {\n          if (c !== '\\\\' || !specialComesNext) {\n            out.push(c);\n          }\n          escapeNextChar = false;\n        } else {\n          if (c === '\\\\') {\n            escapeNextChar = true;\n            // Treat the unescape list as special for removing, but not adding '\\'.\n            if (n && unescape.indexOf(n) != -1) {\n              specialComesNext = true;\n            }\n            // Not passing this test means removing a '\\'.\n            if (!specialComesNext || n === '\\\\') {\n              out.push(c);\n            }\n          } else {\n            out.push(c);\n            if (specialComesNext && n !== '\\\\') {\n              out.push('\\\\');\n            }\n          }\n        }\n      }\n      return out.join('');\n    }\n\n    // Translates the replace part of a search and replace from ex (vim) syntax into\n    // javascript form.  Similar to translateRegex, but additionally fixes back references\n    // (translates '\\[0..9]' to '$[0..9]') and follows different rules for escaping '$'.\n    var charUnescapes = {'\\\\n': '\\n', '\\\\r': '\\r', '\\\\t': '\\t'};\n    function translateRegexReplace(str) {\n      var escapeNextChar = false;\n      var out = [];\n      for (var i = -1; i < str.length; i++) {\n        var c = str.charAt(i) || '';\n        var n = str.charAt(i+1) || '';\n        if (charUnescapes[c + n]) {\n          out.push(charUnescapes[c+n]);\n          i++;\n        } else if (escapeNextChar) {\n          // At any point in the loop, escapeNextChar is true if the previous\n          // character was a '\\' and was not escaped.\n          out.push(c);\n          escapeNextChar = false;\n        } else {\n          if (c === '\\\\') {\n            escapeNextChar = true;\n            if ((isNumber(n) || n === '$')) {\n              out.push('$');\n            } else if (n !== '/' && n !== '\\\\') {\n              out.push('\\\\');\n            }\n          } else {\n            if (c === '$') {\n              out.push('$');\n            }\n            out.push(c);\n            if (n === '/') {\n              out.push('\\\\');\n            }\n          }\n        }\n      }\n      return out.join('');\n    }\n\n    // Unescape \\ and / in the replace part, for PCRE mode.\n    var unescapes = {'\\\\/': '/', '\\\\\\\\': '\\\\', '\\\\n': '\\n', '\\\\r': '\\r', '\\\\t': '\\t', '\\\\&':'&'};\n    function unescapeRegexReplace(str) {\n      var stream = new CodeMirror.StringStream(str);\n      var output = [];\n      while (!stream.eol()) {\n        // Search for \\.\n        while (stream.peek() && stream.peek() != '\\\\') {\n          output.push(stream.next());\n        }\n        var matched = false;\n        for (var matcher in unescapes) {\n          if (stream.match(matcher, true)) {\n            matched = true;\n            output.push(unescapes[matcher]);\n            break;\n          }\n        }\n        if (!matched) {\n          // Don't change anything\n          output.push(stream.next());\n        }\n      }\n      return output.join('');\n    }\n\n    /**\n     * Extract the regular expression from the query and return a Regexp object.\n     * Returns null if the query is blank.\n     * If ignoreCase is passed in, the Regexp object will have the 'i' flag set.\n     * If smartCase is passed in, and the query contains upper case letters,\n     *   then ignoreCase is overridden, and the 'i' flag will not be set.\n     * If the query contains the /i in the flag part of the regular expression,\n     *   then both ignoreCase and smartCase are ignored, and 'i' will be passed\n     *   through to the Regex object.\n     */\n    function parseQuery(query, ignoreCase, smartCase) {\n      // First update the last search register\n      var lastSearchRegister = vimGlobalState.registerController.getRegister('/');\n      lastSearchRegister.setText(query);\n      // Check if the query is already a regex.\n      if (query instanceof RegExp) { return query; }\n      // First try to extract regex + flags from the input. If no flags found,\n      // extract just the regex. IE does not accept flags directly defined in\n      // the regex string in the form /regex/flags\n      var slashes = findUnescapedSlashes(query);\n      var regexPart;\n      var forceIgnoreCase;\n      if (!slashes.length) {\n        // Query looks like 'regexp'\n        regexPart = query;\n      } else {\n        // Query looks like 'regexp/...'\n        regexPart = query.substring(0, slashes[0]);\n        var flagsPart = query.substring(slashes[0]);\n        forceIgnoreCase = (flagsPart.indexOf('i') != -1);\n      }\n      if (!regexPart) {\n        return null;\n      }\n      if (!getOption('pcre')) {\n        regexPart = translateRegex(regexPart);\n      }\n      if (smartCase) {\n        ignoreCase = (/^[^A-Z]*$/).test(regexPart);\n      }\n      var regexp = new RegExp(regexPart,\n          (ignoreCase || forceIgnoreCase) ? 'im' : 'm');\n      return regexp;\n    }\n\n    /**\n     * dom - Document Object Manipulator\n     * Usage:\n     *   dom('<tag>'|<node>[, ...{<attributes>|<$styles>}|<child-node>|'<text>'])\n     * Examples:\n     *   dom('div', {id:'xyz'}, dom('p', 'CM rocks!', {$color:'red'}))\n     *   dom(document.head, dom('script', 'alert(\"hello!\")'))\n     * Not supported:\n     *   dom('p', ['arrays are objects'], Error('objects specify attributes'))\n     */\n    function dom(n) {\n      if (typeof n === 'string') n = document.createElement(n);\n      for (var a, i = 1; i < arguments.length; i++) {\n        if (!(a = arguments[i])) continue;\n        if (typeof a !== 'object') a = document.createTextNode(a);\n        if (a.nodeType) n.appendChild(a);\n        else for (var key in a) {\n          if (!Object.prototype.hasOwnProperty.call(a, key)) continue;\n          if (key[0] === '$') n.style[key.slice(1)] = a[key];\n          else n.setAttribute(key, a[key]);\n        }\n      }\n      return n;\n    }\n\n    function showConfirm(cm, template) {\n      var pre = dom('div', {$color: 'red', $whiteSpace: 'pre', class: 'cm-vim-message'}, template);\n      if (cm.openNotification) {\n        cm.openNotification(pre, {bottom: true, duration: 5000});\n      } else {\n        alert(pre.innerText);\n      }\n    }\n\n    function makePrompt(prefix, desc) {\n      return dom(document.createDocumentFragment(),\n               dom('span', {$fontFamily: 'monospace', $whiteSpace: 'pre'},\n                 prefix,\n                 dom('input', {type: 'text', autocorrect: 'off',\n                               autocapitalize: 'off', spellcheck: 'false'})),\n               desc && dom('span', {$color: '#888'}, desc));\n    }\n\n    function showPrompt(cm, options) {\n      var template = makePrompt(options.prefix, options.desc);\n      if (cm.openDialog) {\n        cm.openDialog(template, options.onClose, {\n          onKeyDown: options.onKeyDown, onKeyUp: options.onKeyUp,\n          bottom: true, selectValueOnOpen: false, value: options.value\n        });\n      }\n      else {\n        var shortText = '';\n        if (typeof options.prefix != \"string\" && options.prefix) shortText += options.prefix.textContent;\n        if (options.desc) shortText += \" \" + options.desc;\n        options.onClose(prompt(shortText, ''));\n      }\n    }\n\n    function regexEqual(r1, r2) {\n      if (r1 instanceof RegExp && r2 instanceof RegExp) {\n          var props = ['global', 'multiline', 'ignoreCase', 'source'];\n          for (var i = 0; i < props.length; i++) {\n              var prop = props[i];\n              if (r1[prop] !== r2[prop]) {\n                  return false;\n              }\n          }\n          return true;\n      }\n      return false;\n    }\n    // Returns true if the query is valid.\n    function updateSearchQuery(cm, rawQuery, ignoreCase, smartCase) {\n      if (!rawQuery) {\n        return;\n      }\n      var state = getSearchState(cm);\n      var query = parseQuery(rawQuery, !!ignoreCase, !!smartCase);\n      if (!query) {\n        return;\n      }\n      highlightSearchMatches(cm, query);\n      if (regexEqual(query, state.getQuery())) {\n        return query;\n      }\n      state.setQuery(query);\n      return query;\n    }\n    function searchOverlay(query) {\n      if (query.source.charAt(0) == '^') {\n        var matchSol = true;\n      }\n      return {\n        token: function(stream) {\n          if (matchSol && !stream.sol()) {\n            stream.skipToEnd();\n            return;\n          }\n          var match = stream.match(query, false);\n          if (match) {\n            if (match[0].length == 0) {\n              // Matched empty string, skip to next.\n              stream.next();\n              return 'searching';\n            }\n            if (!stream.sol()) {\n              // Backtrack 1 to match \\b\n              stream.backUp(1);\n              if (!query.exec(stream.next() + match[0])) {\n                stream.next();\n                return null;\n              }\n            }\n            stream.match(query);\n            return 'searching';\n          }\n          while (!stream.eol()) {\n            stream.next();\n            if (stream.match(query, false)) break;\n          }\n        },\n        query: query\n      };\n    }\n    var highlightTimeout = 0;\n    function highlightSearchMatches(cm, query) {\n      clearTimeout(highlightTimeout);\n      highlightTimeout = setTimeout(function() {\n        if (!cm.state.vim) return;\n        var searchState = getSearchState(cm);\n        var overlay = searchState.getOverlay();\n        if (!overlay || query != overlay.query) {\n          if (overlay) {\n            cm.removeOverlay(overlay);\n          }\n          overlay = searchOverlay(query);\n          cm.addOverlay(overlay);\n          if (cm.showMatchesOnScrollbar) {\n            if (searchState.getScrollbarAnnotate()) {\n              searchState.getScrollbarAnnotate().clear();\n            }\n            searchState.setScrollbarAnnotate(cm.showMatchesOnScrollbar(query));\n          }\n          searchState.setOverlay(overlay);\n        }\n      }, 50);\n    }\n    function findNext(cm, prev, query, repeat) {\n      if (repeat === undefined) { repeat = 1; }\n      return cm.operation(function() {\n        var pos = cm.getCursor();\n        var cursor = cm.getSearchCursor(query, pos);\n        for (var i = 0; i < repeat; i++) {\n          var found = cursor.find(prev);\n          if (i == 0 && found && cursorEqual(cursor.from(), pos)) {\n            var lastEndPos = prev ? cursor.from() : cursor.to();\n            found = cursor.find(prev);\n            if (found && !found[0] && cursorEqual(cursor.from(), lastEndPos)) {\n              if (cm.getLine(lastEndPos.line).length == lastEndPos.ch)\n                found = cursor.find(prev);\n            }\n          }\n          if (!found) {\n            // SearchCursor may have returned null because it hit EOF, wrap\n            // around and try again.\n            cursor = cm.getSearchCursor(query,\n                (prev) ? new Pos(cm.lastLine()) : new Pos(cm.firstLine(), 0) );\n            if (!cursor.find(prev)) {\n              return;\n            }\n          }\n        }\n        return cursor.from();\n      });\n    }\n    /**\n     * Pretty much the same as `findNext`, except for the following differences:\n     *\n     * 1. Before starting the search, move to the previous search. This way if our cursor is\n     * already inside a match, we should return the current match.\n     * 2. Rather than only returning the cursor's from, we return the cursor's from and to as a tuple.\n     */\n    function findNextFromAndToInclusive(cm, prev, query, repeat, vim) {\n      if (repeat === undefined) { repeat = 1; }\n      return cm.operation(function() {\n        var pos = cm.getCursor();\n        var cursor = cm.getSearchCursor(query, pos);\n\n        // Go back one result to ensure that if the cursor is currently a match, we keep it.\n        var found = cursor.find(!prev);\n\n        // If we haven't moved, go back one more (similar to if i==0 logic in findNext).\n        if (!vim.visualMode && found && cursorEqual(cursor.from(), pos)) {\n          cursor.find(!prev);\n        }\n\n        for (var i = 0; i < repeat; i++) {\n          found = cursor.find(prev);\n          if (!found) {\n            // SearchCursor may have returned null because it hit EOF, wrap\n            // around and try again.\n            cursor = cm.getSearchCursor(query,\n                (prev) ? new Pos(cm.lastLine()) : new Pos(cm.firstLine(), 0) );\n            if (!cursor.find(prev)) {\n              return;\n            }\n          }\n        }\n        return [cursor.from(), cursor.to()];\n      });\n    }\n    function clearSearchHighlight(cm) {\n      var state = getSearchState(cm);\n      cm.removeOverlay(getSearchState(cm).getOverlay());\n      state.setOverlay(null);\n      if (state.getScrollbarAnnotate()) {\n        state.getScrollbarAnnotate().clear();\n        state.setScrollbarAnnotate(null);\n      }\n    }\n    /**\n     * Check if pos is in the specified range, INCLUSIVE.\n     * Range can be specified with 1 or 2 arguments.\n     * If the first range argument is an array, treat it as an array of line\n     * numbers. Match pos against any of the lines.\n     * If the first range argument is a number,\n     *   if there is only 1 range argument, check if pos has the same line\n     *       number\n     *   if there are 2 range arguments, then check if pos is in between the two\n     *       range arguments.\n     */\n    function isInRange(pos, start, end) {\n      if (typeof pos != 'number') {\n        // Assume it is a cursor position. Get the line number.\n        pos = pos.line;\n      }\n      if (start instanceof Array) {\n        return inArray(pos, start);\n      } else {\n        if (typeof end == 'number') {\n          return (pos >= start && pos <= end);\n        } else {\n          return pos == start;\n        }\n      }\n    }\n    function getUserVisibleLines(cm) {\n      var scrollInfo = cm.getScrollInfo();\n      var occludeToleranceTop = 6;\n      var occludeToleranceBottom = 10;\n      var from = cm.coordsChar({left:0, top: occludeToleranceTop + scrollInfo.top}, 'local');\n      var bottomY = scrollInfo.clientHeight - occludeToleranceBottom + scrollInfo.top;\n      var to = cm.coordsChar({left:0, top: bottomY}, 'local');\n      return {top: from.line, bottom: to.line};\n    }\n\n    function getMarkPos(cm, vim, markName) {\n      if (markName == '\\'' || markName == '`') {\n        return vimGlobalState.jumpList.find(cm, -1) || new Pos(0, 0);\n      } else if (markName == '.') {\n        return getLastEditPos(cm);\n      }\n\n      var mark = vim.marks[markName];\n      return mark && mark.find();\n    }\n\n    function getLastEditPos(cm) {\n      var done = cm.doc.history.done;\n      for (var i = done.length; i--;) {\n        if (done[i].changes) {\n          return copyCursor(done[i].changes[0].to);\n        }\n      }\n    }\n\n    var ExCommandDispatcher = function() {\n      this.buildCommandMap_();\n    };\n    ExCommandDispatcher.prototype = {\n      processCommand: function(cm, input, opt_params) {\n        var that = this;\n        cm.operation(function () {\n          cm.curOp.isVimOp = true;\n          that._processCommand(cm, input, opt_params);\n        });\n      },\n      _processCommand: function(cm, input, opt_params) {\n        var vim = cm.state.vim;\n        var commandHistoryRegister = vimGlobalState.registerController.getRegister(':');\n        var previousCommand = commandHistoryRegister.toString();\n        if (vim.visualMode) {\n          exitVisualMode(cm);\n        }\n        var inputStream = new CodeMirror.StringStream(input);\n        // update \": with the latest command whether valid or invalid\n        commandHistoryRegister.setText(input);\n        var params = opt_params || {};\n        params.input = input;\n        try {\n          this.parseInput_(cm, inputStream, params);\n        } catch(e) {\n          showConfirm(cm, e.toString());\n          throw e;\n        }\n        var command;\n        var commandName;\n        if (!params.commandName) {\n          // If only a line range is defined, move to the line.\n          if (params.line !== undefined) {\n            commandName = 'move';\n          }\n        } else {\n          command = this.matchCommand_(params.commandName);\n          if (command) {\n            commandName = command.name;\n            if (command.excludeFromCommandHistory) {\n              commandHistoryRegister.setText(previousCommand);\n            }\n            this.parseCommandArgs_(inputStream, params, command);\n            if (command.type == 'exToKey') {\n              // Handle Ex to Key mapping.\n              for (var i = 0; i < command.toKeys.length; i++) {\n                vimApi.handleKey(cm, command.toKeys[i], 'mapping');\n              }\n              return;\n            } else if (command.type == 'exToEx') {\n              // Handle Ex to Ex mapping.\n              this.processCommand(cm, command.toInput);\n              return;\n            }\n          }\n        }\n        if (!commandName) {\n          showConfirm(cm, 'Not an editor command \":' + input + '\"');\n          return;\n        }\n        try {\n          exCommands[commandName](cm, params);\n          // Possibly asynchronous commands (e.g. substitute, which might have a\n          // user confirmation), are responsible for calling the callback when\n          // done. All others have it taken care of for them here.\n          if ((!command || !command.possiblyAsync) && params.callback) {\n            params.callback();\n          }\n        } catch(e) {\n          showConfirm(cm, e.toString());\n          throw e;\n        }\n      },\n      parseInput_: function(cm, inputStream, result) {\n        inputStream.eatWhile(':');\n        // Parse range.\n        if (inputStream.eat('%')) {\n          result.line = cm.firstLine();\n          result.lineEnd = cm.lastLine();\n        } else {\n          result.line = this.parseLineSpec_(cm, inputStream);\n          if (result.line !== undefined && inputStream.eat(',')) {\n            result.lineEnd = this.parseLineSpec_(cm, inputStream);\n          }\n        }\n\n        // Parse command name.\n        var commandMatch = inputStream.match(/^(\\w+|!!|@@|[!#&*<=>@~])/);\n        if (commandMatch) {\n          result.commandName = commandMatch[1];\n        } else {\n          result.commandName = inputStream.match(/.*/)[0];\n        }\n\n        return result;\n      },\n      parseLineSpec_: function(cm, inputStream) {\n        var numberMatch = inputStream.match(/^(\\d+)/);\n        if (numberMatch) {\n          // Absolute line number plus offset (N+M or N-M) is probably a typo,\n          // not something the user actually wanted. (NB: vim does allow this.)\n          return parseInt(numberMatch[1], 10) - 1;\n        }\n        switch (inputStream.next()) {\n          case '.':\n            return this.parseLineSpecOffset_(inputStream, cm.getCursor().line);\n          case '$':\n            return this.parseLineSpecOffset_(inputStream, cm.lastLine());\n          case '\\'':\n            var markName = inputStream.next();\n            var markPos = getMarkPos(cm, cm.state.vim, markName);\n            if (!markPos) throw new Error('Mark not set');\n            return this.parseLineSpecOffset_(inputStream, markPos.line);\n          case '-':\n          case '+':\n            inputStream.backUp(1);\n            // Offset is relative to current line if not otherwise specified.\n            return this.parseLineSpecOffset_(inputStream, cm.getCursor().line);\n          default:\n            inputStream.backUp(1);\n            return undefined;\n        }\n      },\n      parseLineSpecOffset_: function(inputStream, line) {\n        var offsetMatch = inputStream.match(/^([+-])?(\\d+)/);\n        if (offsetMatch) {\n          var offset = parseInt(offsetMatch[2], 10);\n          if (offsetMatch[1] == \"-\") {\n            line -= offset;\n          } else {\n            line += offset;\n          }\n        }\n        return line;\n      },\n      parseCommandArgs_: function(inputStream, params, command) {\n        if (inputStream.eol()) {\n          return;\n        }\n        params.argString = inputStream.match(/.*/)[0];\n        // Parse command-line arguments\n        var delim = command.argDelimiter || /\\s+/;\n        var args = trim(params.argString).split(delim);\n        if (args.length && args[0]) {\n          params.args = args;\n        }\n      },\n      matchCommand_: function(commandName) {\n        // Return the command in the command map that matches the shortest\n        // prefix of the passed in command name. The match is guaranteed to be\n        // unambiguous if the defaultExCommandMap's shortNames are set up\n        // correctly. (see @code{defaultExCommandMap}).\n        for (var i = commandName.length; i > 0; i--) {\n          var prefix = commandName.substring(0, i);\n          if (this.commandMap_[prefix]) {\n            var command = this.commandMap_[prefix];\n            if (command.name.indexOf(commandName) === 0) {\n              return command;\n            }\n          }\n        }\n        return null;\n      },\n      buildCommandMap_: function() {\n        this.commandMap_ = {};\n        for (var i = 0; i < defaultExCommandMap.length; i++) {\n          var command = defaultExCommandMap[i];\n          var key = command.shortName || command.name;\n          this.commandMap_[key] = command;\n        }\n      },\n      map: function(lhs, rhs, ctx) {\n        if (lhs != ':' && lhs.charAt(0) == ':') {\n          if (ctx) { throw Error('Mode not supported for ex mappings'); }\n          var commandName = lhs.substring(1);\n          if (rhs != ':' && rhs.charAt(0) == ':') {\n            // Ex to Ex mapping\n            this.commandMap_[commandName] = {\n              name: commandName,\n              type: 'exToEx',\n              toInput: rhs.substring(1),\n              user: true\n            };\n          } else {\n            // Ex to key mapping\n            this.commandMap_[commandName] = {\n              name: commandName,\n              type: 'exToKey',\n              toKeys: rhs,\n              user: true\n            };\n          }\n        } else {\n          if (rhs != ':' && rhs.charAt(0) == ':') {\n            // Key to Ex mapping.\n            var mapping = {\n              keys: lhs,\n              type: 'keyToEx',\n              exArgs: { input: rhs.substring(1) }\n            };\n            if (ctx) { mapping.context = ctx; }\n            defaultKeymap.unshift(mapping);\n          } else {\n            // Key to key mapping\n            var mapping = {\n              keys: lhs,\n              type: 'keyToKey',\n              toKeys: rhs\n            };\n            if (ctx) { mapping.context = ctx; }\n            defaultKeymap.unshift(mapping);\n          }\n        }\n      },\n      unmap: function(lhs, ctx) {\n        if (lhs != ':' && lhs.charAt(0) == ':') {\n          // Ex to Ex or Ex to key mapping\n          if (ctx) { throw Error('Mode not supported for ex mappings'); }\n          var commandName = lhs.substring(1);\n          if (this.commandMap_[commandName] && this.commandMap_[commandName].user) {\n            delete this.commandMap_[commandName];\n            return true;\n          }\n        } else {\n          // Key to Ex or key to key mapping\n          var keys = lhs;\n          for (var i = 0; i < defaultKeymap.length; i++) {\n            if (keys == defaultKeymap[i].keys\n                && defaultKeymap[i].context === ctx) {\n              defaultKeymap.splice(i, 1);\n              return true;\n            }\n          }\n        }\n      }\n    };\n\n    var exCommands = {\n      colorscheme: function(cm, params) {\n        if (!params.args || params.args.length < 1) {\n          showConfirm(cm, cm.getOption('theme'));\n          return;\n        }\n        cm.setOption('theme', params.args[0]);\n      },\n      map: function(cm, params, ctx) {\n        var mapArgs = params.args;\n        if (!mapArgs || mapArgs.length < 2) {\n          if (cm) {\n            showConfirm(cm, 'Invalid mapping: ' + params.input);\n          }\n          return;\n        }\n        exCommandDispatcher.map(mapArgs[0], mapArgs[1], ctx);\n      },\n      imap: function(cm, params) { this.map(cm, params, 'insert'); },\n      nmap: function(cm, params) { this.map(cm, params, 'normal'); },\n      vmap: function(cm, params) { this.map(cm, params, 'visual'); },\n      unmap: function(cm, params, ctx) {\n        var mapArgs = params.args;\n        if (!mapArgs || mapArgs.length < 1 || !exCommandDispatcher.unmap(mapArgs[0], ctx)) {\n          if (cm) {\n            showConfirm(cm, 'No such mapping: ' + params.input);\n          }\n        }\n      },\n      move: function(cm, params) {\n        commandDispatcher.processCommand(cm, cm.state.vim, {\n            type: 'motion',\n            motion: 'moveToLineOrEdgeOfDocument',\n            motionArgs: { forward: false, explicitRepeat: true,\n              linewise: true },\n            repeatOverride: params.line+1});\n      },\n      set: function(cm, params) {\n        var setArgs = params.args;\n        // Options passed through to the setOption/getOption calls. May be passed in by the\n        // local/global versions of the set command\n        var setCfg = params.setCfg || {};\n        if (!setArgs || setArgs.length < 1) {\n          if (cm) {\n            showConfirm(cm, 'Invalid mapping: ' + params.input);\n          }\n          return;\n        }\n        var expr = setArgs[0].split('=');\n        var optionName = expr[0];\n        var value = expr[1];\n        var forceGet = false;\n\n        if (optionName.charAt(optionName.length - 1) == '?') {\n          // If post-fixed with ?, then the set is actually a get.\n          if (value) { throw Error('Trailing characters: ' + params.argString); }\n          optionName = optionName.substring(0, optionName.length - 1);\n          forceGet = true;\n        }\n        if (value === undefined && optionName.substring(0, 2) == 'no') {\n          // To set boolean options to false, the option name is prefixed with\n          // 'no'.\n          optionName = optionName.substring(2);\n          value = false;\n        }\n\n        var optionIsBoolean = options[optionName] && options[optionName].type == 'boolean';\n        if (optionIsBoolean && value == undefined) {\n          // Calling set with a boolean option sets it to true.\n          value = true;\n        }\n        // If no value is provided, then we assume this is a get.\n        if (!optionIsBoolean && value === undefined || forceGet) {\n          var oldValue = getOption(optionName, cm, setCfg);\n          if (oldValue instanceof Error) {\n            showConfirm(cm, oldValue.message);\n          } else if (oldValue === true || oldValue === false) {\n            showConfirm(cm, ' ' + (oldValue ? '' : 'no') + optionName);\n          } else {\n            showConfirm(cm, '  ' + optionName + '=' + oldValue);\n          }\n        } else {\n          var setOptionReturn = setOption(optionName, value, cm, setCfg);\n          if (setOptionReturn instanceof Error) {\n            showConfirm(cm, setOptionReturn.message);\n          }\n        }\n      },\n      setlocal: function (cm, params) {\n        // setCfg is passed through to setOption\n        params.setCfg = {scope: 'local'};\n        this.set(cm, params);\n      },\n      setglobal: function (cm, params) {\n        // setCfg is passed through to setOption\n        params.setCfg = {scope: 'global'};\n        this.set(cm, params);\n      },\n      registers: function(cm, params) {\n        var regArgs = params.args;\n        var registers = vimGlobalState.registerController.registers;\n        var regInfo = '----------Registers----------\\n\\n';\n        if (!regArgs) {\n          for (var registerName in registers) {\n            var text = registers[registerName].toString();\n            if (text.length) {\n              regInfo += '\"' + registerName + '    ' + text + '\\n';\n            }\n          }\n        } else {\n          var registerName;\n          regArgs = regArgs.join('');\n          for (var i = 0; i < regArgs.length; i++) {\n            registerName = regArgs.charAt(i);\n            if (!vimGlobalState.registerController.isValidRegister(registerName)) {\n              continue;\n            }\n            var register = registers[registerName] || new Register();\n            regInfo += '\"' + registerName + '    ' + register.toString() + '\\n';\n          }\n        }\n        showConfirm(cm, regInfo);\n      },\n      sort: function(cm, params) {\n        var reverse, ignoreCase, unique, number, pattern;\n        function parseArgs() {\n          if (params.argString) {\n            var args = new CodeMirror.StringStream(params.argString);\n            if (args.eat('!')) { reverse = true; }\n            if (args.eol()) { return; }\n            if (!args.eatSpace()) { return 'Invalid arguments'; }\n            var opts = args.match(/([dinuox]+)?\\s*(\\/.+\\/)?\\s*/);\n            if (!opts && !args.eol()) { return 'Invalid arguments'; }\n            if (opts[1]) {\n              ignoreCase = opts[1].indexOf('i') != -1;\n              unique = opts[1].indexOf('u') != -1;\n              var decimal = opts[1].indexOf('d') != -1 || opts[1].indexOf('n') != -1 && 1;\n              var hex = opts[1].indexOf('x') != -1 && 1;\n              var octal = opts[1].indexOf('o') != -1 && 1;\n              if (decimal + hex + octal > 1) { return 'Invalid arguments'; }\n              number = decimal && 'decimal' || hex && 'hex' || octal && 'octal';\n            }\n            if (opts[2]) {\n              pattern = new RegExp(opts[2].substr(1, opts[2].length - 2), ignoreCase ? 'i' : '');\n            }\n          }\n        }\n        var err = parseArgs();\n        if (err) {\n          showConfirm(cm, err + ': ' + params.argString);\n          return;\n        }\n        var lineStart = params.line || cm.firstLine();\n        var lineEnd = params.lineEnd || params.line || cm.lastLine();\n        if (lineStart == lineEnd) { return; }\n        var curStart = new Pos(lineStart, 0);\n        var curEnd = new Pos(lineEnd, lineLength(cm, lineEnd));\n        var text = cm.getRange(curStart, curEnd).split('\\n');\n        var numberRegex = pattern ? pattern :\n           (number == 'decimal') ? /(-?)([\\d]+)/ :\n           (number == 'hex') ? /(-?)(?:0x)?([0-9a-f]+)/i :\n           (number == 'octal') ? /([0-7]+)/ : null;\n        var radix = (number == 'decimal') ? 10 : (number == 'hex') ? 16 : (number == 'octal') ? 8 : null;\n        var numPart = [], textPart = [];\n        if (number || pattern) {\n          for (var i = 0; i < text.length; i++) {\n            var matchPart = pattern ? text[i].match(pattern) : null;\n            if (matchPart && matchPart[0] != '') {\n              numPart.push(matchPart);\n            } else if (!pattern && numberRegex.exec(text[i])) {\n              numPart.push(text[i]);\n            } else {\n              textPart.push(text[i]);\n            }\n          }\n        } else {\n          textPart = text;\n        }\n        function compareFn(a, b) {\n          if (reverse) { var tmp; tmp = a; a = b; b = tmp; }\n          if (ignoreCase) { a = a.toLowerCase(); b = b.toLowerCase(); }\n          var anum = number && numberRegex.exec(a);\n          var bnum = number && numberRegex.exec(b);\n          if (!anum) { return a < b ? -1 : 1; }\n          anum = parseInt((anum[1] + anum[2]).toLowerCase(), radix);\n          bnum = parseInt((bnum[1] + bnum[2]).toLowerCase(), radix);\n          return anum - bnum;\n        }\n        function comparePatternFn(a, b) {\n          if (reverse) { var tmp; tmp = a; a = b; b = tmp; }\n          if (ignoreCase) { a[0] = a[0].toLowerCase(); b[0] = b[0].toLowerCase(); }\n          return (a[0] < b[0]) ? -1 : 1;\n        }\n        numPart.sort(pattern ? comparePatternFn : compareFn);\n        if (pattern) {\n          for (var i = 0; i < numPart.length; i++) {\n            numPart[i] = numPart[i].input;\n          }\n        } else if (!number) { textPart.sort(compareFn); }\n        text = (!reverse) ? textPart.concat(numPart) : numPart.concat(textPart);\n        if (unique) { // Remove duplicate lines\n          var textOld = text;\n          var lastLine;\n          text = [];\n          for (var i = 0; i < textOld.length; i++) {\n            if (textOld[i] != lastLine) {\n              text.push(textOld[i]);\n            }\n            lastLine = textOld[i];\n          }\n        }\n        cm.replaceRange(text.join('\\n'), curStart, curEnd);\n      },\n      vglobal: function(cm, params) {\n        // global inspects params.commandName\n        this.global(cm, params);\n      },\n      global: function(cm, params) {\n        // a global command is of the form\n        // :[range]g/pattern/[cmd]\n        // argString holds the string /pattern/[cmd]\n        var argString = params.argString;\n        if (!argString) {\n          showConfirm(cm, 'Regular Expression missing from global');\n          return;\n        }\n        var inverted = params.commandName[0] === 'v';\n        // range is specified here\n        var lineStart = (params.line !== undefined) ? params.line : cm.firstLine();\n        var lineEnd = params.lineEnd || params.line || cm.lastLine();\n        // get the tokens from argString\n        var tokens = splitBySlash(argString);\n        var regexPart = argString, cmd;\n        if (tokens.length) {\n          regexPart = tokens[0];\n          cmd = tokens.slice(1, tokens.length).join('/');\n        }\n        if (regexPart) {\n          // If regex part is empty, then use the previous query. Otherwise\n          // use the regex part as the new query.\n          try {\n           updateSearchQuery(cm, regexPart, true /** ignoreCase */,\n             true /** smartCase */);\n          } catch (e) {\n           showConfirm(cm, 'Invalid regex: ' + regexPart);\n           return;\n          }\n        }\n        // now that we have the regexPart, search for regex matches in the\n        // specified range of lines\n        var query = getSearchState(cm).getQuery();\n        var matchedLines = [];\n        for (var i = lineStart; i <= lineEnd; i++) {\n          var line = cm.getLineHandle(i);\n          var matched = query.test(line.text);\n          if (matched !== inverted) {\n            matchedLines.push(cmd ? line : line.text);\n          }\n        }\n        // if there is no [cmd], just display the list of matched lines\n        if (!cmd) {\n          showConfirm(cm, matchedLines.join('\\n'));\n          return;\n        }\n        var index = 0;\n        var nextCommand = function() {\n          if (index < matchedLines.length) {\n            var line = matchedLines[index++];\n            var lineNum = cm.getLineNumber(line);\n            if (lineNum == null) {\n              nextCommand();\n              return;\n            }\n            var command = (lineNum + 1) + cmd;\n            exCommandDispatcher.processCommand(cm, command, {\n              callback: nextCommand\n            });\n          }\n        };\n        nextCommand();\n      },\n      substitute: function(cm, params) {\n        if (!cm.getSearchCursor) {\n          throw new Error('Search feature not available. Requires searchcursor.js or ' +\n              'any other getSearchCursor implementation.');\n        }\n        var argString = params.argString;\n        var tokens = argString ? splitBySeparator(argString, argString[0]) : [];\n        var regexPart, replacePart = '', trailing, flagsPart, count;\n        var confirm = false; // Whether to confirm each replace.\n        var global = false; // True to replace all instances on a line, false to replace only 1.\n        if (tokens.length) {\n          regexPart = tokens[0];\n          if (getOption('pcre') && regexPart !== '') {\n              regexPart = new RegExp(regexPart).source; //normalize not escaped characters\n          }\n          replacePart = tokens[1];\n          if (replacePart !== undefined) {\n            if (getOption('pcre')) {\n              replacePart = unescapeRegexReplace(replacePart.replace(/([^\\\\])&/g,\"$1$$&\"));\n            } else {\n              replacePart = translateRegexReplace(replacePart);\n            }\n            vimGlobalState.lastSubstituteReplacePart = replacePart;\n          }\n          trailing = tokens[2] ? tokens[2].split(' ') : [];\n        } else {\n          // either the argString is empty or its of the form ' hello/world'\n          // actually splitBySlash returns a list of tokens\n          // only if the string starts with a '/'\n          if (argString && argString.length) {\n            showConfirm(cm, 'Substitutions should be of the form ' +\n                ':s/pattern/replace/');\n            return;\n          }\n        }\n        // After the 3rd slash, we can have flags followed by a space followed\n        // by count.\n        if (trailing) {\n          flagsPart = trailing[0];\n          count = parseInt(trailing[1]);\n          if (flagsPart) {\n            if (flagsPart.indexOf('c') != -1) {\n              confirm = true;\n            }\n            if (flagsPart.indexOf('g') != -1) {\n              global = true;\n            }\n            if (getOption('pcre')) {\n               regexPart = regexPart + '/' + flagsPart;\n            } else {\n               regexPart = regexPart.replace(/\\//g, \"\\\\/\") + '/' + flagsPart;\n            }\n          }\n        }\n        if (regexPart) {\n          // If regex part is empty, then use the previous query. Otherwise use\n          // the regex part as the new query.\n          try {\n            updateSearchQuery(cm, regexPart, true /** ignoreCase */,\n              true /** smartCase */);\n          } catch (e) {\n            showConfirm(cm, 'Invalid regex: ' + regexPart);\n            return;\n          }\n        }\n        replacePart = replacePart || vimGlobalState.lastSubstituteReplacePart;\n        if (replacePart === undefined) {\n          showConfirm(cm, 'No previous substitute regular expression');\n          return;\n        }\n        var state = getSearchState(cm);\n        var query = state.getQuery();\n        var lineStart = (params.line !== undefined) ? params.line : cm.getCursor().line;\n        var lineEnd = params.lineEnd || lineStart;\n        if (lineStart == cm.firstLine() && lineEnd == cm.lastLine()) {\n          lineEnd = Infinity;\n        }\n        if (count) {\n          lineStart = lineEnd;\n          lineEnd = lineStart + count - 1;\n        }\n        var startPos = clipCursorToContent(cm, new Pos(lineStart, 0));\n        var cursor = cm.getSearchCursor(query, startPos);\n        doReplace(cm, confirm, global, lineStart, lineEnd, cursor, query, replacePart, params.callback);\n      },\n      redo: CodeMirror.commands.redo,\n      undo: CodeMirror.commands.undo,\n      write: function(cm) {\n        if (CodeMirror.commands.save) {\n          // If a save command is defined, call it.\n          CodeMirror.commands.save(cm);\n        } else if (cm.save) {\n          // Saves to text area if no save command is defined and cm.save() is available.\n          cm.save();\n        }\n      },\n      nohlsearch: function(cm) {\n        clearSearchHighlight(cm);\n      },\n      yank: function (cm) {\n        var cur = copyCursor(cm.getCursor());\n        var line = cur.line;\n        var lineText = cm.getLine(line);\n        vimGlobalState.registerController.pushText(\n          '0', 'yank', lineText, true, true);\n      },\n      delmarks: function(cm, params) {\n        if (!params.argString || !trim(params.argString)) {\n          showConfirm(cm, 'Argument required');\n          return;\n        }\n\n        var state = cm.state.vim;\n        var stream = new CodeMirror.StringStream(trim(params.argString));\n        while (!stream.eol()) {\n          stream.eatSpace();\n\n          // Record the streams position at the beginning of the loop for use\n          // in error messages.\n          var count = stream.pos;\n\n          if (!stream.match(/[a-zA-Z]/, false)) {\n            showConfirm(cm, 'Invalid argument: ' + params.argString.substring(count));\n            return;\n          }\n\n          var sym = stream.next();\n          // Check if this symbol is part of a range\n          if (stream.match('-', true)) {\n            // This symbol is part of a range.\n\n            // The range must terminate at an alphabetic character.\n            if (!stream.match(/[a-zA-Z]/, false)) {\n              showConfirm(cm, 'Invalid argument: ' + params.argString.substring(count));\n              return;\n            }\n\n            var startMark = sym;\n            var finishMark = stream.next();\n            // The range must terminate at an alphabetic character which\n            // shares the same case as the start of the range.\n            if (isLowerCase(startMark) && isLowerCase(finishMark) ||\n                isUpperCase(startMark) && isUpperCase(finishMark)) {\n              var start = startMark.charCodeAt(0);\n              var finish = finishMark.charCodeAt(0);\n              if (start >= finish) {\n                showConfirm(cm, 'Invalid argument: ' + params.argString.substring(count));\n                return;\n              }\n\n              // Because marks are always ASCII values, and we have\n              // determined that they are the same case, we can use\n              // their char codes to iterate through the defined range.\n              for (var j = 0; j <= finish - start; j++) {\n                var mark = String.fromCharCode(start + j);\n                delete state.marks[mark];\n              }\n            } else {\n              showConfirm(cm, 'Invalid argument: ' + startMark + '-');\n              return;\n            }\n          } else {\n            // This symbol is a valid mark, and is not part of a range.\n            delete state.marks[sym];\n          }\n        }\n      }\n    };\n\n    var exCommandDispatcher = new ExCommandDispatcher();\n\n    /**\n    * @param {CodeMirror} cm CodeMirror instance we are in.\n    * @param {boolean} confirm Whether to confirm each replace.\n    * @param {Cursor} lineStart Line to start replacing from.\n    * @param {Cursor} lineEnd Line to stop replacing at.\n    * @param {RegExp} query Query for performing matches with.\n    * @param {string} replaceWith Text to replace matches with. May contain $1,\n    *     $2, etc for replacing captured groups using JavaScript replace.\n    * @param {function()} callback A callback for when the replace is done.\n    */\n    function doReplace(cm, confirm, global, lineStart, lineEnd, searchCursor, query,\n        replaceWith, callback) {\n      // Set up all the functions.\n      cm.state.vim.exMode = true;\n      var done = false;\n      var lastPos, modifiedLineNumber, joined;\n      function replaceAll() {\n        cm.operation(function() {\n          while (!done) {\n            replace();\n            next();\n          }\n          stop();\n        });\n      }\n      function replace() {\n        var text = cm.getRange(searchCursor.from(), searchCursor.to());\n        var newText = text.replace(query, replaceWith);\n        var unmodifiedLineNumber = searchCursor.to().line;\n        searchCursor.replace(newText);\n        modifiedLineNumber = searchCursor.to().line;\n        lineEnd += modifiedLineNumber - unmodifiedLineNumber;\n        joined = modifiedLineNumber < unmodifiedLineNumber;\n      }\n      function findNextValidMatch() {\n        var lastMatchTo = lastPos && copyCursor(searchCursor.to());\n        var match = searchCursor.findNext();\n        if (match && !match[0] && lastMatchTo && cursorEqual(searchCursor.from(), lastMatchTo)) {\n          match = searchCursor.findNext();\n        }\n        return match;\n      }\n      function next() {\n        // The below only loops to skip over multiple occurrences on the same\n        // line when 'global' is not true.\n        while(findNextValidMatch() &&\n              isInRange(searchCursor.from(), lineStart, lineEnd)) {\n          if (!global && searchCursor.from().line == modifiedLineNumber && !joined) {\n            continue;\n          }\n          cm.scrollIntoView(searchCursor.from(), 30);\n          cm.setSelection(searchCursor.from(), searchCursor.to());\n          lastPos = searchCursor.from();\n          done = false;\n          return;\n        }\n        done = true;\n      }\n      function stop(close) {\n        if (close) { close(); }\n        cm.focus();\n        if (lastPos) {\n          cm.setCursor(lastPos);\n          var vim = cm.state.vim;\n          vim.exMode = false;\n          vim.lastHPos = vim.lastHSPos = lastPos.ch;\n        }\n        if (callback) { callback(); }\n      }\n      function onPromptKeyDown(e, _value, close) {\n        // Swallow all keys.\n        CodeMirror.e_stop(e);\n        var keyName = CodeMirror.keyName(e);\n        switch (keyName) {\n          case 'Y':\n            replace(); next(); break;\n          case 'N':\n            next(); break;\n          case 'A':\n            // replaceAll contains a call to close of its own. We don't want it\n            // to fire too early or multiple times.\n            var savedCallback = callback;\n            callback = undefined;\n            cm.operation(replaceAll);\n            callback = savedCallback;\n            break;\n          case 'L':\n            replace();\n            // fall through and exit.\n          case 'Q':\n          case 'Esc':\n          case 'Ctrl-C':\n          case 'Ctrl-[':\n            stop(close);\n            break;\n        }\n        if (done) { stop(close); }\n        return true;\n      }\n\n      // Actually do replace.\n      next();\n      if (done) {\n        showConfirm(cm, 'No matches for ' + query.source);\n        return;\n      }\n      if (!confirm) {\n        replaceAll();\n        if (callback) { callback(); }\n        return;\n      }\n      showPrompt(cm, {\n        prefix: dom('span', 'replace with ', dom('strong', replaceWith), ' (y/n/a/q/l)'),\n        onKeyDown: onPromptKeyDown\n      });\n    }\n\n    CodeMirror.keyMap.vim = {\n      attach: attachVimMap,\n      detach: detachVimMap,\n      call: cmKey\n    };\n\n    function exitInsertMode(cm) {\n      var vim = cm.state.vim;\n      var macroModeState = vimGlobalState.macroModeState;\n      var insertModeChangeRegister = vimGlobalState.registerController.getRegister('.');\n      var isPlaying = macroModeState.isPlaying;\n      var lastChange = macroModeState.lastInsertModeChanges;\n      if (!isPlaying) {\n        cm.off('change', onChange);\n        CodeMirror.off(cm.getInputField(), 'keydown', onKeyEventTargetKeyDown);\n      }\n      if (!isPlaying && vim.insertModeRepeat > 1) {\n        // Perform insert mode repeat for commands like 3,a and 3,o.\n        repeatLastEdit(cm, vim, vim.insertModeRepeat - 1,\n            true /** repeatForInsert */);\n        vim.lastEditInputState.repeatOverride = vim.insertModeRepeat;\n      }\n      delete vim.insertModeRepeat;\n      vim.insertMode = false;\n      cm.setCursor(cm.getCursor().line, cm.getCursor().ch-1);\n      cm.setOption('keyMap', 'vim');\n      cm.setOption('disableInput', true);\n      cm.toggleOverwrite(false); // exit replace mode if we were in it.\n      // update the \". register before exiting insert mode\n      insertModeChangeRegister.setText(lastChange.changes.join(''));\n      CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"normal\"});\n      if (macroModeState.isRecording) {\n        logInsertModeChange(macroModeState);\n      }\n    }\n\n    function _mapCommand(command) {\n      defaultKeymap.unshift(command);\n    }\n\n    function mapCommand(keys, type, name, args, extra) {\n      var command = {keys: keys, type: type};\n      command[type] = name;\n      command[type + \"Args\"] = args;\n      for (var key in extra)\n        command[key] = extra[key];\n      _mapCommand(command);\n    }\n\n    // The timeout in milliseconds for the two-character ESC keymap should be\n    // adjusted according to your typing speed to prevent false positives.\n    defineOption('insertModeEscKeysTimeout', 200, 'number');\n\n    CodeMirror.keyMap['vim-insert'] = {\n      // TODO: override navigation keys so that Esc will cancel automatic\n      // indentation from o, O, i_<CR>\n      fallthrough: ['default'],\n      attach: attachVimMap,\n      detach: detachVimMap,\n      call: cmKey\n    };\n\n    CodeMirror.keyMap['vim-replace'] = {\n      'Backspace': 'goCharLeft',\n      fallthrough: ['vim-insert'],\n      attach: attachVimMap,\n      detach: detachVimMap,\n      call: cmKey\n    };\n\n    function executeMacroRegister(cm, vim, macroModeState, registerName) {\n      var register = vimGlobalState.registerController.getRegister(registerName);\n      if (registerName == ':') {\n        // Read-only register containing last Ex command.\n        if (register.keyBuffer[0]) {\n          exCommandDispatcher.processCommand(cm, register.keyBuffer[0]);\n        }\n        macroModeState.isPlaying = false;\n        return;\n      }\n      var keyBuffer = register.keyBuffer;\n      var imc = 0;\n      macroModeState.isPlaying = true;\n      macroModeState.replaySearchQueries = register.searchQueries.slice(0);\n      for (var i = 0; i < keyBuffer.length; i++) {\n        var text = keyBuffer[i];\n        var match, key;\n        while (text) {\n          // Pull off one command key, which is either a single character\n          // or a special sequence wrapped in '<' and '>', e.g. '<Space>'.\n          match = (/<\\w+-.+?>|<\\w+>|./).exec(text);\n          key = match[0];\n          text = text.substring(match.index + key.length);\n          vimApi.handleKey(cm, key, 'macro');\n          if (vim.insertMode) {\n            var changes = register.insertModeChanges[imc++].changes;\n            vimGlobalState.macroModeState.lastInsertModeChanges.changes =\n                changes;\n            repeatInsertModeChanges(cm, changes, 1);\n            exitInsertMode(cm);\n          }\n        }\n      }\n      macroModeState.isPlaying = false;\n    }\n\n    function logKey(macroModeState, key) {\n      if (macroModeState.isPlaying) { return; }\n      var registerName = macroModeState.latestRegister;\n      var register = vimGlobalState.registerController.getRegister(registerName);\n      if (register) {\n        register.pushText(key);\n      }\n    }\n\n    function logInsertModeChange(macroModeState) {\n      if (macroModeState.isPlaying) { return; }\n      var registerName = macroModeState.latestRegister;\n      var register = vimGlobalState.registerController.getRegister(registerName);\n      if (register && register.pushInsertModeChanges) {\n        register.pushInsertModeChanges(macroModeState.lastInsertModeChanges);\n      }\n    }\n\n    function logSearchQuery(macroModeState, query) {\n      if (macroModeState.isPlaying) { return; }\n      var registerName = macroModeState.latestRegister;\n      var register = vimGlobalState.registerController.getRegister(registerName);\n      if (register && register.pushSearchQuery) {\n        register.pushSearchQuery(query);\n      }\n    }\n\n    /**\n     * Listens for changes made in insert mode.\n     * Should only be active in insert mode.\n     */\n    function onChange(cm, changeObj) {\n      var macroModeState = vimGlobalState.macroModeState;\n      var lastChange = macroModeState.lastInsertModeChanges;\n      if (!macroModeState.isPlaying) {\n        while(changeObj) {\n          lastChange.expectCursorActivityForChange = true;\n          if (lastChange.ignoreCount > 1) {\n            lastChange.ignoreCount--;\n          } else if (changeObj.origin == '+input' || changeObj.origin == 'paste'\n              || changeObj.origin === undefined /* only in testing */) {\n            var selectionCount = cm.listSelections().length;\n            if (selectionCount > 1)\n              lastChange.ignoreCount = selectionCount;\n            var text = changeObj.text.join('\\n');\n            if (lastChange.maybeReset) {\n              lastChange.changes = [];\n              lastChange.maybeReset = false;\n            }\n            if (text) {\n              if (cm.state.overwrite && !/\\n/.test(text)) {\n                lastChange.changes.push([text]);\n              } else {\n                lastChange.changes.push(text);\n              }\n            }\n          }\n          // Change objects may be chained with next.\n          changeObj = changeObj.next;\n        }\n      }\n    }\n\n    /**\n    * Listens for any kind of cursor activity on CodeMirror.\n    */\n    function onCursorActivity(cm) {\n      var vim = cm.state.vim;\n      if (vim.insertMode) {\n        // Tracking cursor activity in insert mode (for macro support).\n        var macroModeState = vimGlobalState.macroModeState;\n        if (macroModeState.isPlaying) { return; }\n        var lastChange = macroModeState.lastInsertModeChanges;\n        if (lastChange.expectCursorActivityForChange) {\n          lastChange.expectCursorActivityForChange = false;\n        } else {\n          // Cursor moved outside the context of an edit. Reset the change.\n          lastChange.maybeReset = true;\n        }\n      } else if (!cm.curOp.isVimOp) {\n        handleExternalSelection(cm, vim);\n      }\n    }\n    function handleExternalSelection(cm, vim) {\n      var anchor = cm.getCursor('anchor');\n      var head = cm.getCursor('head');\n      // Enter or exit visual mode to match mouse selection.\n      if (vim.visualMode && !cm.somethingSelected()) {\n        exitVisualMode(cm, false);\n      } else if (!vim.visualMode && !vim.insertMode && cm.somethingSelected()) {\n        vim.visualMode = true;\n        vim.visualLine = false;\n        CodeMirror.signal(cm, \"vim-mode-change\", {mode: \"visual\"});\n      }\n      if (vim.visualMode) {\n        // Bind CodeMirror selection model to vim selection model.\n        // Mouse selections are considered visual characterwise.\n        var headOffset = !cursorIsBefore(head, anchor) ? -1 : 0;\n        var anchorOffset = cursorIsBefore(head, anchor) ? -1 : 0;\n        head = offsetCursor(head, 0, headOffset);\n        anchor = offsetCursor(anchor, 0, anchorOffset);\n        vim.sel = {\n          anchor: anchor,\n          head: head\n        };\n        updateMark(cm, vim, '<', cursorMin(head, anchor));\n        updateMark(cm, vim, '>', cursorMax(head, anchor));\n      } else if (!vim.insertMode) {\n        // Reset lastHPos if selection was modified by something outside of vim mode e.g. by mouse.\n        vim.lastHPos = cm.getCursor().ch;\n      }\n    }\n\n    /** Wrapper for special keys pressed in insert mode */\n    function InsertModeKey(keyName) {\n      this.keyName = keyName;\n    }\n\n    /**\n    * Handles raw key down events from the text area.\n    * - Should only be active in insert mode.\n    * - For recording deletes in insert mode.\n    */\n    function onKeyEventTargetKeyDown(e) {\n      var macroModeState = vimGlobalState.macroModeState;\n      var lastChange = macroModeState.lastInsertModeChanges;\n      var keyName = CodeMirror.keyName(e);\n      if (!keyName) { return; }\n      function onKeyFound() {\n        if (lastChange.maybeReset) {\n          lastChange.changes = [];\n          lastChange.maybeReset = false;\n        }\n        lastChange.changes.push(new InsertModeKey(keyName));\n        return true;\n      }\n      if (keyName.indexOf('Delete') != -1 || keyName.indexOf('Backspace') != -1) {\n        CodeMirror.lookupKey(keyName, 'vim-insert', onKeyFound);\n      }\n    }\n\n    /**\n     * Repeats the last edit, which includes exactly 1 command and at most 1\n     * insert. Operator and motion commands are read from lastEditInputState,\n     * while action commands are read from lastEditActionCommand.\n     *\n     * If repeatForInsert is true, then the function was called by\n     * exitInsertMode to repeat the insert mode changes the user just made. The\n     * corresponding enterInsertMode call was made with a count.\n     */\n    function repeatLastEdit(cm, vim, repeat, repeatForInsert) {\n      var macroModeState = vimGlobalState.macroModeState;\n      macroModeState.isPlaying = true;\n      var isAction = !!vim.lastEditActionCommand;\n      var cachedInputState = vim.inputState;\n      function repeatCommand() {\n        if (isAction) {\n          commandDispatcher.processAction(cm, vim, vim.lastEditActionCommand);\n        } else {\n          commandDispatcher.evalInput(cm, vim);\n        }\n      }\n      function repeatInsert(repeat) {\n        if (macroModeState.lastInsertModeChanges.changes.length > 0) {\n          // For some reason, repeat cw in desktop VIM does not repeat\n          // insert mode changes. Will conform to that behavior.\n          repeat = !vim.lastEditActionCommand ? 1 : repeat;\n          var changeObject = macroModeState.lastInsertModeChanges;\n          repeatInsertModeChanges(cm, changeObject.changes, repeat);\n        }\n      }\n      vim.inputState = vim.lastEditInputState;\n      if (isAction && vim.lastEditActionCommand.interlaceInsertRepeat) {\n        // o and O repeat have to be interlaced with insert repeats so that the\n        // insertions appear on separate lines instead of the last line.\n        for (var i = 0; i < repeat; i++) {\n          repeatCommand();\n          repeatInsert(1);\n        }\n      } else {\n        if (!repeatForInsert) {\n          // Hack to get the cursor to end up at the right place. If I is\n          // repeated in insert mode repeat, cursor will be 1 insert\n          // change set left of where it should be.\n          repeatCommand();\n        }\n        repeatInsert(repeat);\n      }\n      vim.inputState = cachedInputState;\n      if (vim.insertMode && !repeatForInsert) {\n        // Don't exit insert mode twice. If repeatForInsert is set, then we\n        // were called by an exitInsertMode call lower on the stack.\n        exitInsertMode(cm);\n      }\n      macroModeState.isPlaying = false;\n    }\n\n    function repeatInsertModeChanges(cm, changes, repeat) {\n      function keyHandler(binding) {\n        if (typeof binding == 'string') {\n          CodeMirror.commands[binding](cm);\n        } else {\n          binding(cm);\n        }\n        return true;\n      }\n      var head = cm.getCursor('head');\n      var visualBlock = vimGlobalState.macroModeState.lastInsertModeChanges.visualBlock;\n      if (visualBlock) {\n        // Set up block selection again for repeating the changes.\n        selectForInsert(cm, head, visualBlock + 1);\n        repeat = cm.listSelections().length;\n        cm.setCursor(head);\n      }\n      for (var i = 0; i < repeat; i++) {\n        if (visualBlock) {\n          cm.setCursor(offsetCursor(head, i, 0));\n        }\n        for (var j = 0; j < changes.length; j++) {\n          var change = changes[j];\n          if (change instanceof InsertModeKey) {\n            CodeMirror.lookupKey(change.keyName, 'vim-insert', keyHandler);\n          } else if (typeof change == \"string\") {\n            cm.replaceSelection(change);\n          } else {\n            var start = cm.getCursor();\n            var end = offsetCursor(start, 0, change[0].length);\n            cm.replaceRange(change[0], start, end);\n            cm.setCursor(end);\n          }\n        }\n      }\n      if (visualBlock) {\n        cm.setCursor(offsetCursor(head, 0, 1));\n      }\n    }\n\n    // multiselect support\n    function cloneVimState(state) {\n      var n = new state.constructor();\n      Object.keys(state).forEach(function(key) {\n        var o = state[key];\n        if (Array.isArray(o))\n          o = o.slice();\n        else if (o && typeof o == \"object\" && o.constructor != Object)\n          o = cloneVimState(o);\n        n[key] = o;\n      });\n      if (state.sel) {\n        n.sel = {\n          head: state.sel.head && copyCursor(state.sel.head),\n          anchor: state.sel.anchor && copyCursor(state.sel.anchor)\n        };\n      }\n      return n;\n    }\n    function multiSelectHandleKey(cm, key, origin) {\n      var isHandled = false;\n      var vim = vimApi.maybeInitVimState_(cm);\n      var visualBlock = vim.visualBlock || vim.wasInVisualBlock;\n\n      var wasMultiselect = cm.isInMultiSelectMode();\n      if (vim.wasInVisualBlock && !wasMultiselect) {\n        vim.wasInVisualBlock = false;\n      } else if (wasMultiselect && vim.visualBlock) {\n         vim.wasInVisualBlock = true;\n      }\n\n      if (key == '<Esc>' && !vim.insertMode && !vim.visualMode && wasMultiselect && vim.status == \"<Esc>\") {\n        // allow editor to exit multiselect\n        clearInputState(cm);\n      } else if (visualBlock || !wasMultiselect || cm.inVirtualSelectionMode) {\n        isHandled = vimApi.handleKey(cm, key, origin);\n      } else {\n        var old = cloneVimState(vim);\n\n        cm.operation(function() {\n          cm.curOp.isVimOp = true;\n          cm.forEachSelection(function() {\n            var head = cm.getCursor(\"head\");\n            var anchor = cm.getCursor(\"anchor\");\n            var headOffset = !cursorIsBefore(head, anchor) ? -1 : 0;\n            var anchorOffset = cursorIsBefore(head, anchor) ? -1 : 0;\n            head = offsetCursor(head, 0, headOffset);\n            anchor = offsetCursor(anchor, 0, anchorOffset);\n            cm.state.vim.sel.head = head;\n            cm.state.vim.sel.anchor = anchor;\n\n            isHandled = vimApi.handleKey(cm, key, origin);\n            if (cm.virtualSelection) {\n              cm.state.vim = cloneVimState(old);\n            }\n          });\n          if (cm.curOp.cursorActivity && !isHandled)\n            cm.curOp.cursorActivity = false;\n          cm.state.vim = vim;\n        }, true);\n      }\n      // some commands may bring visualMode and selection out of sync\n      if (isHandled && !vim.visualMode && !vim.insert && vim.visualMode != cm.somethingSelected()) {\n        handleExternalSelection(cm, vim);\n      }\n      return isHandled;\n    }\n    resetVimGlobalState();\n\n  return vimApi;\n}\n\nfunction initVim(CodeMirror5) {\r\n  CodeMirror5.Vim = initVim$1(CodeMirror5);\r\n  return CodeMirror5.Vim;\r\n}\n\n\n\n    CodeMirror.Vim = initVim(CodeMirror);\n  });\n  ","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  var WORD = /[\\w$]+/, RANGE = 500;\n\n  CodeMirror.registerHelper(\"hint\", \"anyword\", function(editor, options) {\n    var word = options && options.word || WORD;\n    var range = options && options.range || RANGE;\n    var cur = editor.getCursor(), curLine = editor.getLine(cur.line);\n    var end = cur.ch, start = end;\n    while (start && word.test(curLine.charAt(start - 1))) --start;\n    var curWord = start != end && curLine.slice(start, end);\n\n    var list = options && options.list || [], seen = {};\n    var re = new RegExp(word.source, \"g\");\n    for (var dir = -1; dir <= 1; dir += 2) {\n      var line = cur.line, endLine = Math.min(Math.max(line + dir * range, editor.firstLine()), editor.lastLine()) + dir;\n      for (; line != endLine; line += dir) {\n        var text = editor.getLine(line), m;\n        while (m = re.exec(text)) {\n          if (line == cur.line && m[0] === curWord) continue;\n          if ((!curWord || m[0].lastIndexOf(curWord, 0) == 0) && !Object.prototype.hasOwnProperty.call(seen, m[0])) {\n            seen[m[0]] = true;\n            list.push(m[0]);\n          }\n        }\n      }\n    }\n    return {list: list, from: CodeMirror.Pos(cur.line, start), to: CodeMirror.Pos(cur.line, end)};\n  });\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n  var GUTTER_ID = \"CodeMirror-lint-markers\";\n  var LINT_LINE_ID = \"CodeMirror-lint-line-\";\n\n  function showTooltip(cm, e, content) {\n    var tt = document.createElement(\"div\");\n    tt.className = \"CodeMirror-lint-tooltip cm-s-\" + cm.options.theme;\n    tt.appendChild(content.cloneNode(true));\n    if (cm.state.lint.options.selfContain)\n      cm.getWrapperElement().appendChild(tt);\n    else\n      document.body.appendChild(tt);\n\n    function position(e) {\n      if (!tt.parentNode) return CodeMirror.off(document, \"mousemove\", position);\n      tt.style.top = Math.max(0, e.clientY - tt.offsetHeight - 5) + \"px\";\n      tt.style.left = (e.clientX + 5) + \"px\";\n    }\n    CodeMirror.on(document, \"mousemove\", position);\n    position(e);\n    if (tt.style.opacity != null) tt.style.opacity = 1;\n    return tt;\n  }\n  function rm(elt) {\n    if (elt.parentNode) elt.parentNode.removeChild(elt);\n  }\n  function hideTooltip(tt) {\n    if (!tt.parentNode) return;\n    if (tt.style.opacity == null) rm(tt);\n    tt.style.opacity = 0;\n    setTimeout(function() { rm(tt); }, 600);\n  }\n\n  function showTooltipFor(cm, e, content, node) {\n    var tooltip = showTooltip(cm, e, content);\n    function hide() {\n      CodeMirror.off(node, \"mouseout\", hide);\n      if (tooltip) { hideTooltip(tooltip); tooltip = null; }\n    }\n    var poll = setInterval(function() {\n      if (tooltip) for (var n = node;; n = n.parentNode) {\n        if (n && n.nodeType == 11) n = n.host;\n        if (n == document.body) return;\n        if (!n) { hide(); break; }\n      }\n      if (!tooltip) return clearInterval(poll);\n    }, 400);\n    CodeMirror.on(node, \"mouseout\", hide);\n  }\n\n  function LintState(cm, conf, hasGutter) {\n    this.marked = [];\n    if (conf instanceof Function) conf = {getAnnotations: conf};\n    if (!conf || conf === true) conf = {};\n    this.options = {};\n    this.linterOptions = conf.options || {};\n    for (var prop in defaults) this.options[prop] = defaults[prop];\n    for (var prop in conf) {\n      if (defaults.hasOwnProperty(prop)) {\n        if (conf[prop] != null) this.options[prop] = conf[prop];\n      } else if (!conf.options) {\n        this.linterOptions[prop] = conf[prop];\n      }\n    }\n    this.timeout = null;\n    this.hasGutter = hasGutter;\n    this.onMouseOver = function(e) { onMouseOver(cm, e); };\n    this.waitingFor = 0\n  }\n\n  var defaults = {\n    highlightLines: false,\n    tooltips: true,\n    delay: 500,\n    lintOnChange: true,\n    getAnnotations: null,\n    async: false,\n    selfContain: null,\n    formatAnnotation: null,\n    onUpdateLinting: null\n  }\n\n  function clearMarks(cm) {\n    var state = cm.state.lint;\n    if (state.hasGutter) cm.clearGutter(GUTTER_ID);\n    if (state.options.highlightLines) clearErrorLines(cm);\n    for (var i = 0; i < state.marked.length; ++i)\n      state.marked[i].clear();\n    state.marked.length = 0;\n  }\n\n  function clearErrorLines(cm) {\n    cm.eachLine(function(line) {\n      var has = line.wrapClass && /\\bCodeMirror-lint-line-\\w+\\b/.exec(line.wrapClass);\n      if (has) cm.removeLineClass(line, \"wrap\", has[0]);\n    })\n  }\n\n  function makeMarker(cm, labels, severity, multiple, tooltips) {\n    var marker = document.createElement(\"div\"), inner = marker;\n    marker.className = \"CodeMirror-lint-marker CodeMirror-lint-marker-\" + severity;\n    if (multiple) {\n      inner = marker.appendChild(document.createElement(\"div\"));\n      inner.className = \"CodeMirror-lint-marker CodeMirror-lint-marker-multiple\";\n    }\n\n    if (tooltips != false) CodeMirror.on(inner, \"mouseover\", function(e) {\n      showTooltipFor(cm, e, labels, inner);\n    });\n\n    return marker;\n  }\n\n  function getMaxSeverity(a, b) {\n    if (a == \"error\") return a;\n    else return b;\n  }\n\n  function groupByLine(annotations) {\n    var lines = [];\n    for (var i = 0; i < annotations.length; ++i) {\n      var ann = annotations[i], line = ann.from.line;\n      (lines[line] || (lines[line] = [])).push(ann);\n    }\n    return lines;\n  }\n\n  function annotationTooltip(ann) {\n    var severity = ann.severity;\n    if (!severity) severity = \"error\";\n    var tip = document.createElement(\"div\");\n    tip.className = \"CodeMirror-lint-message CodeMirror-lint-message-\" + severity;\n    if (typeof ann.messageHTML != 'undefined') {\n      tip.innerHTML = ann.messageHTML;\n    } else {\n      tip.appendChild(document.createTextNode(ann.message));\n    }\n    return tip;\n  }\n\n  function lintAsync(cm, getAnnotations) {\n    var state = cm.state.lint\n    var id = ++state.waitingFor\n    function abort() {\n      id = -1\n      cm.off(\"change\", abort)\n    }\n    cm.on(\"change\", abort)\n    getAnnotations(cm.getValue(), function(annotations, arg2) {\n      cm.off(\"change\", abort)\n      if (state.waitingFor != id) return\n      if (arg2 && annotations instanceof CodeMirror) annotations = arg2\n      cm.operation(function() {updateLinting(cm, annotations)})\n    }, state.linterOptions, cm);\n  }\n\n  function startLinting(cm) {\n    var state = cm.state.lint;\n    if (!state) return;\n    var options = state.options;\n    /*\n     * Passing rules in `options` property prevents JSHint (and other linters) from complaining\n     * about unrecognized rules like `onUpdateLinting`, `delay`, `lintOnChange`, etc.\n     */\n    var getAnnotations = options.getAnnotations || cm.getHelper(CodeMirror.Pos(0, 0), \"lint\");\n    if (!getAnnotations) return;\n    if (options.async || getAnnotations.async) {\n      lintAsync(cm, getAnnotations)\n    } else {\n      var annotations = getAnnotations(cm.getValue(), state.linterOptions, cm);\n      if (!annotations) return;\n      if (annotations.then) annotations.then(function(issues) {\n        cm.operation(function() {updateLinting(cm, issues)})\n      });\n      else cm.operation(function() {updateLinting(cm, annotations)})\n    }\n  }\n\n  function updateLinting(cm, annotationsNotSorted) {\n    var state = cm.state.lint;\n    if (!state) return;\n    var options = state.options;\n    clearMarks(cm);\n\n    var annotations = groupByLine(annotationsNotSorted);\n\n    for (var line = 0; line < annotations.length; ++line) {\n      var anns = annotations[line];\n      if (!anns) continue;\n\n      // filter out duplicate messages\n      var message = [];\n      anns = anns.filter(function(item) { return message.indexOf(item.message) > -1 ? false : message.push(item.message) });\n\n      var maxSeverity = null;\n      var tipLabel = state.hasGutter && document.createDocumentFragment();\n\n      for (var i = 0; i < anns.length; ++i) {\n        var ann = anns[i];\n        var severity = ann.severity;\n        if (!severity) severity = \"error\";\n        maxSeverity = getMaxSeverity(maxSeverity, severity);\n\n        if (options.formatAnnotation) ann = options.formatAnnotation(ann);\n        if (state.hasGutter) tipLabel.appendChild(annotationTooltip(ann));\n\n        if (ann.to) state.marked.push(cm.markText(ann.from, ann.to, {\n          className: \"CodeMirror-lint-mark CodeMirror-lint-mark-\" + severity,\n          __annotation: ann\n        }));\n      }\n      // use original annotations[line] to show multiple messages\n      if (state.hasGutter)\n        cm.setGutterMarker(line, GUTTER_ID, makeMarker(cm, tipLabel, maxSeverity, annotations[line].length > 1,\n                                                       options.tooltips));\n\n      if (options.highlightLines)\n        cm.addLineClass(line, \"wrap\", LINT_LINE_ID + maxSeverity);\n    }\n    if (options.onUpdateLinting) options.onUpdateLinting(annotationsNotSorted, annotations, cm);\n  }\n\n  function onChange(cm) {\n    var state = cm.state.lint;\n    if (!state) return;\n    clearTimeout(state.timeout);\n    state.timeout = setTimeout(function(){startLinting(cm);}, state.options.delay);\n  }\n\n  function popupTooltips(cm, annotations, e) {\n    var target = e.target || e.srcElement;\n    var tooltip = document.createDocumentFragment();\n    for (var i = 0; i < annotations.length; i++) {\n      var ann = annotations[i];\n      tooltip.appendChild(annotationTooltip(ann));\n    }\n    showTooltipFor(cm, e, tooltip, target);\n  }\n\n  function onMouseOver(cm, e) {\n    var target = e.target || e.srcElement;\n    if (!/\\bCodeMirror-lint-mark-/.test(target.className)) return;\n    var box = target.getBoundingClientRect(), x = (box.left + box.right) / 2, y = (box.top + box.bottom) / 2;\n    var spans = cm.findMarksAt(cm.coordsChar({left: x, top: y}, \"client\"));\n\n    var annotations = [];\n    for (var i = 0; i < spans.length; ++i) {\n      var ann = spans[i].__annotation;\n      if (ann) annotations.push(ann);\n    }\n    if (annotations.length) popupTooltips(cm, annotations, e);\n  }\n\n  CodeMirror.defineOption(\"lint\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init) {\n      clearMarks(cm);\n      if (cm.state.lint.options.lintOnChange !== false)\n        cm.off(\"change\", onChange);\n      CodeMirror.off(cm.getWrapperElement(), \"mouseover\", cm.state.lint.onMouseOver);\n      clearTimeout(cm.state.lint.timeout);\n      delete cm.state.lint;\n    }\n\n    if (val) {\n      var gutters = cm.getOption(\"gutters\"), hasLintGutter = false;\n      for (var i = 0; i < gutters.length; ++i) if (gutters[i] == GUTTER_ID) hasLintGutter = true;\n      var state = cm.state.lint = new LintState(cm, val, hasLintGutter);\n      if (state.options.lintOnChange)\n        cm.on(\"change\", onChange);\n      if (state.options.tooltips != false && state.options.tooltips != \"gutter\")\n        CodeMirror.on(cm.getWrapperElement(), \"mouseover\", state.onMouseOver);\n\n      startLinting(cm);\n    }\n  });\n\n  CodeMirror.defineExtension(\"performLint\", function() {\n    startLinting(this);\n  });\n});\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-3-1!../../postcss-loader/src/index.js??ref--7-oneOf-3-2!../../postcss-loader/src/index.js??ref--7-oneOf-3-3!./base16-dark.css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"a9f2f270\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  var ie_lt8 = /MSIE \\d/.test(navigator.userAgent) &&\n    (document.documentMode == null || document.documentMode < 8);\n\n  var Pos = CodeMirror.Pos;\n\n  var matching = {\"(\": \")>\", \")\": \"(<\", \"[\": \"]>\", \"]\": \"[<\", \"{\": \"}>\", \"}\": \"{<\", \"<\": \">>\", \">\": \"<<\"};\n\n  function bracketRegex(config) {\n    return config && config.bracketRegex || /[(){}[\\]]/\n  }\n\n  function findMatchingBracket(cm, where, config) {\n    var line = cm.getLineHandle(where.line), pos = where.ch - 1;\n    var afterCursor = config && config.afterCursor\n    if (afterCursor == null)\n      afterCursor = /(^| )cm-fat-cursor($| )/.test(cm.getWrapperElement().className)\n    var re = bracketRegex(config)\n\n    // A cursor is defined as between two characters, but in in vim command mode\n    // (i.e. not insert mode), the cursor is visually represented as a\n    // highlighted box on top of the 2nd character. Otherwise, we allow matches\n    // from before or after the cursor.\n    var match = (!afterCursor && pos >= 0 && re.test(line.text.charAt(pos)) && matching[line.text.charAt(pos)]) ||\n        re.test(line.text.charAt(pos + 1)) && matching[line.text.charAt(++pos)];\n    if (!match) return null;\n    var dir = match.charAt(1) == \">\" ? 1 : -1;\n    if (config && config.strict && (dir > 0) != (pos == where.ch)) return null;\n    var style = cm.getTokenTypeAt(Pos(where.line, pos + 1));\n\n    var found = scanForBracket(cm, Pos(where.line, pos + (dir > 0 ? 1 : 0)), dir, style, config);\n    if (found == null) return null;\n    return {from: Pos(where.line, pos), to: found && found.pos,\n            match: found && found.ch == match.charAt(0), forward: dir > 0};\n  }\n\n  // bracketRegex is used to specify which type of bracket to scan\n  // should be a regexp, e.g. /[[\\]]/\n  //\n  // Note: If \"where\" is on an open bracket, then this bracket is ignored.\n  //\n  // Returns false when no bracket was found, null when it reached\n  // maxScanLines and gave up\n  function scanForBracket(cm, where, dir, style, config) {\n    var maxScanLen = (config && config.maxScanLineLength) || 10000;\n    var maxScanLines = (config && config.maxScanLines) || 1000;\n\n    var stack = [];\n    var re = bracketRegex(config)\n    var lineEnd = dir > 0 ? Math.min(where.line + maxScanLines, cm.lastLine() + 1)\n                          : Math.max(cm.firstLine() - 1, where.line - maxScanLines);\n    for (var lineNo = where.line; lineNo != lineEnd; lineNo += dir) {\n      var line = cm.getLine(lineNo);\n      if (!line) continue;\n      var pos = dir > 0 ? 0 : line.length - 1, end = dir > 0 ? line.length : -1;\n      if (line.length > maxScanLen) continue;\n      if (lineNo == where.line) pos = where.ch - (dir < 0 ? 1 : 0);\n      for (; pos != end; pos += dir) {\n        var ch = line.charAt(pos);\n        if (re.test(ch) && (style === undefined ||\n                            (cm.getTokenTypeAt(Pos(lineNo, pos + 1)) || \"\") == (style || \"\"))) {\n          var match = matching[ch];\n          if (match && (match.charAt(1) == \">\") == (dir > 0)) stack.push(ch);\n          else if (!stack.length) return {pos: Pos(lineNo, pos), ch: ch};\n          else stack.pop();\n        }\n      }\n    }\n    return lineNo - dir == (dir > 0 ? cm.lastLine() : cm.firstLine()) ? false : null;\n  }\n\n  function matchBrackets(cm, autoclear, config) {\n    // Disable brace matching in long lines, since it'll cause hugely slow updates\n    var maxHighlightLen = cm.state.matchBrackets.maxHighlightLineLength || 1000,\n      highlightNonMatching = config && config.highlightNonMatching;\n    var marks = [], ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++) {\n      var match = ranges[i].empty() && findMatchingBracket(cm, ranges[i].head, config);\n      if (match && (match.match || highlightNonMatching !== false) && cm.getLine(match.from.line).length <= maxHighlightLen) {\n        var style = match.match ? \"CodeMirror-matchingbracket\" : \"CodeMirror-nonmatchingbracket\";\n        marks.push(cm.markText(match.from, Pos(match.from.line, match.from.ch + 1), {className: style}));\n        if (match.to && cm.getLine(match.to.line).length <= maxHighlightLen)\n          marks.push(cm.markText(match.to, Pos(match.to.line, match.to.ch + 1), {className: style}));\n      }\n    }\n\n    if (marks.length) {\n      // Kludge to work around the IE bug from issue #1193, where text\n      // input stops going to the textarea whenever this fires.\n      if (ie_lt8 && cm.state.focused) cm.focus();\n\n      var clear = function() {\n        cm.operation(function() {\n          for (var i = 0; i < marks.length; i++) marks[i].clear();\n        });\n      };\n      if (autoclear) setTimeout(clear, 800);\n      else return clear;\n    }\n  }\n\n  function doMatchBrackets(cm) {\n    cm.operation(function() {\n      if (cm.state.matchBrackets.currentlyHighlighted) {\n        cm.state.matchBrackets.currentlyHighlighted();\n        cm.state.matchBrackets.currentlyHighlighted = null;\n      }\n      cm.state.matchBrackets.currentlyHighlighted = matchBrackets(cm, false, cm.state.matchBrackets);\n    });\n  }\n\n  function clearHighlighted(cm) {\n    if (cm.state.matchBrackets && cm.state.matchBrackets.currentlyHighlighted) {\n      cm.state.matchBrackets.currentlyHighlighted();\n      cm.state.matchBrackets.currentlyHighlighted = null;\n    }\n  }\n\n  CodeMirror.defineOption(\"matchBrackets\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init) {\n      cm.off(\"cursorActivity\", doMatchBrackets);\n      cm.off(\"focus\", doMatchBrackets)\n      cm.off(\"blur\", clearHighlighted)\n      clearHighlighted(cm);\n    }\n    if (val) {\n      cm.state.matchBrackets = typeof val == \"object\" ? val : {};\n      cm.on(\"cursorActivity\", doMatchBrackets);\n      cm.on(\"focus\", doMatchBrackets)\n      cm.on(\"blur\", clearHighlighted)\n    }\n  });\n\n  CodeMirror.defineExtension(\"matchBrackets\", function() {matchBrackets(this, true);});\n  CodeMirror.defineExtension(\"findMatchingBracket\", function(pos, config, oldConfig){\n    // Backwards-compatibility kludge\n    if (oldConfig || typeof config == \"boolean\") {\n      if (!oldConfig) {\n        config = config ? {strict: true} : null\n      } else {\n        oldConfig.strict = config\n        config = oldConfig\n      }\n    }\n    return findMatchingBracket(this, pos, config)\n  });\n  CodeMirror.defineExtension(\"scanForBracket\", function(pos, dir, style, config){\n    return scanForBracket(this, pos, dir, style, config);\n  });\n});\n","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t(require(\"codemirror\")):\"function\"==typeof define&&define.amd?define([\"codemirror\"],t):\"object\"==typeof exports?exports.VueCodemirror=t(require(\"codemirror\")):e.VueCodemirror=t(e.codemirror)}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"/\",t(t.s=3)}([function(t,n){t.exports=e},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=window.CodeMirror||o.default;\"function\"!=typeof Object.assign&&Object.defineProperty(Object,\"assign\",{value:function(e,t){if(null==e)throw new TypeError(\"Cannot convert undefined or null to object\");for(var n=Object(e),r=1;r<arguments.length;r++){var o=arguments[r];if(null!=o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])}return n},writable:!0,configurable:!0}),t.default={name:\"codemirror\",data:function(){return{content:\"\",codemirror:null,cminstance:null}},props:{code:String,value:String,marker:Function,unseenLines:Array,name:{type:String,default:\"codemirror\"},placeholder:{type:String,default:\"\"},merge:{type:Boolean,default:!1},options:{type:Object,default:function(){return{}}},events:{type:Array,default:function(){return[]}},globalOptions:{type:Object,default:function(){return{}}},globalEvents:{type:Array,default:function(){return[]}}},watch:{options:{deep:!0,handler:function(e){for(var t in e)this.cminstance.setOption(t,e[t])}},merge:function(){this.$nextTick(this.switchMerge)},code:function(e){this.handerCodeChange(e)},value:function(e){this.handerCodeChange(e)}},methods:{initialize:function(){var e=this,t=Object.assign({},this.globalOptions,this.options);this.merge?(this.codemirror=i.MergeView(this.$refs.mergeview,t),this.cminstance=this.codemirror.edit):(this.codemirror=i.fromTextArea(this.$refs.textarea,t),this.cminstance=this.codemirror,this.cminstance.setValue(this.code||this.value||this.content)),this.cminstance.on(\"change\",function(t){e.content=t.getValue(),e.$emit&&e.$emit(\"input\",e.content)});var n={};[\"scroll\",\"changes\",\"beforeChange\",\"cursorActivity\",\"keyHandled\",\"inputRead\",\"electricInput\",\"beforeSelectionChange\",\"viewportChange\",\"swapDoc\",\"gutterClick\",\"gutterContextMenu\",\"focus\",\"blur\",\"refresh\",\"optionChange\",\"scrollCursorIntoView\",\"update\"].concat(this.events).concat(this.globalEvents).filter(function(e){return!n[e]&&(n[e]=!0)}).forEach(function(t){e.cminstance.on(t,function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];e.$emit.apply(e,[t].concat(r));var i=t.replace(/([A-Z])/g,\"-$1\").toLowerCase();i!==t&&e.$emit.apply(e,[i].concat(r))})});this.$emit(\"ready\",this.codemirror),this.unseenLineMarkers(),this.refresh()},refresh:function(){var e=this;this.$nextTick(function(){e.cminstance.refresh()})},destroy:function(){var e=this.cminstance.doc.cm.getWrapperElement();e&&e.remove&&e.remove()},handerCodeChange:function(e){if(e!==this.cminstance.getValue()){var t=this.cminstance.getScrollInfo();this.cminstance.setValue(e),this.content=e,this.cminstance.scrollTo(t.left,t.top)}this.unseenLineMarkers()},unseenLineMarkers:function(){var e=this;void 0!==this.unseenLines&&void 0!==this.marker&&this.unseenLines.forEach(function(t){var n=e.cminstance.lineInfo(t);e.cminstance.setGutterMarker(t,\"breakpoints\",n.gutterMarkers?null:e.marker())})},switchMerge:function(){var e=this.cminstance.doc.history,t=this.cminstance.doc.cleanGeneration;this.options.value=this.cminstance.getValue(),this.destroy(),this.initialize(),this.cminstance.doc.history=e,this.cminstance.doc.cleanGeneration=t}},mounted:function(){this.initialize()},beforeDestroy:function(){this.destroy()}}},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(1),o=n.n(r);for(var i in r)[\"default\",\"default\"].indexOf(i)<0&&function(e){n.d(t,e,function(){return r[e]})}(i);var s=n(5),c=n(4),a=c(o.a,s.a,!1,null,null,null);t.default=a.exports},function(e,t,n){\"use strict\";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.install=t.codemirror=t.CodeMirror=void 0;var o=n(0),i=r(o),s=n(2),c=r(s),a=window.CodeMirror||i.default,u=function(e,t){t&&(t.options&&(c.default.props.globalOptions.default=function(){return t.options}),t.events&&(c.default.props.globalEvents.default=function(){return t.events})),e.component(c.default.name,c.default)},l={CodeMirror:a,codemirror:c.default,install:u};t.default=l,t.CodeMirror=a,t.codemirror=c.default,t.install=u},function(e,t){e.exports=function(e,t,n,r,o,i){var s,c=e=e||{},a=typeof e.default;\"object\"!==a&&\"function\"!==a||(s=e,c=e.default);var u=\"function\"==typeof c?c.options:c;t&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0),n&&(u.functional=!0),o&&(u._scopeId=o);var l;if(i?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||\"undefined\"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},u._ssrRegister=l):r&&(l=r),l){var f=u.functional,d=f?u.render:u.beforeCreate;f?(u._injectStyles=l,u.render=function(e,t){return l.call(t),d(e,t)}):u.beforeCreate=d?[].concat(d,l):[l]}return{esModule:s,exports:c,options:u}}},function(e,t,n){\"use strict\";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"vue-codemirror\",class:{merge:e.merge}},[e.merge?n(\"div\",{ref:\"mergeview\"}):n(\"textarea\",{ref:\"textarea\",attrs:{name:e.name,placeholder:e.placeholder}})])},o=[],i={render:r,staticRenderFns:o};t.a=i}])});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".CodeMirror-hints{position:absolute;z-index:10;overflow:hidden;list-style:none;margin:0;padding:2px;box-shadow:2px 3px 5px rgba(0,0,0,.2);border-radius:3px;border:1px solid silver;background:#fff;font-size:90%;font-family:monospace;max-height:20em;overflow-y:auto;box-sizing:border-box}.CodeMirror-hint{margin:0;padding:0 4px;border-radius:2px;white-space:pre;color:#000;cursor:pointer}li.CodeMirror-hint-active{background:#08f;color:#fff}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n\n// A rough approximation of Sublime Text's keybindings\n// Depends on addon/search/searchcursor.js and optionally addon/dialog/dialogs.js\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../lib/codemirror\"), require(\"../addon/search/searchcursor\"), require(\"../addon/edit/matchbrackets\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../lib/codemirror\", \"../addon/search/searchcursor\", \"../addon/edit/matchbrackets\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  var cmds = CodeMirror.commands;\n  var Pos = CodeMirror.Pos;\n\n  // This is not exactly Sublime's algorithm. I couldn't make heads or tails of that.\n  function findPosSubword(doc, start, dir) {\n    if (dir < 0 && start.ch == 0) return doc.clipPos(Pos(start.line - 1));\n    var line = doc.getLine(start.line);\n    if (dir > 0 && start.ch >= line.length) return doc.clipPos(Pos(start.line + 1, 0));\n    var state = \"start\", type, startPos = start.ch;\n    for (var pos = startPos, e = dir < 0 ? 0 : line.length, i = 0; pos != e; pos += dir, i++) {\n      var next = line.charAt(dir < 0 ? pos - 1 : pos);\n      var cat = next != \"_\" && CodeMirror.isWordChar(next) ? \"w\" : \"o\";\n      if (cat == \"w\" && next.toUpperCase() == next) cat = \"W\";\n      if (state == \"start\") {\n        if (cat != \"o\") { state = \"in\"; type = cat; }\n        else startPos = pos + dir\n      } else if (state == \"in\") {\n        if (type != cat) {\n          if (type == \"w\" && cat == \"W\" && dir < 0) pos--;\n          if (type == \"W\" && cat == \"w\" && dir > 0) { // From uppercase to lowercase\n            if (pos == startPos + 1) { type = \"w\"; continue; }\n            else pos--;\n          }\n          break;\n        }\n      }\n    }\n    return Pos(start.line, pos);\n  }\n\n  function moveSubword(cm, dir) {\n    cm.extendSelectionsBy(function(range) {\n      if (cm.display.shift || cm.doc.extend || range.empty())\n        return findPosSubword(cm.doc, range.head, dir);\n      else\n        return dir < 0 ? range.from() : range.to();\n    });\n  }\n\n  cmds.goSubwordLeft = function(cm) { moveSubword(cm, -1); };\n  cmds.goSubwordRight = function(cm) { moveSubword(cm, 1); };\n\n  cmds.scrollLineUp = function(cm) {\n    var info = cm.getScrollInfo();\n    if (!cm.somethingSelected()) {\n      var visibleBottomLine = cm.lineAtHeight(info.top + info.clientHeight, \"local\");\n      if (cm.getCursor().line >= visibleBottomLine)\n        cm.execCommand(\"goLineUp\");\n    }\n    cm.scrollTo(null, info.top - cm.defaultTextHeight());\n  };\n  cmds.scrollLineDown = function(cm) {\n    var info = cm.getScrollInfo();\n    if (!cm.somethingSelected()) {\n      var visibleTopLine = cm.lineAtHeight(info.top, \"local\")+1;\n      if (cm.getCursor().line <= visibleTopLine)\n        cm.execCommand(\"goLineDown\");\n    }\n    cm.scrollTo(null, info.top + cm.defaultTextHeight());\n  };\n\n  cmds.splitSelectionByLine = function(cm) {\n    var ranges = cm.listSelections(), lineRanges = [];\n    for (var i = 0; i < ranges.length; i++) {\n      var from = ranges[i].from(), to = ranges[i].to();\n      for (var line = from.line; line <= to.line; ++line)\n        if (!(to.line > from.line && line == to.line && to.ch == 0))\n          lineRanges.push({anchor: line == from.line ? from : Pos(line, 0),\n                           head: line == to.line ? to : Pos(line)});\n    }\n    cm.setSelections(lineRanges, 0);\n  };\n\n  cmds.singleSelectionTop = function(cm) {\n    var range = cm.listSelections()[0];\n    cm.setSelection(range.anchor, range.head, {scroll: false});\n  };\n\n  cmds.selectLine = function(cm) {\n    var ranges = cm.listSelections(), extended = [];\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i];\n      extended.push({anchor: Pos(range.from().line, 0),\n                     head: Pos(range.to().line + 1, 0)});\n    }\n    cm.setSelections(extended);\n  };\n\n  function insertLine(cm, above) {\n    if (cm.isReadOnly()) return CodeMirror.Pass\n    cm.operation(function() {\n      var len = cm.listSelections().length, newSelection = [], last = -1;\n      for (var i = 0; i < len; i++) {\n        var head = cm.listSelections()[i].head;\n        if (head.line <= last) continue;\n        var at = Pos(head.line + (above ? 0 : 1), 0);\n        cm.replaceRange(\"\\n\", at, null, \"+insertLine\");\n        cm.indentLine(at.line, null, true);\n        newSelection.push({head: at, anchor: at});\n        last = head.line + 1;\n      }\n      cm.setSelections(newSelection);\n    });\n    cm.execCommand(\"indentAuto\");\n  }\n\n  cmds.insertLineAfter = function(cm) { return insertLine(cm, false); };\n\n  cmds.insertLineBefore = function(cm) { return insertLine(cm, true); };\n\n  function wordAt(cm, pos) {\n    var start = pos.ch, end = start, line = cm.getLine(pos.line);\n    while (start && CodeMirror.isWordChar(line.charAt(start - 1))) --start;\n    while (end < line.length && CodeMirror.isWordChar(line.charAt(end))) ++end;\n    return {from: Pos(pos.line, start), to: Pos(pos.line, end), word: line.slice(start, end)};\n  }\n\n  cmds.selectNextOccurrence = function(cm) {\n    var from = cm.getCursor(\"from\"), to = cm.getCursor(\"to\");\n    var fullWord = cm.state.sublimeFindFullWord == cm.doc.sel;\n    if (CodeMirror.cmpPos(from, to) == 0) {\n      var word = wordAt(cm, from);\n      if (!word.word) return;\n      cm.setSelection(word.from, word.to);\n      fullWord = true;\n    } else {\n      var text = cm.getRange(from, to);\n      var query = fullWord ? new RegExp(\"\\\\b\" + text + \"\\\\b\") : text;\n      var cur = cm.getSearchCursor(query, to);\n      var found = cur.findNext();\n      if (!found) {\n        cur = cm.getSearchCursor(query, Pos(cm.firstLine(), 0));\n        found = cur.findNext();\n      }\n      if (!found || isSelectedRange(cm.listSelections(), cur.from(), cur.to())) return\n      cm.addSelection(cur.from(), cur.to());\n    }\n    if (fullWord)\n      cm.state.sublimeFindFullWord = cm.doc.sel;\n  };\n\n  cmds.skipAndSelectNextOccurrence = function(cm) {\n    var prevAnchor = cm.getCursor(\"anchor\"), prevHead = cm.getCursor(\"head\");\n    cmds.selectNextOccurrence(cm);\n    if (CodeMirror.cmpPos(prevAnchor, prevHead) != 0) {\n      cm.doc.setSelections(cm.doc.listSelections()\n          .filter(function (sel) {\n            return sel.anchor != prevAnchor || sel.head != prevHead;\n          }));\n    }\n  }\n\n  function addCursorToSelection(cm, dir) {\n    var ranges = cm.listSelections(), newRanges = [];\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i];\n      var newAnchor = cm.findPosV(\n          range.anchor, dir, \"line\", range.anchor.goalColumn);\n      var newHead = cm.findPosV(\n          range.head, dir, \"line\", range.head.goalColumn);\n      newAnchor.goalColumn = range.anchor.goalColumn != null ?\n          range.anchor.goalColumn : cm.cursorCoords(range.anchor, \"div\").left;\n      newHead.goalColumn = range.head.goalColumn != null ?\n          range.head.goalColumn : cm.cursorCoords(range.head, \"div\").left;\n      var newRange = {anchor: newAnchor, head: newHead};\n      newRanges.push(range);\n      newRanges.push(newRange);\n    }\n    cm.setSelections(newRanges);\n  }\n  cmds.addCursorToPrevLine = function(cm) { addCursorToSelection(cm, -1); };\n  cmds.addCursorToNextLine = function(cm) { addCursorToSelection(cm, 1); };\n\n  function isSelectedRange(ranges, from, to) {\n    for (var i = 0; i < ranges.length; i++)\n      if (CodeMirror.cmpPos(ranges[i].from(), from) == 0 &&\n          CodeMirror.cmpPos(ranges[i].to(), to) == 0) return true\n    return false\n  }\n\n  var mirror = \"(){}[]\";\n  function selectBetweenBrackets(cm) {\n    var ranges = cm.listSelections(), newRanges = []\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i], pos = range.head, opening = cm.scanForBracket(pos, -1);\n      if (!opening) return false;\n      for (;;) {\n        var closing = cm.scanForBracket(pos, 1);\n        if (!closing) return false;\n        if (closing.ch == mirror.charAt(mirror.indexOf(opening.ch) + 1)) {\n          var startPos = Pos(opening.pos.line, opening.pos.ch + 1);\n          if (CodeMirror.cmpPos(startPos, range.from()) == 0 &&\n              CodeMirror.cmpPos(closing.pos, range.to()) == 0) {\n            opening = cm.scanForBracket(opening.pos, -1);\n            if (!opening) return false;\n          } else {\n            newRanges.push({anchor: startPos, head: closing.pos});\n            break;\n          }\n        }\n        pos = Pos(closing.pos.line, closing.pos.ch + 1);\n      }\n    }\n    cm.setSelections(newRanges);\n    return true;\n  }\n\n  cmds.selectScope = function(cm) {\n    selectBetweenBrackets(cm) || cm.execCommand(\"selectAll\");\n  };\n  cmds.selectBetweenBrackets = function(cm) {\n    if (!selectBetweenBrackets(cm)) return CodeMirror.Pass;\n  };\n\n  function puncType(type) {\n    return !type ? null : /\\bpunctuation\\b/.test(type) ? type : undefined\n  }\n\n  cmds.goToBracket = function(cm) {\n    cm.extendSelectionsBy(function(range) {\n      var next = cm.scanForBracket(range.head, 1, puncType(cm.getTokenTypeAt(range.head)));\n      if (next && CodeMirror.cmpPos(next.pos, range.head) != 0) return next.pos;\n      var prev = cm.scanForBracket(range.head, -1, puncType(cm.getTokenTypeAt(Pos(range.head.line, range.head.ch + 1))));\n      return prev && Pos(prev.pos.line, prev.pos.ch + 1) || range.head;\n    });\n  };\n\n  cmds.swapLineUp = function(cm) {\n    if (cm.isReadOnly()) return CodeMirror.Pass\n    var ranges = cm.listSelections(), linesToMove = [], at = cm.firstLine() - 1, newSels = [];\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i], from = range.from().line - 1, to = range.to().line;\n      newSels.push({anchor: Pos(range.anchor.line - 1, range.anchor.ch),\n                    head: Pos(range.head.line - 1, range.head.ch)});\n      if (range.to().ch == 0 && !range.empty()) --to;\n      if (from > at) linesToMove.push(from, to);\n      else if (linesToMove.length) linesToMove[linesToMove.length - 1] = to;\n      at = to;\n    }\n    cm.operation(function() {\n      for (var i = 0; i < linesToMove.length; i += 2) {\n        var from = linesToMove[i], to = linesToMove[i + 1];\n        var line = cm.getLine(from);\n        cm.replaceRange(\"\", Pos(from, 0), Pos(from + 1, 0), \"+swapLine\");\n        if (to > cm.lastLine())\n          cm.replaceRange(\"\\n\" + line, Pos(cm.lastLine()), null, \"+swapLine\");\n        else\n          cm.replaceRange(line + \"\\n\", Pos(to, 0), null, \"+swapLine\");\n      }\n      cm.setSelections(newSels);\n      cm.scrollIntoView();\n    });\n  };\n\n  cmds.swapLineDown = function(cm) {\n    if (cm.isReadOnly()) return CodeMirror.Pass\n    var ranges = cm.listSelections(), linesToMove = [], at = cm.lastLine() + 1;\n    for (var i = ranges.length - 1; i >= 0; i--) {\n      var range = ranges[i], from = range.to().line + 1, to = range.from().line;\n      if (range.to().ch == 0 && !range.empty()) from--;\n      if (from < at) linesToMove.push(from, to);\n      else if (linesToMove.length) linesToMove[linesToMove.length - 1] = to;\n      at = to;\n    }\n    cm.operation(function() {\n      for (var i = linesToMove.length - 2; i >= 0; i -= 2) {\n        var from = linesToMove[i], to = linesToMove[i + 1];\n        var line = cm.getLine(from);\n        if (from == cm.lastLine())\n          cm.replaceRange(\"\", Pos(from - 1), Pos(from), \"+swapLine\");\n        else\n          cm.replaceRange(\"\", Pos(from, 0), Pos(from + 1, 0), \"+swapLine\");\n        cm.replaceRange(line + \"\\n\", Pos(to, 0), null, \"+swapLine\");\n      }\n      cm.scrollIntoView();\n    });\n  };\n\n  cmds.toggleCommentIndented = function(cm) {\n    cm.toggleComment({ indent: true });\n  }\n\n  cmds.joinLines = function(cm) {\n    var ranges = cm.listSelections(), joined = [];\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i], from = range.from();\n      var start = from.line, end = range.to().line;\n      while (i < ranges.length - 1 && ranges[i + 1].from().line == end)\n        end = ranges[++i].to().line;\n      joined.push({start: start, end: end, anchor: !range.empty() && from});\n    }\n    cm.operation(function() {\n      var offset = 0, ranges = [];\n      for (var i = 0; i < joined.length; i++) {\n        var obj = joined[i];\n        var anchor = obj.anchor && Pos(obj.anchor.line - offset, obj.anchor.ch), head;\n        for (var line = obj.start; line <= obj.end; line++) {\n          var actual = line - offset;\n          if (line == obj.end) head = Pos(actual, cm.getLine(actual).length + 1);\n          if (actual < cm.lastLine()) {\n            cm.replaceRange(\" \", Pos(actual), Pos(actual + 1, /^\\s*/.exec(cm.getLine(actual + 1))[0].length));\n            ++offset;\n          }\n        }\n        ranges.push({anchor: anchor || head, head: head});\n      }\n      cm.setSelections(ranges, 0);\n    });\n  };\n\n  cmds.duplicateLine = function(cm) {\n    cm.operation(function() {\n      var rangeCount = cm.listSelections().length;\n      for (var i = 0; i < rangeCount; i++) {\n        var range = cm.listSelections()[i];\n        if (range.empty())\n          cm.replaceRange(cm.getLine(range.head.line) + \"\\n\", Pos(range.head.line, 0));\n        else\n          cm.replaceRange(cm.getRange(range.from(), range.to()), range.from());\n      }\n      cm.scrollIntoView();\n    });\n  };\n\n\n  function sortLines(cm, caseSensitive, direction) {\n    if (cm.isReadOnly()) return CodeMirror.Pass\n    var ranges = cm.listSelections(), toSort = [], selected;\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i];\n      if (range.empty()) continue;\n      var from = range.from().line, to = range.to().line;\n      while (i < ranges.length - 1 && ranges[i + 1].from().line == to)\n        to = ranges[++i].to().line;\n      if (!ranges[i].to().ch) to--;\n      toSort.push(from, to);\n    }\n    if (toSort.length) selected = true;\n    else toSort.push(cm.firstLine(), cm.lastLine());\n\n    cm.operation(function() {\n      var ranges = [];\n      for (var i = 0; i < toSort.length; i += 2) {\n        var from = toSort[i], to = toSort[i + 1];\n        var start = Pos(from, 0), end = Pos(to);\n        var lines = cm.getRange(start, end, false);\n        if (caseSensitive)\n          lines.sort(function(a, b) { return a < b ? -direction : a == b ? 0 : direction; });\n        else\n          lines.sort(function(a, b) {\n            var au = a.toUpperCase(), bu = b.toUpperCase();\n            if (au != bu) { a = au; b = bu; }\n            return a < b ? -direction : a == b ? 0 : direction;\n          });\n        cm.replaceRange(lines, start, end);\n        if (selected) ranges.push({anchor: start, head: Pos(to + 1, 0)});\n      }\n      if (selected) cm.setSelections(ranges, 0);\n    });\n  }\n\n  cmds.sortLines = function(cm) { sortLines(cm, true, 1); };\n  cmds.reverseSortLines = function(cm) { sortLines(cm, true, -1); };\n  cmds.sortLinesInsensitive = function(cm) { sortLines(cm, false, 1); };\n  cmds.reverseSortLinesInsensitive = function(cm) { sortLines(cm, false, -1); };\n\n  cmds.nextBookmark = function(cm) {\n    var marks = cm.state.sublimeBookmarks;\n    if (marks) while (marks.length) {\n      var current = marks.shift();\n      var found = current.find();\n      if (found) {\n        marks.push(current);\n        return cm.setSelection(found.from, found.to);\n      }\n    }\n  };\n\n  cmds.prevBookmark = function(cm) {\n    var marks = cm.state.sublimeBookmarks;\n    if (marks) while (marks.length) {\n      marks.unshift(marks.pop());\n      var found = marks[marks.length - 1].find();\n      if (!found)\n        marks.pop();\n      else\n        return cm.setSelection(found.from, found.to);\n    }\n  };\n\n  cmds.toggleBookmark = function(cm) {\n    var ranges = cm.listSelections();\n    var marks = cm.state.sublimeBookmarks || (cm.state.sublimeBookmarks = []);\n    for (var i = 0; i < ranges.length; i++) {\n      var from = ranges[i].from(), to = ranges[i].to();\n      var found = ranges[i].empty() ? cm.findMarksAt(from) : cm.findMarks(from, to);\n      for (var j = 0; j < found.length; j++) {\n        if (found[j].sublimeBookmark) {\n          found[j].clear();\n          for (var k = 0; k < marks.length; k++)\n            if (marks[k] == found[j])\n              marks.splice(k--, 1);\n          break;\n        }\n      }\n      if (j == found.length)\n        marks.push(cm.markText(from, to, {sublimeBookmark: true, clearWhenEmpty: false}));\n    }\n  };\n\n  cmds.clearBookmarks = function(cm) {\n    var marks = cm.state.sublimeBookmarks;\n    if (marks) for (var i = 0; i < marks.length; i++) marks[i].clear();\n    marks.length = 0;\n  };\n\n  cmds.selectBookmarks = function(cm) {\n    var marks = cm.state.sublimeBookmarks, ranges = [];\n    if (marks) for (var i = 0; i < marks.length; i++) {\n      var found = marks[i].find();\n      if (!found)\n        marks.splice(i--, 0);\n      else\n        ranges.push({anchor: found.from, head: found.to});\n    }\n    if (ranges.length)\n      cm.setSelections(ranges, 0);\n  };\n\n  function modifyWordOrSelection(cm, mod) {\n    cm.operation(function() {\n      var ranges = cm.listSelections(), indices = [], replacements = [];\n      for (var i = 0; i < ranges.length; i++) {\n        var range = ranges[i];\n        if (range.empty()) { indices.push(i); replacements.push(\"\"); }\n        else replacements.push(mod(cm.getRange(range.from(), range.to())));\n      }\n      cm.replaceSelections(replacements, \"around\", \"case\");\n      for (var i = indices.length - 1, at; i >= 0; i--) {\n        var range = ranges[indices[i]];\n        if (at && CodeMirror.cmpPos(range.head, at) > 0) continue;\n        var word = wordAt(cm, range.head);\n        at = word.from;\n        cm.replaceRange(mod(word.word), word.from, word.to);\n      }\n    });\n  }\n\n  cmds.smartBackspace = function(cm) {\n    if (cm.somethingSelected()) return CodeMirror.Pass;\n\n    cm.operation(function() {\n      var cursors = cm.listSelections();\n      var indentUnit = cm.getOption(\"indentUnit\");\n\n      for (var i = cursors.length - 1; i >= 0; i--) {\n        var cursor = cursors[i].head;\n        var toStartOfLine = cm.getRange({line: cursor.line, ch: 0}, cursor);\n        var column = CodeMirror.countColumn(toStartOfLine, null, cm.getOption(\"tabSize\"));\n\n        // Delete by one character by default\n        var deletePos = cm.findPosH(cursor, -1, \"char\", false);\n\n        if (toStartOfLine && !/\\S/.test(toStartOfLine) && column % indentUnit == 0) {\n          var prevIndent = new Pos(cursor.line,\n            CodeMirror.findColumn(toStartOfLine, column - indentUnit, indentUnit));\n\n          // Smart delete only if we found a valid prevIndent location\n          if (prevIndent.ch != cursor.ch) deletePos = prevIndent;\n        }\n\n        cm.replaceRange(\"\", deletePos, cursor, \"+delete\");\n      }\n    });\n  };\n\n  cmds.delLineRight = function(cm) {\n    cm.operation(function() {\n      var ranges = cm.listSelections();\n      for (var i = ranges.length - 1; i >= 0; i--)\n        cm.replaceRange(\"\", ranges[i].anchor, Pos(ranges[i].to().line), \"+delete\");\n      cm.scrollIntoView();\n    });\n  };\n\n  cmds.upcaseAtCursor = function(cm) {\n    modifyWordOrSelection(cm, function(str) { return str.toUpperCase(); });\n  };\n  cmds.downcaseAtCursor = function(cm) {\n    modifyWordOrSelection(cm, function(str) { return str.toLowerCase(); });\n  };\n\n  cmds.setSublimeMark = function(cm) {\n    if (cm.state.sublimeMark) cm.state.sublimeMark.clear();\n    cm.state.sublimeMark = cm.setBookmark(cm.getCursor());\n  };\n  cmds.selectToSublimeMark = function(cm) {\n    var found = cm.state.sublimeMark && cm.state.sublimeMark.find();\n    if (found) cm.setSelection(cm.getCursor(), found);\n  };\n  cmds.deleteToSublimeMark = function(cm) {\n    var found = cm.state.sublimeMark && cm.state.sublimeMark.find();\n    if (found) {\n      var from = cm.getCursor(), to = found;\n      if (CodeMirror.cmpPos(from, to) > 0) { var tmp = to; to = from; from = tmp; }\n      cm.state.sublimeKilled = cm.getRange(from, to);\n      cm.replaceRange(\"\", from, to);\n    }\n  };\n  cmds.swapWithSublimeMark = function(cm) {\n    var found = cm.state.sublimeMark && cm.state.sublimeMark.find();\n    if (found) {\n      cm.state.sublimeMark.clear();\n      cm.state.sublimeMark = cm.setBookmark(cm.getCursor());\n      cm.setCursor(found);\n    }\n  };\n  cmds.sublimeYank = function(cm) {\n    if (cm.state.sublimeKilled != null)\n      cm.replaceSelection(cm.state.sublimeKilled, null, \"paste\");\n  };\n\n  cmds.showInCenter = function(cm) {\n    var pos = cm.cursorCoords(null, \"local\");\n    cm.scrollTo(null, (pos.top + pos.bottom) / 2 - cm.getScrollInfo().clientHeight / 2);\n  };\n\n  function getTarget(cm) {\n    var from = cm.getCursor(\"from\"), to = cm.getCursor(\"to\");\n    if (CodeMirror.cmpPos(from, to) == 0) {\n      var word = wordAt(cm, from);\n      if (!word.word) return;\n      from = word.from;\n      to = word.to;\n    }\n    return {from: from, to: to, query: cm.getRange(from, to), word: word};\n  }\n\n  function findAndGoTo(cm, forward) {\n    var target = getTarget(cm);\n    if (!target) return;\n    var query = target.query;\n    var cur = cm.getSearchCursor(query, forward ? target.to : target.from);\n\n    if (forward ? cur.findNext() : cur.findPrevious()) {\n      cm.setSelection(cur.from(), cur.to());\n    } else {\n      cur = cm.getSearchCursor(query, forward ? Pos(cm.firstLine(), 0)\n                                              : cm.clipPos(Pos(cm.lastLine())));\n      if (forward ? cur.findNext() : cur.findPrevious())\n        cm.setSelection(cur.from(), cur.to());\n      else if (target.word)\n        cm.setSelection(target.from, target.to);\n    }\n  };\n  cmds.findUnder = function(cm) { findAndGoTo(cm, true); };\n  cmds.findUnderPrevious = function(cm) { findAndGoTo(cm,false); };\n  cmds.findAllUnder = function(cm) {\n    var target = getTarget(cm);\n    if (!target) return;\n    var cur = cm.getSearchCursor(target.query);\n    var matches = [];\n    var primaryIndex = -1;\n    while (cur.findNext()) {\n      matches.push({anchor: cur.from(), head: cur.to()});\n      if (cur.from().line <= target.from.line && cur.from().ch <= target.from.ch)\n        primaryIndex++;\n    }\n    cm.setSelections(matches, primaryIndex);\n  };\n\n\n  var keyMap = CodeMirror.keyMap;\n  keyMap.macSublime = {\n    \"Cmd-Left\": \"goLineStartSmart\",\n    \"Shift-Tab\": \"indentLess\",\n    \"Shift-Ctrl-K\": \"deleteLine\",\n    \"Alt-Q\": \"wrapLines\",\n    \"Ctrl-Left\": \"goSubwordLeft\",\n    \"Ctrl-Right\": \"goSubwordRight\",\n    \"Ctrl-Alt-Up\": \"scrollLineUp\",\n    \"Ctrl-Alt-Down\": \"scrollLineDown\",\n    \"Cmd-L\": \"selectLine\",\n    \"Shift-Cmd-L\": \"splitSelectionByLine\",\n    \"Esc\": \"singleSelectionTop\",\n    \"Cmd-Enter\": \"insertLineAfter\",\n    \"Shift-Cmd-Enter\": \"insertLineBefore\",\n    \"Cmd-D\": \"selectNextOccurrence\",\n    \"Shift-Cmd-Space\": \"selectScope\",\n    \"Shift-Cmd-M\": \"selectBetweenBrackets\",\n    \"Cmd-M\": \"goToBracket\",\n    \"Cmd-Ctrl-Up\": \"swapLineUp\",\n    \"Cmd-Ctrl-Down\": \"swapLineDown\",\n    \"Cmd-/\": \"toggleCommentIndented\",\n    \"Cmd-J\": \"joinLines\",\n    \"Shift-Cmd-D\": \"duplicateLine\",\n    \"F5\": \"sortLines\",\n    \"Shift-F5\": \"reverseSortLines\",\n    \"Cmd-F5\": \"sortLinesInsensitive\",\n    \"Shift-Cmd-F5\": \"reverseSortLinesInsensitive\",\n    \"F2\": \"nextBookmark\",\n    \"Shift-F2\": \"prevBookmark\",\n    \"Cmd-F2\": \"toggleBookmark\",\n    \"Shift-Cmd-F2\": \"clearBookmarks\",\n    \"Alt-F2\": \"selectBookmarks\",\n    \"Backspace\": \"smartBackspace\",\n    \"Cmd-K Cmd-D\": \"skipAndSelectNextOccurrence\",\n    \"Cmd-K Cmd-K\": \"delLineRight\",\n    \"Cmd-K Cmd-U\": \"upcaseAtCursor\",\n    \"Cmd-K Cmd-L\": \"downcaseAtCursor\",\n    \"Cmd-K Cmd-Space\": \"setSublimeMark\",\n    \"Cmd-K Cmd-A\": \"selectToSublimeMark\",\n    \"Cmd-K Cmd-W\": \"deleteToSublimeMark\",\n    \"Cmd-K Cmd-X\": \"swapWithSublimeMark\",\n    \"Cmd-K Cmd-Y\": \"sublimeYank\",\n    \"Cmd-K Cmd-C\": \"showInCenter\",\n    \"Cmd-K Cmd-G\": \"clearBookmarks\",\n    \"Cmd-K Cmd-Backspace\": \"delLineLeft\",\n    \"Cmd-K Cmd-1\": \"foldAll\",\n    \"Cmd-K Cmd-0\": \"unfoldAll\",\n    \"Cmd-K Cmd-J\": \"unfoldAll\",\n    \"Ctrl-Shift-Up\": \"addCursorToPrevLine\",\n    \"Ctrl-Shift-Down\": \"addCursorToNextLine\",\n    \"Cmd-F3\": \"findUnder\",\n    \"Shift-Cmd-F3\": \"findUnderPrevious\",\n    \"Alt-F3\": \"findAllUnder\",\n    \"Shift-Cmd-[\": \"fold\",\n    \"Shift-Cmd-]\": \"unfold\",\n    \"Cmd-I\": \"findIncremental\",\n    \"Shift-Cmd-I\": \"findIncrementalReverse\",\n    \"Cmd-H\": \"replace\",\n    \"F3\": \"findNext\",\n    \"Shift-F3\": \"findPrev\",\n    \"fallthrough\": \"macDefault\"\n  };\n  CodeMirror.normalizeKeyMap(keyMap.macSublime);\n\n  keyMap.pcSublime = {\n    \"Shift-Tab\": \"indentLess\",\n    \"Shift-Ctrl-K\": \"deleteLine\",\n    \"Alt-Q\": \"wrapLines\",\n    \"Ctrl-T\": \"transposeChars\",\n    \"Alt-Left\": \"goSubwordLeft\",\n    \"Alt-Right\": \"goSubwordRight\",\n    \"Ctrl-Up\": \"scrollLineUp\",\n    \"Ctrl-Down\": \"scrollLineDown\",\n    \"Ctrl-L\": \"selectLine\",\n    \"Shift-Ctrl-L\": \"splitSelectionByLine\",\n    \"Esc\": \"singleSelectionTop\",\n    \"Ctrl-Enter\": \"insertLineAfter\",\n    \"Shift-Ctrl-Enter\": \"insertLineBefore\",\n    \"Ctrl-D\": \"selectNextOccurrence\",\n    \"Shift-Ctrl-Space\": \"selectScope\",\n    \"Shift-Ctrl-M\": \"selectBetweenBrackets\",\n    \"Ctrl-M\": \"goToBracket\",\n    \"Shift-Ctrl-Up\": \"swapLineUp\",\n    \"Shift-Ctrl-Down\": \"swapLineDown\",\n    \"Ctrl-/\": \"toggleCommentIndented\",\n    \"Ctrl-J\": \"joinLines\",\n    \"Shift-Ctrl-D\": \"duplicateLine\",\n    \"F9\": \"sortLines\",\n    \"Shift-F9\": \"reverseSortLines\",\n    \"Ctrl-F9\": \"sortLinesInsensitive\",\n    \"Shift-Ctrl-F9\": \"reverseSortLinesInsensitive\",\n    \"F2\": \"nextBookmark\",\n    \"Shift-F2\": \"prevBookmark\",\n    \"Ctrl-F2\": \"toggleBookmark\",\n    \"Shift-Ctrl-F2\": \"clearBookmarks\",\n    \"Alt-F2\": \"selectBookmarks\",\n    \"Backspace\": \"smartBackspace\",\n    \"Ctrl-K Ctrl-D\": \"skipAndSelectNextOccurrence\",\n    \"Ctrl-K Ctrl-K\": \"delLineRight\",\n    \"Ctrl-K Ctrl-U\": \"upcaseAtCursor\",\n    \"Ctrl-K Ctrl-L\": \"downcaseAtCursor\",\n    \"Ctrl-K Ctrl-Space\": \"setSublimeMark\",\n    \"Ctrl-K Ctrl-A\": \"selectToSublimeMark\",\n    \"Ctrl-K Ctrl-W\": \"deleteToSublimeMark\",\n    \"Ctrl-K Ctrl-X\": \"swapWithSublimeMark\",\n    \"Ctrl-K Ctrl-Y\": \"sublimeYank\",\n    \"Ctrl-K Ctrl-C\": \"showInCenter\",\n    \"Ctrl-K Ctrl-G\": \"clearBookmarks\",\n    \"Ctrl-K Ctrl-Backspace\": \"delLineLeft\",\n    \"Ctrl-K Ctrl-1\": \"foldAll\",\n    \"Ctrl-K Ctrl-0\": \"unfoldAll\",\n    \"Ctrl-K Ctrl-J\": \"unfoldAll\",\n    \"Ctrl-Alt-Up\": \"addCursorToPrevLine\",\n    \"Ctrl-Alt-Down\": \"addCursorToNextLine\",\n    \"Ctrl-F3\": \"findUnder\",\n    \"Shift-Ctrl-F3\": \"findUnderPrevious\",\n    \"Alt-F3\": \"findAllUnder\",\n    \"Shift-Ctrl-[\": \"fold\",\n    \"Shift-Ctrl-]\": \"unfold\",\n    \"Ctrl-I\": \"findIncremental\",\n    \"Shift-Ctrl-I\": \"findIncrementalReverse\",\n    \"Ctrl-H\": \"replace\",\n    \"F3\": \"findNext\",\n    \"Shift-F3\": \"findPrev\",\n    \"fallthrough\": \"pcDefault\"\n  };\n  CodeMirror.normalizeKeyMap(keyMap.pcSublime);\n\n  var mac = keyMap.default == keyMap.macDefault;\n  keyMap.sublime = mac ? keyMap.macSublime : keyMap.pcSublime;\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n\n// declare global: DOMRect\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  var HINT_ELEMENT_CLASS        = \"CodeMirror-hint\";\n  var ACTIVE_HINT_ELEMENT_CLASS = \"CodeMirror-hint-active\";\n\n  // This is the old interface, kept around for now to stay\n  // backwards-compatible.\n  CodeMirror.showHint = function(cm, getHints, options) {\n    if (!getHints) return cm.showHint(options);\n    if (options && options.async) getHints.async = true;\n    var newOpts = {hint: getHints};\n    if (options) for (var prop in options) newOpts[prop] = options[prop];\n    return cm.showHint(newOpts);\n  };\n\n  CodeMirror.defineExtension(\"showHint\", function(options) {\n    options = parseOptions(this, this.getCursor(\"start\"), options);\n    var selections = this.listSelections()\n    if (selections.length > 1) return;\n    // By default, don't allow completion when something is selected.\n    // A hint function can have a `supportsSelection` property to\n    // indicate that it can handle selections.\n    if (this.somethingSelected()) {\n      if (!options.hint.supportsSelection) return;\n      // Don't try with cross-line selections\n      for (var i = 0; i < selections.length; i++)\n        if (selections[i].head.line != selections[i].anchor.line) return;\n    }\n\n    if (this.state.completionActive) this.state.completionActive.close();\n    var completion = this.state.completionActive = new Completion(this, options);\n    if (!completion.options.hint) return;\n\n    CodeMirror.signal(this, \"startCompletion\", this);\n    completion.update(true);\n  });\n\n  CodeMirror.defineExtension(\"closeHint\", function() {\n    if (this.state.completionActive) this.state.completionActive.close()\n  })\n\n  function Completion(cm, options) {\n    this.cm = cm;\n    this.options = options;\n    this.widget = null;\n    this.debounce = 0;\n    this.tick = 0;\n    this.startPos = this.cm.getCursor(\"start\");\n    this.startLen = this.cm.getLine(this.startPos.line).length - this.cm.getSelection().length;\n\n    if (this.options.updateOnCursorActivity) {\n      var self = this;\n      cm.on(\"cursorActivity\", this.activityFunc = function() { self.cursorActivity(); });\n    }\n  }\n\n  var requestAnimationFrame = window.requestAnimationFrame || function(fn) {\n    return setTimeout(fn, 1000/60);\n  };\n  var cancelAnimationFrame = window.cancelAnimationFrame || clearTimeout;\n\n  Completion.prototype = {\n    close: function() {\n      if (!this.active()) return;\n      this.cm.state.completionActive = null;\n      this.tick = null;\n      if (this.options.updateOnCursorActivity) {\n        this.cm.off(\"cursorActivity\", this.activityFunc);\n      }\n\n      if (this.widget && this.data) CodeMirror.signal(this.data, \"close\");\n      if (this.widget) this.widget.close();\n      CodeMirror.signal(this.cm, \"endCompletion\", this.cm);\n    },\n\n    active: function() {\n      return this.cm.state.completionActive == this;\n    },\n\n    pick: function(data, i) {\n      var completion = data.list[i], self = this;\n      this.cm.operation(function() {\n        if (completion.hint)\n          completion.hint(self.cm, data, completion);\n        else\n          self.cm.replaceRange(getText(completion), completion.from || data.from,\n                               completion.to || data.to, \"complete\");\n        CodeMirror.signal(data, \"pick\", completion);\n        self.cm.scrollIntoView();\n      });\n      if (this.options.closeOnPick) {\n        this.close();\n      }\n    },\n\n    cursorActivity: function() {\n      if (this.debounce) {\n        cancelAnimationFrame(this.debounce);\n        this.debounce = 0;\n      }\n\n      var identStart = this.startPos;\n      if(this.data) {\n        identStart = this.data.from;\n      }\n\n      var pos = this.cm.getCursor(), line = this.cm.getLine(pos.line);\n      if (pos.line != this.startPos.line || line.length - pos.ch != this.startLen - this.startPos.ch ||\n          pos.ch < identStart.ch || this.cm.somethingSelected() ||\n          (!pos.ch || this.options.closeCharacters.test(line.charAt(pos.ch - 1)))) {\n        this.close();\n      } else {\n        var self = this;\n        this.debounce = requestAnimationFrame(function() {self.update();});\n        if (this.widget) this.widget.disable();\n      }\n    },\n\n    update: function(first) {\n      if (this.tick == null) return\n      var self = this, myTick = ++this.tick\n      fetchHints(this.options.hint, this.cm, this.options, function(data) {\n        if (self.tick == myTick) self.finishUpdate(data, first)\n      })\n    },\n\n    finishUpdate: function(data, first) {\n      if (this.data) CodeMirror.signal(this.data, \"update\");\n\n      var picked = (this.widget && this.widget.picked) || (first && this.options.completeSingle);\n      if (this.widget) this.widget.close();\n\n      this.data = data;\n\n      if (data && data.list.length) {\n        if (picked && data.list.length == 1) {\n          this.pick(data, 0);\n        } else {\n          this.widget = new Widget(this, data);\n          CodeMirror.signal(data, \"shown\");\n        }\n      }\n    }\n  };\n\n  function parseOptions(cm, pos, options) {\n    var editor = cm.options.hintOptions;\n    var out = {};\n    for (var prop in defaultOptions) out[prop] = defaultOptions[prop];\n    if (editor) for (var prop in editor)\n      if (editor[prop] !== undefined) out[prop] = editor[prop];\n    if (options) for (var prop in options)\n      if (options[prop] !== undefined) out[prop] = options[prop];\n    if (out.hint.resolve) out.hint = out.hint.resolve(cm, pos)\n    return out;\n  }\n\n  function getText(completion) {\n    if (typeof completion == \"string\") return completion;\n    else return completion.text;\n  }\n\n  function buildKeyMap(completion, handle) {\n    var baseMap = {\n      Up: function() {handle.moveFocus(-1);},\n      Down: function() {handle.moveFocus(1);},\n      PageUp: function() {handle.moveFocus(-handle.menuSize() + 1, true);},\n      PageDown: function() {handle.moveFocus(handle.menuSize() - 1, true);},\n      Home: function() {handle.setFocus(0);},\n      End: function() {handle.setFocus(handle.length - 1);},\n      Enter: handle.pick,\n      Tab: handle.pick,\n      Esc: handle.close\n    };\n\n    var mac = /Mac/.test(navigator.platform);\n\n    if (mac) {\n      baseMap[\"Ctrl-P\"] = function() {handle.moveFocus(-1);};\n      baseMap[\"Ctrl-N\"] = function() {handle.moveFocus(1);};\n    }\n\n    var custom = completion.options.customKeys;\n    var ourMap = custom ? {} : baseMap;\n    function addBinding(key, val) {\n      var bound;\n      if (typeof val != \"string\")\n        bound = function(cm) { return val(cm, handle); };\n      // This mechanism is deprecated\n      else if (baseMap.hasOwnProperty(val))\n        bound = baseMap[val];\n      else\n        bound = val;\n      ourMap[key] = bound;\n    }\n    if (custom)\n      for (var key in custom) if (custom.hasOwnProperty(key))\n        addBinding(key, custom[key]);\n    var extra = completion.options.extraKeys;\n    if (extra)\n      for (var key in extra) if (extra.hasOwnProperty(key))\n        addBinding(key, extra[key]);\n    return ourMap;\n  }\n\n  function getHintElement(hintsElement, el) {\n    while (el && el != hintsElement) {\n      if (el.nodeName.toUpperCase() === \"LI\" && el.parentNode == hintsElement) return el;\n      el = el.parentNode;\n    }\n  }\n\n  function Widget(completion, data) {\n    this.id = \"cm-complete-\" + Math.floor(Math.random(1e6))\n    this.completion = completion;\n    this.data = data;\n    this.picked = false;\n    var widget = this, cm = completion.cm;\n    var ownerDocument = cm.getInputField().ownerDocument;\n    var parentWindow = ownerDocument.defaultView || ownerDocument.parentWindow;\n\n    var hints = this.hints = ownerDocument.createElement(\"ul\");\n    hints.setAttribute(\"role\", \"listbox\")\n    hints.setAttribute(\"aria-expanded\", \"true\")\n    hints.id = this.id\n    var theme = completion.cm.options.theme;\n    hints.className = \"CodeMirror-hints \" + theme;\n    this.selectedHint = data.selectedHint || 0;\n\n    var completions = data.list;\n    for (var i = 0; i < completions.length; ++i) {\n      var elt = hints.appendChild(ownerDocument.createElement(\"li\")), cur = completions[i];\n      var className = HINT_ELEMENT_CLASS + (i != this.selectedHint ? \"\" : \" \" + ACTIVE_HINT_ELEMENT_CLASS);\n      if (cur.className != null) className = cur.className + \" \" + className;\n      elt.className = className;\n      if (i == this.selectedHint) elt.setAttribute(\"aria-selected\", \"true\")\n      elt.id = this.id + \"-\" + i\n      elt.setAttribute(\"role\", \"option\")\n      if (cur.render) cur.render(elt, data, cur);\n      else elt.appendChild(ownerDocument.createTextNode(cur.displayText || getText(cur)));\n      elt.hintId = i;\n    }\n\n    var container = completion.options.container || ownerDocument.body;\n    var pos = cm.cursorCoords(completion.options.alignWithWord ? data.from : null);\n    var left = pos.left, top = pos.bottom, below = true;\n    var offsetLeft = 0, offsetTop = 0;\n    if (container !== ownerDocument.body) {\n      // We offset the cursor position because left and top are relative to the offsetParent's top left corner.\n      var isContainerPositioned = ['absolute', 'relative', 'fixed'].indexOf(parentWindow.getComputedStyle(container).position) !== -1;\n      var offsetParent = isContainerPositioned ? container : container.offsetParent;\n      var offsetParentPosition = offsetParent.getBoundingClientRect();\n      var bodyPosition = ownerDocument.body.getBoundingClientRect();\n      offsetLeft = (offsetParentPosition.left - bodyPosition.left - offsetParent.scrollLeft);\n      offsetTop = (offsetParentPosition.top - bodyPosition.top - offsetParent.scrollTop);\n    }\n    hints.style.left = (left - offsetLeft) + \"px\";\n    hints.style.top = (top - offsetTop) + \"px\";\n\n    // If we're at the edge of the screen, then we want the menu to appear on the left of the cursor.\n    var winW = parentWindow.innerWidth || Math.max(ownerDocument.body.offsetWidth, ownerDocument.documentElement.offsetWidth);\n    var winH = parentWindow.innerHeight || Math.max(ownerDocument.body.offsetHeight, ownerDocument.documentElement.offsetHeight);\n    container.appendChild(hints);\n    cm.getInputField().setAttribute(\"aria-autocomplete\", \"list\")\n    cm.getInputField().setAttribute(\"aria-owns\", this.id)\n    cm.getInputField().setAttribute(\"aria-activedescendant\", this.id + \"-\" + this.selectedHint)\n\n    var box = completion.options.moveOnOverlap ? hints.getBoundingClientRect() : new DOMRect();\n    var scrolls = completion.options.paddingForScrollbar ? hints.scrollHeight > hints.clientHeight + 1 : false;\n\n    // Compute in the timeout to avoid reflow on init\n    var startScroll;\n    setTimeout(function() { startScroll = cm.getScrollInfo(); });\n\n    var overlapY = box.bottom - winH;\n    if (overlapY > 0) { // Does not fit below\n      var height = box.bottom - box.top, spaceAbove = box.top - (pos.bottom - pos.top) - 2\n      if (winH - box.top < spaceAbove) { // More room at the top\n        if (height > spaceAbove) hints.style.height = (height = spaceAbove) + \"px\";\n        hints.style.top = ((top = pos.top - height) + offsetTop) + \"px\";\n        below = false;\n      } else {\n        hints.style.height = (winH - box.top - 2) + \"px\";\n      }\n    }\n    var overlapX = box.right - winW;\n    if (scrolls) overlapX += cm.display.nativeBarWidth;\n    if (overlapX > 0) {\n      if (box.right - box.left > winW) {\n        hints.style.width = (winW - 5) + \"px\";\n        overlapX -= (box.right - box.left) - winW;\n      }\n      hints.style.left = (left = Math.max(pos.left - overlapX - offsetLeft, 0)) + \"px\";\n    }\n    if (scrolls) for (var node = hints.firstChild; node; node = node.nextSibling)\n      node.style.paddingRight = cm.display.nativeBarWidth + \"px\"\n\n    cm.addKeyMap(this.keyMap = buildKeyMap(completion, {\n      moveFocus: function(n, avoidWrap) { widget.changeActive(widget.selectedHint + n, avoidWrap); },\n      setFocus: function(n) { widget.changeActive(n); },\n      menuSize: function() { return widget.screenAmount(); },\n      length: completions.length,\n      close: function() { completion.close(); },\n      pick: function() { widget.pick(); },\n      data: data\n    }));\n\n    if (completion.options.closeOnUnfocus) {\n      var closingOnBlur;\n      cm.on(\"blur\", this.onBlur = function() { closingOnBlur = setTimeout(function() { completion.close(); }, 100); });\n      cm.on(\"focus\", this.onFocus = function() { clearTimeout(closingOnBlur); });\n    }\n\n    cm.on(\"scroll\", this.onScroll = function() {\n      var curScroll = cm.getScrollInfo(), editor = cm.getWrapperElement().getBoundingClientRect();\n      if (!startScroll) startScroll = cm.getScrollInfo();\n      var newTop = top + startScroll.top - curScroll.top;\n      var point = newTop - (parentWindow.pageYOffset || (ownerDocument.documentElement || ownerDocument.body).scrollTop);\n      if (!below) point += hints.offsetHeight;\n      if (point <= editor.top || point >= editor.bottom) return completion.close();\n      hints.style.top = newTop + \"px\";\n      hints.style.left = (left + startScroll.left - curScroll.left) + \"px\";\n    });\n\n    CodeMirror.on(hints, \"dblclick\", function(e) {\n      var t = getHintElement(hints, e.target || e.srcElement);\n      if (t && t.hintId != null) {widget.changeActive(t.hintId); widget.pick();}\n    });\n\n    CodeMirror.on(hints, \"click\", function(e) {\n      var t = getHintElement(hints, e.target || e.srcElement);\n      if (t && t.hintId != null) {\n        widget.changeActive(t.hintId);\n        if (completion.options.completeOnSingleClick) widget.pick();\n      }\n    });\n\n    CodeMirror.on(hints, \"mousedown\", function() {\n      setTimeout(function(){cm.focus();}, 20);\n    });\n\n    // The first hint doesn't need to be scrolled to on init\n    var selectedHintRange = this.getSelectedHintRange();\n    if (selectedHintRange.from !== 0 || selectedHintRange.to !== 0) {\n      this.scrollToActive();\n    }\n\n    CodeMirror.signal(data, \"select\", completions[this.selectedHint], hints.childNodes[this.selectedHint]);\n    return true;\n  }\n\n  Widget.prototype = {\n    close: function() {\n      if (this.completion.widget != this) return;\n      this.completion.widget = null;\n      if (this.hints.parentNode) this.hints.parentNode.removeChild(this.hints);\n      this.completion.cm.removeKeyMap(this.keyMap);\n      var input = this.completion.cm.getInputField()\n      input.removeAttribute(\"aria-activedescendant\")\n      input.removeAttribute(\"aria-owns\")\n\n      var cm = this.completion.cm;\n      if (this.completion.options.closeOnUnfocus) {\n        cm.off(\"blur\", this.onBlur);\n        cm.off(\"focus\", this.onFocus);\n      }\n      cm.off(\"scroll\", this.onScroll);\n    },\n\n    disable: function() {\n      this.completion.cm.removeKeyMap(this.keyMap);\n      var widget = this;\n      this.keyMap = {Enter: function() { widget.picked = true; }};\n      this.completion.cm.addKeyMap(this.keyMap);\n    },\n\n    pick: function() {\n      this.completion.pick(this.data, this.selectedHint);\n    },\n\n    changeActive: function(i, avoidWrap) {\n      if (i >= this.data.list.length)\n        i = avoidWrap ? this.data.list.length - 1 : 0;\n      else if (i < 0)\n        i = avoidWrap ? 0  : this.data.list.length - 1;\n      if (this.selectedHint == i) return;\n      var node = this.hints.childNodes[this.selectedHint];\n      if (node) {\n        node.className = node.className.replace(\" \" + ACTIVE_HINT_ELEMENT_CLASS, \"\");\n        node.removeAttribute(\"aria-selected\")\n      }\n      node = this.hints.childNodes[this.selectedHint = i];\n      node.className += \" \" + ACTIVE_HINT_ELEMENT_CLASS;\n      node.setAttribute(\"aria-selected\", \"true\")\n      this.completion.cm.getInputField().setAttribute(\"aria-activedescendant\", node.id)\n      this.scrollToActive()\n      CodeMirror.signal(this.data, \"select\", this.data.list[this.selectedHint], node);\n    },\n\n    scrollToActive: function() {\n      var selectedHintRange = this.getSelectedHintRange();\n      var node1 = this.hints.childNodes[selectedHintRange.from];\n      var node2 = this.hints.childNodes[selectedHintRange.to];\n      var firstNode = this.hints.firstChild;\n      if (node1.offsetTop < this.hints.scrollTop)\n        this.hints.scrollTop = node1.offsetTop - firstNode.offsetTop;\n      else if (node2.offsetTop + node2.offsetHeight > this.hints.scrollTop + this.hints.clientHeight)\n        this.hints.scrollTop = node2.offsetTop + node2.offsetHeight - this.hints.clientHeight + firstNode.offsetTop;\n    },\n\n    screenAmount: function() {\n      return Math.floor(this.hints.clientHeight / this.hints.firstChild.offsetHeight) || 1;\n    },\n\n    getSelectedHintRange: function() {\n      var margin = this.completion.options.scrollMargin || 0;\n      return {\n        from: Math.max(0, this.selectedHint - margin),\n        to: Math.min(this.data.list.length - 1, this.selectedHint + margin),\n      };\n    }\n  };\n\n  function applicableHelpers(cm, helpers) {\n    if (!cm.somethingSelected()) return helpers\n    var result = []\n    for (var i = 0; i < helpers.length; i++)\n      if (helpers[i].supportsSelection) result.push(helpers[i])\n    return result\n  }\n\n  function fetchHints(hint, cm, options, callback) {\n    if (hint.async) {\n      hint(cm, callback, options)\n    } else {\n      var result = hint(cm, options)\n      if (result && result.then) result.then(callback)\n      else callback(result)\n    }\n  }\n\n  function resolveAutoHints(cm, pos) {\n    var helpers = cm.getHelpers(pos, \"hint\"), words\n    if (helpers.length) {\n      var resolved = function(cm, callback, options) {\n        var app = applicableHelpers(cm, helpers);\n        function run(i) {\n          if (i == app.length) return callback(null)\n          fetchHints(app[i], cm, options, function(result) {\n            if (result && result.list.length > 0) callback(result)\n            else run(i + 1)\n          })\n        }\n        run(0)\n      }\n      resolved.async = true\n      resolved.supportsSelection = true\n      return resolved\n    } else if (words = cm.getHelper(cm.getCursor(), \"hintWords\")) {\n      return function(cm) { return CodeMirror.hint.fromList(cm, {words: words}) }\n    } else if (CodeMirror.hint.anyword) {\n      return function(cm, options) { return CodeMirror.hint.anyword(cm, options) }\n    } else {\n      return function() {}\n    }\n  }\n\n  CodeMirror.registerHelper(\"hint\", \"auto\", {\n    resolve: resolveAutoHints\n  });\n\n  CodeMirror.registerHelper(\"hint\", \"fromList\", function(cm, options) {\n    var cur = cm.getCursor(), token = cm.getTokenAt(cur)\n    var term, from = CodeMirror.Pos(cur.line, token.start), to = cur\n    if (token.start < cur.ch && /\\w/.test(token.string.charAt(cur.ch - token.start - 1))) {\n      term = token.string.substr(0, cur.ch - token.start)\n    } else {\n      term = \"\"\n      from = cur\n    }\n    var found = [];\n    for (var i = 0; i < options.words.length; i++) {\n      var word = options.words[i];\n      if (word.slice(0, term.length) == term)\n        found.push(word);\n    }\n\n    if (found.length) return {list: found, from: from, to: to};\n  });\n\n  CodeMirror.commands.autocomplete = CodeMirror.showHint;\n\n  var defaultOptions = {\n    hint: CodeMirror.hint.auto,\n    completeSingle: true,\n    alignWithWord: true,\n    closeCharacters: /[\\s()\\[\\]{};:>,]/,\n    closeOnPick: true,\n    closeOnUnfocus: true,\n    updateOnCursorActivity: true,\n    completeOnSingleClick: true,\n    container: null,\n    customKeys: null,\n    extraKeys: null,\n    paddingForScrollbar: true,\n    moveOnOverlap: true,\n  };\n\n  CodeMirror.defineOption(\"hintOptions\", null);\n});\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-3-1!../../postcss-loader/src/index.js??ref--7-oneOf-3-2!../../postcss-loader/src/index.js??ref--7-oneOf-3-3!./codemirror.css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"2ad31d40\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\n// Depends on js-yaml.js from https://github.com/nodeca/js-yaml\n\n// declare global: jsyaml\n\nCodeMirror.registerHelper(\"lint\", \"yaml\", function(text) {\n  var found = [];\n  if (!window.jsyaml) {\n    if (window.console) {\n      window.console.error(\"Error: window.jsyaml not defined, CodeMirror YAML linting cannot run.\");\n    }\n    return found;\n  }\n  try { jsyaml.loadAll(text); }\n  catch(e) {\n      var loc = e.mark,\n          // js-yaml YAMLException doesn't always provide an accurate lineno\n          // e.g., when there are multiple yaml docs\n          // ---\n          // ---\n          // foo:bar\n          from = loc ? CodeMirror.Pos(loc.line, loc.column) : CodeMirror.Pos(0, 0),\n          to = from;\n      found.push({ from: from, to: to, message: e.message });\n  }\n  return found;\n});\n\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"))\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod)\n  else // Plain browser env\n    mod(CodeMirror)\n})(function(CodeMirror) {\n  \"use strict\"\n  var Pos = CodeMirror.Pos\n\n  function regexpFlags(regexp) {\n    var flags = regexp.flags\n    return flags != null ? flags : (regexp.ignoreCase ? \"i\" : \"\")\n      + (regexp.global ? \"g\" : \"\")\n      + (regexp.multiline ? \"m\" : \"\")\n  }\n\n  function ensureFlags(regexp, flags) {\n    var current = regexpFlags(regexp), target = current\n    for (var i = 0; i < flags.length; i++) if (target.indexOf(flags.charAt(i)) == -1)\n      target += flags.charAt(i)\n    return current == target ? regexp : new RegExp(regexp.source, target)\n  }\n\n  function maybeMultiline(regexp) {\n    return /\\\\s|\\\\n|\\n|\\\\W|\\\\D|\\[\\^/.test(regexp.source)\n  }\n\n  function searchRegexpForward(doc, regexp, start) {\n    regexp = ensureFlags(regexp, \"g\")\n    for (var line = start.line, ch = start.ch, last = doc.lastLine(); line <= last; line++, ch = 0) {\n      regexp.lastIndex = ch\n      var string = doc.getLine(line), match = regexp.exec(string)\n      if (match)\n        return {from: Pos(line, match.index),\n                to: Pos(line, match.index + match[0].length),\n                match: match}\n    }\n  }\n\n  function searchRegexpForwardMultiline(doc, regexp, start) {\n    if (!maybeMultiline(regexp)) return searchRegexpForward(doc, regexp, start)\n\n    regexp = ensureFlags(regexp, \"gm\")\n    var string, chunk = 1\n    for (var line = start.line, last = doc.lastLine(); line <= last;) {\n      // This grows the search buffer in exponentially-sized chunks\n      // between matches, so that nearby matches are fast and don't\n      // require concatenating the whole document (in case we're\n      // searching for something that has tons of matches), but at the\n      // same time, the amount of retries is limited.\n      for (var i = 0; i < chunk; i++) {\n        if (line > last) break\n        var curLine = doc.getLine(line++)\n        string = string == null ? curLine : string + \"\\n\" + curLine\n      }\n      chunk = chunk * 2\n      regexp.lastIndex = start.ch\n      var match = regexp.exec(string)\n      if (match) {\n        var before = string.slice(0, match.index).split(\"\\n\"), inside = match[0].split(\"\\n\")\n        var startLine = start.line + before.length - 1, startCh = before[before.length - 1].length\n        return {from: Pos(startLine, startCh),\n                to: Pos(startLine + inside.length - 1,\n                        inside.length == 1 ? startCh + inside[0].length : inside[inside.length - 1].length),\n                match: match}\n      }\n    }\n  }\n\n  function lastMatchIn(string, regexp, endMargin) {\n    var match, from = 0\n    while (from <= string.length) {\n      regexp.lastIndex = from\n      var newMatch = regexp.exec(string)\n      if (!newMatch) break\n      var end = newMatch.index + newMatch[0].length\n      if (end > string.length - endMargin) break\n      if (!match || end > match.index + match[0].length)\n        match = newMatch\n      from = newMatch.index + 1\n    }\n    return match\n  }\n\n  function searchRegexpBackward(doc, regexp, start) {\n    regexp = ensureFlags(regexp, \"g\")\n    for (var line = start.line, ch = start.ch, first = doc.firstLine(); line >= first; line--, ch = -1) {\n      var string = doc.getLine(line)\n      var match = lastMatchIn(string, regexp, ch < 0 ? 0 : string.length - ch)\n      if (match)\n        return {from: Pos(line, match.index),\n                to: Pos(line, match.index + match[0].length),\n                match: match}\n    }\n  }\n\n  function searchRegexpBackwardMultiline(doc, regexp, start) {\n    if (!maybeMultiline(regexp)) return searchRegexpBackward(doc, regexp, start)\n    regexp = ensureFlags(regexp, \"gm\")\n    var string, chunkSize = 1, endMargin = doc.getLine(start.line).length - start.ch\n    for (var line = start.line, first = doc.firstLine(); line >= first;) {\n      for (var i = 0; i < chunkSize && line >= first; i++) {\n        var curLine = doc.getLine(line--)\n        string = string == null ? curLine : curLine + \"\\n\" + string\n      }\n      chunkSize *= 2\n\n      var match = lastMatchIn(string, regexp, endMargin)\n      if (match) {\n        var before = string.slice(0, match.index).split(\"\\n\"), inside = match[0].split(\"\\n\")\n        var startLine = line + before.length, startCh = before[before.length - 1].length\n        return {from: Pos(startLine, startCh),\n                to: Pos(startLine + inside.length - 1,\n                        inside.length == 1 ? startCh + inside[0].length : inside[inside.length - 1].length),\n                match: match}\n      }\n    }\n  }\n\n  var doFold, noFold\n  if (String.prototype.normalize) {\n    doFold = function(str) { return str.normalize(\"NFD\").toLowerCase() }\n    noFold = function(str) { return str.normalize(\"NFD\") }\n  } else {\n    doFold = function(str) { return str.toLowerCase() }\n    noFold = function(str) { return str }\n  }\n\n  // Maps a position in a case-folded line back to a position in the original line\n  // (compensating for codepoints increasing in number during folding)\n  function adjustPos(orig, folded, pos, foldFunc) {\n    if (orig.length == folded.length) return pos\n    for (var min = 0, max = pos + Math.max(0, orig.length - folded.length);;) {\n      if (min == max) return min\n      var mid = (min + max) >> 1\n      var len = foldFunc(orig.slice(0, mid)).length\n      if (len == pos) return mid\n      else if (len > pos) max = mid\n      else min = mid + 1\n    }\n  }\n\n  function searchStringForward(doc, query, start, caseFold) {\n    // Empty string would match anything and never progress, so we\n    // define it to match nothing instead.\n    if (!query.length) return null\n    var fold = caseFold ? doFold : noFold\n    var lines = fold(query).split(/\\r|\\n\\r?/)\n\n    search: for (var line = start.line, ch = start.ch, last = doc.lastLine() + 1 - lines.length; line <= last; line++, ch = 0) {\n      var orig = doc.getLine(line).slice(ch), string = fold(orig)\n      if (lines.length == 1) {\n        var found = string.indexOf(lines[0])\n        if (found == -1) continue search\n        var start = adjustPos(orig, string, found, fold) + ch\n        return {from: Pos(line, adjustPos(orig, string, found, fold) + ch),\n                to: Pos(line, adjustPos(orig, string, found + lines[0].length, fold) + ch)}\n      } else {\n        var cutFrom = string.length - lines[0].length\n        if (string.slice(cutFrom) != lines[0]) continue search\n        for (var i = 1; i < lines.length - 1; i++)\n          if (fold(doc.getLine(line + i)) != lines[i]) continue search\n        var end = doc.getLine(line + lines.length - 1), endString = fold(end), lastLine = lines[lines.length - 1]\n        if (endString.slice(0, lastLine.length) != lastLine) continue search\n        return {from: Pos(line, adjustPos(orig, string, cutFrom, fold) + ch),\n                to: Pos(line + lines.length - 1, adjustPos(end, endString, lastLine.length, fold))}\n      }\n    }\n  }\n\n  function searchStringBackward(doc, query, start, caseFold) {\n    if (!query.length) return null\n    var fold = caseFold ? doFold : noFold\n    var lines = fold(query).split(/\\r|\\n\\r?/)\n\n    search: for (var line = start.line, ch = start.ch, first = doc.firstLine() - 1 + lines.length; line >= first; line--, ch = -1) {\n      var orig = doc.getLine(line)\n      if (ch > -1) orig = orig.slice(0, ch)\n      var string = fold(orig)\n      if (lines.length == 1) {\n        var found = string.lastIndexOf(lines[0])\n        if (found == -1) continue search\n        return {from: Pos(line, adjustPos(orig, string, found, fold)),\n                to: Pos(line, adjustPos(orig, string, found + lines[0].length, fold))}\n      } else {\n        var lastLine = lines[lines.length - 1]\n        if (string.slice(0, lastLine.length) != lastLine) continue search\n        for (var i = 1, start = line - lines.length + 1; i < lines.length - 1; i++)\n          if (fold(doc.getLine(start + i)) != lines[i]) continue search\n        var top = doc.getLine(line + 1 - lines.length), topString = fold(top)\n        if (topString.slice(topString.length - lines[0].length) != lines[0]) continue search\n        return {from: Pos(line + 1 - lines.length, adjustPos(top, topString, top.length - lines[0].length, fold)),\n                to: Pos(line, adjustPos(orig, string, lastLine.length, fold))}\n      }\n    }\n  }\n\n  function SearchCursor(doc, query, pos, options) {\n    this.atOccurrence = false\n    this.afterEmptyMatch = false\n    this.doc = doc\n    pos = pos ? doc.clipPos(pos) : Pos(0, 0)\n    this.pos = {from: pos, to: pos}\n\n    var caseFold\n    if (typeof options == \"object\") {\n      caseFold = options.caseFold\n    } else { // Backwards compat for when caseFold was the 4th argument\n      caseFold = options\n      options = null\n    }\n\n    if (typeof query == \"string\") {\n      if (caseFold == null) caseFold = false\n      this.matches = function(reverse, pos) {\n        return (reverse ? searchStringBackward : searchStringForward)(doc, query, pos, caseFold)\n      }\n    } else {\n      query = ensureFlags(query, \"gm\")\n      if (!options || options.multiline !== false)\n        this.matches = function(reverse, pos) {\n          return (reverse ? searchRegexpBackwardMultiline : searchRegexpForwardMultiline)(doc, query, pos)\n        }\n      else\n        this.matches = function(reverse, pos) {\n          return (reverse ? searchRegexpBackward : searchRegexpForward)(doc, query, pos)\n        }\n    }\n  }\n\n  SearchCursor.prototype = {\n    findNext: function() {return this.find(false)},\n    findPrevious: function() {return this.find(true)},\n\n    find: function(reverse) {\n      var head = this.doc.clipPos(reverse ? this.pos.from : this.pos.to);\n      if (this.afterEmptyMatch && this.atOccurrence) {\n        // do not return the same 0 width match twice\n        head = Pos(head.line, head.ch)\n        if (reverse) {\n          head.ch--;\n          if (head.ch < 0) {\n            head.line--;\n            head.ch = (this.doc.getLine(head.line) || \"\").length;\n          }\n        } else {\n          head.ch++;\n          if (head.ch > (this.doc.getLine(head.line) || \"\").length) {\n            head.ch = 0;\n            head.line++;\n          }\n        }\n        if (CodeMirror.cmpPos(head, this.doc.clipPos(head)) != 0) {\n           return this.atOccurrence = false\n        }\n      }\n      var result = this.matches(reverse, head)\n      this.afterEmptyMatch = result && CodeMirror.cmpPos(result.from, result.to) == 0\n\n      if (result) {\n        this.pos = result\n        this.atOccurrence = true\n        return this.pos.match || true\n      } else {\n        var end = Pos(reverse ? this.doc.firstLine() : this.doc.lastLine() + 1, 0)\n        this.pos = {from: end, to: end}\n        return this.atOccurrence = false\n      }\n    },\n\n    from: function() {if (this.atOccurrence) return this.pos.from},\n    to: function() {if (this.atOccurrence) return this.pos.to},\n\n    replace: function(newText, origin) {\n      if (!this.atOccurrence) return\n      var lines = CodeMirror.splitLines(newText)\n      this.doc.replaceRange(lines, this.pos.from, this.pos.to, origin)\n      this.pos.to = Pos(this.pos.from.line + lines.length - 1,\n                        lines[lines.length - 1].length + (lines.length == 1 ? this.pos.from.ch : 0))\n    }\n  }\n\n  CodeMirror.defineExtension(\"getSearchCursor\", function(query, pos, caseFold) {\n    return new SearchCursor(this.doc, query, pos, caseFold)\n  })\n  CodeMirror.defineDocExtension(\"getSearchCursor\", function(query, pos, caseFold) {\n    return new SearchCursor(this, query, pos, caseFold)\n  })\n\n  CodeMirror.defineExtension(\"selectMatches\", function(query, caseFold) {\n    var ranges = []\n    var cur = this.getSearchCursor(query, this.getCursor(\"from\"), caseFold)\n    while (cur.findNext()) {\n      if (CodeMirror.cmpPos(cur.to(), this.getCursor(\"to\")) > 0) break\n      ranges.push({anchor: cur.from(), head: cur.to()})\n    }\n    if (ranges.length)\n      this.setSelections(ranges, 0)\n  })\n});\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"), require(\"./foldcode\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\", \"./foldcode\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineOption(\"foldGutter\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init) {\n      cm.clearGutter(cm.state.foldGutter.options.gutter);\n      cm.state.foldGutter = null;\n      cm.off(\"gutterClick\", onGutterClick);\n      cm.off(\"changes\", onChange);\n      cm.off(\"viewportChange\", onViewportChange);\n      cm.off(\"fold\", onFold);\n      cm.off(\"unfold\", onFold);\n      cm.off(\"swapDoc\", onChange);\n      cm.off(\"optionChange\", optionChange);\n    }\n    if (val) {\n      cm.state.foldGutter = new State(parseOptions(val));\n      updateInViewport(cm);\n      cm.on(\"gutterClick\", onGutterClick);\n      cm.on(\"changes\", onChange);\n      cm.on(\"viewportChange\", onViewportChange);\n      cm.on(\"fold\", onFold);\n      cm.on(\"unfold\", onFold);\n      cm.on(\"swapDoc\", onChange);\n      cm.on(\"optionChange\", optionChange);\n    }\n  });\n\n  var Pos = CodeMirror.Pos;\n\n  function State(options) {\n    this.options = options;\n    this.from = this.to = 0;\n  }\n\n  function parseOptions(opts) {\n    if (opts === true) opts = {};\n    if (opts.gutter == null) opts.gutter = \"CodeMirror-foldgutter\";\n    if (opts.indicatorOpen == null) opts.indicatorOpen = \"CodeMirror-foldgutter-open\";\n    if (opts.indicatorFolded == null) opts.indicatorFolded = \"CodeMirror-foldgutter-folded\";\n    return opts;\n  }\n\n  function isFolded(cm, line) {\n    var marks = cm.findMarks(Pos(line, 0), Pos(line + 1, 0));\n    for (var i = 0; i < marks.length; ++i) {\n      if (marks[i].__isFold) {\n        var fromPos = marks[i].find(-1);\n        if (fromPos && fromPos.line === line)\n          return marks[i];\n      }\n    }\n  }\n\n  function marker(spec) {\n    if (typeof spec == \"string\") {\n      var elt = document.createElement(\"div\");\n      elt.className = spec + \" CodeMirror-guttermarker-subtle\";\n      return elt;\n    } else {\n      return spec.cloneNode(true);\n    }\n  }\n\n  function updateFoldInfo(cm, from, to) {\n    var opts = cm.state.foldGutter.options, cur = from - 1;\n    var minSize = cm.foldOption(opts, \"minFoldSize\");\n    var func = cm.foldOption(opts, \"rangeFinder\");\n    // we can reuse the built-in indicator element if its className matches the new state\n    var clsFolded = typeof opts.indicatorFolded == \"string\" && classTest(opts.indicatorFolded);\n    var clsOpen = typeof opts.indicatorOpen == \"string\" && classTest(opts.indicatorOpen);\n    cm.eachLine(from, to, function(line) {\n      ++cur;\n      var mark = null;\n      var old = line.gutterMarkers;\n      if (old) old = old[opts.gutter];\n      if (isFolded(cm, cur)) {\n        if (clsFolded && old && clsFolded.test(old.className)) return;\n        mark = marker(opts.indicatorFolded);\n      } else {\n        var pos = Pos(cur, 0);\n        var range = func && func(cm, pos);\n        if (range && range.to.line - range.from.line >= minSize) {\n          if (clsOpen && old && clsOpen.test(old.className)) return;\n          mark = marker(opts.indicatorOpen);\n        }\n      }\n      if (!mark && !old) return;\n      cm.setGutterMarker(line, opts.gutter, mark);\n    });\n  }\n\n  // copied from CodeMirror/src/util/dom.js\n  function classTest(cls) { return new RegExp(\"(^|\\\\s)\" + cls + \"(?:$|\\\\s)\\\\s*\") }\n\n  function updateInViewport(cm) {\n    var vp = cm.getViewport(), state = cm.state.foldGutter;\n    if (!state) return;\n    cm.operation(function() {\n      updateFoldInfo(cm, vp.from, vp.to);\n    });\n    state.from = vp.from; state.to = vp.to;\n  }\n\n  function onGutterClick(cm, line, gutter) {\n    var state = cm.state.foldGutter;\n    if (!state) return;\n    var opts = state.options;\n    if (gutter != opts.gutter) return;\n    var folded = isFolded(cm, line);\n    if (folded) folded.clear();\n    else cm.foldCode(Pos(line, 0), opts);\n  }\n\n  function optionChange(cm, option) {\n    if (option == \"mode\") onChange(cm)\n  }\n\n  function onChange(cm) {\n    var state = cm.state.foldGutter;\n    if (!state) return;\n    var opts = state.options;\n    state.from = state.to = 0;\n    clearTimeout(state.changeUpdate);\n    state.changeUpdate = setTimeout(function() { updateInViewport(cm); }, opts.foldOnChangeTimeSpan || 600);\n  }\n\n  function onViewportChange(cm) {\n    var state = cm.state.foldGutter;\n    if (!state) return;\n    var opts = state.options;\n    clearTimeout(state.changeUpdate);\n    state.changeUpdate = setTimeout(function() {\n      var vp = cm.getViewport();\n      if (state.from == state.to || vp.from - state.to > 20 || state.from - vp.to > 20) {\n        updateInViewport(cm);\n      } else {\n        cm.operation(function() {\n          if (vp.from < state.from) {\n            updateFoldInfo(cm, vp.from, state.from);\n            state.from = vp.from;\n          }\n          if (vp.to > state.to) {\n            updateFoldInfo(cm, state.to, vp.to);\n            state.to = vp.to;\n          }\n        });\n      }\n    }, opts.updateViewportTimeSpan || 400);\n  }\n\n  function onFold(cm, from) {\n    var state = cm.state.foldGutter;\n    if (!state) return;\n    var line = from.line;\n    if (line >= state.from && line < state.to)\n      updateFoldInfo(cm, line, line + 1);\n  }\n});\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-3-1!../../postcss-loader/src/index.js??ref--7-oneOf-3-2!../../postcss-loader/src/index.js??ref--7-oneOf-3-3!./base16-light.css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"52a65d08\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.defineMode(\"yaml\", function() {\n\n  var cons = ['true', 'false', 'on', 'off', 'yes', 'no'];\n  var keywordRegex = new RegExp(\"\\\\b((\"+cons.join(\")|(\")+\"))$\", 'i');\n\n  return {\n    token: function(stream, state) {\n      var ch = stream.peek();\n      var esc = state.escaped;\n      state.escaped = false;\n      /* comments */\n      if (ch == \"#\" && (stream.pos == 0 || /\\s/.test(stream.string.charAt(stream.pos - 1)))) {\n        stream.skipToEnd();\n        return \"comment\";\n      }\n\n      if (stream.match(/^('([^']|\\\\.)*'?|\"([^\"]|\\\\.)*\"?)/))\n        return \"string\";\n\n      if (state.literal && stream.indentation() > state.keyCol) {\n        stream.skipToEnd(); return \"string\";\n      } else if (state.literal) { state.literal = false; }\n      if (stream.sol()) {\n        state.keyCol = 0;\n        state.pair = false;\n        state.pairStart = false;\n        /* document start */\n        if(stream.match('---')) { return \"def\"; }\n        /* document end */\n        if (stream.match('...')) { return \"def\"; }\n        /* array list item */\n        if (stream.match(/\\s*-\\s+/)) { return 'meta'; }\n      }\n      /* inline pairs/lists */\n      if (stream.match(/^(\\{|\\}|\\[|\\])/)) {\n        if (ch == '{')\n          state.inlinePairs++;\n        else if (ch == '}')\n          state.inlinePairs--;\n        else if (ch == '[')\n          state.inlineList++;\n        else\n          state.inlineList--;\n        return 'meta';\n      }\n\n      /* list separator */\n      if (state.inlineList > 0 && !esc && ch == ',') {\n        stream.next();\n        return 'meta';\n      }\n      /* pairs separator */\n      if (state.inlinePairs > 0 && !esc && ch == ',') {\n        state.keyCol = 0;\n        state.pair = false;\n        state.pairStart = false;\n        stream.next();\n        return 'meta';\n      }\n\n      /* start of value of a pair */\n      if (state.pairStart) {\n        /* block literals */\n        if (stream.match(/^\\s*(\\||\\>)\\s*/)) { state.literal = true; return 'meta'; };\n        /* references */\n        if (stream.match(/^\\s*(\\&|\\*)[a-z0-9\\._-]+\\b/i)) { return 'variable-2'; }\n        /* numbers */\n        if (state.inlinePairs == 0 && stream.match(/^\\s*-?[0-9\\.\\,]+\\s?$/)) { return 'number'; }\n        if (state.inlinePairs > 0 && stream.match(/^\\s*-?[0-9\\.\\,]+\\s?(?=(,|}))/)) { return 'number'; }\n        /* keywords */\n        if (stream.match(keywordRegex)) { return 'keyword'; }\n      }\n\n      /* pairs (associative arrays) -> key */\n      if (!state.pair && stream.match(/^\\s*(?:[,\\[\\]{}&*!|>'\"%@`][^\\s'\":]|[^,\\[\\]{}#&*!|>'\"%@`])[^#]*?(?=\\s*:($|\\s))/)) {\n        state.pair = true;\n        state.keyCol = stream.indentation();\n        return \"atom\";\n      }\n      if (state.pair && stream.match(/^:\\s*/)) { state.pairStart = true; return 'meta'; }\n\n      /* nothing found, continue */\n      state.pairStart = false;\n      state.escaped = (ch == '\\\\');\n      stream.next();\n      return null;\n    },\n    startState: function() {\n      return {\n        pair: false,\n        pairStart: false,\n        keyCol: 0,\n        inlinePairs: 0,\n        inlineList: 0,\n        literal: false,\n        escaped: false\n      };\n    },\n    lineComment: \"#\",\n    fold: \"indent\"\n  };\n});\n\nCodeMirror.defineMIME(\"text/x-yaml\", \"yaml\");\nCodeMirror.defineMIME(\"text/yaml\", \"yaml\");\n\n});\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".CodeMirror{font-family:monospace;height:300px;color:#000;direction:ltr}.CodeMirror-lines{padding:4px 0}.CodeMirror pre.CodeMirror-line,.CodeMirror pre.CodeMirror-line-like{padding:0 4px}.CodeMirror-gutter-filler,.CodeMirror-scrollbar-filler{background-color:#fff}.CodeMirror-gutters{border-right:1px solid #ddd;background-color:#f7f7f7;white-space:nowrap}.CodeMirror-linenumber{padding:0 3px 0 5px;min-width:20px;text-align:right;color:#999;white-space:nowrap}.CodeMirror-guttermarker{color:#000}.CodeMirror-guttermarker-subtle{color:#999}.CodeMirror-cursor{border-left:1px solid #000;border-right:none;width:0}.CodeMirror div.CodeMirror-secondarycursor{border-left:1px solid silver}.cm-fat-cursor .CodeMirror-cursor{width:auto;border:0!important;background:#7e7}.cm-fat-cursor div.CodeMirror-cursors{z-index:1}.cm-fat-cursor .CodeMirror-line::selection,.cm-fat-cursor .CodeMirror-line>span::selection,.cm-fat-cursor .CodeMirror-line>span>span::selection{background:transparent}.cm-fat-cursor .CodeMirror-line::-moz-selection,.cm-fat-cursor .CodeMirror-line>span::-moz-selection,.cm-fat-cursor .CodeMirror-line>span>span::-moz-selection{background:transparent}.cm-fat-cursor{caret-color:transparent}@keyframes blink{50%{background-color:transparent}}.cm-tab{display:inline-block;text-decoration:inherit}.CodeMirror-rulers{position:absolute;left:0;right:0;top:-50px;bottom:0;overflow:hidden}.CodeMirror-ruler{border-left:1px solid #ccc;top:0;bottom:0;position:absolute}.cm-s-default .cm-header{color:#00f}.cm-s-default .cm-quote{color:#090}.cm-negative{color:#d44}.cm-positive{color:#292}.cm-header,.cm-strong{font-weight:700}.cm-em{font-style:italic}.cm-link{text-decoration:underline}.cm-strikethrough{text-decoration:line-through}.cm-s-default .cm-keyword{color:#708}.cm-s-default .cm-atom{color:#219}.cm-s-default .cm-number{color:#164}.cm-s-default .cm-def{color:#00f}.cm-s-default .cm-variable-2{color:#05a}.cm-s-default .cm-type,.cm-s-default .cm-variable-3{color:#085}.cm-s-default .cm-comment{color:#a50}.cm-s-default .cm-string{color:#a11}.cm-s-default .cm-string-2{color:#f50}.cm-s-default .cm-meta,.cm-s-default .cm-qualifier{color:#555}.cm-s-default .cm-builtin{color:#30a}.cm-s-default .cm-bracket{color:#997}.cm-s-default .cm-tag{color:#170}.cm-s-default .cm-attribute{color:#00c}.cm-s-default .cm-hr{color:#999}.cm-s-default .cm-link{color:#00c}.cm-invalidchar,.cm-s-default .cm-error{color:red}.CodeMirror-composing{border-bottom:2px solid}div.CodeMirror span.CodeMirror-matchingbracket{color:#0b0}div.CodeMirror span.CodeMirror-nonmatchingbracket{color:#a22}.CodeMirror-matchingtag{background:rgba(255,150,0,.3)}.CodeMirror-activeline-background{background:#e8f2ff}.CodeMirror{position:relative;overflow:hidden;background:#fff}.CodeMirror-scroll{overflow:scroll!important;margin-bottom:-50px;margin-right:-50px;padding-bottom:50px;height:100%;outline:none;position:relative;z-index:0}.CodeMirror-sizer{position:relative;border-right:50px solid transparent}.CodeMirror-gutter-filler,.CodeMirror-hscrollbar,.CodeMirror-scrollbar-filler,.CodeMirror-vscrollbar{position:absolute;z-index:6;display:none;outline:none}.CodeMirror-vscrollbar{right:0;top:0;overflow-x:hidden;overflow-y:scroll}.CodeMirror-hscrollbar{bottom:0;left:0;overflow-y:hidden;overflow-x:scroll}.CodeMirror-scrollbar-filler{right:0;bottom:0}.CodeMirror-gutter-filler{left:0;bottom:0}.CodeMirror-gutters{position:absolute;left:0;top:0;min-height:100%;z-index:3}.CodeMirror-gutter{white-space:normal;height:100%;display:inline-block;vertical-align:top;margin-bottom:-50px}.CodeMirror-gutter-wrapper{position:absolute;z-index:4;background:none!important;border:none!important}.CodeMirror-gutter-background{position:absolute;top:0;bottom:0;z-index:4}.CodeMirror-gutter-elt{position:absolute;cursor:default;z-index:4}.CodeMirror-gutter-wrapper ::selection{background-color:transparent}.CodeMirror-gutter-wrapper ::-moz-selection{background-color:transparent}.CodeMirror-lines{cursor:text;min-height:1px}.CodeMirror pre.CodeMirror-line,.CodeMirror pre.CodeMirror-line-like{border-radius:0;border-width:0;background:transparent;font-family:inherit;font-size:inherit;margin:0;white-space:pre;word-wrap:normal;line-height:inherit;color:inherit;z-index:2;position:relative;overflow:visible;-webkit-tap-highlight-color:transparent;font-variant-ligatures:contextual}.CodeMirror-wrap pre.CodeMirror-line,.CodeMirror-wrap pre.CodeMirror-line-like{word-wrap:break-word;white-space:pre-wrap;word-break:normal}.CodeMirror-linebackground{position:absolute;left:0;right:0;top:0;bottom:0;z-index:0}.CodeMirror-linewidget{position:relative;z-index:2;padding:.1px}.CodeMirror-rtl pre{direction:rtl}.CodeMirror-code{outline:none}.CodeMirror-gutter,.CodeMirror-gutters,.CodeMirror-linenumber,.CodeMirror-scroll,.CodeMirror-sizer{box-sizing:content-box}.CodeMirror-measure{position:absolute;width:100%;height:0;overflow:hidden;visibility:hidden}.CodeMirror-cursor{position:absolute;pointer-events:none}.CodeMirror-measure pre{position:static}div.CodeMirror-cursors{visibility:hidden;position:relative;z-index:3}.CodeMirror-focused div.CodeMirror-cursors,div.CodeMirror-dragcursors{visibility:visible}.CodeMirror-selected{background:#d9d9d9}.CodeMirror-focused .CodeMirror-selected{background:#d7d4f0}.CodeMirror-crosshair{cursor:crosshair}.CodeMirror-line::selection,.CodeMirror-line>span::selection,.CodeMirror-line>span>span::selection{background:#d7d4f0}.CodeMirror-line::-moz-selection,.CodeMirror-line>span::-moz-selection,.CodeMirror-line>span>span::-moz-selection{background:#d7d4f0}.cm-searching{background-color:#ffa;background-color:rgba(255,255,0,.4)}.cm-force-border{padding-right:.1px}@media print{.CodeMirror div.CodeMirror-cursors{visibility:hidden}}.cm-tab-wrap-hack:after{content:\\\"\\\"}span.CodeMirror-selectedtext{background:none}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/*\n * NOTE: This isn't actually a real plugin anymore, it's is dynamically loaded in components/CodeMirror.vue\n * so that it doesn't all get loaded put into vendor.js\n */\n\nimport Vue from 'vue';\nimport VueCodemirror from 'vue-codemirror';\nimport CodeMirror from 'codemirror';\n\nimport 'codemirror/lib/codemirror.css';\nimport 'codemirror/mode/yaml/yaml.js';\nimport 'codemirror/mode/javascript/javascript.js';\n\n// import 'codemirror/mode/dockerfile/dockerfile.js';\n// import 'codemirror/mode/shell/shell.js';\n// import 'codemirror/mode/markdown/markdown.js';\n\nimport 'codemirror/theme/base16-light.css';\nimport 'codemirror/theme/base16-dark.css';\n\nimport 'codemirror/keymap/vim.js';\nimport 'codemirror/keymap/emacs.js';\nimport 'codemirror/keymap/sublime.js';\n\nimport 'codemirror/addon/lint/lint.css';\nimport 'codemirror/addon/lint/lint.js';\nimport 'codemirror/addon/lint/yaml-lint.js';\n\nimport 'codemirror/addon/fold/foldgutter.css';\nimport 'codemirror/addon/fold/foldgutter.js';\n\nimport 'codemirror/addon/hint/show-hint.css';\nimport 'codemirror/addon/hint/show-hint.js';\nimport 'codemirror/addon/hint/anyword-hint.js';\n\nimport { strPad } from '@shell/utils/string';\n\nVue.use(VueCodemirror);\nexport default VueCodemirror;\n\nfunction isLineComment(cm, lineNo) {\n  return /\\bcomment\\b/.test(cm.getTokenTypeAt(CodeMirror.Pos(lineNo, 0)));\n}\n\nfunction commentIndent(cm, lineNo) {\n  const text = cm.getLine(lineNo).substr(1);\n  const spaceTo = text.search(/\\S/);\n\n  if (spaceTo === -1 ) {\n    return -1;\n  }\n\n  const out = CodeMirror.countColumn(text, null, cm.getOption('tabSize'));\n\n  return out;\n}\n\n// Like the regular indent in codemirror, but treat a YAML array\n// item that's at the same level as the parent key as intented on level more\n//\n// foo:\n// - a\n// - b\nfunction lineIndent(cm, lineNo) {\n  let text = cm.getLine(lineNo);\n  const match = text.match(/(\\s*(-\\s+)?)(\\S.*)/);\n\n  if ( !match ) {\n    return -1;\n  }\n\n  const spaceTo = match[1].length;\n\n  text = strPad('', spaceTo) + match[3];\n\n  if ( /\\bcomment\\b/.test(cm.getTokenTypeAt(CodeMirror.Pos(lineNo, spaceTo + 1)))) {\n    return -1;\n  }\n\n  return CodeMirror.countColumn(text, null, cm.getOption('tabSize'));\n}\n\n// https://github.com/codemirror/CodeMirror/blob/master/addon/fold/indent-fold.js\nCodeMirror.registerHelper('fold', 'indent', (cm, start) => {\n  const myIndent = lineIndent(cm, start.line);\n\n  if (myIndent < 0) {\n    return;\n  }\n  let lastLineInFold = null;\n\n  // Go through lines until we find a line that definitely doesn't belong in\n  // the block we're folding, or to the end.\n  for (let i = start.line + 1, end = cm.lastLine(); i <= end; ++i) {\n    const indent = lineIndent(cm, i);\n\n    if (indent === -1) {\n    } else if (indent > myIndent) {\n      // Lines with a greater indent are considered part of the block.\n      lastLineInFold = i;\n    } else {\n      // If this line has non-space, non-comment content, and is\n      // indented less or equal to the start line, it is the start of\n      // another block.\n      break;\n    }\n  }\n  if (lastLineInFold) {\n    return {\n      from: CodeMirror.Pos(start.line, cm.getLine(start.line).length),\n      to:   CodeMirror.Pos(lastLineInFold, cm.getLine(lastLineInFold).length)\n    };\n  }\n});\n\nCodeMirror.defineExtension('foldLinesMatching', function(regex) {\n  this.operation(() => {\n    for (let i = this.firstLine(), e = this.lastLine(); i <= e; i++) {\n      const line = this.getLine(i);\n\n      if ( line.match(regex) ) {\n        this.foldCode(CodeMirror.Pos(i, 0), null, 'fold');\n      }\n    }\n  });\n});\n\nCodeMirror.registerHelper('fold', 'yamlcomments', (cm, start) => {\n  if ( !isLineComment(cm, start.line) ) {\n    return;\n  }\n\n  const myIndent = commentIndent(cm, start.line);\n\n  if (myIndent < 0) {\n    return;\n  }\n\n  let lastLineInFold = null;\n\n  // Go through lines until we find a line that definitely doesn't belong in\n  // the block we're folding, or to the end.\n  for (let i = start.line + 1, end = cm.lastLine(); i <= end; ++i) {\n    if ( !isLineComment(cm, i) ) {\n      break;\n    }\n\n    const indent = commentIndent(cm, i);\n\n    if (indent === -1) {\n      // empty?\n    } else if (indent > myIndent) {\n      // Lines with a greater indent are considered part of the block.\n      lastLineInFold = i;\n    } else {\n      // If this line has non-space, non-comment content, and is\n      // indented less or equal to the start line, it is the start of\n      // another block.\n      break;\n    }\n  }\n\n  if (lastLineInFold) {\n    return {\n      from: CodeMirror.Pos(start.line, cm.getLine(start.line).length),\n      to:   CodeMirror.Pos(lastLineInFold, cm.getLine(lastLineInFold).length)\n    };\n  }\n});\n\n/**\n * It display a dot for each space character in the text;\n * used in combination with 'as-text-area' css properties in CodeMirror.vue to display line break markdowns\n */\nCodeMirror.defineOption('showMarkdownLineBreaks', false, (codeMirror) => {\n  codeMirror.addOverlay({\n    name:  'show-markdown-line-breaks',\n    token: (stream) => {\n      if (stream.string[stream.pos].match(/\\s/)) {\n        stream.next();\n\n        return stream.pos % 2 === 0 ? 'markdown-single-trailing-space-even' : 'markdown-single-trailing-space-odd';\n      }\n\n      stream.next();\n\n      return null;\n    }\n  });\n});\n\n/**\n * It enables the text color selection in CodeMirror.vue\n * references:\n *   demo:   https://codemirror.net/5/demo/markselection.html#\n *   add-on: https://codemirror.net/5/doc/manual.html#addon_mark-selection\n *   source: https://codemirror.net/5/addon/selection/mark-selection.js\n */\nCodeMirror.defineOption('styleSelectedText', false, (cm, val, old) => {\n  const prev = old && old !== CodeMirror.Init;\n\n  if (val && !prev) {\n    cm.state.markedSelection = [];\n    cm.state.markedSelectionStyle = typeof val === 'string' ? val : 'CodeMirror-selectedtext';\n    reset(cm);\n    cm.on('cursorActivity', onCursorActivity);\n    cm.on('change', onChange);\n  } else if (!val && prev) {\n    cm.off('cursorActivity', onCursorActivity);\n    cm.off('change', onChange);\n    clear(cm);\n    cm.state.markedSelection = cm.state.markedSelectionStyle = null;\n  }\n});\n\nfunction onCursorActivity(cm) {\n  if (cm.state.markedSelection) {\n    cm.operation(() => {\n      update(cm);\n    });\n  }\n}\n\nfunction onChange(cm) {\n  if (cm.state.markedSelection && cm.state.markedSelection.length) {\n    cm.operation(() => {\n      clear(cm);\n    });\n  }\n}\n\nconst CHUNK_SIZE = 8;\nconst Pos = CodeMirror.Pos;\nconst cmp = CodeMirror.cmpPos;\n\nfunction coverRange(cm, from, to, addAt) {\n  if (cmp(from, to) === 0) {\n    return;\n  }\n  const array = cm.state.markedSelection;\n  const cls = cm.state.markedSelectionStyle;\n\n  for (let line = from.line;;) {\n    const start = line === from.line ? from : Pos(line, 0);\n    const endLine = line + CHUNK_SIZE; const atEnd = endLine >= to.line;\n    const end = atEnd ? to : Pos(endLine, 0);\n    const mark = cm.markText(start, end, { className: cls });\n\n    if (addAt === null || addAt === undefined) {\n      array.push(mark);\n    } else {\n      array.splice(addAt++, 0, mark);\n    }\n    if (atEnd) {\n      break;\n    }\n    line = endLine;\n  }\n}\n\nfunction clear(cm) {\n  const array = cm.state.markedSelection;\n\n  for (let i = 0; i < array.length; ++i) {\n    array[i].clear();\n  }\n  array.length = 0;\n}\n\nfunction reset(cm) {\n  clear(cm);\n  const ranges = cm.listSelections();\n\n  for (let i = 0; i < ranges.length; i++) {\n    coverRange(cm, ranges[i].from(), ranges[i].to());\n  }\n}\n\nfunction update(cm) {\n  if (!cm.somethingSelected()) {\n    return clear(cm);\n  }\n  if (cm.listSelections().length > 1) {\n    return reset(cm);\n  }\n\n  const from = cm.getCursor('start'); const to = cm.getCursor('end');\n\n  const array = cm.state.markedSelection;\n\n  if (!array.length) {\n    return coverRange(cm, from, to);\n  }\n\n  let coverStart = array[0].find(); let coverEnd = array[array.length - 1].find();\n\n  if (!coverStart || !coverEnd || to.line - from.line <= CHUNK_SIZE ||\n      cmp(from, coverEnd.to) >= 0 || cmp(to, coverStart.from) <= 0) {\n    return reset(cm);\n  }\n\n  while (cmp(from, coverStart.from) > 0) {\n    array.shift().clear();\n    coverStart = array[0].find();\n  }\n  if (cmp(from, coverStart.from) < 0) {\n    if (coverStart.to.line - from.line < CHUNK_SIZE) {\n      array.shift().clear();\n      coverRange(cm, from, coverStart.to, 0);\n    } else {\n      coverRange(cm, from, coverStart.from, 0);\n    }\n  }\n\n  while (cmp(to, coverEnd.to) < 0) {\n    array.pop().clear();\n    coverEnd = array[array.length - 1].find();\n  }\n  if (cmp(to, coverEnd.to) > 0) {\n    if (to.line - coverEnd.from.line < CHUNK_SIZE) {\n      array.pop().clear();\n      coverRange(cm, coverEnd.from, to);\n    } else {\n      coverRange(cm, coverEnd.to, to);\n    }\n  }\n}\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--7-oneOf-3-1!../../../postcss-loader/src/index.js??ref--7-oneOf-3-2!../../../postcss-loader/src/index.js??ref--7-oneOf-3-3!./show-hint.css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"1f31d586\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".CodeMirror-foldmarker{color:#00f;text-shadow:#b9f 1px 1px 2px,#b9f -1px -1px 2px,#b9f 1px -1px 2px,#b9f -1px 1px 2px;font-family:arial;line-height:.3;cursor:pointer}.CodeMirror-foldgutter{width:.7em}.CodeMirror-foldgutter-folded,.CodeMirror-foldgutter-open{cursor:pointer}.CodeMirror-foldgutter-open:after{content:\\\"\\\\25BE\\\"}.CodeMirror-foldgutter-folded:after{content:\\\"\\\\25B8\\\"}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/5/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.defineMode(\"javascript\", function(config, parserConfig) {\n  var indentUnit = config.indentUnit;\n  var statementIndent = parserConfig.statementIndent;\n  var jsonldMode = parserConfig.jsonld;\n  var jsonMode = parserConfig.json || jsonldMode;\n  var trackScope = parserConfig.trackScope !== false\n  var isTS = parserConfig.typescript;\n  var wordRE = parserConfig.wordCharacters || /[\\w$\\xa1-\\uffff]/;\n\n  // Tokenizer\n\n  var keywords = function(){\n    function kw(type) {return {type: type, style: \"keyword\"};}\n    var A = kw(\"keyword a\"), B = kw(\"keyword b\"), C = kw(\"keyword c\"), D = kw(\"keyword d\");\n    var operator = kw(\"operator\"), atom = {type: \"atom\", style: \"atom\"};\n\n    return {\n      \"if\": kw(\"if\"), \"while\": A, \"with\": A, \"else\": B, \"do\": B, \"try\": B, \"finally\": B,\n      \"return\": D, \"break\": D, \"continue\": D, \"new\": kw(\"new\"), \"delete\": C, \"void\": C, \"throw\": C,\n      \"debugger\": kw(\"debugger\"), \"var\": kw(\"var\"), \"const\": kw(\"var\"), \"let\": kw(\"var\"),\n      \"function\": kw(\"function\"), \"catch\": kw(\"catch\"),\n      \"for\": kw(\"for\"), \"switch\": kw(\"switch\"), \"case\": kw(\"case\"), \"default\": kw(\"default\"),\n      \"in\": operator, \"typeof\": operator, \"instanceof\": operator,\n      \"true\": atom, \"false\": atom, \"null\": atom, \"undefined\": atom, \"NaN\": atom, \"Infinity\": atom,\n      \"this\": kw(\"this\"), \"class\": kw(\"class\"), \"super\": kw(\"atom\"),\n      \"yield\": C, \"export\": kw(\"export\"), \"import\": kw(\"import\"), \"extends\": C,\n      \"await\": C\n    };\n  }();\n\n  var isOperatorChar = /[+\\-*&%=<>!?|~^@]/;\n  var isJsonldKeyword = /^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)\"/;\n\n  function readRegexp(stream) {\n    var escaped = false, next, inSet = false;\n    while ((next = stream.next()) != null) {\n      if (!escaped) {\n        if (next == \"/\" && !inSet) return;\n        if (next == \"[\") inSet = true;\n        else if (inSet && next == \"]\") inSet = false;\n      }\n      escaped = !escaped && next == \"\\\\\";\n    }\n  }\n\n  // Used as scratch variables to communicate multiple values without\n  // consing up tons of objects.\n  var type, content;\n  function ret(tp, style, cont) {\n    type = tp; content = cont;\n    return style;\n  }\n  function tokenBase(stream, state) {\n    var ch = stream.next();\n    if (ch == '\"' || ch == \"'\") {\n      state.tokenize = tokenString(ch);\n      return state.tokenize(stream, state);\n    } else if (ch == \".\" && stream.match(/^\\d[\\d_]*(?:[eE][+\\-]?[\\d_]+)?/)) {\n      return ret(\"number\", \"number\");\n    } else if (ch == \".\" && stream.match(\"..\")) {\n      return ret(\"spread\", \"meta\");\n    } else if (/[\\[\\]{}\\(\\),;\\:\\.]/.test(ch)) {\n      return ret(ch);\n    } else if (ch == \"=\" && stream.eat(\">\")) {\n      return ret(\"=>\", \"operator\");\n    } else if (ch == \"0\" && stream.match(/^(?:x[\\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/)) {\n      return ret(\"number\", \"number\");\n    } else if (/\\d/.test(ch)) {\n      stream.match(/^[\\d_]*(?:n|(?:\\.[\\d_]*)?(?:[eE][+\\-]?[\\d_]+)?)?/);\n      return ret(\"number\", \"number\");\n    } else if (ch == \"/\") {\n      if (stream.eat(\"*\")) {\n        state.tokenize = tokenComment;\n        return tokenComment(stream, state);\n      } else if (stream.eat(\"/\")) {\n        stream.skipToEnd();\n        return ret(\"comment\", \"comment\");\n      } else if (expressionAllowed(stream, state, 1)) {\n        readRegexp(stream);\n        stream.match(/^\\b(([gimyus])(?![gimyus]*\\2))+\\b/);\n        return ret(\"regexp\", \"string-2\");\n      } else {\n        stream.eat(\"=\");\n        return ret(\"operator\", \"operator\", stream.current());\n      }\n    } else if (ch == \"`\") {\n      state.tokenize = tokenQuasi;\n      return tokenQuasi(stream, state);\n    } else if (ch == \"#\" && stream.peek() == \"!\") {\n      stream.skipToEnd();\n      return ret(\"meta\", \"meta\");\n    } else if (ch == \"#\" && stream.eatWhile(wordRE)) {\n      return ret(\"variable\", \"property\")\n    } else if (ch == \"<\" && stream.match(\"!--\") ||\n               (ch == \"-\" && stream.match(\"->\") && !/\\S/.test(stream.string.slice(0, stream.start)))) {\n      stream.skipToEnd()\n      return ret(\"comment\", \"comment\")\n    } else if (isOperatorChar.test(ch)) {\n      if (ch != \">\" || !state.lexical || state.lexical.type != \">\") {\n        if (stream.eat(\"=\")) {\n          if (ch == \"!\" || ch == \"=\") stream.eat(\"=\")\n        } else if (/[<>*+\\-|&?]/.test(ch)) {\n          stream.eat(ch)\n          if (ch == \">\") stream.eat(ch)\n        }\n      }\n      if (ch == \"?\" && stream.eat(\".\")) return ret(\".\")\n      return ret(\"operator\", \"operator\", stream.current());\n    } else if (wordRE.test(ch)) {\n      stream.eatWhile(wordRE);\n      var word = stream.current()\n      if (state.lastType != \".\") {\n        if (keywords.propertyIsEnumerable(word)) {\n          var kw = keywords[word]\n          return ret(kw.type, kw.style, word)\n        }\n        if (word == \"async\" && stream.match(/^(\\s|\\/\\*([^*]|\\*(?!\\/))*?\\*\\/)*[\\[\\(\\w]/, false))\n          return ret(\"async\", \"keyword\", word)\n      }\n      return ret(\"variable\", \"variable\", word)\n    }\n  }\n\n  function tokenString(quote) {\n    return function(stream, state) {\n      var escaped = false, next;\n      if (jsonldMode && stream.peek() == \"@\" && stream.match(isJsonldKeyword)){\n        state.tokenize = tokenBase;\n        return ret(\"jsonld-keyword\", \"meta\");\n      }\n      while ((next = stream.next()) != null) {\n        if (next == quote && !escaped) break;\n        escaped = !escaped && next == \"\\\\\";\n      }\n      if (!escaped) state.tokenize = tokenBase;\n      return ret(\"string\", \"string\");\n    };\n  }\n\n  function tokenComment(stream, state) {\n    var maybeEnd = false, ch;\n    while (ch = stream.next()) {\n      if (ch == \"/\" && maybeEnd) {\n        state.tokenize = tokenBase;\n        break;\n      }\n      maybeEnd = (ch == \"*\");\n    }\n    return ret(\"comment\", \"comment\");\n  }\n\n  function tokenQuasi(stream, state) {\n    var escaped = false, next;\n    while ((next = stream.next()) != null) {\n      if (!escaped && (next == \"`\" || next == \"$\" && stream.eat(\"{\"))) {\n        state.tokenize = tokenBase;\n        break;\n      }\n      escaped = !escaped && next == \"\\\\\";\n    }\n    return ret(\"quasi\", \"string-2\", stream.current());\n  }\n\n  var brackets = \"([{}])\";\n  // This is a crude lookahead trick to try and notice that we're\n  // parsing the argument patterns for a fat-arrow function before we\n  // actually hit the arrow token. It only works if the arrow is on\n  // the same line as the arguments and there's no strange noise\n  // (comments) in between. Fallback is to only notice when we hit the\n  // arrow, and not declare the arguments as locals for the arrow\n  // body.\n  function findFatArrow(stream, state) {\n    if (state.fatArrowAt) state.fatArrowAt = null;\n    var arrow = stream.string.indexOf(\"=>\", stream.start);\n    if (arrow < 0) return;\n\n    if (isTS) { // Try to skip TypeScript return type declarations after the arguments\n      var m = /:\\s*(?:\\w+(?:<[^>]*>|\\[\\])?|\\{[^}]*\\})\\s*$/.exec(stream.string.slice(stream.start, arrow))\n      if (m) arrow = m.index\n    }\n\n    var depth = 0, sawSomething = false;\n    for (var pos = arrow - 1; pos >= 0; --pos) {\n      var ch = stream.string.charAt(pos);\n      var bracket = brackets.indexOf(ch);\n      if (bracket >= 0 && bracket < 3) {\n        if (!depth) { ++pos; break; }\n        if (--depth == 0) { if (ch == \"(\") sawSomething = true; break; }\n      } else if (bracket >= 3 && bracket < 6) {\n        ++depth;\n      } else if (wordRE.test(ch)) {\n        sawSomething = true;\n      } else if (/[\"'\\/`]/.test(ch)) {\n        for (;; --pos) {\n          if (pos == 0) return\n          var next = stream.string.charAt(pos - 1)\n          if (next == ch && stream.string.charAt(pos - 2) != \"\\\\\") { pos--; break }\n        }\n      } else if (sawSomething && !depth) {\n        ++pos;\n        break;\n      }\n    }\n    if (sawSomething && !depth) state.fatArrowAt = pos;\n  }\n\n  // Parser\n\n  var atomicTypes = {\"atom\": true, \"number\": true, \"variable\": true, \"string\": true,\n                     \"regexp\": true, \"this\": true, \"import\": true, \"jsonld-keyword\": true};\n\n  function JSLexical(indented, column, type, align, prev, info) {\n    this.indented = indented;\n    this.column = column;\n    this.type = type;\n    this.prev = prev;\n    this.info = info;\n    if (align != null) this.align = align;\n  }\n\n  function inScope(state, varname) {\n    if (!trackScope) return false\n    for (var v = state.localVars; v; v = v.next)\n      if (v.name == varname) return true;\n    for (var cx = state.context; cx; cx = cx.prev) {\n      for (var v = cx.vars; v; v = v.next)\n        if (v.name == varname) return true;\n    }\n  }\n\n  function parseJS(state, style, type, content, stream) {\n    var cc = state.cc;\n    // Communicate our context to the combinators.\n    // (Less wasteful than consing up a hundred closures on every call.)\n    cx.state = state; cx.stream = stream; cx.marked = null, cx.cc = cc; cx.style = style;\n\n    if (!state.lexical.hasOwnProperty(\"align\"))\n      state.lexical.align = true;\n\n    while(true) {\n      var combinator = cc.length ? cc.pop() : jsonMode ? expression : statement;\n      if (combinator(type, content)) {\n        while(cc.length && cc[cc.length - 1].lex)\n          cc.pop()();\n        if (cx.marked) return cx.marked;\n        if (type == \"variable\" && inScope(state, content)) return \"variable-2\";\n        return style;\n      }\n    }\n  }\n\n  // Combinator utils\n\n  var cx = {state: null, column: null, marked: null, cc: null};\n  function pass() {\n    for (var i = arguments.length - 1; i >= 0; i--) cx.cc.push(arguments[i]);\n  }\n  function cont() {\n    pass.apply(null, arguments);\n    return true;\n  }\n  function inList(name, list) {\n    for (var v = list; v; v = v.next) if (v.name == name) return true\n    return false;\n  }\n  function register(varname) {\n    var state = cx.state;\n    cx.marked = \"def\";\n    if (!trackScope) return\n    if (state.context) {\n      if (state.lexical.info == \"var\" && state.context && state.context.block) {\n        // FIXME function decls are also not block scoped\n        var newContext = registerVarScoped(varname, state.context)\n        if (newContext != null) {\n          state.context = newContext\n          return\n        }\n      } else if (!inList(varname, state.localVars)) {\n        state.localVars = new Var(varname, state.localVars)\n        return\n      }\n    }\n    // Fall through means this is global\n    if (parserConfig.globalVars && !inList(varname, state.globalVars))\n      state.globalVars = new Var(varname, state.globalVars)\n  }\n  function registerVarScoped(varname, context) {\n    if (!context) {\n      return null\n    } else if (context.block) {\n      var inner = registerVarScoped(varname, context.prev)\n      if (!inner) return null\n      if (inner == context.prev) return context\n      return new Context(inner, context.vars, true)\n    } else if (inList(varname, context.vars)) {\n      return context\n    } else {\n      return new Context(context.prev, new Var(varname, context.vars), false)\n    }\n  }\n\n  function isModifier(name) {\n    return name == \"public\" || name == \"private\" || name == \"protected\" || name == \"abstract\" || name == \"readonly\"\n  }\n\n  // Combinators\n\n  function Context(prev, vars, block) { this.prev = prev; this.vars = vars; this.block = block }\n  function Var(name, next) { this.name = name; this.next = next }\n\n  var defaultVars = new Var(\"this\", new Var(\"arguments\", null))\n  function pushcontext() {\n    cx.state.context = new Context(cx.state.context, cx.state.localVars, false)\n    cx.state.localVars = defaultVars\n  }\n  function pushblockcontext() {\n    cx.state.context = new Context(cx.state.context, cx.state.localVars, true)\n    cx.state.localVars = null\n  }\n  pushcontext.lex = pushblockcontext.lex = true\n  function popcontext() {\n    cx.state.localVars = cx.state.context.vars\n    cx.state.context = cx.state.context.prev\n  }\n  popcontext.lex = true\n  function pushlex(type, info) {\n    var result = function() {\n      var state = cx.state, indent = state.indented;\n      if (state.lexical.type == \"stat\") indent = state.lexical.indented;\n      else for (var outer = state.lexical; outer && outer.type == \")\" && outer.align; outer = outer.prev)\n        indent = outer.indented;\n      state.lexical = new JSLexical(indent, cx.stream.column(), type, null, state.lexical, info);\n    };\n    result.lex = true;\n    return result;\n  }\n  function poplex() {\n    var state = cx.state;\n    if (state.lexical.prev) {\n      if (state.lexical.type == \")\")\n        state.indented = state.lexical.indented;\n      state.lexical = state.lexical.prev;\n    }\n  }\n  poplex.lex = true;\n\n  function expect(wanted) {\n    function exp(type) {\n      if (type == wanted) return cont();\n      else if (wanted == \";\" || type == \"}\" || type == \")\" || type == \"]\") return pass();\n      else return cont(exp);\n    };\n    return exp;\n  }\n\n  function statement(type, value) {\n    if (type == \"var\") return cont(pushlex(\"vardef\", value), vardef, expect(\";\"), poplex);\n    if (type == \"keyword a\") return cont(pushlex(\"form\"), parenExpr, statement, poplex);\n    if (type == \"keyword b\") return cont(pushlex(\"form\"), statement, poplex);\n    if (type == \"keyword d\") return cx.stream.match(/^\\s*$/, false) ? cont() : cont(pushlex(\"stat\"), maybeexpression, expect(\";\"), poplex);\n    if (type == \"debugger\") return cont(expect(\";\"));\n    if (type == \"{\") return cont(pushlex(\"}\"), pushblockcontext, block, poplex, popcontext);\n    if (type == \";\") return cont();\n    if (type == \"if\") {\n      if (cx.state.lexical.info == \"else\" && cx.state.cc[cx.state.cc.length - 1] == poplex)\n        cx.state.cc.pop()();\n      return cont(pushlex(\"form\"), parenExpr, statement, poplex, maybeelse);\n    }\n    if (type == \"function\") return cont(functiondef);\n    if (type == \"for\") return cont(pushlex(\"form\"), pushblockcontext, forspec, statement, popcontext, poplex);\n    if (type == \"class\" || (isTS && value == \"interface\")) {\n      cx.marked = \"keyword\"\n      return cont(pushlex(\"form\", type == \"class\" ? type : value), className, poplex)\n    }\n    if (type == \"variable\") {\n      if (isTS && value == \"declare\") {\n        cx.marked = \"keyword\"\n        return cont(statement)\n      } else if (isTS && (value == \"module\" || value == \"enum\" || value == \"type\") && cx.stream.match(/^\\s*\\w/, false)) {\n        cx.marked = \"keyword\"\n        if (value == \"enum\") return cont(enumdef);\n        else if (value == \"type\") return cont(typename, expect(\"operator\"), typeexpr, expect(\";\"));\n        else return cont(pushlex(\"form\"), pattern, expect(\"{\"), pushlex(\"}\"), block, poplex, poplex)\n      } else if (isTS && value == \"namespace\") {\n        cx.marked = \"keyword\"\n        return cont(pushlex(\"form\"), expression, statement, poplex)\n      } else if (isTS && value == \"abstract\") {\n        cx.marked = \"keyword\"\n        return cont(statement)\n      } else {\n        return cont(pushlex(\"stat\"), maybelabel);\n      }\n    }\n    if (type == \"switch\") return cont(pushlex(\"form\"), parenExpr, expect(\"{\"), pushlex(\"}\", \"switch\"), pushblockcontext,\n                                      block, poplex, poplex, popcontext);\n    if (type == \"case\") return cont(expression, expect(\":\"));\n    if (type == \"default\") return cont(expect(\":\"));\n    if (type == \"catch\") return cont(pushlex(\"form\"), pushcontext, maybeCatchBinding, statement, poplex, popcontext);\n    if (type == \"export\") return cont(pushlex(\"stat\"), afterExport, poplex);\n    if (type == \"import\") return cont(pushlex(\"stat\"), afterImport, poplex);\n    if (type == \"async\") return cont(statement)\n    if (value == \"@\") return cont(expression, statement)\n    return pass(pushlex(\"stat\"), expression, expect(\";\"), poplex);\n  }\n  function maybeCatchBinding(type) {\n    if (type == \"(\") return cont(funarg, expect(\")\"))\n  }\n  function expression(type, value) {\n    return expressionInner(type, value, false);\n  }\n  function expressionNoComma(type, value) {\n    return expressionInner(type, value, true);\n  }\n  function parenExpr(type) {\n    if (type != \"(\") return pass()\n    return cont(pushlex(\")\"), maybeexpression, expect(\")\"), poplex)\n  }\n  function expressionInner(type, value, noComma) {\n    if (cx.state.fatArrowAt == cx.stream.start) {\n      var body = noComma ? arrowBodyNoComma : arrowBody;\n      if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(funarg, \")\"), poplex, expect(\"=>\"), body, popcontext);\n      else if (type == \"variable\") return pass(pushcontext, pattern, expect(\"=>\"), body, popcontext);\n    }\n\n    var maybeop = noComma ? maybeoperatorNoComma : maybeoperatorComma;\n    if (atomicTypes.hasOwnProperty(type)) return cont(maybeop);\n    if (type == \"function\") return cont(functiondef, maybeop);\n    if (type == \"class\" || (isTS && value == \"interface\")) { cx.marked = \"keyword\"; return cont(pushlex(\"form\"), classExpression, poplex); }\n    if (type == \"keyword c\" || type == \"async\") return cont(noComma ? expressionNoComma : expression);\n    if (type == \"(\") return cont(pushlex(\")\"), maybeexpression, expect(\")\"), poplex, maybeop);\n    if (type == \"operator\" || type == \"spread\") return cont(noComma ? expressionNoComma : expression);\n    if (type == \"[\") return cont(pushlex(\"]\"), arrayLiteral, poplex, maybeop);\n    if (type == \"{\") return contCommasep(objprop, \"}\", null, maybeop);\n    if (type == \"quasi\") return pass(quasi, maybeop);\n    if (type == \"new\") return cont(maybeTarget(noComma));\n    return cont();\n  }\n  function maybeexpression(type) {\n    if (type.match(/[;\\}\\)\\],]/)) return pass();\n    return pass(expression);\n  }\n\n  function maybeoperatorComma(type, value) {\n    if (type == \",\") return cont(maybeexpression);\n    return maybeoperatorNoComma(type, value, false);\n  }\n  function maybeoperatorNoComma(type, value, noComma) {\n    var me = noComma == false ? maybeoperatorComma : maybeoperatorNoComma;\n    var expr = noComma == false ? expression : expressionNoComma;\n    if (type == \"=>\") return cont(pushcontext, noComma ? arrowBodyNoComma : arrowBody, popcontext);\n    if (type == \"operator\") {\n      if (/\\+\\+|--/.test(value) || isTS && value == \"!\") return cont(me);\n      if (isTS && value == \"<\" && cx.stream.match(/^([^<>]|<[^<>]*>)*>\\s*\\(/, false))\n        return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, me);\n      if (value == \"?\") return cont(expression, expect(\":\"), expr);\n      return cont(expr);\n    }\n    if (type == \"quasi\") { return pass(quasi, me); }\n    if (type == \";\") return;\n    if (type == \"(\") return contCommasep(expressionNoComma, \")\", \"call\", me);\n    if (type == \".\") return cont(property, me);\n    if (type == \"[\") return cont(pushlex(\"]\"), maybeexpression, expect(\"]\"), poplex, me);\n    if (isTS && value == \"as\") { cx.marked = \"keyword\"; return cont(typeexpr, me) }\n    if (type == \"regexp\") {\n      cx.state.lastType = cx.marked = \"operator\"\n      cx.stream.backUp(cx.stream.pos - cx.stream.start - 1)\n      return cont(expr)\n    }\n  }\n  function quasi(type, value) {\n    if (type != \"quasi\") return pass();\n    if (value.slice(value.length - 2) != \"${\") return cont(quasi);\n    return cont(maybeexpression, continueQuasi);\n  }\n  function continueQuasi(type) {\n    if (type == \"}\") {\n      cx.marked = \"string-2\";\n      cx.state.tokenize = tokenQuasi;\n      return cont(quasi);\n    }\n  }\n  function arrowBody(type) {\n    findFatArrow(cx.stream, cx.state);\n    return pass(type == \"{\" ? statement : expression);\n  }\n  function arrowBodyNoComma(type) {\n    findFatArrow(cx.stream, cx.state);\n    return pass(type == \"{\" ? statement : expressionNoComma);\n  }\n  function maybeTarget(noComma) {\n    return function(type) {\n      if (type == \".\") return cont(noComma ? targetNoComma : target);\n      else if (type == \"variable\" && isTS) return cont(maybeTypeArgs, noComma ? maybeoperatorNoComma : maybeoperatorComma)\n      else return pass(noComma ? expressionNoComma : expression);\n    };\n  }\n  function target(_, value) {\n    if (value == \"target\") { cx.marked = \"keyword\"; return cont(maybeoperatorComma); }\n  }\n  function targetNoComma(_, value) {\n    if (value == \"target\") { cx.marked = \"keyword\"; return cont(maybeoperatorNoComma); }\n  }\n  function maybelabel(type) {\n    if (type == \":\") return cont(poplex, statement);\n    return pass(maybeoperatorComma, expect(\";\"), poplex);\n  }\n  function property(type) {\n    if (type == \"variable\") {cx.marked = \"property\"; return cont();}\n  }\n  function objprop(type, value) {\n    if (type == \"async\") {\n      cx.marked = \"property\";\n      return cont(objprop);\n    } else if (type == \"variable\" || cx.style == \"keyword\") {\n      cx.marked = \"property\";\n      if (value == \"get\" || value == \"set\") return cont(getterSetter);\n      var m // Work around fat-arrow-detection complication for detecting typescript typed arrow params\n      if (isTS && cx.state.fatArrowAt == cx.stream.start && (m = cx.stream.match(/^\\s*:\\s*/, false)))\n        cx.state.fatArrowAt = cx.stream.pos + m[0].length\n      return cont(afterprop);\n    } else if (type == \"number\" || type == \"string\") {\n      cx.marked = jsonldMode ? \"property\" : (cx.style + \" property\");\n      return cont(afterprop);\n    } else if (type == \"jsonld-keyword\") {\n      return cont(afterprop);\n    } else if (isTS && isModifier(value)) {\n      cx.marked = \"keyword\"\n      return cont(objprop)\n    } else if (type == \"[\") {\n      return cont(expression, maybetype, expect(\"]\"), afterprop);\n    } else if (type == \"spread\") {\n      return cont(expressionNoComma, afterprop);\n    } else if (value == \"*\") {\n      cx.marked = \"keyword\";\n      return cont(objprop);\n    } else if (type == \":\") {\n      return pass(afterprop)\n    }\n  }\n  function getterSetter(type) {\n    if (type != \"variable\") return pass(afterprop);\n    cx.marked = \"property\";\n    return cont(functiondef);\n  }\n  function afterprop(type) {\n    if (type == \":\") return cont(expressionNoComma);\n    if (type == \"(\") return pass(functiondef);\n  }\n  function commasep(what, end, sep) {\n    function proceed(type, value) {\n      if (sep ? sep.indexOf(type) > -1 : type == \",\") {\n        var lex = cx.state.lexical;\n        if (lex.info == \"call\") lex.pos = (lex.pos || 0) + 1;\n        return cont(function(type, value) {\n          if (type == end || value == end) return pass()\n          return pass(what)\n        }, proceed);\n      }\n      if (type == end || value == end) return cont();\n      if (sep && sep.indexOf(\";\") > -1) return pass(what)\n      return cont(expect(end));\n    }\n    return function(type, value) {\n      if (type == end || value == end) return cont();\n      return pass(what, proceed);\n    };\n  }\n  function contCommasep(what, end, info) {\n    for (var i = 3; i < arguments.length; i++)\n      cx.cc.push(arguments[i]);\n    return cont(pushlex(end, info), commasep(what, end), poplex);\n  }\n  function block(type) {\n    if (type == \"}\") return cont();\n    return pass(statement, block);\n  }\n  function maybetype(type, value) {\n    if (isTS) {\n      if (type == \":\") return cont(typeexpr);\n      if (value == \"?\") return cont(maybetype);\n    }\n  }\n  function maybetypeOrIn(type, value) {\n    if (isTS && (type == \":\" || value == \"in\")) return cont(typeexpr)\n  }\n  function mayberettype(type) {\n    if (isTS && type == \":\") {\n      if (cx.stream.match(/^\\s*\\w+\\s+is\\b/, false)) return cont(expression, isKW, typeexpr)\n      else return cont(typeexpr)\n    }\n  }\n  function isKW(_, value) {\n    if (value == \"is\") {\n      cx.marked = \"keyword\"\n      return cont()\n    }\n  }\n  function typeexpr(type, value) {\n    if (value == \"keyof\" || value == \"typeof\" || value == \"infer\" || value == \"readonly\") {\n      cx.marked = \"keyword\"\n      return cont(value == \"typeof\" ? expressionNoComma : typeexpr)\n    }\n    if (type == \"variable\" || value == \"void\") {\n      cx.marked = \"type\"\n      return cont(afterType)\n    }\n    if (value == \"|\" || value == \"&\") return cont(typeexpr)\n    if (type == \"string\" || type == \"number\" || type == \"atom\") return cont(afterType);\n    if (type == \"[\") return cont(pushlex(\"]\"), commasep(typeexpr, \"]\", \",\"), poplex, afterType)\n    if (type == \"{\") return cont(pushlex(\"}\"), typeprops, poplex, afterType)\n    if (type == \"(\") return cont(commasep(typearg, \")\"), maybeReturnType, afterType)\n    if (type == \"<\") return cont(commasep(typeexpr, \">\"), typeexpr)\n    if (type == \"quasi\") { return pass(quasiType, afterType); }\n  }\n  function maybeReturnType(type) {\n    if (type == \"=>\") return cont(typeexpr)\n  }\n  function typeprops(type) {\n    if (type.match(/[\\}\\)\\]]/)) return cont()\n    if (type == \",\" || type == \";\") return cont(typeprops)\n    return pass(typeprop, typeprops)\n  }\n  function typeprop(type, value) {\n    if (type == \"variable\" || cx.style == \"keyword\") {\n      cx.marked = \"property\"\n      return cont(typeprop)\n    } else if (value == \"?\" || type == \"number\" || type == \"string\") {\n      return cont(typeprop)\n    } else if (type == \":\") {\n      return cont(typeexpr)\n    } else if (type == \"[\") {\n      return cont(expect(\"variable\"), maybetypeOrIn, expect(\"]\"), typeprop)\n    } else if (type == \"(\") {\n      return pass(functiondecl, typeprop)\n    } else if (!type.match(/[;\\}\\)\\],]/)) {\n      return cont()\n    }\n  }\n  function quasiType(type, value) {\n    if (type != \"quasi\") return pass();\n    if (value.slice(value.length - 2) != \"${\") return cont(quasiType);\n    return cont(typeexpr, continueQuasiType);\n  }\n  function continueQuasiType(type) {\n    if (type == \"}\") {\n      cx.marked = \"string-2\";\n      cx.state.tokenize = tokenQuasi;\n      return cont(quasiType);\n    }\n  }\n  function typearg(type, value) {\n    if (type == \"variable\" && cx.stream.match(/^\\s*[?:]/, false) || value == \"?\") return cont(typearg)\n    if (type == \":\") return cont(typeexpr)\n    if (type == \"spread\") return cont(typearg)\n    return pass(typeexpr)\n  }\n  function afterType(type, value) {\n    if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, afterType)\n    if (value == \"|\" || type == \".\" || value == \"&\") return cont(typeexpr)\n    if (type == \"[\") return cont(typeexpr, expect(\"]\"), afterType)\n    if (value == \"extends\" || value == \"implements\") { cx.marked = \"keyword\"; return cont(typeexpr) }\n    if (value == \"?\") return cont(typeexpr, expect(\":\"), typeexpr)\n  }\n  function maybeTypeArgs(_, value) {\n    if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, afterType)\n  }\n  function typeparam() {\n    return pass(typeexpr, maybeTypeDefault)\n  }\n  function maybeTypeDefault(_, value) {\n    if (value == \"=\") return cont(typeexpr)\n  }\n  function vardef(_, value) {\n    if (value == \"enum\") {cx.marked = \"keyword\"; return cont(enumdef)}\n    return pass(pattern, maybetype, maybeAssign, vardefCont);\n  }\n  function pattern(type, value) {\n    if (isTS && isModifier(value)) { cx.marked = \"keyword\"; return cont(pattern) }\n    if (type == \"variable\") { register(value); return cont(); }\n    if (type == \"spread\") return cont(pattern);\n    if (type == \"[\") return contCommasep(eltpattern, \"]\");\n    if (type == \"{\") return contCommasep(proppattern, \"}\");\n  }\n  function proppattern(type, value) {\n    if (type == \"variable\" && !cx.stream.match(/^\\s*:/, false)) {\n      register(value);\n      return cont(maybeAssign);\n    }\n    if (type == \"variable\") cx.marked = \"property\";\n    if (type == \"spread\") return cont(pattern);\n    if (type == \"}\") return pass();\n    if (type == \"[\") return cont(expression, expect(']'), expect(':'), proppattern);\n    return cont(expect(\":\"), pattern, maybeAssign);\n  }\n  function eltpattern() {\n    return pass(pattern, maybeAssign)\n  }\n  function maybeAssign(_type, value) {\n    if (value == \"=\") return cont(expressionNoComma);\n  }\n  function vardefCont(type) {\n    if (type == \",\") return cont(vardef);\n  }\n  function maybeelse(type, value) {\n    if (type == \"keyword b\" && value == \"else\") return cont(pushlex(\"form\", \"else\"), statement, poplex);\n  }\n  function forspec(type, value) {\n    if (value == \"await\") return cont(forspec);\n    if (type == \"(\") return cont(pushlex(\")\"), forspec1, poplex);\n  }\n  function forspec1(type) {\n    if (type == \"var\") return cont(vardef, forspec2);\n    if (type == \"variable\") return cont(forspec2);\n    return pass(forspec2)\n  }\n  function forspec2(type, value) {\n    if (type == \")\") return cont()\n    if (type == \";\") return cont(forspec2)\n    if (value == \"in\" || value == \"of\") { cx.marked = \"keyword\"; return cont(expression, forspec2) }\n    return pass(expression, forspec2)\n  }\n  function functiondef(type, value) {\n    if (value == \"*\") {cx.marked = \"keyword\"; return cont(functiondef);}\n    if (type == \"variable\") {register(value); return cont(functiondef);}\n    if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(funarg, \")\"), poplex, mayberettype, statement, popcontext);\n    if (isTS && value == \"<\") return cont(pushlex(\">\"), commasep(typeparam, \">\"), poplex, functiondef)\n  }\n  function functiondecl(type, value) {\n    if (value == \"*\") {cx.marked = \"keyword\"; return cont(functiondecl);}\n    if (type == \"variable\") {register(value); return cont(functiondecl);}\n    if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(funarg, \")\"), poplex, mayberettype, popcontext);\n    if (isTS && value == \"<\") return cont(pushlex(\">\"), commasep(typeparam, \">\"), poplex, functiondecl)\n  }\n  function typename(type, value) {\n    if (type == \"keyword\" || type == \"variable\") {\n      cx.marked = \"type\"\n      return cont(typename)\n    } else if (value == \"<\") {\n      return cont(pushlex(\">\"), commasep(typeparam, \">\"), poplex)\n    }\n  }\n  function funarg(type, value) {\n    if (value == \"@\") cont(expression, funarg)\n    if (type == \"spread\") return cont(funarg);\n    if (isTS && isModifier(value)) { cx.marked = \"keyword\"; return cont(funarg); }\n    if (isTS && type == \"this\") return cont(maybetype, maybeAssign)\n    return pass(pattern, maybetype, maybeAssign);\n  }\n  function classExpression(type, value) {\n    // Class expressions may have an optional name.\n    if (type == \"variable\") return className(type, value);\n    return classNameAfter(type, value);\n  }\n  function className(type, value) {\n    if (type == \"variable\") {register(value); return cont(classNameAfter);}\n  }\n  function classNameAfter(type, value) {\n    if (value == \"<\") return cont(pushlex(\">\"), commasep(typeparam, \">\"), poplex, classNameAfter)\n    if (value == \"extends\" || value == \"implements\" || (isTS && type == \",\")) {\n      if (value == \"implements\") cx.marked = \"keyword\";\n      return cont(isTS ? typeexpr : expression, classNameAfter);\n    }\n    if (type == \"{\") return cont(pushlex(\"}\"), classBody, poplex);\n  }\n  function classBody(type, value) {\n    if (type == \"async\" ||\n        (type == \"variable\" &&\n         (value == \"static\" || value == \"get\" || value == \"set\" || (isTS && isModifier(value))) &&\n         cx.stream.match(/^\\s+#?[\\w$\\xa1-\\uffff]/, false))) {\n      cx.marked = \"keyword\";\n      return cont(classBody);\n    }\n    if (type == \"variable\" || cx.style == \"keyword\") {\n      cx.marked = \"property\";\n      return cont(classfield, classBody);\n    }\n    if (type == \"number\" || type == \"string\") return cont(classfield, classBody);\n    if (type == \"[\")\n      return cont(expression, maybetype, expect(\"]\"), classfield, classBody)\n    if (value == \"*\") {\n      cx.marked = \"keyword\";\n      return cont(classBody);\n    }\n    if (isTS && type == \"(\") return pass(functiondecl, classBody)\n    if (type == \";\" || type == \",\") return cont(classBody);\n    if (type == \"}\") return cont();\n    if (value == \"@\") return cont(expression, classBody)\n  }\n  function classfield(type, value) {\n    if (value == \"!\") return cont(classfield)\n    if (value == \"?\") return cont(classfield)\n    if (type == \":\") return cont(typeexpr, maybeAssign)\n    if (value == \"=\") return cont(expressionNoComma)\n    var context = cx.state.lexical.prev, isInterface = context && context.info == \"interface\"\n    return pass(isInterface ? functiondecl : functiondef)\n  }\n  function afterExport(type, value) {\n    if (value == \"*\") { cx.marked = \"keyword\"; return cont(maybeFrom, expect(\";\")); }\n    if (value == \"default\") { cx.marked = \"keyword\"; return cont(expression, expect(\";\")); }\n    if (type == \"{\") return cont(commasep(exportField, \"}\"), maybeFrom, expect(\";\"));\n    return pass(statement);\n  }\n  function exportField(type, value) {\n    if (value == \"as\") { cx.marked = \"keyword\"; return cont(expect(\"variable\")); }\n    if (type == \"variable\") return pass(expressionNoComma, exportField);\n  }\n  function afterImport(type) {\n    if (type == \"string\") return cont();\n    if (type == \"(\") return pass(expression);\n    if (type == \".\") return pass(maybeoperatorComma);\n    return pass(importSpec, maybeMoreImports, maybeFrom);\n  }\n  function importSpec(type, value) {\n    if (type == \"{\") return contCommasep(importSpec, \"}\");\n    if (type == \"variable\") register(value);\n    if (value == \"*\") cx.marked = \"keyword\";\n    return cont(maybeAs);\n  }\n  function maybeMoreImports(type) {\n    if (type == \",\") return cont(importSpec, maybeMoreImports)\n  }\n  function maybeAs(_type, value) {\n    if (value == \"as\") { cx.marked = \"keyword\"; return cont(importSpec); }\n  }\n  function maybeFrom(_type, value) {\n    if (value == \"from\") { cx.marked = \"keyword\"; return cont(expression); }\n  }\n  function arrayLiteral(type) {\n    if (type == \"]\") return cont();\n    return pass(commasep(expressionNoComma, \"]\"));\n  }\n  function enumdef() {\n    return pass(pushlex(\"form\"), pattern, expect(\"{\"), pushlex(\"}\"), commasep(enummember, \"}\"), poplex, poplex)\n  }\n  function enummember() {\n    return pass(pattern, maybeAssign);\n  }\n\n  function isContinuedStatement(state, textAfter) {\n    return state.lastType == \"operator\" || state.lastType == \",\" ||\n      isOperatorChar.test(textAfter.charAt(0)) ||\n      /[,.]/.test(textAfter.charAt(0));\n  }\n\n  function expressionAllowed(stream, state, backUp) {\n    return state.tokenize == tokenBase &&\n      /^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\\[{}\\(,;:]|=>)$/.test(state.lastType) ||\n      (state.lastType == \"quasi\" && /\\{\\s*$/.test(stream.string.slice(0, stream.pos - (backUp || 0))))\n  }\n\n  // Interface\n\n  return {\n    startState: function(basecolumn) {\n      var state = {\n        tokenize: tokenBase,\n        lastType: \"sof\",\n        cc: [],\n        lexical: new JSLexical((basecolumn || 0) - indentUnit, 0, \"block\", false),\n        localVars: parserConfig.localVars,\n        context: parserConfig.localVars && new Context(null, null, false),\n        indented: basecolumn || 0\n      };\n      if (parserConfig.globalVars && typeof parserConfig.globalVars == \"object\")\n        state.globalVars = parserConfig.globalVars;\n      return state;\n    },\n\n    token: function(stream, state) {\n      if (stream.sol()) {\n        if (!state.lexical.hasOwnProperty(\"align\"))\n          state.lexical.align = false;\n        state.indented = stream.indentation();\n        findFatArrow(stream, state);\n      }\n      if (state.tokenize != tokenComment && stream.eatSpace()) return null;\n      var style = state.tokenize(stream, state);\n      if (type == \"comment\") return style;\n      state.lastType = type == \"operator\" && (content == \"++\" || content == \"--\") ? \"incdec\" : type;\n      return parseJS(state, style, type, content, stream);\n    },\n\n    indent: function(state, textAfter) {\n      if (state.tokenize == tokenComment || state.tokenize == tokenQuasi) return CodeMirror.Pass;\n      if (state.tokenize != tokenBase) return 0;\n      var firstChar = textAfter && textAfter.charAt(0), lexical = state.lexical, top\n      // Kludge to prevent 'maybelse' from blocking lexical scope pops\n      if (!/^\\s*else\\b/.test(textAfter)) for (var i = state.cc.length - 1; i >= 0; --i) {\n        var c = state.cc[i];\n        if (c == poplex) lexical = lexical.prev;\n        else if (c != maybeelse && c != popcontext) break;\n      }\n      while ((lexical.type == \"stat\" || lexical.type == \"form\") &&\n             (firstChar == \"}\" || ((top = state.cc[state.cc.length - 1]) &&\n                                   (top == maybeoperatorComma || top == maybeoperatorNoComma) &&\n                                   !/^[,\\.=+\\-*:?[\\(]/.test(textAfter))))\n        lexical = lexical.prev;\n      if (statementIndent && lexical.type == \")\" && lexical.prev.type == \"stat\")\n        lexical = lexical.prev;\n      var type = lexical.type, closing = firstChar == type;\n\n      if (type == \"vardef\") return lexical.indented + (state.lastType == \"operator\" || state.lastType == \",\" ? lexical.info.length + 1 : 0);\n      else if (type == \"form\" && firstChar == \"{\") return lexical.indented;\n      else if (type == \"form\") return lexical.indented + indentUnit;\n      else if (type == \"stat\")\n        return lexical.indented + (isContinuedStatement(state, textAfter) ? statementIndent || indentUnit : 0);\n      else if (lexical.info == \"switch\" && !closing && parserConfig.doubleIndentSwitch != false)\n        return lexical.indented + (/^(?:case|default)\\b/.test(textAfter) ? indentUnit : 2 * indentUnit);\n      else if (lexical.align) return lexical.column + (closing ? 0 : 1);\n      else return lexical.indented + (closing ? 0 : indentUnit);\n    },\n\n    electricInput: /^\\s*(?:case .*?:|default:|\\{|\\})$/,\n    blockCommentStart: jsonMode ? null : \"/*\",\n    blockCommentEnd: jsonMode ? null : \"*/\",\n    blockCommentContinue: jsonMode ? null : \" * \",\n    lineComment: jsonMode ? null : \"//\",\n    fold: \"brace\",\n    closeBrackets: \"()[]{}''\\\"\\\"``\",\n\n    helperType: jsonMode ? \"json\" : \"javascript\",\n    jsonldMode: jsonldMode,\n    jsonMode: jsonMode,\n\n    expressionAllowed: expressionAllowed,\n\n    skipExpression: function(state) {\n      parseJS(state, \"atom\", \"atom\", \"true\", new CodeMirror.StringStream(\"\", 2, null))\n    }\n  };\n});\n\nCodeMirror.registerHelper(\"wordChars\", \"javascript\", /[\\w$]/);\n\nCodeMirror.defineMIME(\"text/javascript\", \"javascript\");\nCodeMirror.defineMIME(\"text/ecmascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/javascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/x-javascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/ecmascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/json\", { name: \"javascript\", json: true });\nCodeMirror.defineMIME(\"application/x-json\", { name: \"javascript\", json: true });\nCodeMirror.defineMIME(\"application/manifest+json\", { name: \"javascript\", json: true })\nCodeMirror.defineMIME(\"application/ld+json\", { name: \"javascript\", jsonld: true });\nCodeMirror.defineMIME(\"text/typescript\", { name: \"javascript\", typescript: true });\nCodeMirror.defineMIME(\"application/typescript\", { name: \"javascript\", typescript: true });\n\n});\n"],"sourceRoot":""}