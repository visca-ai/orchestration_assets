(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dialog27"],{"262f":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("Card",{staticClass:"prompt-rotate",style:{height:"100%"},attrs:{"show-highlight-border":!1},scopedSlots:e._u([{key:"title",fn:function(){return[t("h3",[e._v(e._s(e.t("cluster.rotateCertificates.modalTitle")))])]},proxy:!0},{key:"body",fn:function(){return[e._l(e.errors,(function(e,r){return t("Banner",{key:r,attrs:{color:"error",label:e}})})),e._v(" "),t("div",{staticClass:"options"},[t("RadioGroup",{attrs:{name:"service-mode",options:[{value:!0,label:e.t("cluster.rotateCertificates.allServices")},{value:!1,label:e.t("cluster.rotateCertificates.selectService")}]},model:{value:e.rotateAllServices,callback:function(t){e.rotateAllServices=t},expression:"rotateAllServices"}}),e._v(" "),t("Select",{staticClass:"service-select",class:{invisible:e.rotateAllServices},attrs:{options:e.serviceOptions},model:{value:e.selectedService,callback:function(t){e.selectedService=t},expression:"selectedService"}})],1)]},proxy:!0}])},[e._v(" "),e._v(" "),t("div",{staticClass:"buttons",attrs:{slot:"actions"},slot:"actions"},[t("button",{staticClass:"btn role-secondary mr-20",on:{click:e.close}},[e._v("\n      "+e._s(e.t("generic.cancel"))+"\n    ")]),e._v(" "),t("AsyncButton",{attrs:{mode:"rotate",disabled:!e.rotateAllServices&&!e.selectedService},on:{click:e.rotate}})],1)])},s=[],o=r("1da1"),c=r("a34a"),i=r.n(c),n=(r("96cf"),r("4e82"),r("d4bf")),l=r("67c9"),d=r("bec1"),u=r("fa35"),v=r("c989"),f=r("de78"),p=r("4579"),b={components:{Select:v["a"],RadioGroup:u["b"],Card:n["a"],AsyncButton:l["b"],Banner:d["a"]},props:{cluster:{type:Object,default:function(){return{}}}},data:function(){return{selectedService:"",rotateAllServices:!0,errors:[]}},computed:{serviceOptions:function(){if(this.cluster.isRke2){var e=["admin","api-server","controller-manager","scheduler","cloud-controller","etcd","auth-proxy","kubelet","kube-proxy"];return this.cluster.isK3s?e.push("k3s-controller","k3s-server"):e.push("rke2-controller","rke2-server"),e.sort()}var t=this.$store.getters["rancher/schemaFor"]("rotatecertificateinput");return Object(f["get"])(t,"resourceFields.services.options")||[]},actionParams:function(){return this.rotateAllServices?{services:this.cluster.isRke2?[]:null,caCertificates:!1}:{services:this.selectedService,caCertificates:!1}}},mounted:function(){this.selectedService=this.serviceOptions[0]||""},methods:{close:function(){this.$emit("close")},rotate:function(e){var t=this;return Object(o["a"])(i.a.mark((function r(){var a,s,o,c,n;return i.a.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=t.actionParams,r.prev=1,!t.cluster.isRke2){r.next=9;break}return n=(null===(s=t.cluster.spec)||void 0===s||null===(o=s.rkeConfig)||void 0===o||null===(c=o.rotateCertificates)||void 0===c?void 0:c.generation)||0,Object(f["set"])(t.cluster,"spec.rkeConfig.rotateCertificates",{generation:n+1,services:t.selectedService&&!t.rotateAllServices?[t.selectedService]:[]}),r.next=7,t.cluster.save();case 7:r.next=11;break;case 9:return r.next=11,t.cluster.mgmt.doAction("rotateCertificates",a);case 11:e(!0),t.close(),r.next=19;break;case 15:r.prev=15,r.t0=r["catch"](1),t.errors=Object(p["c"])(r.t0),e(!1);case 19:case"end":return r.stop()}}),r,null,[[1,15]])})))()}}},m=b,h=(r("d469"),r("0c7c")),x=Object(h["a"])(m,a,s,!1,null,"41281ab8",null);t["default"]=x.exports},bbf2:function(e,t,r){var a=r("4bad");t=a(!1),t.push([e.i,".prompt-rotate[data-v-41281ab8]{margin:0}.buttons[data-v-41281ab8]{display:flex;justify-content:flex-end;width:100%}.options[data-v-41281ab8]{display:flex;flex-direction:column}.options .service-select[data-v-41281ab8]{margin-left:20px;margin-top:10px;width:-moz-fit-content;width:fit-content;min-width:260px}.rotate-modal[data-v-41281ab8].v--modal-box{border:none}.rotate-modal[data-v-41281ab8].v--modal-box .card-container{margin:0}.rotate-modal[data-v-41281ab8].v--modal-box .card-container .card-wrap{display:flex;flex-direction:column}.rotate-modal[data-v-41281ab8].v--modal-box .card-container .card-body{flex:1}.rotate-modal[data-v-41281ab8].v--modal-box .card-container .card-actions{align-self:center}",""]),e.exports=t},d469:function(e,t,r){"use strict";r("f6f1")},f6f1:function(e,t,r){var a=r("bbf2");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var s=r("499e").default;s("51fe09e5",a,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=dialog27.35d53700.js.map